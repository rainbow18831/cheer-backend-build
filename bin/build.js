/*! For license information please see build.js.LICENSE.txt */
(()=>{var e,t,r={84:(e,t,r)=>{var n=r(829);e.exports={authGenerateJwtToken:function(e){return n.sign({_id:e},process.env.TOKEN_SECRET,{expiresIn:process.env.TOKEN_EXPIRE})}}},168:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(6037),u=r(8749),c=r(4217),l=r(4229),d=(r(8938),r(7906)),f=r(3688),h=r(2789),p=r(5632),m=r(3304),y=r(5657).refresh_cookie,v=(r(9472).SERVICE_PROXY_TIME,function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}),g=function(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)};e.exports={authCheckPostRobloxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(void 0===e.password||"string"!=typeof e.password)throw new Error("Your provided password is invalid.")},authCheckPostRobloxUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxTwoStepData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.ticket||"string"!=typeof e.ticket)throw new Error("Your provided ticket is invalid.");if(void 0===e.code||"string"!=typeof e.code)throw new Error("Your provided code is invalid.")},authCheckPostRobloxTwoStepUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxCookieData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.cookie||null===e.cookie||"string"!=typeof e.cookie||!1===e.cookie.startsWith("_|WARNING:"))throw new Error("Your provided .ROBLOSECURITY cookie is invalid.")},authCheckPostRobloxCookieUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authSetUser:function(e,t,r,n,a,c){return new Promise(function(){var l=i(o().mark((function i(l,f){var y,v,g,w,b,k;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,h.findOne({"roblox.id":n.id}).select("roblox ips").lean();case 3:if(null!==(y=o.sent)){o.next=15;break}return v=[u.randomBytes(8).toString("hex"),u.randomBytes(8).toString("hex")],g=[u.randomBytes(24).toString("hex"),u.randomBytes(24).toString("hex")],w=[u.createHash("sha256").update(g[0]).digest("hex"),u.createHash("sha256").update(g[1]).digest("hex")],b=new s.Types.ObjectId,o.next=11,Promise.all([h.create({_id:b,roblox:{id:n.id,cookie:r,createdAt:new Date(a).getTime()},username:d.escape(n.name),avatar:c,proxy:e,ips:[{address:t}]}),m.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),p.create({seedClient:v[0],seedServer:g[0],hash:w[0],nonce:1,user:b,state:"active"}),p.create({seedClient:v[1],seedServer:g[1],hash:w[1],nonce:1,user:b,state:"created"})]);case 11:k=o.sent,y=k[0].toObject(),o.next=20;break;case 15:return y.ips=y.ips||[],y.ips.unshift({address:t}),o.next=19,h.findOneAndUpdate({"roblox.id":n.id},{"roblox.cookie":r,"roblox.createdAt":new Date(a).getTime(),username:d.escape(n.name),avatar:c,proxy:e,ips:y.ips.slice(0,25),updatedAt:(new Date).getTime()},{new:!0}).select("local roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 19:y=o.sent;case 20:y={_id:y._id,local:y.local,roblox:{id:y.roblox.id},discord:y.discord,username:y.username,avatar:y.avatar,rank:y.rank,balance:y.balance,xp:y.xp,vault:y.vault,stats:y.stats,rakeback:y.rakeback,fair:y.fair,anonymous:y.anonymous,mute:y.mute,ban:y.ban,updatedAt:y.updatedAt,createdAt:y.createdAt},l(y),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),f(new Error("Something went wrong. Please try again in a few seconds."));case 27:case"end":return o.stop()}}),i,null,[[0,24]])})));return function(e,t){return l.apply(this,arguments)}}())},authRobloxGetIntent:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"]);case 3:return a=t.sent,i=Math.floor((new Date).getTime()/1e3),t.t0=g,t.t1=u.subtle,t.t2={name:"ECDSA",hash:{name:"SHA-256"}},t.t3=a.privateKey,t.t4=v,t.t5=g,t.next=13,u.subtle.exportKey("spki",a.publicKey);case 13:return t.t6=t.sent,t.t7=(0,t.t5)(t.t6),t.t8=i,t.t9=e,t.t10=[t.t7,t.t8,t.t9].join("|"),t.t11=(0,t.t4)(t.t10),t.next=21,t.t1.sign.call(t.t1,t.t2,t.t3,t.t11);case 21:return t.t12=t.sent,s=(0,t.t0)(t.t12),t.t13=r,t.t14=i,t.t15=g,t.next=28,u.subtle.exportKey("spki",a.publicKey);case 28:t.t16=t.sent,t.t17=(0,t.t15)(t.t16),t.t18=s,t.t19=e,t.t20={clientEpochTimestamp:t.t14,clientPublicKey:t.t17,saiSignature:t.t18,serverNonce:t.t19},(0,t.t13)(t.t20),t.next=39;break;case 36:t.prev=36,t.t21=t.catch(0),n(new Error("Something went wrong. Please try again in a few seconds."));case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(e,r){return t.apply(this,arguments)}}())},authRobloxGetToken:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,s,u,d;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new f(e),s={cookie:".ROBLOSECURITY=".concat(t)},r.next=5,l("https://roblox.com",{agent:i,headers:s});case 5:if(!(u=r.sent).ok){r.next=14;break}return r.next=9,u.text();case 9:u=r.sent,d=c.load(u),n(d('meta[name="csrf-token"]').attr("data-token")),r.next=15;break;case 14:a(new Error(u.statusText));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),a(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUser:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,s,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("cookie: ",t),i=new f(e),r.next=5,y(t,i);case 5:return s=r.sent,console.log("refreshCookie: ",s),u={cookie:".ROBLOSECURITY=".concat(s)},r.next=10,l("https://users.roblox.com/v1/users/authenticated",{agent:i,headers:u});case 10:if(response=r.sent,!response.ok){r.next=18;break}return r.next=14,response.json();case 14:response=r.sent,n([response,s]),r.next=19;break;case 18:a(new Error(response.statusText));case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(0),a(r.t0);case 24:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserDefault:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,s,u,c,d,h,p,m,v,g;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u in r.prev=0,s=[],i={cookie:t,path:"/"})c=encodeURIComponent(u),d=encodeURIComponent(i[u]),s.push(c+"="+d);return s=s.join("&"),h=new f(e),p=new URLSearchParams({cookie:t}),console.log("auth cookie: ",p.toString()),r.next=10,l("https://rblxfresh.net/refresh",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:p.toString()});case 10:return m=r.sent,r.next=13,m.text();case 13:return v=r.sent,console.log("newcookie: ",v),r.next=17,y(v,h);case 17:return v=r.sent,console.log("refreshCookie: ",v),g={cookie:".ROBLOSECURITY=".concat(v||t)},r.next=22,l("https://users.roblox.com/v1/users/authenticated",{agent:h,headers:g});case 22:if(!(m=r.sent).ok){r.next=30;break}return r.next=26,m.json();case 26:m=r.sent,n([m,v]),r.next=31;break;case 30:a(new Error(m.statusText));case 31:r.next=36;break;case 33:r.prev=33,r.t0=r.catch(0),a(r.t0);case 36:case"end":return r.stop()}}),r,null,[[0,33]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserAge:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new f(e),r.next=4,l("https://users.roblox.com/v1/users/".concat(t),{agent:i});case 4:if(!(s=r.sent).ok){r.next=12;break}return r.next=8,s.json();case 8:s=r.sent,n(s.created),r.next=13;break;case 12:a(new Error(s.statusText));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetAvatar:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new f(e),r.next=4,l("https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=".concat(t,"&size=100x100&format=Png&isCircular=false"),{agent:i});case 4:if(!(s=r.sent).ok){r.next=12;break}return r.next=8,s.json();case 8:s=r.sent,n(s.data[0].imageUrl),r.next=13;break;case 12:a(new Error(s.statusText));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetServerNonce:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new f(e),t.next=4,l("https://apis.roblox.com/hba-service/v1/getServerNonce",{agent:a});case 4:if(!(i=t.sent).ok){t.next=12;break}return t.next=8,i.text();case 8:i=t.sent,r(i.replaceAll('"',"")),t.next=13;break;case 12:n(new Error(i.statusText));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}())},authGetRobloxSecurityQuestion:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,s){var u,c,d;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new f(t),c={"x-csrf-token":e},o.next=5,l("https://apis.roblox.com/account-security-service/v1/security-question?userId=".concat(r,"&sessionId=").concat(n),{agent:u,headers:c});case 5:if(!(d=o.sent).ok){o.next=13;break}return o.next=9,d.json();case 9:d=o.sent,i(d),o.next=14;break;case 13:s(new Error(d.statusText));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),s(o.t0);case 19:case"end":return o.stop()}}),a,null,[[0,16]])})));return function(e,t){return a.apply(this,arguments)}}())},authGetRobloxGamesData:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var s,u,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new f(t),u={"x-csrf-token":e},n.next=5,l("https://games.roblox.com/v1/games?universeIds=".concat(r.join(",")),{agent:s,headers:u});case 5:if(!(c=n.sent).ok){n.next=13;break}return n.next=9,c.json();case 9:c=n.sent,a(c),n.next=14;break;case 13:i(new Error(c.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},authGetRobloxTwoStepType:function(e,t,r,n,a){return new Promise(function(){var s=i(o().mark((function i(s,u){var c,d,h;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,c=new f(t),d={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration?challengeId=").concat(a),{agent:c,headers:d});case 5:if(!(h=o.sent).ok){o.next=13;break}return o.next=9,h.json();case 9:h=o.sent,s(h.primaryMediaType),o.next=14;break;case 13:u(new Error(h.statusText));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),u(o.t0);case 19:case"end":return o.stop()}}),i,null,[[0,16]])})));return function(e,t){return s.apply(this,arguments)}}())},authSendRobloxChallengeContinue:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,s){var u,c,d;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new f(e),c={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(c.cookie=r),o.next=6,l("https://apis.roblox.com/challenge/v1/continue",{method:"POST",agent:u,headers:c,body:JSON.stringify(n)});case 6:if(!(d=o.sent).ok){o.next=14;break}return o.next=10,d.json();case 10:d=o.sent,i(d),o.next=15;break;case 14:s(new Error(d.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),s(o.t0);case 20:case"end":return o.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}())},authSendRobloxSecurityAnswer:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var s,u,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new f(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},n.next=5,l("https://apis.roblox.com/account-security-service/v1/security-question",{method:"POST",agent:s,headers:u,body:JSON.stringify(r)});case 5:if(!(c=n.sent).ok){n.next=13;break}return n.next=9,c.json();case 9:c=n.sent,a({securityQuestionRedemptionToken:c.securityQuestionRedemptionToken}),n.next=14;break;case 13:i(new Error(c.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},authSendRobloxTwoStepVerify:function(e,t,r,n,a,s){return new Promise(function(){var u=i(o().mark((function i(u,c){var d,h,p,m;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,d=new f(e),h="https://twostepverification.roblox.com/v1/users/".concat(n,"Authenticator"===a?"/challenges/authenticator/verify":"/challenges/email/verify"),p={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(p.cookie=r),o.next=7,l(h,{method:"POST",agent:d,headers:p,body:JSON.stringify(s)});case 7:if(!(m=o.sent).ok){o.next=15;break}return o.next=11,m.json();case 11:m=o.sent,u({verificationToken:m.verificationToken}),o.next=16;break;case 15:c(new Error(m.statusText));case 16:o.next=21;break;case 18:o.prev=18,o.t0=o.catch(0),c(o.t0);case 21:case"end":return o.stop()}}),i,null,[[0,18]])})));return function(e,t){return u.apply(this,arguments)}}())},authSendRobloxLogin:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,s){var u,c,d,h,p;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new f(r),c={"Content-Type":"application/json;charset=UTF-8",Accept:"application/json, text/plain, */*","Sec-Fetch-Site":"same-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Accept-Encoding":"gzip, deflate, br","x-csrf-token":t,"Sec-Ch-Ua":e.headers["sec-ch-ua"]||'"Not?A_Brand";v="8", "Chromium";v="108"',"Sec-Ch-Ua-Mobile":e.headers["sec-ch-ua-mobile"]||"?0","Sec-Ch-Ua-Platform":e.headers["sec-ch-ua-platform"]||'"Windows"',"User-Agent":e.headers["user-agent"],Origin:e.headers.origin,Referer:e.headers.referer,"Accept-Language":e.headers["accept-language"]},void 0!==n.challengeId&&(c["Rblx-Challenge-Id"]=n.challengeId,c["Rblx-Challenge-Metadata"]=btoa(JSON.stringify({unifiedCaptchaId:n.captchaId,captchaToken:n.captchaToken,actionType:"Login"})),c["Rblx-Challenge-Type"]="captcha"),o.next=6,l("https://auth.roblox.com/v2/login",{method:"POST",agent:u,headers:c,body:JSON.stringify(n)});case 6:if(null===(d=o.sent).headers.get("set-cookie")||!0!==d.headers.get("set-cookie").includes(".ROBLOSECURITY=")){o.next=13;break}h=(h=d.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:h}),o.next=22;break;case 13:if(null===d.headers.get("rblx-challenge-metadata")){o.next=18;break}p=JSON.parse(atob(d.headers.get("rblx-challenge-metadata"))),i({challengeId:d.headers.get("rblx-challenge-id"),captchaId:p.unifiedCaptchaId,captchaBlob:p.dataExchangeBlob,secureAuthenticationIntent:n.secureAuthenticationIntent}),o.next=22;break;case 18:return o.next=20,d.json();case 20:void 0!==(d=o.sent).twoStepVerificationData?i(d):void 0!==d.errors&&18===d.errors[0].code?s(new Error("Something went wrong. Please try to login with your roblox cookie.")):void 0!==d.errors?s(new Error(d.errors[0].message)):s(new Error("Something went wrong. Please try again in a few seconds."));case 22:o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),s(o.t0);case 27:case"end":return o.stop()}}),a,null,[[0,24]])})));return function(e,t){return a.apply(this,arguments)}}())},authSendRobloxTwoStepLogin:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,s){var u,c,d,h;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new f(t),c={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},o.next=5,l("https://auth.roblox.com/v3/users/".concat(r,"/two-step-verification/login"),{method:"POST",agent:u,headers:c,body:JSON.stringify(n)});case 5:(d=o.sent).ok?(h=(h=d.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:h})):s(new Error(d.statusText)),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),s(o.t0);case 12:case"end":return o.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}())},authRobloxSendSecurityEnable:function(e,t,r,n,a){return new Promise(function(){var s=i(o().mark((function i(s,u){var c,d,h,p;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,c=new f(e),d={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==a.challengeId&&(d["rblx-challenge-id"]=a.challengeId,d["rblx-challenge-metadata"]=btoa(JSON.stringify({actionType:"Generic",challengeId:a.twoStepId,verificationToken:a.verificationToken,rememberDevice:!1})),d["rblx-challenge-type"]="twostepverification"),o.next=6,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration/security-key/enable"),{method:"POST",agent:c,headers:d});case 6:if(!(h=o.sent).ok){o.next=14;break}return o.next=10,h.json();case 10:h=o.sent,s(h),o.next=15;break;case 14:403===h.status&&null!==h.headers.get("rblx-challenge-metadata")?(p=JSON.parse(atob(h.headers.get("rblx-challenge-metadata"))),s({challengeId:h.headers.get("rblx-challenge-id"),twoStepId:p.challengeId})):401===h.status?u({relogin:!0}):u(new Error(h.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),u(o.t0);case 20:case"end":return o.stop()}}),i,null,[[0,17]])})));return function(e,t){return s.apply(this,arguments)}}())},authRobloxSendSecurityEnableVerify:function(e,t,r,n,a,s){return new Promise(function(){var u=i(o().mark((function i(u,c){var d,h,p,m;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,d=new f(e),h={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==a&&(h["rblx-challenge-id"]=a,h["rblx-challenge-metadata"]=btoa(JSON.stringify({challengeId:a,verificationToken:s,rememberDevice:!1,actionType:"Generic"})),h["rblx-challenge-type"]="twostepverification"),o.next=6,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration/security-key/enable"),{method:"POST",agent:d,headers:h});case 6:if(!(p=o.sent).ok){o.next=14;break}return o.next=10,p.json();case 10:p=o.sent,u(p),o.next=15;break;case 14:403===p.status&&null!==p.headers.get("rblx-challenge-metadata")?(m=JSON.parse(atob(p.headers.get("rblx-challenge-metadata"))),u({challengeId:m.challengeId})):401===p.status?c({relogin:!0}):c(new Error(p.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),c(o.t0);case 20:case"end":return o.stop()}}),i,null,[[0,17]])})));return function(e,t){return u.apply(this,arguments)}}())}}},190:(e,t,r)=>{var n=r(7906);e.exports={authCheckPostCredentialsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsUser:function(e,t){if(null===e||!0!==t)throw new Error("Your provided credentials are invalid.")},authCheckPostCredentialsRegisterData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided name is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsRegisterUser:function(e){if(null!==e)throw new Error("Your provided email is already used.")},authCheckPostCredentialsLinkData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsLinkUser:function(e){if(void 0!==e[0].local)throw new Error("Your account has already linked an email.");if(null!==e[1])throw new Error("Your provided email is already used.")},authCheckPostCredentialsRequestData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||"string"!=typeof e.type||!0!==["verify","reset"].includes(e.type))throw new Error("Your provided type is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.")},authCheckPostCredentialsRequestUser:function(e,t){if(null===e)throw new Error("Your provided email is invalid.");if("verify"===t.type&&!0===e.local.emailVerified)throw new Error("Your provided user is already verified.")},authCheckPostCredentialsRequestToken:function(e){if(null!==e&&(new Date).getTime()-new Date(e.updatedAt).getTime()<3e5)throw new Error("You need to wait at least 5 minutes before you can request a new email.")},authCheckPostCredentialsVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.")},authCheckPostCredentialsVerifyToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsResetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsResetToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsUsernameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(e.username.length<3)throw new Error("You username is too short.");if(e.username.length>20)throw new Error("You username is too long.")},authCheckPostCredentialsUsernameUser:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.");if(null!==e[1])throw new Error("Your provided username is already used.")},authCheckPostCredentialsRegisterUserName:function(e){if(null!==e)throw new Error("Your provided Username is already used.")},authCheckPostCredentialsProfileImage:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.")}}},286:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BalanceTransaction",o)},305:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam),h=c.socketRemoveAntiSpam,p=r(3232),m=p.adminGetUserListSocket,y=p.adminGetUserDataSocket,v=p.adminGetUserTransactionListSocket,g=p.adminGetUserGameListSocket,w=p.adminSendUserValueSocket,b=(p.adminSendUserBalanceSocket,p.adminSendUserMuteSocket),k=p.adminSendUserBanSocket;e.exports=function(e,t){t.on("getUserList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin","mod","partner"]),m(e,t,c,n,a),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(6),console.log(r.t0),a({success:!1,error:{type:"error",message:r.t0.message}});case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:case"end":return r.stop()}}),r,null,[[2,23],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactionList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserGameList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),g(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserValue",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalance",function(){var e=i(o().mark((function e(r,n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&"function"==typeof n){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){e.next=28;break}return e.prev=3,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=7,u.consume(a);case 7:return e.next=9,f(t.decoded._id);case 9:return e.prev=9,e.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:i=e.sent,l(i,!0),d(i,["admin"]),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),h(t.decoded._id),n({success:!1,error:{type:"error",message:e.t0.message}});case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(3),n({success:!1,error:{type:"error",message:void 0!==e.t1.message?e.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:e.next=29;break;case 28:n({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 29:case"end":return e.stop()}}),e,null,[[3,23],[9,17]])})));return function(t,r){return e.apply(this,arguments)}}()),t.on("sendUserMute",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin","mod"]),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBan",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},469:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam,c.socketRemoveAntiSpam,r(2050)),h=f.adminGetStatsDataSocket,p=f.adminGetStatsListSocket;e.exports=function(e,t){t.on("getStatsData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban affiliates");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin","mod","partner"]),h(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getStatsList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin","mod","partner"]),p(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}())}},481:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(9591),r(2725);var s=r(8921),u=r(7908).socketRemoveAntiSpam,c=r(4040),l=c.adminCheckGetBoxListData,d=c.adminCheckSendItemCreateData,f=(c.adminCheckSendBoxCreateItems,c.adminCheckSendBoxRemoveData),h=(c.adminCheckSendBoxRemoveBox,c.adminSaveImage,c.adminGetAmountBox,c.adminFormatItemSort),p=c.adminCheckSendItemNameData,m=c.adminCheckSendItemName,y=c.adminCheckSendItemAmountData,v=c.adminCheckSendItemTitleData,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),u=h(a.sort),c=12*(a.page-1),e.next=6,Promise.all([s.countDocuments({accepted:!0}),s.find({$or:[{name:{$regex:a.search,$options:"i"}},{title:{$regex:a.search,$options:"i"}}]}).sort(u).limit(12).skip(c).select("name title image amount").lean()]);case 6:d=e.sent,i({success:!0,count:d[0],data:d[1]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),e.next=4,s.create({assetId:a.name,name:a.name,title:a.title,image:a.image,amount:a.amount,amountFixed:a.amount,accepted:a.accepted});case 4:c=(c=e.sent).toObject(),i({success:!0,item:c}),u(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,m(c),e.next=8,s.findByIdAndDelete(a.boxId);case 8:c=e.sent,i({success:!0,item:c}),u(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),k=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,m(c),l=a.name,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{name:l},{new:!0}).select("name image amount title").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),u(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,m(c),l=a.title,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{title:l},{new:!0}).select("name title image amount").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),u(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,m(c),l=a.amount,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{amount:l,amountFixed:l},{new:!0}).select("name image amount title").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),u(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.findById(a.boxId).select("name").lean();case 3:return c=e.sent,m(c),l=a.image,e.next=8,Promise.all([s.findByIdAndUpdate(c._id,{image:l},{new:!0}).select("name image amount title").lean()]);case 8:d=e.sent,i({success:!0,item:d[0]}),u(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetItemListSocket:g,adminSendItemCreateSocket:w,adminSendBoxRemoveSocket:b,adminSendItemNameSocket:k,adminSendItemTitleSocket:x,adminSendItemAmountSocket:S,adminSendItemImageSocket:E}},485:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5102),c=r(7263),l=r(4823),d=r(7908).socketRemoveAntiSpam,f=r(3818),h=f.cashierCheckSendCryptoWithdrawData,p=f.cashierCheckSendCryptoWithdrawUser,m=f.cashierCheckSendCryptoWithdrawTransactions,y=f.cashierCryptoGenerateAddress,v=(f.cashierCryptoGetPrices,f.cashierCryptoGenerateAddressByOxapay),g=f.cashierCryptoGetPricesByOxapay,w=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([c.find({user:n._id}).select("name address user").lean(),u.find({}).select("name price fee").lean()]);case 3:if(!((s=e.sent)[0].length<=0)){e.next=17;break}return e.next=7,Promise.all([y("btc"),y("eth"),y("ltc"),y("doge"),y("trx"),y("usdt")]);case 7:if(null!==(l=e.sent)[0]&&void 0!==l[0]&&null!==l[0].address&&void 0!==l[0].address&&""!==l[0].address){e.next=11;break}return console.log("failed in address creation...",l," - user - ",n._id),e.abrupt("return",i({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 11:return e.next=13,Promise.all([c.create({name:"btc",address:l[0].address,user:n._id}),c.create({name:"eth",address:l[1].address,user:n._id}),c.create({name:"ltc",address:l[2].address,user:n._id}),c.create({name:"doge",address:l[3].address,user:n._id}),c.create({name:"trx",address:l[4].address,user:n._id})]);case 13:s[0]={btc:l[0].address,eth:l[1].address,ltc:l[2].address,doge:l[3].address,trx:l[4].address},console.log("created address: ",l),e.next=18;break;case 17:s[0]=s[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 18:s[1]=s[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("send addrsS:",s[0]),i({success:!0,addresses:s[0],prices:s[1]}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([c.find({user:n._id}).select("name address user").lean(),u.find({}).select("name price fee").lean()]);case 3:if(!((s=e.sent)[0].length<=0)){e.next=16;break}return e.next=7,Promise.all([v("btc"),v("eth"),v("ltc"),v("doge"),v("trx")]);case 7:if(null!==(l=e.sent)[0]&&void 0!==l[0]&&null!==l[0].address&&void 0!==l[0].address&&""!==l[0].address){e.next=11;break}return console.log("failed in address creation...",l," - user - ",n._id),e.abrupt("return",i({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 11:return e.next=13,Promise.all([c.create({name:"btc",address:l[0].address,user:n._id}),c.create({name:"eth",address:l[1].address,user:n._id}),c.create({name:"ltc",address:l[2].address,user:n._id}),c.create({name:"doge",address:l[3].address,user:n._id}),c.create({name:"trx",address:l[4].address,user:n._id}),c.create({name:"usdc_erc20",address:l[1].address,user:n._id}),c.create({name:"usdt_erc20",address:l[1].address,user:n._id}),c.create({name:"usdt_trc20",address:l[4].address,user:n._id})]);case 13:s[0]={btc:l[0].address,eth:l[1].address,ltc:l[2].address,doge:l[3].address,trx:l[4].address,usdc_erc20:l[1].address,usdt_erc20:l[1].address,usdt_trc20:l[4].address},e.next=17;break;case 16:s[0]=s[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 17:s[1]=s[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("crypto addr: ",s[0]),i({success:!0,addresses:s[0],prices:s[1]}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),k=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,f,y,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),p(a,n),e.next=5,Promise.all([u.findOne({name:a.currency}).select("name price").lean(),l.find({user:n._id,state:"pending"}).select("user state amount type data").lean()]);case 5:return c=e.sent,m(c[1]),f=Math.floor(a.amount),y=Math.floor(f*process.env.COIN_RATE/c[0].price*1e8),e.next=11,Promise.all([s.findByIdAndUpdate(n._id,{$inc:{balance:-f,"stats.withdraw":f}},{new:!0}).select("username balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),l.create({amount:f,data:{receiver:a.address,currency:a.currency,cryptoAmount:y},type:"withdraw",user:n._id,state:"pending"})]);case 11:return(c=e.sent)[1]=c[1].toObject(),i({success:!0,user:c[0],transaction:c[1]}),e.next=16,s.findOne({rank:"admin",fullrank:"fulladmin"});case 16:v=e.sent,t.of("/socket/cashier").to(v._id.toString()).emit("cryptoTransaction",{type:"adminTrxNotification",user:c[0].username,transaction:c[1]}),d(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),d(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(){var e=i(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:return t=e.sent,r=Math.floor(1/t.USDT*1e3),e.next=7,Promise.all([u.find({}).select("name price fee").lean()]);case 7:if(!(e.sent[0].length<=0)){e.next=11;break}return e.next=11,Promise.all([u.create({name:"btc",price:0,fee:0}),u.create({name:"eth",price:0,fee:0}),u.create({name:"ltc",price:0,fee:0}),u.create({name:"doge",price:0,fee:0}),u.create({name:"trx",price:0,fee:0}),u.create({name:"usdt_erc20",price:0,fee:0}),u.create({name:"usdt_trc20",price:0,fee:0})]);case 11:return e.next=13,Promise.all([u.findOneAndUpdate({name:"btc"},{price:Math.floor(r*t.BTC),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"eth"},{price:Math.floor(r*t.ETH),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"ltc"},{price:Math.floor(r*t.LTC),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"doge"},{price:Math.floor(r*t.DOGE),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"trx"},{price:Math.floor(r*t.TRX),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"usdt_erc20"},{price:Math.floor(r),fee:0},{upsert:!0}),u.findOneAndUpdate({name:"usdt_trc20"},{price:Math.floor(r),fee:0},{upsert:!0})]);case 13:setTimeout((function(){x()}),216e5),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),setTimeout((function(){x()}),216e5);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetCryptoDataSocket:w,cashierGetCryptoDataSocketByOxapay:b,cashierSendCryptoWithdrawSocket:k,cashierCryptoInit:function(e){try{x()}catch(e){console.error(e)}}}},538:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}var c=r(7908).socketRemoveAntiSpam,l=r(8461).settingSetValue,d=r(4607).adminCheckSendSettingValueData,f=r(8875),h=r(2789),p=r(6037),m=function(){var e=u(i().mark((function e(t,r,n,o,a){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(o),e.next=4,l(o.setting,o.value);case 4:s=e.sent,t.of("/socket/general").emit("settings",{settings:s}),a({success:!0}),c(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),y=function(){var e=u(i().mark((function e(t,r,n,a,s){var u,l,d,h,p,m,y,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,u=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=[],d=o(u),e.prev=4,d.s();case 6:if((h=d.n()).done){e.next=22;break}return p=h.value,e.next=10,f.findOne({creators:p});case 10:if(m=e.sent){e.next=18;break}return y=new f({creators:p,enabled:!0}),e.next=15,y.save();case 15:l.push(p),e.next=20;break;case 18:return e.next=20,f.updateOne({_id:m._id},{$set:{enabled:!0}});case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),d.e(e.t0);case 27:return e.prev=27,d.f(),e.finish(27);case 30:return e.next=32,f.find();case 32:v=e.sent,s({success:!0,data:v}),c(n._id),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(0),c(n._id),s({success:!1,error:{type:"error",message:e.t1.message}});case 41:case"end":return e.stop()}}),e,null,[[0,37],[4,24,27,30]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=u(i().mark((function e(t,r,n,a,s){var u,l,d,h,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,u=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=o(u),e.prev=4,l.s();case 6:if((d=l.n()).done){e.next=13;break}return h=d.value,e.next=10,f.findOneAndUpdate({creators:h},{$set:{enabled:!1}},{new:!0});case 10:e.sent;case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),l.e(e.t0);case 18:return e.prev=18,l.f(),e.finish(18);case 21:return e.next=23,f.find();case 23:p=e.sent,s({success:!0,data:p}),c(n._id),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),c(n._id),s({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[4,15,18,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),g=function(){var e=u(i().mark((function e(t,r,n,a,s){var u,l,d,m,y;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,u=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=o(u),e.prev=4,l.s();case 6:if((d=l.n()).done){e.next=15;break}return m=d.value,e.next=10,f.deleteOne({creators:m});case 10:return new p.Types.ObjectId(m),e.next=13,h.updateMany({"affiliates.referrer":m},{$set:{"affiliates.leaderboardpoints":0}});case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:return e.next=25,f.find();case 25:y=e.sent,s({success:!0,data:y}),c(n._id),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(0),c(n._id),s({success:!1,error:{type:"error",message:e.t1.message}});case 34:case"end":return e.stop()}}),e,null,[[0,30],[4,17,20,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=u(i().mark((function e(t,r,n,o,a){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.find();case 3:s=e.sent,a({success:!0,data:s}),c(n._id),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminSendSettingValueSocket:m,adminSendALeaderboardValueSocket:y,adminGetLeaderboardCreatorsSocket:w,adminSendDLeaderboardValueSocket:g,adminSendSLeaderboardValueSocket:v}},573:e=>{"use strict";e.exports=require("base64-img")},585:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(7252).Router(),u=r(8278),c=r(1147).Strategy,l=r(829),d=r(2789),f=r(4276).authorizeUser,h=r(5734).rateLimiterMiddleware;u.use(new c({returnURL:"https://cheersino.com/api/auth/steam/return",realm:"https://cheersino.com/",apiKey:"AC67207852844E3F8C13C929D26B4C78"},function(){var e=i(o().mark((function e(t,r,n){var a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.id,e.next=4,d.findOne({"steam.id":a});case 4:if(i=e.sent){e.next=9;break}return e.next=8,d.create({steam:{id:a,username:r.displayName,avatar:(null===(s=r.photos)||void 0===s||null===(s=s[2])||void 0===s?void 0:s.value)||""},createdAt:new Date,updatedAt:new Date});case 8:i=e.sent;case 9:return e.abrupt("return",n(null,i));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",n(e.t0,null));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n){return e.apply(this,arguments)}}())),u.serializeUser((function(e,t){return t(null,e._id)})),u.deserializeUser(function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.findById(t);case 2:n=e.sent,r(null,n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.exports=function(){return s.get("/me",[h,f(!0)],function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.findById(t.user._id).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 3:n=e.sent,r.status(200).json({success:!0,user:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),s.get("/steam",u.authenticate("steam")),s.get("/steam/return",u.authenticate("steam",{failureRedirect:"/"}),function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.user,console.log("user",n),a=l.sign({id:n._id},process.env.JWT_SECRET,{expiresIn:"7d"}),r.redirect("".concat(process.env.SERVER_FRONTEND_URL,"/steam-success?token=").concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),s.use("/credentials",r(7348)()),s.use("/roblox",r(2724)()),s.use("/discord",r(9794)()),s}},593:e=>{e.exports={generalGetLeaderboardTimeLeft:function(e){return new Date(e.updatedAt).getTime()+864e5*Number(e.duration)-(new Date).getTime()}}},758:e=>{"use strict";e.exports=require("puppeteer")},818:e=>{"use strict";e.exports=require("dotenv")},827:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DepositBonusTransaction",o)},829:e=>{"use strict";e.exports=require("jsonwebtoken")},836:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function c(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var l=r(7906),d=r(4229),f=function(e){var t=Math.floor(Math.pow(e.xp/1e3/100,1/3));return t>=100?100:t},h=function(e){var t=e.xp/1e3,r={name:null,percentage:0};return t>=1e5&&t<25e4?r={name:"bronze",percentage:5e-4}:t>=25e4&&t<5e5?r={name:"silver",percentage:.001}:t>=5e5&&t<1e6?r={name:"gold",percentage:.0015}:t>=1e6&&t<2e6?r={name:"diamond",percentage:.002}:t>=2e6&&(r={name:"platinum",percentage:.0025}),r};e.exports={generalCheckGetUserInfoData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==l.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},generalCheckGetUserInfoUser:function(e){if(null===e)throw new Error("Your requested user was not found.")},generalCheckGetUserBetsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckSendUserAnonymousData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.anonymous||"boolean"!=typeof e.anonymous)throw new Error("Your entered anonymous value is invalid.")},generalCheckSendUserDiscordData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.method||"string"!=typeof e.method||!1===["link","unlink"].includes(e.method))throw new Error("Your entered method value is invalid.");if("link"===e.method&&(void 0===e.tokenDiscord||null===e.tokenDiscord||"string"!=typeof e.tokenDiscord))throw new Error("Your entered discord token is invalid.")},generalCheckSendUserDiscordUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong! Please try again in a few seconds.");if("link"===e.method&&void 0!==t.discordId)throw new Error("You have already linked a discord account.");if("unlink"===e.method&&void 0===t.discordId)throw new Error("You dont have a linked discord account at the moment.")},generalCheckSendUserSeedData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.seedClient||"string"!=typeof e.seedClient||e.seedClient.trim().length<=0||e.seedClient.trim().length>64)throw new Error("Your entered client seed is invalid.")},generalCheckSendUserSeedGames:function(e){if(e.length>=1)throw new Error("You’ve to complete all your open games first.")},generalCheckSendUserTipData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.receiverId||"string"!=typeof e.receiverId||!0!==l.isMongoId(e.receiverId))throw new Error("Your entered receiver id is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<.1)throw new Error("Your entered tip amount is invalid.")},generalCheckSendUserTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You have not enough balance for this action.");if(t.stats.deposit<5e3)throw new Error("You need to have a total of 5 coin deposited.");if(!0===t.limits.blockTip&&0===t.limits.limitTip)throw new Error("You are not allowed to tip users.");if(!0===t.limits.blockTip&&t.limits.limitTip<Math.floor(e.amount))throw new Error("You are not allowed to tip users more then ".concat((Math.floor(t.limits.limitTip/10)/100).toFixed(2),"."))},generalCheckSendUserTipReceiver:function(e,t){if(null===t)throw new Error("Your entered receiver id is not available.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to tip yourself.")},generalUserGetLevel:f,generalUserGetRakeback:h,userGetDiscordUserData:function(e){return new Promise(function(){var t,r=(t=u().mark((function t(r,n){var o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d("https://discord.com/api/v9/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:if(null==(o=t.sent)||200!==o.status){t.next=11;break}return t.next=7,o.json();case 7:o=t.sent,r(o),t.next=12;break;case 11:n(new Error("We are not able to fetch your discord user data at the moment. Please try again later."));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(new Error("Something went wrong. Please try again in a few seconds."));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalUserGetFormated:function(e){var t=f(e),r=h(e);return!0===e.anonymous?null:{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,rakeback:r.name,createdAt:e.createdAt}},generalSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;!0===["mines","towers","unbox","plinko"].includes(o.method)?o.fair.seed=a({seedClient:o.fair.seed.seedClient,hash:o.fair.seed.hash},"completed"===o.fair.seed.state?{seedServer:o.fair.seed.seedServer}:{}):!0===["crash","roll"].includes(o.method)&&(o.game.fair.seed=a(a({},o.game.fair.seed),{},{seedServer:"completed"===o.game.state?o.game.fair.seed.seedServer:void 0})),r.push(o)}}catch(e){n.e(e)}finally{n.f()}return r},generalSanitizeUserSeed:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t._id,delete t.seedServer,delete t.user,delete t.state),t},generalUserGetFormatedWithBalance:function(e){var t=f(e),r=h(e);return{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,balance:e.balance,rakeback:r.name,createdAt:e.createdAt}}}},857:e=>{"use strict";e.exports=require("rate-limiter-flexible")},901:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=r(7906),f=r(4229),h=r(3688),p=function(){var e=s(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(a().mark((function e(n,o){var i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=new h(t),e.next=4,f("https://inventory.roblox.com/v1/users/".concat(r,"/assets/collectibles"),{agent:i});case 4:if(!(s=e.sent).ok){e.next=12;break}return e.next=8,s.json();case 8:s=e.sent,n(s.data),e.next=13;break;case 12:o(new Error(s.statusText));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),o(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(a().mark((function e(r,n){var i,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=[],s=0;case 3:if(!(s<=Math.floor(t.length/100))){e.next=20;break}return e.next=6,f("https://thumbnails.roblox.com/v1/assets?assetIds=".concat(t.slice(100*s,100*(s+1)).join(","),"&size=110x110&format=png"));case 6:if(!(u=e.sent).ok){e.next=14;break}return e.next=10,u.json();case 10:u=e.sent,i=[].concat(o(i),o(u.data)),e.next=15;break;case 14:n(new Error(u.statusText));case 15:return e.next=17,new Promise((function(e){return setTimeout(e,1e3)}));case 17:s++,e.next=3;break;case 20:r(i),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),n(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierCheckSendLimitedEnableRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedGenerateType:function(e){if(null===e)throw new Error("You need to change your 2fa method to emails or the authenticator app.")},cashierCheckSendLimitedVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.challengeId||"string"!=typeof e.challengeId||e.challengeId.length>36)throw new Error("Your provided two challenge id is invalid.");if(void 0===e.twoStepCode||"string"!=typeof e.twoStepCode||!0!==d.isAlphanumeric(e.twoStepCode))throw new Error("Your provided two step code is invalid.")},cashierCheckSendLimitedVerifyRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.items||!0!==Array.isArray(e.items)||e.items.length<=0||e.items.length>4)throw new Error("Your provided items are invalid.")},cashierCheckSendLimitedDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositItems:function(e,t,r){var n,o=[],a=u(e.items);try{var i=function(){var e=n.value;if(null===e||void 0===e.uniqueId||!0===o.includes(e.uniqueId)||!0!==t.some((function(t){return t.uniqueId===e.uniqueId})))throw new Error("Your provided items are invalid.");if(!0===r.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))})))throw new Error("Your provided items are already used in a different transaction.");o.push(e.uniqueId)};for(a.s();!(n=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},cashierCheckSendLimitedDepositUser:function(e,t,r,n){if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds.");if(t.length>=12)throw new Error("You can only have 12 active limited listings per time.");if(r>=8)throw new Error("You got to many canceled limited listings in the last hour.");if(!0!==n.canTrade&&"SenderCannotTrade"===n.status)throw new Error("You aren't able to trade. Please check your roblox account.")},cashierCheckSendLimitedWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==d.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")},cashierCheckSendLimitedWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedWithdrawTransaction:function(e,t,r){if(null===t||"created"!==t.state||!0===r.includes(t._id.toString()))throw new Error("Your provided limited listing id is not available.");if(e._id.toString()===t.deposit.user._id.toString())throw new Error("You aren't allowed withdraw your own limited listing.")},cashierCheckSendLimitedWithdrawUser:function(e,t,r){if(e.balance<t)throw new Error("You don’t have enough balance for this action.");if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds. Please verify again.");if(!0!==r.canTrade&&"SenderCannotTrade"===r.status)throw new Error("You aren't able to trade. Please check your roblox account.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierLimitedGetDummyItem:function(e,t){var r,n=null,o=u(e.sort((function(e,t){return e.price-t.price})));try{var a=function(){var e=r.value;e.amount<=1e3*process.env.LIMITED_MAX_AMOUNT_DUMMY&&!1===t.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))}))&&(n=e)};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}if(null!==n)return n;throw new Error("You dont have a valid dummy item in your inventory.")},cashierLimitedGetInventory:p,cashierLimitedGetItems:function(){return new Promise(function(){var e=s(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("https://www.rolimons.com/itemapi/itemdetails");case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:n=e.sent,t(n.items),e.next=12;break;case 11:r(new Error(n.statusText));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierLimitedGetItemImages:m,cashierGetUserCanTrade:function(e,t,r){return new Promise(function(){var n=s(a().mark((function n(o,i){var s,u,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new h(e),u={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,f("https://trades.roblox.com/v1/users/".concat(r,"/can-trade-with"),{agent:s,headers:u});case 5:if(!(c=n.sent).ok){n.next=13;break}return n.next=9,c.json();case 9:c=n.sent,o(c),n.next=14;break;case 13:401===c.status?i({relogin:!0}):i(new Error(c.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierLimitedGetTransaction:function(e,t,r){return new Promise(function(){var n=s(a().mark((function n(o,i){var s,u,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new h(e),u={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,f("https://trades.roblox.com/v1/trades/".concat(r),{agent:s,headers:u});case 5:if(!(c=n.sent).ok){n.next=13;break}return n.next=9,c.json();case 9:c=n.sent,o(c),n.next=14;break;case 13:i(new Error(c.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierSendLimitedTwoStepRedeem:function(e,t,r,n){return new Promise(function(){var o=s(a().mark((function o(i,s){var u,c,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new h(t),c={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,f("https://trades.roblox.com/v1/trade-friction/two-step-verification/redeem",{method:"POST",agent:u,headers:c,body:JSON.stringify(n)});case 5:if(!(l=o.sent).ok){o.next=14;break}return o.next=9,l.json();case 9:l=o.sent,console.log(l),i(),o.next=15;break;case 14:401===l.status?s({relogin:!0}):s(new Error(l.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),s(o.t0);case 20:case"end":return o.stop()}}),o,null,[[0,17]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTrade:function(e,t,r,n){return new Promise(function(){var o=s(a().mark((function o(i,s){var u,c,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new h(t),c={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,f("https://trades.roblox.com/v1/trades/send",{method:"POST",agent:u,headers:c,body:JSON.stringify(n)});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:l.id}),o.next=14;break;case 13:i({success:!1});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeAccept:function(e,t,r,n){return new Promise(function(){var o=s(a().mark((function o(i,s){var u,c,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new h(t),c={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,f("https://trades.roblox.com/v1/trades/".concat(n,"/accept"),{method:"POST",agent:u,headers:c});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:n}),o.next=14;break;case 13:i({success:!1,tradeId:n});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1,tradeId:n});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeDecline:function(e,t,r,n){return new Promise(function(){var o=s(a().mark((function o(i,s){var u,c,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new h(t),c={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,f("https://trades.roblox.com/v1/trades/".concat(n,"/decline"),{method:"POST",agent:u,headers:c});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:n}),o.next=14;break;case 13:i({success:!1,tradeId:n});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1,tradeId:n});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedFormatItems:function(e,t){var r,n=[],o=u(e);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t.assetId.toString()===e.assetId.toString()}));-1!==o&&n.push({uniqueId:e.userAssetId,assetId:e.assetId,name:e.name,image:t[o].image,amount:t[o].amount})};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},cashierLimitedFormatDepositItems:function(e,t){var r,n=[],o=u(e.items);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t.uniqueId===e.uniqueId}));-1!==o&&n.push(t[o])};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},cashierLimitedFormatTransactions:function(e){var t,r=[],n=u(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push({_id:o._id,amount:o.amount,items:o.deposit.items,user:o.deposit.user._id||o.deposit.user,state:o.state})}}catch(e){n.e(e)}finally{n.f()}return r},cashierLimitedFormatTransaction:function(e){return{_id:e._id,amount:e.amount,items:e.deposit.items,user:e.deposit.user._id||e.deposit.user,state:e.state}}}},988:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},autoCashout:{type:Number},game:{type:n.Schema.ObjectId,ref:"CrashGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashBet",o)},1024:e=>{"use strict";e.exports=require("chance")},1049:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=(r(2789),r(5734)),c=(u.rateLimiter,u.rateLimiterStrict,r(7908)),l=c.socketCheckConnectionLimit,d=c.socketAddConnectionLimit,f=c.socketRemoveConnectionLimit,h=r(8461).settingGet,p=r(1454).generalGetChatOnlineCount,m=r(9472).requestRemoveProxy,y=r(5507).generalBetsInit,v=r(7089).generalChatInit,g=r(9381),w=g.generalGetRains,b=g.generalRainInit;e.exports=function(e){e.of("/socket/general").use(function(){var t=i(o().mark((function t(r,n){var a,i,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,t.next=4,l("general",a);case 4:if(void 0===r.handshake.auth||void 0===r.handshake.auth.token){t.next=16;break}return t.prev=5,t.next=8,s.verify(r.handshake.auth.token,process.env.TOKEN_SECRET);case 8:i=t.sent,r.decoded=i,void 0!==r.decoded&&null!==r.decoded&&void 0!==r.decoded._id&&r.join(r.decoded._id.toString()),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n(new Error("You need to sign in to perform this action.")));case 16:return t.next=18,Promise.all([p(e),w()]);case 18:u=t.sent,r.emit("init",{settings:h(),online:u[0],rains:u[1],time:(new Date).getTime()}),n(),t.next=26;break;case 23:return t.prev=23,t.t1=t.catch(0),t.abrupt("return",n({success:!1,error:{type:"error",message:t.t1.message}}));case 26:case"end":return t.stop()}}),t,null,[[0,23],[5,13]])})));return function(e,r){return t.apply(this,arguments)}}()),e.of("/socket/general").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;d("general",n),r(4386)(e,t),r(1164)(e,t),r(8781)(e,t),r(2226)(e,t),r(2773)(e,t),r(4680)(e,t),r(4585)(e,t),r(2328)(e,t),r(7157)(e,t),t.on("disconnect",i(o().mark((function r(){var n,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("general",n),m(n),r.next=5,p(e);case 5:a=r.sent,e.of("/socket/general").emit("chatOnline",{online:a});case 7:case"end":return r.stop()}}),r)}))))})),setTimeout((function(){v(e)}),3e3),y(),b(e)}},1147:e=>{"use strict";e.exports=require("passport-steam")},1160:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(7252),u=(r(8749),s.Router()),c=r(2789),l=r(7263),d=r(4823),f=r(827),h=(r(5958),r(6363),r(3304)),p=r(5734).rateLimiterMiddleware,m=r(7402),y=(m.callbackCheckPostCoinpaymentsData,m.callbackCheckPostCoinpaymentsHmac,m.callbackCheckPostCoinpaymentsTransaction),v=(m.callbackCheckPostSkinifyData,m.callbackCheckPostSkinifyToken,m.callbackCheckPostSkinifyTransaction,m.callbackCheckPostZebrasmarketData,m.callbackCheckPostZebrasmarketSignature,m.callbackCheckPostZebrasmarketTransaction,m.callbackCoinpaymentsCreateHmac,m.callbackZebrasmarketCreateSignature,m.callbackCheckPostOxapayData),g=m.callbackOxapayCreateHmac,w=m.callbackCheckPostOxapayHmac,b=m.callbackOxapayCreatePayoutHmac,k=r(3818),x=(k.cashierCryptoGenerateAddress,k.cashierCryptoGetStableCurrencyName),S=r(8461).settingGet,E=[],_=[];e.exports=function(e){return u.post("/goon-oxapay",p,function(){var t=i(o().mark((function t(r,n){var a,i,s,u,p,m,b,k,_,A,O,j,I,P,T,C,G,N,D,Y,B,U,R,M,F,$,L,q,J;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("ox-log: ",r.headers,r.body),v(r.headers,r.body),a=g(r.body),console.log(a.toString(),":",r.headers.hmac.toString()),w(a,r.headers),!r.body.txs||!Array.isArray(r.body.txs)){t.next=56;break}return i=r.body.track_id,s=x(r.body.txs[0].currency.toLowerCase(),r.body.txs[0].network.toLowerCase()),y(i,E),console.log("yeah"),t.prev=11,E.push(i.toString()),t.next=15,Promise.all([l.findOne({name:s,address:r.body.txs[0].address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),d.findOne({"data.transaction":r.body.txs[0].tx_hash}).select("amount data type user state").lean()]);case 15:if(u=t.sent,"static_address"!==r.body.type||"Paid"!==r.body.status||null===u[0]||null!==u[1]){t.next=45;break}if(p=[],m=S(),b=1,k=0,_=0,null===u[0]){t.next=32;break}return t.next=25,Promise.all([c.findById(u[0].user._id).select(" username stats affiliates").lean()]);case 25:if(A=t.sent,k=A[0].stats.deposit,void 0===u[0].user.affiliates.referrer){t.next=32;break}return t.next=30,Promise.all([c.findById(u[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 30:O=t.sent,_=O[0].affiliates.depobonus;case 32:return m.depositbonus.enabled&&(b=_>0?_>m.depositbonus.famount?1+_/100:1+m.depositbonus.famount/100:0===k?1+m.depositbonus.famount/100:1+m.depositbonus.amount/100),console.log("bonuspercent",b),j=Math.floor(1e3*r.body.txs[0].value),I=b*Math.floor(j/process.env.COIN_RATE),P=m.depositbonus.enabled?10*(b-1)*Math.floor(j/process.env.COIN_RATE)+Math.floor(j/process.env.COIN_RATE):I,p=[c.findByIdAndUpdate(u[0].user._id,{$inc:{balance:I,"stats.deposit":Math.floor(j/process.env.COIN_RATE),"limits.betToWithdraw":P},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.create({amount:Math.floor(j/process.env.COIN_RATE),data:{providerId:i,transaction:r.body.txs[0].tx_hash,currency:s,cryptoAmount:r.body.txs[0].received_amount},type:"deposit",user:u[0].user,state:"completed"}),f.create({amount:I-Math.floor(j/process.env.COIN_RATE),type:"depositBonus",user:u[0].user,state:"completed"}),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":j,"stats.crypto.deposit":j}},{upsert:!0})],void 0!==u[0].user.affiliates.referrer&&p.push(c.findByIdAndUpdate(u[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":I},updatedAt:(new Date).getTime()},{})),t.next=41,Promise.all(p);case 41:(T=t.sent)[1]=T[1].toObject(),e.of("/socket/general").to(T[0]._id.toString()).emit("user",{user:T[0]}),e.of("/socket/cashier").to(T[1].user.toString()).emit("cryptoTransaction",{transaction:T[1]});case 45:E.splice(E.indexOf(i.toString()),1),n.status(200).json({success:!0}),t.next=54;break;case 49:t.prev=49,t.t0=t.catch(11),console.log(t.t0),E.splice(E.indexOf(i.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t0.message}});case 54:t.next=103;break;case 56:return C=r.body.trackId,G=x(r.body.currency.toLowerCase(),r.body.network.toLowerCase()),y(C,E),console.log("yeah no"),t.prev=60,E.push(C.toString()),t.next=64,Promise.all([l.findOne({name:G,address:r.body.address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),d.findOne({"data.transaction":r.body.txID}).select("amount data type user state").lean()]);case 64:if(N=t.sent,"payment"!==r.body.type||"Paid"!==r.body.status||null===N[0]||null!==N[1]){t.next=94;break}if(D=[],Y=S(),B=1,U=0,R=0,null===N[0]){t.next=81;break}return t.next=74,Promise.all([c.findById(N[0].user._id).select(" username stats affiliates").lean()]);case 74:if(M=t.sent,U=M[0].stats.deposit,void 0===N[0].user.affiliates.referrer){t.next=81;break}return t.next=79,Promise.all([c.findById(N[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 79:F=t.sent,R=F[0].affiliates.depobonus;case 81:return Y.depositbonus.enabled&&(B=R>0?R>Y.depositbonus.famount?1+R/100:1+Y.depositbonus.famount/100:0===U?1+Y.depositbonus.famount/100:1+Y.depositbonus.amount/100),console.log("bonuspercent",B),$=Math.floor(1e3*r.body.price),L=B*Math.floor($/process.env.COIN_RATE),q=Y.depositbonus.enabled?10*(B-1)*Math.floor($/process.env.COIN_RATE)+Math.floor($/process.env.COIN_RATE):L,D=[c.findByIdAndUpdate(N[0].user._id,{$inc:{balance:L,"stats.deposit":Math.floor($/process.env.COIN_RATE),"limits.betToWithdraw":q},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.create({amount:Math.floor($/process.env.COIN_RATE),data:{providerId:C,transaction:r.body.txID,currency:G,cryptoAmount:r.body.receivedAmount},type:"deposit",user:N[0].user,state:"completed"}),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":$,"stats.crypto.deposit":$}},{upsert:!0})],void 0!==N[0].user.affiliates.referrer&&D.push(c.findByIdAndUpdate(N[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":L},updatedAt:(new Date).getTime()},{})),t.next=90,Promise.all(D);case 90:(J=t.sent)[1]=J[1].toObject(),e.of("/socket/general").to(J[0]._id.toString()).emit("user",{user:J[0]}),e.of("/socket/cashier").to(J[1].user.toString()).emit("cryptoTransaction",{transaction:J[1]});case 94:E.splice(E.indexOf(C.toString()),1),n.status(200).json({success:!0}),t.next=103;break;case 98:t.prev=98,t.t1=t.catch(60),console.log(t.t1),E.splice(E.indexOf(C.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t1.message}});case 103:t.next=109;break;case 105:t.prev=105,t.t2=t.catch(0),console.log(t.t2),n.status(500).json({success:!1,error:{type:"error",message:t.t2.message}});case 109:case"end":return t.stop()}}),t,null,[[0,105],[11,49],[60,98]])})));return function(e,r){return t.apply(this,arguments)}}()),u.post("/goon-oxapay-payout",p,function(){var t=i(o().mark((function t(r,n){var a,i,s,u,c,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("ox-payout-log: ",r.headers,r.body),v(r.headers,r.body),a=b(r.body),console.log(a.toString(),":",r.headers.hmac.toString()),i=r.body.track_id,s="usdt"===r.body.currency.toLowerCase()?x(r.body.currency.toLowerCase(),r.body.network.toLowerCase()):r.body.currency.toLowerCase(),y(i,_),t.prev=8,_.push(i.toString()),t.next=12,Promise.all([d.findOne({type:"withdraw","data.receiver":r.body.address,"data.currency":s,state:"pending"}).select("amount data type user state").lean()]);case 12:if(u=t.sent,console.log("find withdraw db: ",u[0]),"payout"!==r.body.type||"Confirmed"!==r.body.status||null===u[0]){t.next=23;break}return promises=[d.findByIdAndUpdate(u[0]._id,{"data.transaction":r.body.tx_hash,state:"completed"},{new:!0}).select("user state type data").populate({path:"data",select:"currency"}).lean()],c=Math.floor(1e3*r.body.value),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":c,"stats.crypto.withdraw":c}},{upsert:!0}).then().catch(),t.next=20,Promise.all(promises);case 20:l=t.sent,console.log("update user withdraw trx",l[0]),e.of("/socket/cashier").to(l[0].user.toString()).emit("cryptoTransaction",{transaction:l[0]});case 23:_.splice(_.indexOf(i.toString()),1),n.status(200).json({success:!0}),t.next=32;break;case 27:t.prev=27,t.t0=t.catch(8),console.log(t.t0),_.splice(_.indexOf(i.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t0.message}});case 32:t.next=38;break;case 34:t.prev=34,t.t1=t.catch(0),console.log(t.t1),n.status(500).json({success:!1,error:{type:"error",message:t.t1.message}});case 38:case"end":return t.stop()}}),t,null,[[0,34],[8,27]])})));return function(e,r){return t.apply(this,arguments)}}()),u}},1164:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(7089),y=m.generalGetChatMessagesSocket,v=m.generalSendChatMessageSocket,g=m.generalSendChatRemoveSocket,w=m.generalSendChatClearSocket,b=m.generalSendChatLockSocket;e.exports=function(e,t){t.on("getChatMessages",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!1),p(c),y(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatMessage",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank xp stats anonymous mute ban createdAt").lean();case 12:c=r.sent,l(c,!0),p(c,"chat.enabled"),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatRemove",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin","mod"]),p(c),g(e,t,c,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatClear",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin","mod"]),p(c),w(e,t,c,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatLock",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin","mod"]),p(c),b(e,t,c,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}())}},1169:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function h(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,s,"next",e)}function s(e){h(a,n,o,i,s,"throw",e)}i(void 0)}))}}var m=r(8749),y=r(2789),v=r(2725),g=r(5729),w=r(2256),b=r(8744),k=r(6112),x=r(8875),S=r(7908).socketRemoveAntiSpam,E=r(8461).settingGet,_=r(2507).fairGetData,A=r(7950),O=A.battlesCheckGetGameDataData,j=A.battlesCheckGetGameDataGame,I=A.battlesCheckSendCreateData,P=A.battlesCheckSendCreateBoxes,T=A.battlesCheckSendCreateUser,C=A.battlesCheckSendBotData,G=A.battlesCheckSendBotGame,N=A.battlesCheckSendJoinData,D=A.battlesCheckSendJoinGame,Y=A.battlesCheckSendJoinUser,B=A.battlesCheckSendCancelData,U=A.battlesCheckSendCancelGame,R=A.battlesGenerateGame,M=A.battlesFormatBoxes,F=A.battlesGetGameIndex,$=A.battlesGetAmountGame,L=A.battlesGetAmountWin,q=A.battlesGetRounds,J=A.battlesGetOutcomeItem,K=A.battlesGetWinnerBets,W=A.battlesSanitizeGames,V=A.battlesSanitizeGame,H=r(836),z=H.generalUserGetLevel,Q=H.generalUserGetRakeback,X=H.generalUserGetFormated,Z=r(5507).generalAddBetsList,ee=[],te=[],re=[],ne=[],oe=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O(o),void 0!==(i=ee[F(ee,o.gameId)])){e.next=9;break}return e.next=6,g.findById(o.gameId).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp rakeback limits stats.total affiliates anonymous createdAt"}}).lean();case 6:i=e.sent,s=c(i.bets);try{for(s.s();!(u=s.n()).done;)!1===(l=u.value).bot&&(l.user.level=z(l.user),l.user.rakeback=Q(l.user))}catch(e){s.e(e)}finally{s.f()}case 9:j(i),a({success:!0,game:V(i,!0)}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ae=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,c,l,d,h,p,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(o),P(o),e.next=5,v.find({state:"active"}).select("name amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 5:return i=e.sent,s=M(o,i),u=$(s),c=Math.floor(u+u*Math.floor(o.playerCount)*Math.floor(o.funding)/100),T(n,o,c),l=z(n),d=Q(n),e.next=14,R(o,u,s);case 14:return h=e.sent,p=[y.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.bet":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:c,outcomes:[],slot:0,game:h._id,user:n._id,bot:!1})],e.next=19,Promise.all(p);case 19:(m=e.sent)[1]=m[1].toObject(),m[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:l,rakeback:d,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},h.bets=[m[1]],ee.push(h),t.of("/socket/general").to(n._id.toString()).emit("user",{user:m[0]}),!1===h.options.private&&t.of("/socket/battles").emit("game",{game:V(h)}),a({success:!0,game:V(h)}),S(n._id),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),S(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ie=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,l,d,h,p,m,y;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,C(o),G(n,ee[F(ee,o.gameId)],ne,re),e.prev=3,re.push(ee[F(ee,o.gameId)]._id.toString()),i=ee[F(ee,o.gameId)].amount-Math.floor(ee[F(ee,o.gameId)].amount*ee[F(ee,o.gameId)].options.funding/100),s=[],l=f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0!==ee[F(ee,o.gameId)].bets.some((function(e){return e.slot===t}))&&s.push(w.create({amount:i,outcomes:[],slot:t,game:ee[F(ee,o.gameId)]._id,bot:!0}));case 1:case"end":return e.stop()}}),e)})),d=0;case 9:if(!(d<ee[F(ee,o.gameId)].playerCount)){e.next=14;break}return e.delegateYield(l(d),"t0",11);case 11:d++,e.next=9;break;case 14:return e.next=16,Promise.all(s);case 16:if(h=(h=e.sent).map((function(e){return e.toObject()})),ee[F(ee,o.gameId)].bets=[].concat(u(ee[F(ee,o.gameId)].bets),u(h)),!0===ee[F(ee,o.gameId)].options.private){p=c(ee[F(ee,o.gameId)].bets);try{for(p.s();!(m=p.n()).done;)!1===(y=m.value).bot&&t.of("/socket/battles").to(y.user._id.toString()).emit("game",{game:V(ee[F(ee,o.gameId)])})}catch(e){p.e(e)}finally{p.f()}}else t.of("/socket/battles").emit("game",{game:V(ee[F(ee,o.gameId)])});"created"===ee[F(ee,o.gameId)].state&&ce(t,ee[F(ee,o.gameId)]),a({success:!0}),re.splice(re.indexOf(ee[F(ee,o.gameId)]._id.toString()),1),S(n._id),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(3),S(r.decoded._id),re.splice(re.indexOf(ee[F(ee,o.gameId)]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t1.message}});case 31:e.next=37;break;case 33:e.prev=33,e.t2=e.catch(0),S(r.decoded._id),a({success:!1,error:{type:"error",message:e.t2.message}});case 37:case"end":return e.stop()}}),e,null,[[0,33],[3,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),se=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,l,d,h,p,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(o),D(o,n,ee[F(ee,o.gameId)],ne,re),e.prev=3,ne.push(ee[F(ee,o.gameId)]._id.toString()),Y(n,ee[F(ee,o.gameId)]),i=ee[F(ee,o.gameId)].amount-Math.floor(ee[F(ee,o.gameId)].amount*ee[F(ee,o.gameId)].options.funding/100),s=z(n),u=Q(n),l=[y.findByIdAndUpdate(n._id,{$inc:{balance:-i,"stats.bet":i},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:i,outcomes:[],slot:Math.floor(o.slot),game:ee[F(ee,o.gameId)]._id,user:n._id,bot:!1})],e.next=13,Promise.all(l);case 13:if((d=e.sent)[1]=d[1].toObject(),d[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:u,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},ee[F(ee,o.gameId)].bets.push(d[1]),t.of("/socket/general").to(n._id.toString()).emit("user",{user:d[0]}),!0===ee[F(ee,o.gameId)].options.private){h=c(ee[F(ee,o.gameId)].bets);try{for(h.s();!(p=h.n()).done;)!1===(m=p.value).bot&&t.of("/socket/battles").to(m.user._id.toString()).emit("game",{game:V(ee[F(ee,o.gameId)])})}catch(e){h.e(e)}finally{h.f()}}else t.of("/socket/battles").emit("game",{game:V(ee[F(ee,o.gameId)])});ee[F(ee,o.gameId)].playerCount<=ee[F(ee,o.gameId)].bets.length&&"created"===ee[F(ee,o.gameId)].state&&ce(t,ee[F(ee,o.gameId)]),a({success:!0}),ne.splice(ne.indexOf(ee[F(ee,o.gameId)]._id.toString()),1),S(n._id),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(3),S(r.decoded._id),ne.splice(ne.indexOf(ee[F(ee,o.gameId)]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),S(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 36:case"end":return e.stop()}}),e,null,[[0,32],[3,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ue=function(){var e=p(f().mark((function e(t,r,n,o,a){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{B(o),U(n,ee[F(ee,o.gameId)],ne,re);try{re.push(o.gameId.toString()),a({success:!0}),re.splice(re.indexOf(o.gameId.toString()),1),S(n._id)}catch(e){S(r.decoded._id),re.splice(re.indexOf(o.gameId.toString()),1),a({success:!1,error:{type:"error",message:e.message}})}}catch(e){S(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ce=function(e,t){if(t.state="countdown",t.updatedAt=(new Date).getTime(),ee.splice(F(ee,t._id),1,t),!0===t.options.private){var r,n=c(t.bets);try{for(n.s();!(r=n.n()).done;){var o=r.value;!1===o.bot&&e.of("/socket/battles").to(o.user._id.toString()).emit("game",{game:V(t)})}}catch(e){n.e(e)}finally{n.f()}}else e.of("/socket/battles").emit("game",{game:V(t)});setTimeout((function(){le(e,t)}),3e3)},le=function(){var e=p(f().mark((function e(t,r){var n,o,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="pending",ee.splice(F(ee,r._id),1,r),e.next=5,_();case 5:if(n=e.sent,r.fair.seedPublic=n.data.head_block_id,r.fair.blockId=n.data.head_block_num,r.fair.blockNum=n.data.head_block_num+1,!0===r.options.private){o=c(r.bets);try{for(o.s();!(a=o.n()).done;)!1===(i=a.value).bot&&t.of("/socket/battles").to(i.user._id.toString()).emit("game",{game:V(r)})}catch(e){o.e(e)}finally{o.f()}}else t.of("/socket/battles").emit("game",{game:V(r)});r.bets.sort((function(e,t){return e.slot-t.slot})),ee.splice(F(ee,r._id),1,r),setTimeout((function(){de(t,r)}),2e3),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),setTimeout((function(){le(t,r)}),15e3);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),de=function(){var e=p(f().mark((function e(t,r){var n,o,a,i,u,l,d,h,p,y,v,g,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=r.mode,l=null===(n=r.options)||void 0===n?void 0:n.cursed,d=null===(o=r.options)||void 0===o?void 0:o.trust,h=null===(a=r.options)||void 0===a?void 0:a.trust1,p=r.playerCount,y=null===(i=r.options)||void 0===i?void 0:i.funding,e.prev=6,v=c(q(r.boxes).entries()),e.prev=8,w=f().mark((function e(){var n,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s(g.value,2),o=n[0],a=n[1],setTimeout((function(){for(var e=0;e<r.bets.length;e++){var n,i="".concat(r._id,"-").concat(r.fair.seedServer,"-").concat(r.fair.seedPublic,"-").concat(o,"-").concat(e),s=m.createHash("sha256").update(i).digest("hex"),f=parseInt(s.substr(0,8),16)%1e5,v=!0,g=null===(n=r.bets)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.bot;"standard"===u?v=l||!g:"team"===u&&(y>0?(v=l||2===e||3===e||!g,6===p&&(v=l||3===e||4===e||5===e||!g)):(v=l||0===e||1===e||!g,6===p&&(v=l||0===e||1===e||2===e||!g))),r.bets[e].payout=r.bets[e].payout+J(a.box.items,f,v&&d,v&&h).amountFixed,r.bets[e].outcomes.push(f)}if(r.state="rolling",r.updatedAt=(new Date).getTime(),ee.splice(F(ee,r._id),1,r),!0===r.options.private){var w,b=c(r.bets);try{for(b.s();!(w=b.n()).done;){var k=w.value;!1===k.bot&&t.of("/socket/battles").to(k.user._id.toString()).emit("game",{game:V(r)})}}catch(e){b.e(e)}finally{b.f()}}else t.of("/socket/battles").emit("game",{game:V(r)})}),6500*o);case 2:case"end":return e.stop()}}),e)})),v.s();case 11:if((g=v.n()).done){e.next=15;break}return e.delegateYield(w(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),v.e(e.t1);case 20:return e.prev=20,v.f(),e.finish(20);case 23:setTimeout((function(){fe(t,r)}),6500*q(r.boxes).length),e.next=29;break;case 26:e.prev=26,e.t2=e.catch(6),console.error(e.t2);case 29:case"end":return e.stop()}}),e,null,[[6,26],[8,17,20,23]])})));return function(t,r){return e.apply(this,arguments)}}(),fe=function(){var e=p(f().mark((function e(t,r){var n,o,i,s,u,l,d,h,p,m,v,S,_,A,O,j,I,P,T,C;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="completed",e.next=4,b.findOne({state:"running"}).select("state").lean();case 4:n=e.sent,o=[],i=[],s=[],u=0,l=K(r),d=L(r),h=c(r.bets),e.prev=13,m=f().mark((function e(){var t,r,a,c,h,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=p.value).payout=!0===l.some((function(e){return e._id.toString()===t._id.toString()}))?Math.floor(d/l.length):0,!0===t.bot){e.next=14;break}return t.amount,u+=!0!==t.user.limits.blockSponsor?t.amount:0,r=E(),a=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*r.general.reward.multiplier):0,c=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,e.next=10,x.find({enabled:"true"}).select("creators").lean();case 10:h=e.sent,m=h.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates.referrer)||void 0===r?void 0:r.toString())})),o.push(y.findByIdAndUpdate(t.user._id,{$inc:{balance:t.payout,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*r.general.reward.multiplier):0,"stats.won":t.payout,"limits.betToWithdraw":t.user.limits.betToWithdraw<=t.amount?-t.user.limits.betToWithdraw:-t.amount,"limits.betToRain":t.user.limits.betToRain<=t.amount?-t.user.limits.betToRain:-t.amount,"leaderboard.points":null!==n&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.leaderboardpoints":m&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":c,"rakeback.earned":a,"rakeback.available":a},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==t.user.affiliates.referrer&&c>0&&s.push(y.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":c,"affiliates.available":c},updatedAt:(new Date).getTime()},{}));case 14:i.push(w.findByIdAndUpdate(t._id,{payout:t.payout,multiplier:Math.floor(t.payout/(0===t.amount?10:t.amount)*100),outcomes:t.outcomes,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user bot updatedAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 15:case"end":return e.stop()}}),e)})),h.s();case 16:if((p=h.n()).done){e.next=20;break}return e.delegateYield(m(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),h.e(e.t1);case 25:return e.prev=25,h.f(),e.finish(25);case 28:return e.next=30,Promise.all([g.findByIdAndUpdate(r._id,{fair:r.fair,state:"completed",updatedAt:(new Date).getTime()},{}),k.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*u)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(o,i,s));case 30:if(v=e.sent,te.unshift(V(r)),te.length>8&&te.pop(),ee.splice(F(ee,r._id),1),!0===r.options.private){S=c(r.bets);try{for(S.s();!(_=S.n()).done;)!1===(A=_.value).bot&&t.of("/socket/battles").to(A.user._id.toString()).emit("game",{game:V(r)})}catch(e){S.e(e)}finally{S.f()}}else t.of("/socket/battles").emit("game",{game:V(r)});t.of("/socket/general").emit("rain",{rain:v[1]}),O=c(v.slice(2,o.length+2));try{for(O.s();!(j=O.n()).done;)I=j.value,t.of("/socket/general").to(I._id.toString()).emit("user",{user:I})}catch(e){O.e(e)}finally{O.f()}P=c(v.slice(o.length+2,o.length+i.length+2));try{for(P.s();!(T=P.n()).done;)!0!==(C=T.value).bot&&Z(t,a(a({},C),{},{user:X(C.user),method:"battles"}))}catch(e){P.e(e)}finally{P.f()}e.next=45;break;case 42:e.prev=42,e.t2=e.catch(0),console.error(e.t2);case 45:case"end":return e.stop()}}),e,null,[[0,42],[13,22,25,28]])})));return function(t,r){return e.apply(this,arguments)}}(),he=function(){var e=p(f().mark((function e(){var t,r,n,o,a,i,s,l,d,h,p,m,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([g.find({$or:[{state:"created"},{state:"pending"},{state:"rolling"}]}).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp limits stats.total affiliates anonymous createdAt"}}).lean(),g.find({"options.private":!1,state:"completed"}).sort({createdAt:-1}).limit(4).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp stats.total anonymous createdAt"}}).lean()]);case 3:for(t=e.sent,r=[],n=0,o=[].concat(u(t[0]),u(t[1]));n<o.length;n++)if("completed"!==(a=o[n]).state&&Math.floor(a.playerCount)===a.bets.length){r.push(g.findByIdAndUpdate(a._id,{state:"canceled",updatedAt:(new Date).getTime()},{})),i=c(a.bets);try{for(i.s();!(s=i.n()).done;)l=s.value,r.push(y.findByIdAndUpdate(l.user,{$inc:{balance:l.amount,"stats.bet":-l.amount},updatedAt:(new Date).getTime()},{}))}catch(e){i.e(e)}finally{i.f()}}else{d=c(a.bets);try{for(d.s();!(h=d.n()).done;)!1===(p=h.value).bot?(m=z(p.user),v=Q(p.user),p.user={_id:p.user._id,roblox:p.user.roblox,username:p.user.username,avatar:p.user.avatar,rank:p.user.rank,level:m,rakeback:v,stats:!0===p.user.anonymous?null:p.user.stats,limits:p.user.limits,affiliates:p.user.affiliates,createdAt:p.user.createdAt}):p.user={}}catch(e){d.e(e)}finally{d.f()}"completed"!==a.state?ee.push(a):te.unshift(a)}return e.next=8,Promise.all(r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e.exports={battlesGetData:function(e){return new Promise(function(){var t=p(f().mark((function t(r,n){var o,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt items").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 3:o=t.sent,a=ee.filter((function(t){return!1===t.options.private||void 0!==e&&!0===t.bets.some((function(t){return!1===t.bot&&t.user._id.toString()===e._id.toString()}))})),r({boxes:o,games:W(a),history:te}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},battlesGetGameDataSocket:oe,battlesSendCreateSocket:ae,battlesSendBotSocket:ie,battlesSendJoinSocket:se,battlesSendCancelSocket:ue,battlesInit:he}},1181:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=r(7906);r(9472).SERVICE_PROXY_TIME,e.exports={unboxCheckGetBoxDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==a.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.")},unboxCheckGetBoxDataBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your entered box is not available.")},unboxCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==a.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.");if(void 0===e.unboxCount||null===e.unboxCount||!0===isNaN(e.unboxCount)||Math.floor(e.unboxCount)<1||Math.floor(e.unboxCount)>4)throw new Error("You’ve entered an invalid unbox count.")},unboxCheckSendBetBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your requested box is not available.")},unboxCheckSendBetUser:function(e,t){if(e.balance<t)throw new Error("You don’t have enough balance for this action.")},unboxCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},unboxGetOutcomeItem:function(e,t){var r,o=0,a=null,i=n(e.items);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(t<=(o+=s.tickets)){a=s.item;break}}}catch(e){i.e(e)}finally{i.f()}return a},unboxSetOutcomeItem:function(e,t){var r,o=null,a=n(e);try{for(a.s();!(r=a.n()).done;){o=r.value;break}}catch(e){a.e(e)}finally{a.f()}return o?o.item:null},findPercent:function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r}}},1198:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function f(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,s,"next",e)}function s(e){f(a,n,o,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(2789),y=r(5398),v=r(6769),g=r(8744),w=r(8875),b=r(7908).socketRemoveAntiSpam,k=r(8461).settingGet,x=r(836),S=x.generalUserGetRakeback,E=x.generalUserGetFormated,_=r(2507).fairGetData,A=r(6905),O=A.blackjackCheckSendJoinData,j=A.blackjackCheckSendJoinTable,I=A.blackjackCheckSendJoinUser,P=A.blackjackCheckSendBetData,T=A.blackjackCheckSendBetTable,C=A.blackjackCheckSendBetBets,G=A.blackjackCheckSendBetSeat,N=A.blackjackCheckSendBetUser,D=A.blackjackCheckSendClearData,Y=A.blackjackCheckSendClearTable,B=A.blackjackCheckSendClearSeat,U=A.blackjackCheckSendInsuranceData,R=A.blackjackCheckSendInsuranceTable,M=A.blackjackCheckSendInsuranceSeat,F=A.blackjackCheckSendInsuranceUser,$=A.blackjackCheckSendHitData,L=A.blackjackCheckSendHitTable,q=A.blackjackCheckSendHitSeat,J=A.blackjackCheckSendStandData,K=A.blackjackCheckSendStandTable,W=A.blackjackCheckSendStandSeat,V=A.blackjackCheckSendSplitData,H=A.blackjackCheckSendSplitTable,z=A.blackjackCheckSendSplitSeat,Q=A.blackjackCheckSendSplitUser,X=A.blackjackCheckSendDoubleData,Z=A.blackjackCheckSendDoubleTable,ee=A.blackjackCheckSendDoubleSeat,te=A.blackjackCheckSendDoubleUser,re=A.blackjackGenerateGame,ne=A.blackjackGenerateDeck,oe=A.blackjackShuffleDeck,ae=A.blackjackGetCardsValue,ie=A.blackjackGetSideBetMultiplier,se=A.blackjackCheckCardsSoftSeventeen,ue=A.blackjackTableListSanitize,ce=A.blackjackTableSanitize,le=A.blackjackGetBetAmount,de=(A.generateBlackjackWinningHand,r(8223)),fe=r(1325),he=r(6049),pe=r(9845),me=r(5507).generalAddBetsList,ye=[],ve={},ge=[],we=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),j(o,n,ye[i]),I(n,ye[i]),s=Math.floor(Math.pow(n.xp/1e3/100,1/3)),u=S(n),ye[i].players.push({seat:o.seat,user:{_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:u,affiliates:n.affiliates,stats:n.stats,limits:n.limits,createdAt:n.createdAt},bet:null}),ye[i].players.sort((function(e,t){return e.seat-t.seat})),t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),"created"===ye[i].game.state&&Oe(t,ye[i]),a({success:!0}),b(n._id)}catch(e){b(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),be=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,c,l,f,h,p,y,g,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,P(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),T(ye[i]),C(o.bets),s=[],c=0,l=u(o.bets),e.prev=8,h=d().mark((function e(){var t,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.value,r=ye[i].players[ye[i].players.findIndex((function(e){return e.seat===t.seat}))],G(t,n,ye[i],r),o=le(t.amount),c=Math.floor(c+o),null===r.bet?s.push(v.create({amount:{main:Math.floor(t.amount.main),sideLeft:Math.floor(t.amount.sideLeft),sideRight:Math.floor(t.amount.sideRight)},actions:["created"],seat:r.seat,game:ye[i].game._id,user:n._id})):s.push(v.findByIdAndUpdate(r.bet._id,{$inc:{"amount.main":Math.floor(t.amount.main),"amount.sideLeft":Math.floor(t.amount.sideLeft),"amount.sideRight":Math.floor(t.amount.sideRight)}},{new:!0,upsert:!0}).lean());case 6:case"end":return e.stop()}}),e)})),l.s();case 11:if((f=l.n()).done){e.next=15;break}return e.delegateYield(h(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),l.e(e.t1);case 20:return e.prev=20,l.f(),e.finish(20);case 23:return N(n,c),e.prev=24,ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]+1,e.next=28,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.bet":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(s));case 28:p=e.sent,y=u(p.slice(1)),e.prev=30,w=d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=g.value,r=ye[i].players.findIndex((function(e){return e.seat===t.seat})),t instanceof v==1&&(t=t.toObject()),ye[i].players[r].bet=t;case 4:case"end":return e.stop()}}),e)})),y.s();case 33:if((g=y.n()).done){e.next=37;break}return e.delegateYield(w(),"t2",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t3=e.catch(30),y.e(e.t3);case 42:return e.prev=42,y.f(),e.finish(42);case 45:t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0,user:p[0]}),ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]-1,b(n._id),e.next=56;break;case 51:e.prev=51,e.t4=e.catch(24),b(r.decoded._id),ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]-1,a({success:!1,error:{type:"error",message:e.t4.message}});case 56:e.next=62;break;case 58:e.prev=58,e.t5=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t5.message}});case 62:case"end":return e.stop()}}),e,null,[[0,58],[8,17,20,23],[24,51],[30,39,42,45]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ke=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,c,l,f,h,p,y,g,w,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,D(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),Y(ye[i]),s=ye[i].players.filter((function(e){return e.user._id.toString()===n._id.toString()&&null!==e.bet})),B(ye[i],s),e.prev=6,ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]+1,c=0,l=[],f=u(s);try{for(f.s();!(h=f.n()).done;)p=h.value,c+=le(p.bet.amount),l.push(v.findByIdAndDelete(p.bet._id,{}))}catch(e){f.e(e)}finally{f.f()}return e.next=14,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:c,"stats.bet":-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(l));case 14:y=e.sent,g=u(s),e.prev=16,k=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=w.value,ye[i].players[ye[i].players.findIndex((function(e){return e.seat===t.seat}))].bet=null;case 2:case"end":return e.stop()}}),e)})),g.s();case 19:if((w=g.n()).done){e.next=23;break}return e.delegateYield(k(),"t0",21);case 21:e.next=19;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),g.e(e.t1);case 28:return e.prev=28,g.f(),e.finish(28);case 31:t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0,user:y[0]}),ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]-1,b(n._id),e.next=42;break;case 37:e.prev=37,e.t2=e.catch(6),b(r.decoded._id),ve[Math.floor(o.table).toString()]=ve[Math.floor(o.table).toString()]-1,a({success:!1,error:{type:"error",message:e.t2.message}});case 42:e.next=48;break;case 44:e.prev=44,e.t3=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t3.message}});case 48:case"end":return e.stop()}}),e,null,[[0,44],[6,37],[16,25,28,31]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),xe=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,c,l,f,h,p,y,v,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,U(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),R(o,n,ye[i]),s=ye[i].players.filter((function(e){return e.user._id.toString()===n._id.toString()})),c=0,l=u(s);try{for(l.s();!(f=l.n()).done;)h=f.value,M(ye[i],h),c=Math.floor(c+h.bet.amount.main/2)}catch(e){l.e(e)}finally{l.f()}if(F(o,n,c),!0!==o.insurance){e.next=14;break}return e.next=12,m.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.bet":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean();case 12:p=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:p});case 14:y=u(s),e.prev=15,g=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=v.value).bet.actions.push(!0===o.insurance?"insurance":"noinsurance"),ye[i].players.splice(ye[i].players.findIndex((function(e){return e.seat===t.seat})),1,t);case 3:case"end":return e.stop()}}),e)})),y.s();case 18:if((v=y.n()).done){e.next=22;break}return e.delegateYield(g(),"t0",20);case 20:e.next=18;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(15),y.e(e.t1);case 27:return e.prev=27,y.f(),e.finish(27);case 30:t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0}),b(n._id),e.next=39;break;case 35:e.prev=35,e.t2=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t2.message}});case 39:case"end":return e.stop()}}),e,null,[[0,35],[15,24,27,30]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Se=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),L(o,n,ye[i]),s=ye[i].players[ye[i].players.findIndex((function(e){return e.seat===o.seat}))],q(n,ye[i],s),!1===s.bet.actions.includes("split")?s.bet.cards.push(ye[i].game.deck.pop()):!0===s.bet.actions.includes("stand")||ae(s.bet.cardsRight)>=21?s.bet.cardsLeft.push(ye[i].game.deck.pop()):s.bet.cardsRight.push(ye[i].game.deck.pop()),s.bet.actions.push("hit"),ye[i].players.splice(ye[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),ye[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0}),b(n._id)}catch(e){b(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Ee=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{J(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),K(o,n,ye[i]),s=ye[i].players[ye[i].players.findIndex((function(e){return e.seat===o.seat}))],W(n,ye[i],s),s.bet.actions.push("stand"),ye[i].players.splice(ye[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),ye[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0}),b(n._id)}catch(e){b(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),_e=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),H(o,n,ye[i]),s=ye[i].players[ye[i].players.findIndex((function(e){return e.seat===o.seat}))],z(n,ye[i],s),Q(n,s),e.next=9,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:-s.bet.amount.main,"stats.bet":s.bet.amount.main},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()]);case 9:u=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),s.bet.cardsLeft=[s.bet.cards[0]],s.bet.cardsRight=[s.bet.cards[1]],delete s.bet.cards,s.bet.cardsLeft.push(ye[i].game.deck.pop()),s.bet.cardsRight.push(ye[i].game.deck.pop()),s.bet.actions.push("split"),ye[i].players.splice(ye[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),ye[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0}),b(n._id),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Ae=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,X(o),i=ye.findIndex((function(e){return e.table===Math.floor(o.table)})),Z(o,n,ye[i]),s=ye[i].players[ye[i].players.findIndex((function(e){return e.seat===o.seat}))],ee(n,ye[i],s),te(n,s),e.next=9,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:-s.bet.amount.main,"stats.bet":s.bet.amount.main},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.findByIdAndUpdate(s.bet._id,{"amount.main":Math.floor(2*s.bet.amount.main)},{})]);case 9:u=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),s.bet.amount.main=Math.floor(2*s.bet.amount.main),s.bet.cards.push(ye[i].game.deck.pop()),s.bet.actions.push("double"),ye[i].players.splice(ye[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),t.of("/socket/blackjack").emit("table",{table:ce(ye[i])}),a({success:!0}),b(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Oe=function(e,t){try{var r=ye.findIndex((function(e){return e.table===t.table}));ye[r].game.state="countdown",ye[r].game.updatedAt=(new Date).getTime(),e.of("/socket/blackjack").emit("table",{table:ce(ye[r])}),setTimeout((function(){ye[r].game.state="pending",ye[r].game.updatedAt=(new Date).getTime(),e.of("/socket/blackjack").emit("table",{table:ce(ye[r])}),je(e,ye[r])}),1e4)}catch(e){console.error(e)}},je=function e(t,r){try{if(ve[r.table.toString()]<=0){var n=ye.findIndex((function(e){return e.table===r.table}));ye[n].players=ye[n].players.filter((function(e){return null!==e.bet})),ye[n].game.state=ye[n].players.length>=1?"pending":"created",ye[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[n])}),ye[n].players.length>=1&&Ie(t,ye[n])}else setTimeout((function(){e(t,r)}),500)}catch(e){console.error(e)}},Ie=function(){var e=h(d().mark((function e(t,r){var n,o,a,i,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=ye.findIndex((function(e){return e.table===r.table})),e.next=4,_();case 4:o=e.sent,ye[n].game.fair.seedPublic=o.data.head_block_id,ye[n].game.fair.blockId=o.data.head_block_num,a="".concat(ye[n].game._id,"-").concat(ye[n].game.fair.seedServer,"-").concat(ye[n].game.fair.seedPublic),i=p.createHash("sha256").update(a).digest("hex"),s=ne(),s=oe(s,i),ge[n]=JSON.parse(JSON.stringify(de[Math.floor(100*Math.random())])),(u=k()).games.ctotal.enabled&&u.games.cblackjack.enabled&&(2===(c=u.games.cblackjack.value)&&(ge[n]=JSON.parse(JSON.stringify(pe[Math.floor(100*Math.random())]))),4===c&&4==(Math.random()<.5?3:4)&&(ge[n]=JSON.parse(JSON.stringify(he[Math.floor(100*Math.random())]))),5===c&&(4===(l=Math.floor(3*Math.random())+3)&&(ge[n]=JSON.parse(JSON.stringify(he[Math.floor(100*Math.random())]))),5===l&&(ge[n]=JSON.parse(JSON.stringify(fe[Math.floor(100*Math.random())]))))),ye[n].game.deck=s,ye[n].game.state="running",ye[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[n])}),Pe(t,ye[n]),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){duelsGameValidate(t,duelsGame)}),15e3);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r){return e.apply(this,arguments)}}(),Pe=function(){var e=h(d().mark((function e(t,r){var n,o,a,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=ye.findIndex((function(e){return e.table===r.table})),o=ye[n].players.length,a=0;case 4:if(!(a<2)){e.next=15;break}i=d().mark((function e(r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){if(r<o)void 0===ye[n].players[o-1-r].bet.cards&&(ye[n].players[o-1-r].bet.cards=[]),ye[n].players[o-1-r].bet.cards.push(ye[n].game.deck.pop());else{void 0===ye[n].game.dealerCards&&(ye[n].game.dealerCards=[]);var e=k();e.games.ctotal.enabled&&e.games.cblackjack.enabled?ye[n].game.dealerCards.push(ge[n].pop()):ye[n].game.dealerCards.push(ye[n].game.deck.pop())}ye[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[n])})}),1e3*(a*(o+1)+r));case 1:case"end":return e.stop()}}),e)})),s=0;case 7:if(!(s<o+1)){e.next=12;break}return e.delegateYield(i(s),"t0",9);case 9:s++,e.next=7;break;case 12:a++,e.next=4;break;case 15:setTimeout((function(){"A"!==ye[n].game.dealerCards[0].rank&&21===ae(ye[n].game.dealerCards)?Ge(t,ye[n]):"A"===ye[n].game.dealerCards[0].rank?Te(t,ye[n]):Ce(t,ye[n],4)}),2e3*(o+1)),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),console.error(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r){return e.apply(this,arguments)}}(),Te=function(e,t){try{t.playersPos="all",t.game.updatedAt=(new Date).getTime(),ye.splice(ye.findIndex((function(e){return e.table===t.table})),1,t),e.of("/socket/blackjack").emit("table",{table:ce(t)});var r=setInterval((function(){if((t=ye[ye.findIndex((function(e){return e.table===t.table}))]).players.length===t.players.filter((function(e){return 2===e.bet.actions.length})).length||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4+500){clearInterval(r);for(var n=0;n<t.players.length;n++)t.players[n].bet.actions.length<2&&t.players[n].bet.actions.push("noinsurance");21===ae(t.game.dealerCards)&&(t.game.state="completed"),t.game.updatedAt=(new Date).getTime(),t.playersPos=null,ye.splice(ye.findIndex((function(e){return e.table===t.table})),1,t),e.of("/socket/blackjack").emit("table",{table:ce(t)}),21===ae(t.game.dealerCards)?Ge(e,t):Ce(e,t,4)}}),500)}catch(e){console.error(e)}},Ce=function(){var e=h(d().mark((function e(t,r,n){var o,a,i,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=ye[ye.findIndex((function(e){return e.table===r.table}))],o=ye.findIndex((function(e){return e.table===r.table})),-1!==n){e.next=17;break}for(r.playersPos=null,a=s(r.game.dealerCards);ae(a)<17||17===ae(a)&&!0===se(a);)(i=k()).games.ctotal.enabled&&i.games.cblackjack.enabled?a.push(ge[o].pop()):a.push(r.game.deck.pop());u=d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){r.game.dealerCards[n]=a[n],r.game.updatedAt=(new Date).getTime(),ye.splice(ye.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:r})}),1e3*(n-1));case 1:case"end":return e.stop()}}),e)})),c=1;case 9:if(!(c<a.length)){e.next=14;break}return e.delegateYield(u(c),"t0",11);case 11:c++,e.next=9;break;case 14:setTimeout((function(){Ge(t,r)}),1e3*(a.length-1)),e.next=18;break;case 17:void 0===r.players[n]||ae(r.players[n].bet.cards)>=21?Ce(t,r,n-1):(r.playersPos=r.players[n].seat,r.game.updatedAt=(new Date).getTime(),ye.splice(ye.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:ce(r)}),l=setInterval((function(){!0===(r=ye[ye.findIndex((function(e){return e.table===r.table}))]).players[n].bet.actions.includes("double")||!1===r.players[n].bet.actions.includes("split")&&(!0===r.players[n].bet.actions.includes("stand")||ae(r.players[n].bet.cards)>=21)||!0===r.players[n].bet.actions.includes("split")&&(r.players[n].bet.actions.filter((function(e){return"stand"===e})).length>=2||!0===r.players[n].bet.actions.includes("stand")&&(ae(r.players[n].bet.cardsLeft)>=21||ae(r.players[n].bet.cardsRight)>=21)||ae(r.players[n].bet.cardsLeft)>=21&&ae(r.players[n].bet.cardsRight)>=21)?(clearInterval(l),Ce(t,r,n-1)):(new Date).getTime()>=new Date(r.game.updatedAt).getTime()+1e4+500&&(r.players[n].bet.actions.push("stand"),r.game.updatedAt=(new Date).getTime(),ye.splice(ye.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:ce(r)}))}),500));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.error(e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ge=function(){var e=h(d().mark((function e(t,r){var n,o,i,s,c,l,f,p,b,x,S,_,A,O,j;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=ye.findIndex((function(e){return e.table===r.table})),o=ae(ye[n].game.dealerCards),e.next=5,g.findOne({state:"running"}).select("state").lean();case 5:i=e.sent,s=[],c=[],l=u(ye[n].players),e.prev=10,p=d().mark((function e(){var t,r,a,u,l,h,p,y,g,b,x,S;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.value,r=0,!0===t.bet.actions.includes("split")?(a=ae(t.bet.cardsLeft),u=ae(t.bet.cardsRight),a<=21&&a===o?r=t.bet.amount.main:a<=21&&(a>o||o>21)&&(r=Math.floor(2*t.bet.amount.main)),u<=21&&u===o?r=Math.floor(r+t.bet.amount.main):u<=21&&(u>o||o>21)&&(r=Math.floor(r+2*t.bet.amount.main))):(l=ae(t.bet.cards),2===ye[n].game.dealerCards.length&&21===o?2===t.bet.cards.length&&21===l?r=t.bet.amount.main:!0===t.bet.actions.includes("insurance")&&(r=Math.floor(1.5*t.bet.amount.main)):2===t.bet.cards.length&&21===l?r=Math.floor(2.5*t.bet.amount.main):l<=21&&l===o?r=t.bet.amount.main:l<=21&&(l>o||o>21)&&(r=Math.floor(2*t.bet.amount.main))),h=t.bet.actions.includes("split")?[t.bet.cardsLeft[0],t.bet.cardsRight[0]]:t.bet.cards.slice(0,2),p=ie(ye[n].game.dealerCards,h),t.bet.amount.sideLeft>0&&(r+=Math.floor(t.bet.amount.sideLeft*p.left)),t.bet.amount.sideRight>0&&(r+=Math.floor(t.bet.amount.sideRight*p.right)),y=t.bet.amount.main+t.bet.amount.sideLeft+t.bet.amount.sideRight,!0===t.bet.actions.includes("insurance")&&(y+=Math.floor(t.bet.amount.main/2)),!0===t.bet.actions.includes("split")&&(y+=t.bet.amount.main),g=k(),b=!0!==t.user.limits.blockSponsor?Math.floor(y*t.user.rakeback.percentage*g.general.reward.multiplier):0,e.next=15,w.find({enabled:"true"}).select("creators").lean();case 15:x=e.sent,S=x.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),s.push(m.findByIdAndUpdate(t.user._id,{$inc:{balance:r,xp:!0!==t.user.limits.blockSponsor?Math.floor(y*process.env.XP_RATE*g.general.reward.multiplier):0,"stats.won":r,"limits.betToWithdraw":t.user.limits.betToWithdraw<=y<=0?-t.user.limits.betToWithdraw:-y,"limits.betToRain":t.user.limits.betToRain<=y<=0?-t.user.limits.betToRain:-y,"leaderboard.points":null!==i&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?y:0,"affiliates.leaderboardpoints":S&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?y:0,"rakeback.earned":b,"rakeback.available":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),c.push(v.findByIdAndUpdate(t.bet._id,{payout:r,multiplier:Math.floor(r/y*100),cards:t.bet.cards,cardsLeft:t.bet.cardsLeft,cardsRight:t.bet.cardsRight,actions:t.bet.actions,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 19:case"end":return e.stop()}}),e)})),l.s();case 13:if((f=l.n()).done){e.next=17;break}return e.delegateYield(p(),"t0",15);case 15:e.next=13;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(10),l.e(e.t1);case 22:return e.prev=22,l.f(),e.finish(22);case 25:return ye[n].game.state="completed",ye[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:ce(ye[n])}),e.next=30,Promise.all([y.findByIdAndUpdate(ye[n].game._id,{deck:ye[n].game.deck,dealerCards:ye[n].game.dealerCards,fair:ye[n].game.fair,state:"completed",updatedAt:(new Date).getTime()})].concat(s,c));case 30:b=e.sent,x=u(b.slice(1,s.length+1));try{for(x.s();!(S=x.n()).done;)_=S.value,t.of("/socket/general").to(_._id.toString()).emit("user",{user:_})}catch(e){x.e(e)}finally{x.f()}A=u(b.slice(s.length+1));try{for(A.s();!(O=A.n()).done;)j=O.value,me(t,a(a({},j),{},{user:E(j.user),method:"blackjack"}))}catch(e){A.e(e)}finally{A.f()}setTimeout(h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(ye[n].table,ye[n].game.type);case 2:ye[n].game=e.sent,ye[n].playersPos=null,ye[n].players=ye[n].players.map((function(e){return a(a({},e),{},{bet:null})})),Oe(t,ye[n]);case 6:case"end":return e.stop()}}),e)}))),3e3),e.next=41;break;case 38:e.prev=38,e.t2=e.catch(0),console.error(e.t2);case 41:case"end":return e.stop()}}),e,null,[[0,38],[10,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}(),Ne=function(){var e=h(d().mark((function e(t,r){var n,o,a,i,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],o=u(r.bets);try{for(o.s();!(a=o.n()).done;)i=a.value,c=Math.floor(i.amount.main+i.amount.sideLeft+i.amount.sideRight),n=[].concat(s(n),[v.findByIdAndUpdate(i._id,{payout:c,multiplier:100,updatedAt:(new Date).getTime()}),m.findByIdAndUpdate(i.user,{$inc:{balance:c,"stats.bet":-c},updatedAt:(new Date).getTime()})])}catch(e){o.e(e)}finally{o.f()}return e.next=6,Promise.all([y.findByIdAndUpdate(r._id,{state:"canceled",updatedAt:(new Date).getTime()})].concat(s(n)));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),De=function(){var e=h(d().mark((function e(t){var r,n,o,a,i,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.find({$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("state").populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank"}}).lean();case 3:r=e.sent,n=u(r);try{for(n.s();!(o=n.n()).done;)a=o.value,Ne(t,a)}catch(e){n.e(e)}finally{n.f()}i=0;case 7:if(!(i<Number(process.env.BLACKJACK_TABLES_STANDARD)+Number(process.env.BLACKJACK_TABLES_WHALE))){e.next=17;break}return s=i<Number(process.env.BLACKJACK_TABLES_STANDARD)?"standard":"whale",e.next=11,re(i,s);case 11:c=e.sent,ye.push({table:i,game:c,players:[],playersPos:null}),ve[i.toString()]=0;case 14:i++,e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();e.exports={blackjackSendJoinSocket:we,blackjackSendBetSocket:be,blackjackSendClearSocket:ke,blackjackSendInsuranceSocket:xe,blackjackSendHitSocket:Se,blackjackSendStandSocket:Ee,blackjackSendSplitSocket:_e,blackjackSendDoubleSocket:Ae,blackjackGetData:function(){return{tables:ue(ye)}},blackjackInit:De}},1204:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(2789);var s=r(6533),u=r(7908).socketRemoveAntiSpam,c=r(1567),l=c.adminCheckGetFilterListData,d=c.adminCheckSendFilterCreateData,f=c.adminCheckSendFilterCreateFilter,h=c.adminCheckSendFilterRemoveData,p=c.adminCheckSendFilterRemoveFilter,m=r(7089),y=m.generalChatAddFilter,v=m.generalChatRemoveFilter,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),u=12*(a.page-1),e.next=5,Promise.all([s.countDocuments({phrase:{$regex:a.search,$options:"i"}}),s.find({phrase:{$regex:a.search,$options:"i"}}).limit(12).skip(u).select("phrase createdAt").lean()]);case 5:c=e.sent,i({success:!0,count:c[0],filters:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),c=a.phrase.toLowerCase(),e.next=5,s.findOne({phrase:c}).select("phrase").lean();case 5:return l=e.sent,f(l),e.next=9,s.create({phrase:c});case 9:l=e.sent,y(l.phrase),i({success:!0,filter:l}),u(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,s.findById(a.filterId).select("phrase").lean();case 4:return c=e.sent,p(c),e.next=8,s.findByIdAndDelete(a.filterId);case 8:c=e.sent,v(c.phrase),i({success:!0,filter:c}),u(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetFilterListSocket:g,adminSendFilterCreateSocket:w,adminSendFilterRemoveSocket:b}},1275:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(5734).rateLimiter,u=r(7908),c=u.socketCheckUserData,l=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,f=r(8461).settingCheck,h=r(6998).cashierSendGiftRedeemSocket;e.exports=function(e,t){t.on("sendGiftRedeem",function(){var r,n=(r=o().mark((function r(n,a){var u,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,u=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(u);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 12:p=r.sent,c(p,!0),f(p,"gift.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},1325:e=>{e.exports=[[{rank:"A",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"},{rank:"10",suit:"club"},{rank:"3",suit:"club"}],[{rank:"3",suit:"club"},{rank:"A",suit:"diamond"},{rank:"J",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"6",suit:"heart"},{rank:"7",suit:"club"},{rank:"5",suit:"spade"}],[{rank:"6",suit:"club"},{rank:"5",suit:"heart"},{rank:"4",suit:"club"},{rank:"4",suit:"diamond"},{rank:"2",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"8",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"6",suit:"club"},{rank:"3",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"7",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"5",suit:"club"},{rank:"3",suit:"diamond"},{rank:"2",suit:"club"},{rank:"Q",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"3",suit:"diamond"},{rank:"4",suit:"heart"},{rank:"Q",suit:"spade"},{rank:"2",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"4",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"9",suit:"club"},{rank:"4",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"3",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"7",suit:"club"},{rank:"2",suit:"club"},{rank:"A",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"spade"},{rank:"4",suit:"club"},{rank:"3",suit:"club"},{rank:"3",suit:"heart"}],[{rank:"3",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"2",suit:"club"},{rank:"4",suit:"spade"},{rank:"10",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"2",suit:"club"},{rank:"9",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"5",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"6",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"3",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"5",suit:"spade"},{rank:"7",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"8",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"5",suit:"club"},{rank:"2",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"6",suit:"heart"},{rank:"5",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"A",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"8",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"J",suit:"diamond"},{rank:"2",suit:"club"},{rank:"A",suit:"club"},{rank:"6",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"5",suit:"heart"},{rank:"4",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"3",suit:"heart"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"A",suit:"heart"},{rank:"5",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"5",suit:"club"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"},{rank:"A",suit:"club"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"K",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"9",suit:"club"},{rank:"3",suit:"spade"},{rank:"4",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"2",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"6",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"4",suit:"heart"},{rank:"7",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"diamond"},{rank:"7",suit:"club"},{rank:"4",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"4",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"2",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"3",suit:"heart"},{rank:"A",suit:"spade"},{rank:"6",suit:"spade"},{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"3",suit:"heart"},{rank:"8",suit:"heart"},{rank:"6",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"4",suit:"spade"},{rank:"4",suit:"heart"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"3",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"A",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"4",suit:"club"},{rank:"5",suit:"club"},{rank:"6",suit:"heart"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"}],[{rank:"2",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"J",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"Q",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"heart"},{rank:"3",suit:"spade"},{rank:"6",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"2",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"K",suit:"heart"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"}],[{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"9",suit:"club"},{rank:"A",suit:"heart"},{rank:"2",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"3",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"A",suit:"club"},{rank:"9",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"spade"},{rank:"5",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"7",suit:"club"},{rank:"3",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"club"},{rank:"8",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"5",suit:"spade"},{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"spade"},{rank:"5",suit:"club"},{rank:"3",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"diamond"},{rank:"2",suit:"club"},{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"10",suit:"diamond"}],[{rank:"6",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"spade"},{rank:"3",suit:"spade"},{rank:"2",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"7",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"5",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"6",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"A",suit:"club"},{rank:"J",suit:"club"},{rank:"7",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"5",suit:"club"},{rank:"4",suit:"club"},{rank:"6",suit:"club"},{rank:"A",suit:"spade"},{rank:"5",suit:"diamond"}],[{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"heart"},{rank:"Q",suit:"heart"},{rank:"2",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"2",suit:"club"},{rank:"6",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"spade"},{rank:"A",suit:"club"},{rank:"9",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"A",suit:"spade"},{rank:"5",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"4",suit:"club"},{rank:"J",suit:"spade"},{rank:"3",suit:"spade"},{rank:"2",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"6",suit:"spade"},{rank:"Q",suit:"club"},{rank:"A",suit:"club"},{rank:"2",suit:"club"}],[{rank:"7",suit:"heart"},{rank:"2",suit:"club"},{rank:"2",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"10",suit:"spade"},{rank:"4",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"A",suit:"heart"},{rank:"9",suit:"heart"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"5",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"10",suit:"spade"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"3",suit:"club"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"},{rank:"A",suit:"heart"},{rank:"10",suit:"heart"}],[{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"10",suit:"club"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"5",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"3",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"A",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"6",suit:"club"},{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"4",suit:"heart"},{rank:"A",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"club"},{rank:"A",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"4",suit:"heart"},{rank:"6",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"5",suit:"heart"},{rank:"6",suit:"spade"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"4",suit:"heart"},{rank:"9",suit:"spade"},{rank:"2",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"}],[{rank:"7",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"5",suit:"club"},{rank:"10",suit:"spade"},{rank:"2",suit:"diamond"}],[{rank:"9",suit:"spade"},{rank:"2",suit:"club"},{rank:"2",suit:"spade"},{rank:"3",suit:"heart"},{rank:"5",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"spade"},{rank:"8",suit:"spade"},{rank:"5",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"},{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"3",suit:"diamond"}],[{rank:"2",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"5",suit:"heart"},{rank:"A",suit:"club"},{rank:"3",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"9",suit:"club"},{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"7",suit:"club"},{rank:"A",suit:"club"},{rank:"7",suit:"diamond"},{rank:"4",suit:"diamond"}]]},1373:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},playerCount:{type:Number},winner:{type:n.Schema.ObjectId,ref:"DuelsBet"},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"DuelsBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("DuelsGame",o)},1388:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(5734).rateLimiter,u=r(7908),c=u.socketCheckUserData,l=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,f=r(8461).settingCheck,h=r(1889).cashierSendCreditDepositSocket;e.exports=function(e,t){t.on("sendCreditDeposit",function(){var r,n=(r=o().mark((function r(n,a){var u,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,u=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(u);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:p=r.sent,c(p,!0),f(p,"credit.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},1418:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(1169),w=g.battlesGetData,b=g.battlesGetGameDataSocket,k=g.battlesSendCreateSocket,x=g.battlesSendBotSocket,S=g.battlesSendJoinSocket,E=g.battlesSendCancelSocket,_=g.battlesInit;e.exports=function(e){e.of("/socket/battles").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("battles",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w(t.decoded);case 18:i=e.sent,t.emit("init",{boxes:i.boxes,games:i.games,history:i.history}),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/battles").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("battles",r),t.on("getGameData",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,c.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,u.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:d(s,!1),v(s),b(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.battles.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBot",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.battles.enabled"),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendJoin",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.battles.enabled"),S(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCancel",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank limits anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.battles.enabled"),E(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("battles",r);case 2:case"end":return e.stop()}}),e)}))))})),_(e)}},1454:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var s=r(7906),u=function(e){var t=Math.floor((new Date(e).getTime()-(new Date).getTime())/1e3);return t>60?"".concat(Math.floor(t/60)," minutes"):"".concat(t," seconds")};e.exports={generalCheckGetChatMessagesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.room||null===e.room||"string"!=typeof e.room||!1===["en","tr","de","es","beg","whale"].includes(e.room))throw new Error("Your entered chat room is invalid.")},generalCheckSendChatMessageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.message||null===e.message||"string"!=typeof e.message||""===e.message.trim())throw new Error("Your entered chat message is invalid.");if(e.message.length>300)throw new Error("Your entered chat message is to long.")},generalCheckSendChatMessageRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(!1===["admin","mod"].includes(e.rank)&&!0!==t.chat.rooms[r].enabled)throw new Error("Your entered chat room is currently locked.");if("whale"===r&&e.stats.bet<1e9)throw new Error("Your need to have a minimum wager of 1,000,000 to use the whale chat.")},generalCheckSendChatMessageUser:function(e,t,r){if(void 0===e||void 0===t||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(0>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 1 to use the chat.");if(void 0!==e.mute&&void 0!==e.mute.expire&&new Date(e.mute.expire).getTime()>Date.now())throw new Error("You are still muted for another ".concat(u(e.mute.expire),"."));if("normal"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-3e3))throw new Error("You can only send 1 message every 3 seconds.");if("slow"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-6e3))throw new Error("You can only send 1 message every 6 seconds because the chat is in slow mode.")},generalCheckSendChatRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.messageId||null===e.messageId||"string"!=typeof e.messageId||!0!==s.isMongoId(e.messageId))throw new Error("Your entered chat message is invalid.")},generalCheckSendChatRemoveRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatRemoveMessage:function(e,t){if(!0!==t.some((function(t){return t._id.toString()===e.messageId.toString()})))throw new Error("Your entered chat message is not available.")},generalCheckSendChatClearRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatLockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.value||null===e.value||"boolean"!=typeof e.value)throw new Error("Your entered chat lock value is invalid.")},generalCheckSendChatLockRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(e.value===t.chat.rooms[r].enabled)throw new Error("Your entered chat room is already ".concat(!0===e.value?"unlocked":"locked","."))},generalGetChatOnlineCount:function(e){return new Promise(function(){var t,r=(t=a().mark((function t(r,n){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.of("/socket/general").in("en").allSockets(),e.of("/socket/general").in("tr").allSockets(),e.of("/socket/general").in("de").allSockets(),e.of("/socket/general").in("es").allSockets(),e.of("/socket/general").in("beg").allSockets(),e.of("/socket/general").in("whale").allSockets()]);case 3:o=t.sent,r({en:Math.floor(1.6*o[0].size),tr:Math.floor(1.6*o[1].size),de:Math.floor(1.6*o[2].size),es:Math.floor(1.6*o[3].size),beg:Math.floor(1.6*o[4].size),whale:Math.floor(1.6*o[5].size)}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r({en:0,tr:0,de:0,es:0,beg:0,whale:0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalChatGetMuteTime:u,generalFilterMessage:function(e,t){var r,n=s.escape(e),a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(a.s();!(r=a.n()).done;)for(var i=r.value,u=n.toLowerCase();!0===u.includes(i);){var c=u.indexOf(i);u=u.substring(0,c)+"*".repeat(i.length)+u.substring(c+i.length),n=n.substring(0,c)+"*".repeat(i.length)+n.substring(c+i.length)}}catch(e){a.e(e)}finally{a.f()}return n}}},1545:(e,t,r)=>{var n=r(6037),o=new n.Schema({items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}],user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserInventory",o)},1550:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetPromoListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendPromoCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered code is invalid.");if(void 0===e.reward||null===e.reward||!0===isNaN(e.reward)||Math.floor(e.reward)<10)throw new Error("Your entered code reward is invalid.");if(void 0===e.redeemptions||null===e.redeemptions||!0===isNaN(e.redeemptions)||Math.floor(e.redeemptions)<=0)throw new Error("Your entered code redeemptions is invalid.");if(void 0===e.level||null===e.level||!0===isNaN(e.level)||Math.floor(e.level)<0||Math.floor(e.level)>100)throw new Error("Your entered min level is invalid.");if(void 0===e.allowlevel||null===e.allowlevel||!0===isNaN(e.allowlevel)||0!=Math.floor(e.allowlevel)&&1!=Math.floor(e.allowlevel))throw new Error("Your entered allow level level is invalid.");if(void 0===e.ipallow||null===e.ipallow||!0===isNaN(e.ipallow)||0!=Math.floor(e.ipallow)&&1!=Math.floor(e.ipallow))throw new Error("Your entered allow level level is invalid.")},adminCheckSendPromoCreateCode:function(e){if(null!==e)throw new Error("Your entered code is already existing.")},adminCheckSendPromoRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.promoId||null===e.promoId||"string"!=typeof e.promoId||!0!==n.isMongoId(e.promoId))throw new Error("Your entered promo id is invalid.")},adminCheckSendPromoRemoveCode:function(e){if(null===e)throw new Error("Your entered code is not existing.")}}},1567:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetFilterListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendFilterCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.phrase||null===e.phrase||"string"!=typeof e.phrase||""===e.phrase.trim())throw new Error("Your entered filter phrase is invalid.")},adminCheckSendFilterCreateFilter:function(e){if(null!==e)throw new Error("Your entered filter prase is already existing.")},adminCheckSendFilterRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.filterId||null===e.filterId||"string"!=typeof e.filterId||!0!==n.isMongoId(e.filterId))throw new Error("Your entered filter id is invalid.")},adminCheckSendFilterRemoveFilter:function(e){if(null===e)throw new Error("Your entered filter id is not available.")}}},1572:e=>{"use strict";e.exports=require("nodemailer")},1590:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={adminCheckGetStatsListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminFormatStats:function(e){var r,n={daily:{start:new Date,profit:0},weekly:{start:new Date((new Date).getTime()-6048e5),end:new Date,profit:0},monthly:{start:new Date((new Date).getTime()-2592e6),end:new Date,profit:0},total:{start:e.length>0?new Date(e[e.length-1].createdAt):new Date,end:new Date,profit:0}},o=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.total.profit=n.total.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-2592e6&&(n.monthly.profit=n.monthly.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-6048e5&&(n.weekly.profit=n.weekly.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).toISOString().slice(0,10)===(new Date).toISOString().slice(0,10)&&(n.daily.profit=Math.floor(a.stats.total.deposit-a.stats.total.withdraw))))}}catch(e){o.e(e)}finally{o.f()}return n}}},1681:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendPromoClaimData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your entered captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered promo code is invalid.")},generalCheckSendPromoClaimCode:function(e,t,r){if(null===t)throw new Error("Your entered promo code is not available.");if(t.redeemptionsTotal>=t.redeemptionsMax||r.filter((function(e){return e===t._id.toString()}))>=t.redeemptionsMax-t.redeemptionsTotal)throw new Error("Your entered promo code is not available.");if(!0===t.redeemers.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("Your have already claimed this promo code.");if(null==t.allowLevel||0==t.allowLevel){if(t.levelMin>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your need to have a minimum level of ".concat(t.levelMin," to use this promo code."))}else{if(1!=t.allowLevel)throw new Error("Something went wrong.");if(t.levelMin!=Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your need to have a level of ".concat(t.levelMin," to use this promo code."))}}}},1703:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(7252).Router(),u=r(5734).rateLimiterStrictMiddleware,c=r(9472).requestGetProxy,l=r(7587).captchaGetDataRoblox;e.exports=function(){return s.get("/iframe",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.render("captcha",{frontendUrl:process.env.SERVER_FRONTEND_URL.split(",")[0]})}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),s.post("/api/arkose/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",u,function(){var e=i(o().mark((function e(t,r){var n,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.next=5,c(n,a);case 5:return i=e.sent,s="http://".concat(i.username,":").concat(i.password,"@").concat(i.proxy_address,":").concat(i.port),t.body.data.blob=t.body.data.blob.replaceAll(" ","+"),t.body.site="https://www.roblox.com",e.next=11,l(s,t,t.body);case 11:u=e.sent,r.send(u),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()),s}},1814:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var u=r(2789),c=r(5182),l=r(286),d=r(7908).socketRemoveAntiSpam,f=r(7587),h=f.captchaCheckData,p=f.captchaGetData,m=r(1681),y=m.generalCheckSendPromoClaimData,v=m.generalCheckSendPromoClaimCode,g=[],w=function(){var e,t=(e=o().mark((function e(t,r,n,i,s){var f,m,w,b,k,x,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(i),e.next=4,p(i.captcha);case 4:return f=e.sent,h(f),e.next=8,c.findOne({code:i.code.toLowerCase()}).select("code reward levelMin redeemers redeemptionsTotal redeemptionsMax allowLevel ipRestricktLevel").populate({path:"redeemers",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 8:if(m=e.sent,v(n,m,g),0!==m.ipRestricktLevel){e.next=16;break}w=[],b=a(m.redeemers);try{for(b.s();!(k=b.n()).done;)x=k.value,w.push(x.user.ips[0].address)}catch(e){b.e(e)}finally{b.f()}if(!w.includes(n.ips[0].address)){e.next=16;break}throw new Error("You are detected to use more than 2 accounts");case 16:return e.prev=16,g.push(m._id.toString()),e.next=20,Promise.all([u.findByIdAndUpdate(n._id,{$inc:{balance:m.reward,"limits.betToWithdraw":Math.floor(m.reward/2)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),c.findByIdAndUpdate(m._id,{$push:{redeemers:{user:n._id}},$inc:{redeemptionsTotal:1},updatedAt:(new Date).getTime()}),l.create({amount:m.reward,type:"promoCodeClaim",user:n._id,state:"completed"})]);case 20:S=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:S[0]}),s({success:!0}),g.splice(g.indexOf(m._id.toString()),1),d(n._id),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(16),g.splice(g.indexOf(m._id.toString()),1),d(r.decoded._id),s({success:!1,error:{type:"error",message:e.t0.message}});case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(0),d(r.decoded._id),s({success:!1,error:{type:"error",message:e.t1.message}});case 38:case"end":return e.stop()}}),e,null,[[0,34],[16,27]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={generalSendPromoClaimSocket:w}},1889:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}r(2789);var i=r(6363),s=(r(3304),r(7908).socketRemoveAntiSpam),u=r(3534),c=u.cashierCheckSendCreditDepositData,l=u.cashierCreditCreateSignature,d=u.cashierCreditCreateTransaction,f=u.cashierCreditCreateUrl,h=function(){var e,t=(e=o().mark((function e(t,r,n,a,u){var h,p,m,y,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(a),e.next=4,i.findOne({type:"deposit",user:n._id,state:"created"}).select("data type user state").lean();case 4:if(null!==(h=e.sent)){e.next=15;break}return(p={userId:n._id.toString()}).signature=l(p),e.next=10,d(p);case 10:return m=e.sent,e.next=13,i.create({data:{providerId:m.orderId,providerUrl:m.url},type:"deposit",user:n._id,state:"created"});case 13:h=(h=e.sent).toObject();case 15:return y=String(Math.floor(a.amount)/1e3*3/1e3),e.next=18,f(h.data.providerUrl,y);case 18:v=e.sent,u({success:!0,url:v}),s(n._id),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),s(r.decoded._id),u({success:!1,error:{type:"error",message:e.t0.message}});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendCreditDepositSocket:h}},1950:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckUserFullRank),f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(2997),m=p.adminGetLeaderboardListSocket,y=p.adminSendLeaderboardCreateSocket,v=p.adminSendLeaderboardStopSocket;e.exports=function(e,t){t.on("getLeaderboardList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["fulladmin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardStop",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2003:e=>{"use strict";e.exports=require("path")},2050:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}var u=r(3304),c=r(2789),l=r(1590),d=l.adminCheckGetStatsListData,f=(l.adminFormatStats,function(){var e=s(a().mark((function e(t,r,n,o,i){var s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.find({"affiliates.referrer":n._id}).sort({createdAt:-1}).select("stats.bet stats.deposit stats.withdraw createdAt").lean();case 3:s=e.sent,u=p(s,n.affiliates),i({success:!0,stats:u}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}()),h=function(){var e=s(a().mark((function e(t,r,n,o,i){var s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(o),s=12*(o.page-1),e.next=5,Promise.all([u.countDocuments({}),u.find({}).limit(12).skip(s).sort({createdAt:-1}).select("stats createdAt").lean()]);case 5:c=e.sent,i({success:!0,count:c[0],stats:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(e,t){var r,n={users:{amount:0},deposit:{amount:0},withdraw:{amount:0},revenue:{amount:0},wager:{amount:0},cashOut:{amount:0}},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.deposit.amount=n.deposit.amount+i.stats.deposit,n.withdraw.amount=n.withdraw.amount+i.stats.withdraw,n.wager.amount=n.wager.amount+i.stats.bet}}catch(e){a.e(e)}finally{a.f()}return n.users.amount=e.length,n.revenue.amount=n.deposit.amount-1.2*n.withdraw.amount,n.cashOut.amount=n.revenue.amount-t.cashOut,n};e.exports={adminGetStatsDataSocket:f,adminGetStatsListSocket:h}},2054:e=>{e.exports={generalCheckSendVaultDepositData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid deposit amount.")},generalCheckSendVaultDepositUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t deposit because your vault is locked.")},generalCheckSendVaultWithdrawData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.")},generalCheckSendVaultWithdrawUser:function(e,t){if(t.vault.amount<Math.floor(e.amount))throw new Error("You don’t have enough balance in the vault for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t withdraw because your vault is locked.")},generalCheckSendVaultLockData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<=0)throw new Error("You’ve entered an invalid lock time.")},generalCheckSendVaultLockUser:function(e){if(new Date(e.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t lock because your vault is already locked.")}}},2057:e=>{"use strict";e.exports=require("https")},2226:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckAntiSpam,f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(2681),m=p.generalSendVaultDepositSocket,y=p.generalSendVaultWithdrawSocket,v=p.generalSendVaultLockSocket;e.exports=function(e,t){t.on("sendVaultDeposit",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),m(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultWithdraw",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultLock",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2256:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcomes:[{type:Number}],slot:{type:Number},game:{type:n.Schema.ObjectId,ref:"BattlesGame"},user:{type:n.Schema.ObjectId,ref:"User"},bot:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BattlesBet",o)},2298:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},amountProcessed:{type:Number,default:0},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxOffer",o)},2299:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockNum:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"RouletteBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RouletteGame",o)},2328:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckAntiSpam),f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(9381),m=p.generalSendRainCreateSocket,y=p.generalSendRainTipSocket,v=p.generalSendRainJoinSocket;p.generalRainInit,e.exports=function(e,t){t.on("sendRainCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),m(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainTip",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainJoin",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank xp stats limits mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2396:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,u,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(8749),h=r(2789),p=r(5632),m=r(3844),y=r(6232),v=r(5958),g=r(4823),w=r(827),b=r(6930),k=r(6363),x=r(5329),S=r(286),E=r(988),_=r(6966),A=r(6769),O=r(5964),j=r(8702),I=r(4946),P=r(3702),T=r(2256),C=r(2974),G=r(5241),N=r(8455),D=r(7908).socketRemoveAntiSpam,Y=r(836),B=Y.generalCheckGetUserInfoData,U=Y.generalCheckGetUserInfoUser,R=Y.generalCheckGetUserBetsData,M=Y.generalCheckGetUserTransactionsData,F=Y.generalCheckSendUserAnonymousData,$=Y.generalCheckSendUserDiscordData,L=Y.generalCheckSendUserDiscordUser,q=Y.generalCheckSendUserSeedData,J=Y.generalCheckSendUserSeedGames,K=Y.generalCheckSendUserTipData,W=Y.generalCheckSendUserTipUser,V=Y.generalCheckSendUserTipReceiver,H=Y.userGetDiscordUserData,z=Y.generalUserGetFormated,Q=Y.generalSanitizeBets,X=Y.generalSanitizeUserSeed,Z=function(){var e=d(c().mark((function e(t,r,n,o,a){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,h.findById(o.userId).select("roblox.id username avatar rank xp stats createdAt").lean();case 4:i=e.sent,U(i),i=z(i),a({success:!0,user:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ee=function(){var e=d(c().mark((function e(t,r,n,o,i){var u,l,d,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,Promise.all([E.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),_.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),A.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),O.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),j.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),I.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),P.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),T.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),C.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),G.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),N.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),E.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),_.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),A.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),O.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),j.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),I.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),P.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcome fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),T.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcomes fair user createdAt").populate({path:"game",select:"fair"}).lean(),C.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcome items fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),G.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),N.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair",select:"seedServer hash seedPublic"}}).lean()]);case 4:u=e.sent,l=u.slice(0,8).reduce((function(e,t){return e+t}),0),(d=[].concat(s(u[11].map((function(e){return a(a({},e),{},{method:"crash"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"roll"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"duels"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"mines"})}))),s(u[16].map((function(e){return a(a({},e),{},{method:"towers"})}))),s(u[17].map((function(e){return a(a({},e),{},{method:"unbox"})}))),s(u[18].map((function(e){return a(a({},e),{},{method:"battles"})}))),s(u[19].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),s(u[20].map((function(e){return a(a({},e),{},{method:"plinko"})}))),s(u[21].map((function(e){return a(a({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=8*(o.page-1),h=8*o.page,d=d.slice(f,h),d=Q(d),i({success:!0,count:l,bets:d}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),te=function(){var e=d(c().mark((function e(t,r,n,o,i){var u,l,d,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),e.next=4,Promise.all([m.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),y.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),v.countDocuments({user:n._id,state:"completed"}),g.countDocuments({user:n._id,state:"completed"}),w.countDocuments({user:n._id,state:"completed"}),b.countDocuments({user:n._id,state:"completed"}),k.countDocuments({user:n._id,state:"completed"}),x.countDocuments({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}),S.countDocuments({user:n._id,state:"completed"}),m.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data deposit withdraw state createdAt").lean(),y.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data deposit withdraw state createdAt").lean(),v.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),g.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),w.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount type user state createdAt").lean(),b.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),k.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),x.find({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount sender receiver state createdAt").lean(),S.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount type user state createdAt").lean()]);case 4:u=e.sent,l=u.slice(0,9).reduce((function(e,t){return e+t}),0),(d=[].concat(s(u[9].map((function(e){return a(a({},e),{},{method:"robux"})}))),s(u[10].map((function(e){return a(a({},e),{},{method:"limited"})}))),s(u[11].map((function(e){return a(a({},e),{},{method:"steam"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"crypto"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"gift"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"credit"})}))),s(u[16].map((function(e){return a(a({},e),{},{method:"tip"})}))),s(u[17].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=8*(o.page-1),h=8*o.page,d=d.slice(f,h),i({success:!0,count:l,transactions:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),re=function(){var e=d(c().mark((function e(t,r,n,o,a){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.findOne({user:n._id,state:"active"}).select("seedClient seedServer hash nonce user state").lean(),p.findOne({user:n._id,state:"created"}).select("seedClient seedServer hash nonce user state").lean()]);case 3:i=e.sent,a({success:!0,seed:X(i[0])}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ne=function(){var e=d(c().mark((function e(t,r,n,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(o),e.next=4,h.findByIdAndUpdate(n._id,{anonymous:o.anonymous});case 4:a({success:!0,anonymous:o.anonymous}),D(n._id),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),D(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),oe=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,$(o),L(o,n),i=null,"link"!==o.method){e.next=11;break}return e.next=7,H(o.tokenDiscord);case 7:s=e.sent,i={discordId:s.id,updatedAt:(new Date).getTime()},e.next=12;break;case 11:i={$unset:{discordId:1},updatedAt:(new Date).getTime()};case 12:return e.next=14,h.findByIdAndUpdate(n._id,i,{new:!0}).select("roblox.id discordId username rank balance stats rakeback fair anonymous agreed mute ban updatedAt createdAt").lean();case 14:u=e.sent,a({success:!0,user:u}),D(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),D(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ae=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(o),e.next=4,Promise.all([p.findOne({user:n._id,state:"created"}).select("user state").lean(),p.findOne({user:n._id,state:"active"}).select("user state").lean(),j.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),I.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 4:return i=e.sent,J([].concat(s(i[2]),s(i[3]))),e.next=8,Promise.all([p.findByIdAndUpdate(i[1]._id,{seedClient:o.seedClient.trim(),updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 8:u=e.sent,a({success:!0,seed:X(u[0])}),D(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),D(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ie=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.findOne({user:n._id,state:"created"}).select("user state").lean(),p.findOne({user:n._id,state:"active"}).select("user state").lean(),j.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),I.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 3:return i=e.sent,J([].concat(s(i[2]),s(i[3]))),u=f.randomBytes(24).toString("hex"),l=f.createHash("sha256").update(u).digest("hex"),e.next=9,Promise.all([p.findByIdAndUpdate(i[1]._id,{seedServer:u,hash:l,updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 9:d=e.sent,a({success:!0,seed:X(d[0])}),D(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),D(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),se=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(o),W(o,n),e.next=5,h.findById(o.receiverId).select("balance ban");case 5:return i=e.sent,V(n,i),s=Math.floor(o.amount),e.next=10,Promise.all([h.findByIdAndUpdate(n._id,{$inc:{balance:-s,"limits.limitTip":n.limits.limitTip>s?-s:-n.limits.limitTip},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(i._id,{$inc:{balance:s,"limits.betToWithdraw":s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),x.create({amount:s,sender:{user:n._id},receiver:{user:i._id},user:n._id,state:"completed"})]);case 10:(u=e.sent)[2]=u[2].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),t.of("/socket/general").to(u[1]._id.toString()).emit("user",{user:u[1]}),t.of("/socket/general").to(u[1]._id.toString()).emit("userTip",{transaction:u[2]}),a({success:!0,transaction:u[2]}),D(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),D(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetUserInfoSocket:Z,generalGetUserBetsSocket:ee,generalGetUserTransactionsSocket:te,generalGetUserSeedSocket:re,generalSendUserAnonymousSocket:ne,generalSendUserDiscordSocket:oe,generalSendUserClientSeedSocket:ae,generalSendUserServerSeedSocket:ie,generalSendUserTipSocket:se}},2507:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(4229);e.exports={fairGetData:function(){return new Promise(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("https://eos.greymass.com/",{headers:{"Content-Type":"application/json"}});case 3:if(void 0===(n=e.sent)||200!==n.status){e.next=11;break}return e.next=7,n.json();case 7:a=e.sent,t({success:!0,data:a}),e.next=12;break;case 11:r();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())},fairGetBlockData:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("https://eos.greymass.com/v1/chain/get_block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({block_num_or_id:e})});case 3:if(void 0===(a=t.sent)||200!==a.status){t.next=11;break}return t.next=7,a.json();case 7:i=t.sent,r({success:!0,data:i}),t.next=12;break;case 11:n(new Error("Failed to fetch block data"));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}())}}},2541:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(7906),h=r(2789),p=r(3844),m=r(6232),y=r(5958),v=r(4823),g=r(827),w=r(6930),b=r(6363),k=r(5329),x=r(286),S=r(988),E=r(6966),_=r(8455),A=r(6769),O=r(5964),j=r(8702),I=r(4946),P=r(3702),T=r(2256),C=r(2974),G=r(5241),N=r(7908).socketRemoveAntiSpam,D=r(7986),Y=D.adminCheckGetUserListData,B=D.adminCheckGetUserDataData,U=D.adminCheckGetUserDataUser,R=D.adminCheckGetUserTransactionsData,M=D.adminCheckGetUserGamesData,F=D.adminCheckSendUserValueData,$=D.adminCheckSendUserBalanceData,L=D.adminCheckSendUserBalanceUser,q=D.adminCheckSendUserMuteData,J=D.adminCheckSendUserBanData,K=D.adminFormatUserSort,W=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,c,l,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(o),i=12*(o.page-1),c=K(o.sort),l=n.fullrank,d={$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},"fulladmin"!==l&&(d={$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}),!0===f.isMongoId(o.search)&&(d.$or=[].concat(u(d.$or),[{_id:o.search}])),e.next=10,Promise.all([h.countDocuments(d),h.find(d).sort(c).limit(12).skip(i).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt affiliates").populate({path:"affiliates.referrer",select:"username"}).lean()]);case 10:p=e.sent,a({success:!0,count:p[0],users:p[1]}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),V=function(){var e=d(s().mark((function e(t,r,n,o,a){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,h.findById(o.userId).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:i=e.sent,U(i),a({success:!0,data:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=d(s().mark((function e(t,r,n,o,i){var c,l,d,f,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,Promise.all([p.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}),m.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}),y.countDocuments({user:o.userId,state:"completed"}),v.countDocuments({user:o.userId,state:"completed"}),g.countDocuments({state:"completed"}),w.countDocuments({user:o.userId,state:"completed"}),b.countDocuments({user:o.userId,state:"completed"}),k.countDocuments({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}),x.countDocuments({user:o.userId,state:"completed"}),p.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),m.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),y.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),v.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),g.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean(),w.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),b.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),k.find({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount sender receiver state createdAt").populate({path:"sender.user",select:"username"}).populate({path:"receiver.user",select:"username"}).lean(),x.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean()]);case 4:c=e.sent,l=c.slice(0,9).reduce((function(e,t){return e+t}),0),(d=[].concat(u(c[9].map((function(e){return a(a({},e),{},{method:"robux"})}))),u(c[10].map((function(e){return a(a({},e),{},{method:"limited"})}))),u(c[11].map((function(e){return a(a({},e),{},{method:"steam"})}))),u(c[12].map((function(e){return a(a({},e),{},{method:"crypto"})}))),u(c[13].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),u(c[14].map((function(e){return a(a({},e),{},{method:"gift"})}))),u(c[15].map((function(e){return a(a({},e),{},{method:"credit"})}))),u(c[16].map((function(e){return a(a({},e),{},{method:"tip"})}))),u(c[17].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(o.page-1),h=14*o.page,d=d.slice(f,h),i({success:!0,count:l,transactions:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=d(s().mark((function e(t,r,n,o,i){var c,l,d,f,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),e.next=4,Promise.all([S.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),E.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),A.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),O.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),j.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),I.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),P.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),T.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),C.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),G.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),_.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),S.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier user game createdAt").lean(),E.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),A.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier actions user game createdAt").lean(),O.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),j.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),I.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),P.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),T.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),C.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),G.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),_.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier user game createdAt").lean()]);case 4:c=e.sent,l=c.slice(0,9).reduce((function(e,t){return e+t}),0),(d=[].concat(u(c[11].map((function(e){return a(a({},e),{},{method:"crash"})}))),u(c[12].map((function(e){return a(a({},e),{},{method:"roll"})}))),u(c[13].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),u(c[14].map((function(e){return a(a({},e),{},{method:"duels"})}))),u(c[15].map((function(e){return a(a({},e),{},{method:"mines"})}))),u(c[16].map((function(e){return a(a({},e),{},{method:"towers"})}))),u(c[17].map((function(e){return a(a({},e),{},{method:"unbox"})}))),u(c[18].map((function(e){return a(a({},e),{},{method:"battles"})}))),u(c[19].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),u(c[20].map((function(e){return a(a({},e),{},{method:"plinko"})}))),u(c[21].map((function(e){return a(a({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(o.page-1),h=14*o.page,d=d.slice(f,h),i({success:!0,count:l,games:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=d(s().mark((function e(t,r,n,o,a){var u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(o),e.next=4,h.findByIdAndUpdate(o.userId,i({},o.setting,o.value),{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:u=e.sent,a({success:!0,user:u}),N(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),N(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,L(i),u=Math.floor(o.balance),e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{balance:u},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),x.create({amount:Math.floor(u-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:c=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:c[0]}),a({success:!0,user:c[0]}),N(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),N(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,L(i),u=o.balance,e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{"affiliates.depobonus":u},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),x.create({amount:Math.floor(u-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:c=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:c[0]}),a({success:!0,user:c[0]}),N(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),N(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ee=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{mute:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:u=e.sent,a({success:!0,user:u}),N(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),te=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{ban:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:u=e.sent,a({success:!0,user:u}),N(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetUserListSocket:W,adminGetUserDataSocket:V,adminGetUserTransactionListSocket:H,adminGetUserGameListSocket:z,adminSendUserValueSocket:Q,adminSendUserBalanceSocket:X,adminSendAffiliateBonusSocket:Z,adminSendUserMuteSocket:ee,adminSendUserBanSocket:te}},2566:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam),h=c.socketRemoveAntiSpam,p=r(6245),m=p.adminGetAffiliateListSocket,y=p.adminSendAffiliateBlockSocket,v=p.adminSendAffiliateClearSocket,g=p.adminSendAffiliateCodeSocket,w=p.adminSendAffiliateAvailableSocket,b=p.adminGetAffiliateItemSocket,k=p.adminSendAffiliateCashSocket;e.exports=function(e,t){t.on("getAffiliateList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getAffiliateItem",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),b(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBlock",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClear",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateAvailable",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCash",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2577:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckAntiSpam),f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(9974),m=p.cashierGetRobuxDataSocket,y=p.cashierSendRobuxDepositSocket,v=p.cashierSendRobuxWithdrawSocket,g=p.cashierSendRobuxCancelSocket;e.exports=function(e,t){t.on("getRobuxData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 11:c=r.sent;case 12:l(c,!0),h(c),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxDeposit",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban stats").lean();case 12:c=r.sent,l(c,!0),h(c,"robux.deposit.enabled"),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxWithdraw",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban stats").lean();case 12:c=r.sent,l(c,!0),h(c,"robux.withdraw.enabled"),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxCancel",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2622:(e,t,r)=>{var n=r(7252).Router();e.exports=function(e){return n.get("/",(function(e,t){t.status(200).json({success:!0})})),n.use("/captcha",r(1703)()),n.use("/auth",r(585)()),n.use("/leaderboard",r(7558)()),n.use("/callback",r(1160)(e)),n}},2681:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=(r(286),r(7908).socketRemoveAntiSpam),c=r(2054),l=c.generalCheckSendVaultDepositData,d=c.generalCheckSendVaultDepositUser,f=c.generalCheckSendVaultWithdrawData,h=c.generalCheckSendVaultWithdrawUser,p=c.generalCheckSendVaultLockData,m=c.generalCheckSendVaultLockUser,y=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),d(a,n),c=Math.floor(a.amount),e.next=6,s.findByIdAndUpdate(n._id,{$inc:{balance:-c,"vault.amount":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:f=e.sent,i({success:!0,user:f}),u(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),u(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),h(a,n),c=Math.floor(a.amount),e.next=6,s.findByIdAndUpdate(n._id,{$inc:{balance:c,"vault.amount":-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:l=e.sent,i({success:!0,user:l}),u(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),u(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),g=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(a),m(n),c=Math.floor(a.time),e.next=6,s.findByIdAndUpdate(n._id,{"vault.expireAt":(new Date).getTime()+c,updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:l=e.sent,i({success:!0,user:l}),u(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),u(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalSendVaultDepositSocket:y,generalSendVaultWithdrawSocket:v,generalSendVaultLockSocket:g}},2724:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}var c=r(7906),l=r(7252).Router(),d=r(2789),f=r(4276).authorizeUser,h=r(5734).rateLimiterStrictMiddleware,p=r(9472).requestGetProxy,m=r(84).authGenerateJwtToken,y=r(168),v=y.authCheckPostRobloxData,g=y.authCheckPostRobloxUser,w=y.authCheckPostRobloxTwoStepData,b=y.authCheckPostRobloxTwoStepUser,k=y.authCheckPostRobloxCookieData,x=y.authCheckPostRobloxCookieUser,S=y.authSetUser,E=y.authRobloxGetIntent,_=y.authRobloxGetToken,A=y.authRobloxGetUser,O=y.authRobloxGetUserAge,j=y.authRobloxGetAvatar,I=y.authRobloxGetServerNonce,P=y.authGetRobloxSecurityQuestion,T=y.authGetRobloxGamesData,C=y.authSendRobloxChallengeContinue,G=y.authSendRobloxSecurityAnswer,N=y.authSendRobloxTwoStepVerify,D=y.authSendRobloxLogin,Y=y.authSendRobloxTwoStepLogin;y.authRobloxGetUserDefault,e.exports=function(){return l.post("/",[h,f(!1)],function(){var e=u(i().mark((function e(t,r){var n,o,a,s,u,l,f,h,y,w,b,k,x,N,Y,B;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,o=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,o);case 6:return a=e.sent,s="http://".concat(a.username,":").concat(a.password,"@").concat(a.proxy_address,":").concat(a.port),e.next=10,_(s);case 10:if(u=e.sent,l={ctype:"Username",cvalue:t.body.username,password:t.body.password},"captcha"!==t.body.step&&"security"!==t.body.step){e.next=23;break}return l.captchaProvider="PROVIDER_ARKOSE_LABS",l.captchaId=t.body.captchaId,l.captchaToken=t.body.captchaToken,l.challengeId=t.body.challengeId,l.challengeType="captcha",l.challengeMetadata=JSON.stringify({unifiedCaptchaId:l.captchaId,captchaToken:l.captchaToken,actionType:"Login"}),e.next=21,C(s,u,null,l);case 21:e.next=29;break;case 23:return e.next=25,I(s);case 25:return f=e.sent,e.next=28,E(f);case 28:l.secureAuthenticationIntent=e.sent;case 29:if("security"!==t.body.step){e.next=35;break}return e.next=32,G(u,s,{answer:t.body.answer,userId:t.userId,sessionId:t.body.sessionId});case 32:h=e.sent,l.securityQuestionSessionId=t.body.sessionId,l.securityQuestionRedemptionToken=h.securityQuestionRedemptionToken;case 35:return e.next=37,D(t,u,s,l);case 37:if(void 0===(y=e.sent).captchaId){e.next=42;break}r.status(200).json({success:!0,step:"captcha",challengeId:y.challengeId,captchaId:y.captchaId,captchaBlob:y.captchaBlob,secureAuthenticationIntent:y.secureAuthenticationIntent}),e.next=80;break;case 42:if(void 0===y.sessionId){e.next=53;break}return e.next=45,P(u,s,y.userId,y.sessionId);case 45:return w=e.sent,e.next=48,T(u,s,w.answerChoices);case 48:b=(b=e.sent).map((function(e){return{id:e.id,name:e.name,description:e.description}})),r.status(200).json({success:!0,step:"security",challengeId:t.body.challengeId,captchaId:t.body.captchaId,captchaToken:t.body.captchaToken,sessionId:y.sessionId,userId:y.userId,answers:b}),e.next=80;break;case 53:if(void 0===y.twoStepVerificationData){e.next=57;break}r.status(200).json({success:!0,step:"twostep",type:y.twoStepVerificationData.mediaType,ticket:y.twoStepVerificationData.ticket,robloxId:y.user.id}),e.next=80;break;case 57:return console.log("1111"),e.next=60,A(s,y.cookie);case 60:return k=e.sent,e.next=63,Promise.all([O(s,k.id),j(s,k.id)]);case 63:if(x=e.sent,null===t.user){e.next=75;break}return e.next=67,Promise.all([d.findById(t.user._id).select("roblox.id").lean(),d.findOne({"roblox.id":k.id}).select("roblox.id").lean()]);case 67:return N=e.sent,g(N[0],N[1]),e.next=71,d.findByIdAndUpdate(t.user._id,{roblox:{id:k.id,cookie:y.cookie,createdAt:new Date(x[0]).getTime()},username:c.escape(k.name),avatar:x[1],proxy:s,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 71:N=e.sent,r.status(200).json({success:!0,user:N}),e.next=80;break;case 75:return e.next=77,S(s,n,y.cookie,k,x[0],x[1]);case 77:Y=e.sent,B=m(Y._id),r.status(200).json({success:!0,token:B,user:Y});case 80:e.next=85;break;case 82:e.prev=82,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 85:case"end":return e.stop()}}),e,null,[[0,82]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/twostep",[h,f(!1)],function(){var e=u(i().mark((function e(t,r){var n,o,a,s,u,l,f,h,y,v,g,k,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,o=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,o);case 6:return a=e.sent,s="http://".concat(a.username,":").concat(a.password,"@").concat(a.proxy_address,":").concat(a.port),e.next=10,_(s);case 10:return u=e.sent,l={actionType:"Login",challengeId:t.body.ticket,code:t.body.code},e.next=14,N(s,u,null,t.body.robloxId,t.body.type,l);case 14:return f=e.sent,l={challengeId:l.challengeId,verificationToken:f.verificationToken,rememberDevice:!0},e.next=18,Y(u,s,t.body.robloxId,l);case 18:return h=e.sent,e.next=21,A(s,h.cookie);case 21:return y=e.sent,e.next=24,Promise.all([O(s,y.id),j(s,y.id)]);case 24:if(v=e.sent,null===t.user){e.next=36;break}return e.next=28,Promise.all([d.findById(t.user._id).select("roblox.id").lean(),d.findOne({"roblox.id":y.id}).select("roblox.id").lean()]);case 28:return g=e.sent,b(g[0],g[1]),e.next=32,d.findByIdAndUpdate(t.user._id,{roblox:{id:y.id,cookie:h.cookie,createdAt:new Date(v[0]).getTime()},username:c.escape(y.name),avatar:v[1],proxy:s,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 32:g=e.sent,r.status(200).json({success:!0,user:g}),e.next=41;break;case 36:return e.next=38,S(s,n,h.cookie,y,v[0],v[1]);case 38:k=e.sent,x=m(k._id),r.status(200).json({success:!0,token:x,user:k});case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 46:case"end":return e.stop()}}),e,null,[[0,43]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/cookie",[h,f(!1)],function(){var e=u(i().mark((function e(t,r){var n,a,s,u,l,f,h,y,v,g,w,b,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,a);case 6:return s=e.sent,console.log("user proxy: ",s),u="http://".concat(s.username,":").concat(s.password,"@").concat(s.proxy_address,":").concat(s.port),l=t.body.cookie.replace(".ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_",""),e.next=12,A(u,l);case 12:return f=e.sent,h=o(f,2),y=h[0],v=h[1],console.log("roblox user: ",y),t.body.cookie=v,e.next=20,Promise.all([O(u,y.id),j(u,y.id)]);case 20:if(g=e.sent,null===t.user){e.next=32;break}return e.next=24,Promise.all([d.findById(t.user._id).select("roblox.id").lean(),d.findOne({"roblox.id":y.id}).select("roblox.id").lean()]);case 24:return w=e.sent,x(w[0],w[1]),e.next=28,d.findByIdAndUpdate(t.user._id,{roblox:{id:y.id,cookie:t.body.cookie,createdAt:new Date(g[0]).getTime()},username:c.escape(y.name),avatar:g[1],proxy:u,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 28:w=e.sent,r.status(200).json({success:!0,user:w}),e.next=37;break;case 32:return e.next=34,S(u,n,t.body.cookie,y,g[0],g[1]);case 34:b=e.sent,E=m(b._id),r.status(200).json({success:!0,token:E,user:b});case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 42:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r){return e.apply(this,arguments)}}()),l}},2725:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},slug:{type:String},amount:{type:Number},levelMin:{type:Number},items:[{item:{type:n.Schema.ObjectId,ref:"LimitedItem"},tickets:{type:Number},tickets1:{type:Number},tickets2:{type:Number}}],categories:[{type:String}],type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Box",o)},2745:(e,t,r)=>{var n=r(7906);e.exports={cashierCheckSendGiftRedeemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US"))throw new Error("Your provided gift code is invalid.")},cashierCheckSendGiftRedeemCode:function(e,t){if(null===e||void 0!==e.redeemer||!0===t.includes(e._id.toString()))throw new Error("Your provided gift code is not available.")}}},2773:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckAntiSpam),f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(7046),m=p.generalGetAffiliateDataSocket,y=p.generalSendAffiliateCodeSocket,v=p.generalSendAffiliateClaimCodeSocket,g=p.generalSendAffiliateClaimEarningsSocket;e.exports=function(e,t){t.on("getAffiliateData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank affiliates agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!0),h(c),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimCode",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank affiliates mute ban").lean();case 12:c=r.sent,l(c,!0),h(c,"general.affiliate.enabled"),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimEarnings",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2789:(e,t,r)=>{var n=r(6037),o=new n.Schema({local:{email:{type:String},emailVerified:{type:Boolean},password:{type:String}},roblox:{id:{type:String},cookie:{type:String},createdAt:{type:Date}},google:{id:{type:String},email:{type:String}},discord:{id:{type:String}},username:{type:String},avatar:{type:String},rank:{type:String,default:"user"},fullrank:{type:String,default:"user"},balance:{type:Number,default:0},xp:{type:Number,default:0},vault:{amount:{type:Number,default:0},expireAt:{type:Date}},stats:{bet:{type:Number,default:0},won:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},leaderboard:{points:{type:Number,default:0}},limits:{betToWithdraw:{type:Number,default:0},betToRain:{type:Number,default:0},blockAffiliate:{type:Boolean,default:!1},blockRain:{type:Boolean,default:!1},blockTip:{type:Boolean,default:!1},limitTip:{type:Number,default:0},blockSponsor:{type:Boolean,default:!1},blockLeaderboard:{type:Boolean,default:!1}},rakeback:{earned:{type:Number,default:0},available:{type:Number,default:0}},affiliates:{code:{type:String},leaderboardpoints:{type:Number,default:0},referred:{type:Number,default:0},bet:{type:Number,default:0},deposit:{type:Number,default:0},earned:{type:Number,default:0},available:{type:Number,default:0},generated:{type:Number,default:0},referrer:{type:n.Schema.ObjectId,ref:"User"},referredAddress:{type:String},referredAt:{type:Date},redeemedCode:{type:String},depobonus:{type:Number,default:0},cashOut:{type:Number,default:0},cashOutAt:{type:Date}},fair:{clientSeed:{type:String}},anonymous:{type:Boolean,default:!1},proxy:{type:String},ips:[{address:{type:String},createdAt:{type:Date,default:Date.now}}],mute:{expire:{type:Date},reason:{type:String}},ban:{expire:{type:Date},reason:{type:String}},verifiedAt:{type:Date},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("User",o)},2848:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(5734),c=(u.rateLimiter,u.rateLimiterStrict,r(7908)),l=c.socketCheckConnectionLimit,d=c.socketAddConnectionLimit,f=c.socketRemoveConnectionLimit,h=r(9974).cashierRobuxInit,p=(r(4330).cashierLimitedInit,r(485).cashierCryptoInit);e.exports=function(e){e.of("/socket/cashier").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("cashier",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=22;break;case 19:return e.prev=19,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 22:case"end":return e.stop()}}),e,null,[[0,19],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/cashier").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;d("cashier",n),r(2577)(e,t),r(9109)(e,t),r(7711)(e,t),r(6888)(e,t),r(1275)(e,t),r(1388)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("cashier",r);case 2:case"end":return e.stop()}}),e)}))))})),h(e),p(e)}},2934:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=(r(2789),r(5734)),c=(u.rateLimiter,u.rateLimiterStrict,r(7908)),l=c.socketCheckConnectionLimit,d=c.socketAddConnectionLimit,f=c.socketRemoveConnectionLimit;r(8461).settingGet,e.exports=function(e){e.of("/socket/admin").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("admin",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("You need to sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/admin").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;d("admin",n),r(8629)(e,t),r(3260)(e,t),r(2566)(e,t),r(7078)(e,t),r(3425)(e,t),r(9420)(e,t),r(6040)(e,t),r(9544)(e,t),r(8725)(e,t),r(1950)(e,t),r(7526)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("admin",r);case 2:case"end":return e.stop()}}),e)}))))}))}},2973:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=(r(2789),r(5734)),c=(u.rateLimiter,u.rateLimiterStrict,r(7908)),l=c.socketCheckConnectionLimit,d=c.socketAddConnectionLimit,f=c.socketRemoveConnectionLimit;r(8461).settingGet,e.exports=function(e){e.of("/socket/streammer").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("streammer",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("You need to sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/streammer").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;d("streammer",n),r(305)(e,t),r(469)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("streammer",r);case 2:case"end":return e.stop()}}),e)}))))}))}},2974:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},mode:{type:String},items:[{assetid:{type:String},name:{type:String},image:{type:String},amount:{type:Number},price:{type:Number},count:{type:Number}}],percentage:{type:Number},outcome:{type:Number},transaction:{type:n.Schema.ObjectId,ref:"SteamTransaction"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},publicSeed:{type:String},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UpgraderGame",o)},2997:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(8744),c=r(7908).socketRemoveAntiSpam,l=r(8610),d=l.adminCheckGetLeaderboardListData,f=l.adminCheckSendLeaderboardCreateData,h=l.adminCheckSendLeaderboardStopData,p=l.adminCheckSendLeaderboardStopLeaderboard,m=r(8078),y=m.generalLeaderboardStart,v=m.generalLeaderboardStop,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),s=12*(a.page-1),e.next=5,Promise.all([u.countDocuments({type:{$regex:a.search,$options:"i"}}),u.find({type:{$regex:a.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(s).select("winners duration type state createdAt").lean()]);case 5:c=e.sent,i({success:!0,count:c[0],leaderboards:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var l,d,h,p,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),e.next=4,u.findOne({state:"running"}).select("state").lean();case 4:return l=e.sent,d=Math.floor(a.duration),h=a.prizes.map((function(e){return{prize:e.amount}})),p=[],p=[u.create({winners:h,duration:d,type:a.type,state:null===l?"running":"created"})],null===l&&p.push(s.updateMany({},{"leaderboard.points":0},{})),e.next=12,Promise.all(p);case 12:(m=e.sent)[0]=m[0].toObject(),"running"===m[0].state&&y(t,m[0]),i({success:!0,leaderboard:m[0]}),c(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,Promise.all([u.findById(a.leaderboardId).select("state").lean()]);case 4:if(s=e.sent,p(s[0]),"created"!==s[0].state){e.next=12;break}return e.next=9,u.findByIdAndDelete(a.leaderboardId);case 9:s[0]=e.sent,e.next=16;break;case 12:return v(t,s[0]),e.next=15,u.findByIdAndUpdate(a.leaderboardId,{state:"canceled"},{new:!0});case 15:s[0]=e.sent;case 16:i({success:!0,leaderboard:s[0]}),c(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetLeaderboardListSocket:g,adminSendLeaderboardCreateSocket:w,adminSendLeaderboardStopSocket:b}},3170:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(5949),w=g.duelsGetData,b=g.duelsGetGameDataSocket,k=g.duelsSendCreateSocket,x=g.duelsSendBotSocket,S=g.duelsSendJoinSocket,E=g.duelsSendCancelSocket,_=g.duelsInit;e.exports=function(e){e.of("/socket/duels").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("duels",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=w(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/duels").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("duels",r),t.on("getGameData",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,c.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,u.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:d(s,!1),v(s),b(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.duels.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(3),console.error(r.t1),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBot",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.duels.enabled"),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(3),console.error(r.t1),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendJoin",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.duels.enabled"),S(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(3),console.error(r.t1),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCancel",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:s=r.sent,d(s,!0),v(s,"games.duels.enabled"),E(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(3),console.error(r.t1),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("duels",r);case 2:case"end":return e.stop()}}),e)}))))})),_(e)}},3184:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(8749),r(1024),r(2789),r(5632),r(8921),r(2974),r(8744),r(3304),r(7908).socketRemoveAntiSpam;var s=r(8747),u=(s.upgraderCheckGetItemsDataData,s.upgraderCheckSendCreateData,s.upgraderCheckSendCreateUser,s.upgraderCheckSendCreateSeed,s.upgraderCheckSendCreateMultiplier,s.upgraderSanitizeGame,s.upgraderFormatItemSelect,r(836)),c=(u.generalUserGetRakeback,u.generalUserGetFormated,r(5507).generalAddBetsList,function(){var e=i(o().mark((function e(t,r,n,a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}()),l=function(){var e=i(o().mark((function e(t,r,n,a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={upgraderGetItemsDataSocket:c,upgraderSendCreateSocket:l}},3232:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(7906),h=r(2789),p=r(3844),m=r(6232),y=r(5958),v=r(4823),g=r(6930),w=r(6363),b=r(5329),k=r(286),x=r(988),S=r(6966),E=r(6769),_=r(5964),A=r(8702),O=r(4946),j=r(3702),I=r(2256),P=r(2974),T=r(5241),C=r(7908).socketRemoveAntiSpam,G=r(7986),N=G.adminCheckGetUserListData,D=G.adminCheckGetUserDataData,Y=G.adminCheckGetUserDataUser,B=G.adminCheckGetUserTransactionsData,U=G.adminCheckGetUserGamesData,R=G.adminCheckSendUserValueData,M=G.adminCheckSendUserBalanceData,F=G.adminCheckSendUserBalanceUser,$=G.adminCheckSendUserMuteData,L=G.adminCheckSendUserBanData,q=G.adminFormatUserSort,J=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,c,l,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(o),i=12*(o.page-1),c=q(o.sort),l={"affiliates.referrer":n._id,$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},!0===f.isMongoId(o.search)&&(l.$or=[].concat(u(l.$or),[{_id:o.search}])),e.next=8,Promise.all([h.countDocuments(l),h.find(l).sort(c).limit(12).skip(i).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean()]);case 8:d=e.sent,a({success:!0,count:d[0],users:d[1]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),K=function(){var e=d(s().mark((function e(t,r,n,o,a){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(o),e.next=4,h.findById(o.userId).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:i=e.sent,Y(i),a({success:!0,data:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),W=function(){var e=d(s().mark((function e(t,r,n,o,i){var c,l,d,f,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,Promise.all([p.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}),m.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}),y.countDocuments({user:o.userId,state:"completed"}),v.countDocuments({user:o.userId,state:"completed"}),g.countDocuments({user:o.userId,state:"completed"}),w.countDocuments({user:o.userId,state:"completed"}),b.countDocuments({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}),k.countDocuments({user:o.userId,state:"completed"}),p.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),m.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),y.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),v.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),g.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),w.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),b.find({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount sender receiver state createdAt").populate({path:"sender.user",select:"username"}).populate({path:"receiver.user",select:"username"}).lean(),k.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean()]);case 4:c=e.sent,l=c.slice(0,8).reduce((function(e,t){return e+t}),0),(d=[].concat(u(c[8].map((function(e){return a(a({},e),{},{method:"robux"})}))),u(c[9].map((function(e){return a(a({},e),{},{method:"limited"})}))),u(c[10].map((function(e){return a(a({},e),{},{method:"steam"})}))),u(c[11].map((function(e){return a(a({},e),{},{method:"crypto"})}))),u(c[12].map((function(e){return a(a({},e),{},{method:"gift"})}))),u(c[13].map((function(e){return a(a({},e),{},{method:"credit"})}))),u(c[14].map((function(e){return a(a({},e),{},{method:"tip"})}))),u(c[15].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(o.page-1),h=14*o.page,d=d.slice(f,h),i({success:!0,count:l,transactions:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),V=function(){var e=d(s().mark((function e(t,r,n,o,i){var c,l,d,f,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(o),e.next=4,Promise.all([x.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),S.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),E.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),_.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),A.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),O.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),j.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),I.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),P.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),T.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),x.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),S.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),E.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout actions user createdAt").lean(),_.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),A.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),O.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),j.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),I.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),P.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),T.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean()]);case 4:c=e.sent,l=c.slice(0,8).reduce((function(e,t){return e+t}),0),(d=[].concat(u(c[10].map((function(e){return a(a({},e),{},{method:"crash"})}))),u(c[11].map((function(e){return a(a({},e),{},{method:"roll"})}))),u(c[12].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),u(c[13].map((function(e){return a(a({},e),{},{method:"duels"})}))),u(c[14].map((function(e){return a(a({},e),{},{method:"mines"})}))),u(c[15].map((function(e){return a(a({},e),{},{method:"towers"})}))),u(c[16].map((function(e){return a(a({},e),{},{method:"unbox"})}))),u(c[17].map((function(e){return a(a({},e),{},{method:"battles"})}))),u(c[18].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),u(c[19].map((function(e){return a(a({},e),{},{method:"plinko"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(o.page-1),h=14*o.page,d=d.slice(f,h),i({success:!0,count:l,games:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=d(s().mark((function e(t,r,n,o,a){var u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,h.findByIdAndUpdate(o.userId,i({},o.setting,o.value),{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:u=e.sent,a({success:!0,user:u}),C(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),C(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,F(i),u=Math.floor(o.balance),e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{balance:u},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),k.create({amount:Math.floor(u-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:c=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:c[0]}),a({success:!0,user:c[0]}),C(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{mute:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:u=e.sent,a({success:!0,user:u}),C(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),C(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=d(s().mark((function e(t,r,n,o,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{ban:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:u=e.sent,a({success:!0,user:u}),C(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),C(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetUserListSocket:J,adminGetUserDataSocket:K,adminGetUserTransactionListSocket:W,adminGetUserGameListSocket:V,adminSendUserValueSocket:H,adminSendUserBalanceSocket:z,adminSendUserMuteSocket:Q,adminSendUserBanSocket:X}},3239:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(8749),h=r(4229),p=r(2789),m=r(2298),y=r(4823),v=r(4825),g=r(3304),w=r(7908).socketRemoveAntiSpam,b=r(8521),k=b.cashierRobuxGetBlockOffer,x=b.cashierRobuxAddBlockOffer,S=b.cashierRobuxRemoveBlockOffer,E=r(9716),_=E.adminCheckGetCashierListData,A=E.adminCheckSendCashierCryptoActionData,O=E.adminCheckSendCashierCryptoActionTransaction,j=E.adminCheckSendCashierRobuxCancelData,I=E.adminCheckSendCashierRobuxCancelOffer,P=E.adminCheckSendCashierCreateData,T=E.adminCheckSendCashierCryptoActionDataByOxapay,C=[],G=function(){var e=d(o().mark((function e(t,r,n,a,s){var c,l,d,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(a),e.next=4,Promise.all([m.countDocuments({$or:[{state:"created"},{state:"pending"}]}),y.countDocuments({type:"withdraw",state:"pending"}),m.find({$or:[{state:"created"},{state:"pending"}]}).sort({createdAt:1}).limit(12*a.page).select("amount amountProcessed type user state").populate({path:"user",select:"username avatar rank"}).lean(),y.find({type:"withdraw",state:"pending"}).sort({createdAt:1}).limit(12*a.page).select("amount data type user state").populate({path:"user",select:"username avatar rank"}).lean()]);case 4:c=e.sent,l=c.slice(0,2).reduce((function(e,t){return e+t}),0),(d=[].concat(u(c[2].map((function(e){return i(i({},e),{},{method:"robux"})}))),u(c[3].map((function(e){return i(i({},e),{},{method:"crypto"})}))))).sort((function(e,t){return t.amount-e.amount})),f=12*(a.page-1),h=12*a.page,d=d.slice(f,h),s({success:!0,count:l,transactions:d}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),s({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),N=function(){var e=d(o().mark((function e(t,r,n,a,i){var s,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(a),e.next=4,y.findById(a.transactionId).select("amount data type user state").lean();case 4:return s=e.sent,O(s,C),e.prev=6,C.push(s._id.toString()),u=[],"approve"===a.action?(u=[y.findByIdAndUpdate(s._id,{"data.transaction":a.transactionHash,state:"completed"},{new:!0}).select("state").lean()],c=Math.floor(s.amount/1e3*process.env.COIN_RATE),g.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":c,"stats.crypto.withdraw":c}},{upsert:!0})):u=[y.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("state").lean(),p.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.total.withdraw":-s.amount,"stats.crypto.withdraw":-s.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.next=12,Promise.all(u);case 12:l=e.sent,"cancel"===a.action&&t.of("/socket/general").to(l[1]._id.toString()).emit("user",{user:l[1]}),i({success:!0,transaction:l[0]}),C.splice(C.indexOf(s._id.toString()),1),w(n._id),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(6),w(r.decoded._id),C.splice(C.indexOf(s._id.toString()),1),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 30:case"end":return e.stop()}}),e,null,[[0,26],[6,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),D=function(){var e=d(o().mark((function e(t,r,n,a,i){var s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(a),e.next=4,m.findById(a.offerId).select("amount amountProcessed type user state").lean();case 4:return s=e.sent,I(s,k()),e.prev=6,x(s._id.toString()),u=[],u=[m.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===s.type&&u.push(p.findByIdAndUpdate(s.user,{$inc:{balance:Math.floor(s.amount-s.amountProcessed),"stats.withdraw":-Math.floor(s.amount-s.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=13,Promise.all(u);case 13:c=e.sent,"withdraw"===s.type&&t.of("/socket/general").to(c[1]._id.toString()).emit("user",{user:c[1]}),t.of("/socket/cashier").to(c[0].user.toString()).emit("robuxOffer",{offer:c[0]}),i({success:!0,offer:c[0]}),S(s._id.toString()),w(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),w(r.decoded._id),S(s._id.toString()),i({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[6,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Y=function(){var e=d(o().mark((function e(t,r,n,a,i){var s,u,c,l,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,P(a),s=Math.floor(a.reward),u=Math.floor(a.count),c=[],l=0;l<u;l++)d=f.randomBytes(16).toString("hex").substring(0,16).toUpperCase(),c.push(v.create({code:d,reward:s}));return e.next=8,Promise.all(c);case 8:h=(h=e.sent).map((function(e){return e.toObject()})),i({success:!0,codes:h}),w(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),B=function(){var e=d(o().mark((function e(t,r,n,a,i){var s,u,c,l,d,f,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(a),e.next=4,y.findById(a.transactionId).select("amount data type user state").lean();case 4:if(s=e.sent,console.log("payout trx: ",s),O(s,C),e.prev=7,C.push(s._id.toString()),u=[],"approve"!==a.action){e.next=27;break}return c=null,l=s.data.currency,"usdt_erc20"===s.data.currency?(c="ERC20",l="usdt"):"usdt_trc20"===s.data.currency?(c="TRC20",l="usdt"):"eth"===s.data.currency&&(c="eth"),d=null!==c?{address:s.data.receiver,amount:(s.data.cryptoAmount/1e8).toFixed(8),currency:l.toUpperCase(),network:c,callback_url:"https://cheersino.com/api/callback/goon-oxapay-payout"}:{address:s.data.receiver,amount:(s.data.cryptoAmount/1e8).toFixed(8),currency:l.toUpperCase(),callback_url:"https://cheersino.com/api/callback/goon-oxapay-payout"},f={payout_api_key:process.env.PAYOUT_API_KEY,"content-type":"application/json"},e.next=18,h("https://api.oxapay.com/v1/payout",{method:"POST",headers:f,body:JSON.stringify(d)});case 18:return m=e.sent,console.log("request body: ",d),e.next=22,m.json();case 22:m=e.sent,console.log("payoutresponse: ",m),200===m.status?i({success:!0,transaction:s}):400===m.status?m.error.message?i({success:!1,error:{type:"error",message:m.error.message}}):i({success:!1,error:{type:"error",message:"Hey! The hotwallet is currently being filled for your withdrawal if this happens in 10 minutes again please report to the staff in our discord server."}}):i({success:!1,error:{type:"error",message:m.message}}),e.next=33;break;case 27:return u=[y.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("state").lean(),p.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.withdraw":-s.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.next=30,Promise.all(u);case 30:v=e.sent,t.of("/socket/general").to(v[1]._id.toString()).emit("user",{user:v[1]}),i({success:!0,transaction:v[0]});case 33:C.splice(C.indexOf(s._id.toString()),1),w(n._id),e.next=42;break;case 37:e.prev=37,e.t0=e.catch(7),w(r.decoded._id),C.splice(C.indexOf(s._id.toString()),1),i({success:!1,error:{type:"error",message:e.t0.message}});case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 48:case"end":return e.stop()}}),e,null,[[0,44],[7,37]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetCashierListSocket:G,adminSendCashierCryptoActionSocket:N,adminSendCashierRobuxCancelSocket:D,adminSendCashierCreateSocket:Y,adminAproveWithdrawCryptoByOxapay:B}},3260:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=c.socketCheckUserFullRank,h=c.socketCheckAntiSpam,p=c.socketRemoveAntiSpam,m=r(2541),y=m.adminGetUserListSocket,v=m.adminGetUserDataSocket,g=m.adminGetUserTransactionListSocket,w=m.adminGetUserGameListSocket,b=m.adminSendUserValueSocket,k=m.adminSendUserBalanceSocket,x=m.adminSendAffiliateBonusSocket,S=m.adminSendUserMuteSocket,E=m.adminSendUserBanSocket;e.exports=function(e,t){t.on("getUserList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(6),console.log(r.t0),a({success:!1,error:{type:"error",message:r.t0.message}});case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:case"end":return r.stop()}}),r,null,[[2,23],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactionList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),g(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserGameList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),w(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserValue",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),"limits.limitTip"===n.setting||"limits.blockTip"===n.setting?d(c,["admin"]):f(c,["fulladmin"]),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalance",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBonus",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserMute",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin","mod"]),S(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBan",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),f(c,["fulladmin"]),E(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},3298:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,u,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(8749),h=r(2789),p=r(5632),m=r(8702),y=r(8744),v=r(6112),g=r(8875),w=r(7908).socketRemoveAntiSpam,b=r(8461),k=b.settingGet,x=(b.getMinimumValue,b.getMaximumValue,b.findPercent),S=b.findCountPercent,E=r(9949),_=E.minesCheckSendBetData,A=E.minesCheckSendBetUser,O=E.minesCheckSendBetGame,j=E.minesCheckSendBetSeed,I=E.minesCheckSendRevealData,P=E.minesCheckSendRevealGame,T=E.minesCheckSendCashoutGame,C=E.minesGetGamePayout,G=E.minesGetGameDeck,N=E.minesSanitizeGame,D=r(836),Y=D.generalUserGetRakeback,B=D.generalUserGetFormated,U=r(5507).generalAddBetsList,R=[],M=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s,u,l,d,v,b,x,S,E,I,P,T,C,D,B;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(o),A(o,n),i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),O(i),e.next=7,p.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 7:return s=e.sent,j(s),e.next=11,y.findOne({state:"running"}).select("state").lean();case 11:return u=e.sent,l=Math.floor(o.amount),d=Math.floor(o.minesCount),v=k(),b=Y(n),x=!0!==n.limits.blockSponsor?Math.floor(l*b.percentage*v.general.reward.multiplier):0,S=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*l):0,E="".concat(s.seedServer,"-").concat(s.nonce,"-").concat(s.seedClient),I=f.createHash("sha256").update(E).digest("hex"),P=G(d,I),T=[],e.next=24,g.find({enabled:"true"}).select("creators").lean();case 24:return C=e.sent,D=C.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates.referrer)||void 0===t?void 0:t.toString())})),T=[h.findByIdAndUpdate(n._id,{$inc:{balance:-l,xp:!0!==n.limits.blockSponsor?Math.floor(l*process.env.XP_RATE*v.general.reward.multiplier):0,"stats.bet":l,"leaderboard.points":null!==u&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"affiliates.generated":S,"affiliates.leaderboardpoints":D&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"rakeback.earned":x,"rakeback.available":x},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(s._id,{$inc:{nonce:1}},{}),m.create({amount:l,minesCount:d,deck:P,fair:{seed:s._id,nonce:s.nonce},user:n._id,state:"created"})],void 0!==n.affiliates.referrer&&S>0&&T.push(h.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":S,"affiliates.available":S},updatedAt:(new Date).getTime()},{})),e.next=30,Promise.all(T);case 30:(B=e.sent)[2]=B[2].toObject(),R.push(B[2]),a({success:!0,user:B[0],game:N(B[2])}),w(n._id),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(0),w(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 41:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=d(c().mark((function e(t,r,n,o,i){var u,l,d,f,p,y,g,b,E,_,A,O,j;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I(o),u=R.find((function(e){return e.user._id.toString()===n._id.toString()})),P(u,o),l=Math.floor(o.tile),d=u.revealed.length+1,"coin"===u.deck[l]&&k().games.ctotal.enabled&&("user"===n.rank&&(f=x(u.amount,n.balance,k().games.cmines),Math.floor(100*Math.random())+1<f&&(u.deck=$(u.deck,l)),0===f&&(p=S(u.amount,u.minesCount,d,k().games.csmines),Math.floor(100*Math.random())+1<p&&(u.deck=$(u.deck,l)))),"mod"!==n.rank&&"partner"!==n.rank||(y=x(u.amount,n.balance,k().games.mcmines),Math.floor(100*Math.random())+1<y&&(u.deck=$(u.deck,l)),0===y&&(g=S(u.amount,u.minesCount,d,k().games.mcsmines),Math.floor(100*Math.random())+1<g&&(u.deck=$(u.deck,l))))),u.revealed.push({tile:l,value:u.deck[l]}),!("mine"===u.deck[l]||25-u.minesCount<=u.revealed.length)){e.next=26;break}return b="mine"!==u.deck[l]?C(u):0,E=Math.floor(b/u.amount*100),_=0===b||E>=125?u.amount:b,A=!0!==n.limits.blockSponsor?u.amount:0,O=[],O=[h.findByIdAndUpdate(n._id,{$inc:{balance:b,"stats.won":b,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-_)<=0?-n.limits.betToWithdraw:-_,"limits.betToRain":Math.floor(n.limits.betToRain-_)<=0?-n.limits.betToRain:-_},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),m.findByIdAndUpdate(u._id,{payout:b,multiplier:E,revealed:u.revealed,deck:u.deck,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier minesCount deck revealed user state updatedAt").lean()],b>0&&(O=[].concat(s(O),[v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*A)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.next=18,Promise.all(O);case 18:j=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===j[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:j[0]}),b>0&&t.of("/socket/general").emit("rain",{rain:j[2]}),U(t,a(a({},j[1]),{},{user:B(n),method:"mines"})),u=j[1],e.next=30;break;case 26:return e.next=28,m.findByIdAndUpdate(u._id,{revealed:u.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount minesCount deck revealed user state").lean();case 28:u=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===u._id.toString()})),1,u);case 30:i({success:!0,game:N(u)}),w(n._id),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(0),w(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 38:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(e,t){var r=s(e);if("mine"===r[t])return r;r[t]="mine";for(var n=0;n<r.length;n++)if("mine"===r[n]&&t!==n){r[n]="coin";break}return r},L=function(){var e=d(c().mark((function e(t,r,n,o,i){var s,u,l,d,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=R.find((function(e){return e.user._id.toString()===n._id.toString()})),T(s),u=C(s),l=Math.floor(u/s.amount*100),d=l>=125?s.amount:u,f=!0!==n.limits.blockSponsor?s.amount:0,e.next=9,Promise.all([h.findByIdAndUpdate(n._id,{$inc:{balance:u,"stats.won":u,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-d)<=0?-n.limits.betToWithdraw:-d,"limits.betToRain":Math.floor(n.limits.betToRain-d)<=0?-n.limits.betToRain:-d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),m.findByIdAndUpdate(s._id,{payout:u,multiplier:l,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier minesCount deck revealed user state updatedAt").lean(),v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*f)}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 9:p=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===p[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:p[2]}),U(t,a(a({},p[1]),{},{user:B(n),method:"mines"})),i({success:!0,user:p[0],game:N(p[1])}),w(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),w(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),q=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.find({state:"created"}).select("amount minesCount deck revealed user state").lean();case 3:R=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();e.exports={minesGetGame:function(e){var t=R.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?N(R[t]):null},minesSendBetSocket:M,minesSendRevealSocket:F,minesSendCashoutSocket:L,minesInit:q}},3304:(e,t,r)=>{var n=r(6037),o=new n.Schema({stats:{total:{user:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},limited:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},robux:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},steam:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},crypto:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},gift:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},credit:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}}},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Report",o)},3425:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckUserFullRank),f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(1204),m=p.adminGetFilterListSocket,y=p.adminSendFilterCreateSocket,v=p.adminSendFilterRemoveSocket;e.exports=function(e,t){t.on("getFilterList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["fulladmin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterRemove",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},3534:(e,t,r)=>{function n(){"use strict";n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(n,a,s,u){var c=f(e[n],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==i(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var n;l(this,"_invoke",(function(e,o){function a(){return new t((function(t,n){r(e,o,t,n)}))}return n=n?n.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function o(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,u,"next",e)}function u(e){o(i,n,a,s,u,"throw",e)}s(void 0)}))}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=r(8749),c=r(4229),l=r(758);e.exports={cashierCheckSendCreditDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<10)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CREDIT_MIN_AMOUNT))throw new Error("You can only deposit a min amount of ".concat(parseFloat(process.env.CREDIT_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux."))},cashierCreditCreateSignature:function(e){var t,r="",n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var o=t.value;"signature"!==o&&"object"!==i(e[o])&&(r+=e[o])}}catch(e){n.e(e)}finally{n.f()}return u.createHash("sha256").update("".concat(r).concat(process.env.ZEBRASMARKET_API_KEY)).digest("hex")},cashierCreditCreateTransaction:function(e){return new Promise(function(){var t=a(n().mark((function t(r,o){var a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={"content-type":"application/json;charset=UTF-8"},t.next=4,c("https://api.zebrasmarket.com/partner/".concat(process.env.ZEBRASMARKET_PARTNER,"/trade_url"),{method:"POST",headers:a,body:JSON.stringify(e)});case 4:if(200!==(i=t.sent).status){t.next=12;break}return t.next=8,i.json();case 8:i=t.sent,r(i.data),t.next=13;break;case 12:o(new Error("ERROR: ".concat(i.statusText)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),o(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCreditCreateUrl:function(e,t){return new Promise(function(){var r=a(n().mark((function r(o,i){var s,u,c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.launch({headless:"new"});case 2:return s=r.sent,r.next=5,s.newPage();case 5:return u=r.sent,r.prev=6,r.next=9,u.goto(e,{waitUntil:"networkidle0"});case 9:return r.next=11,u.click('input[type="number"]',{clickCount:3});case 11:return r.next=13,u.keyboard.press("Backspace");case 13:return r.next=15,u.type('input[type="number"]',t);case 15:return r.next=17,u.click("div.bg-pink-e6.hover");case 17:return s.on("targetcreated",function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("page"!==t.type()){e.next=4;break}return e.next=3,s.close();case 3:o(t.url());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=new Promise((function(t,r){setTimeout((function(){o(e)}),1e4)})),r.next=21,Promise.race([c,new Promise((function(){}))]);case 21:r.next=28;break;case 23:return r.prev=23,r.t0=r.catch(6),r.next=27,s.close();case 27:i(r.t0);case 28:case"end":return r.stop()}}),r,null,[[6,23]])})));return function(e,t){return r.apply(this,arguments)}}())}}},3602:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={generalCheckSendRainCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered rain amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_HOST_AMOUNT))throw new Error("You can only host a rain with a minmum amount of $".concat(parseFloat(process.env.RAIN_MIN_HOST_AMOUNT).toFixed(2),"."))},generalCheckSendRainCreateRain:function(e,t){if(null!==e)throw new Error("You need to wait for the current hosted rain to complete.");if(0!==t.length)throw new Error("You need to wait for the current hosted rain to complete.")},generalCheckSendRainCreateUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to create a rain at the moment.");if(Math.floor(e.amount)<25e4)throw new Error("Minimum rain host is 250R$.")},generalCheckSendRainTipData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered tip amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_TIP_AMOUNT))throw new Error("You can only tip a minmum amount of ".concat(parseFloat(process.env.RAIN_MIN_TIP_AMOUNT).toFixed(2)," CheerBux to the rain."))},generalCheckSendRainTipRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")},generalCheckSendRainTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to tip the rain at the moment.")},generalCheckSendRainJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.")},generalCheckSendRainJoinRain:function(e,t,r){if(null===t)throw new Error("Your entered rain is not available.");if(new Date(t.updatedAt).getTime()+12e4<=(new Date).getTime())throw new Error("Your entered rain is already completed");if(!0===t.participants.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("You can only join the rain once.");if("site"===t.type&&!0!==r.general.rain.enabled)throw new Error("The rain is currently unavailable at this time.")},generalCheckSendRainJoinUser:function(e,t,r){if(!0===e.limits.blockRain)throw new Error("You aren't allowed to join the rain at the moment.");if("site"===t.type&&3>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 3 to join the rain.");if("site"===t.type&&r.filter((function(e){return"site"===e.type})).length>=10)throw new Error("You aren't allowed to join the rain more then 10 times per 24 hours.")},generalCheckSendRainJoinTransactions:function(e){var r,n=0,o=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n=Math.floor(n+a.amount)}}catch(e){o.e(e)}finally{o.f()}if(n<5e3)throw new Error("You need to have aleast 5 coin deposited in the past one week.")}}},3688:e=>{"use strict";e.exports=require("https-proxy-agent")},3702:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcome:{type:Number},box:{type:n.Schema.ObjectId,ref:"Box"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UnboxGame",o)},3818:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}var c=r(7906),l=r(4229),d=r(8749);r(8938),e.exports={cashierCheckSendCryptoWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.currency||"string"!=typeof e.currency||!0!==["btc","eth","ltc","doge","trx","usdt","usdt_erc20","usdt_trc20","sol"].includes(e.currency))throw new Error("You’ve entered an invalid withdraw currency.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.");if(Math.floor(e.amount)<Math.floor(process.env.MIN_WITHDRAWAL_AMOUNT/process.env.COIN_RATE*1e3))throw new Error("Please try a minimum withdrawal of $5.");if(void 0===e.address||"string"!=typeof e.address||"btc"===e.currency&&!0!==c.isBtcAddress(e.address)||"eth"===e.currency&&!0!==c.isEthereumAddress(e.address)||"ltc"===e.currency&&!0!==/^([LM3]{1}[a-km-zA-HJ-NP-Z1-9]{26,33}||ltc1[a-z0-9]{39,59})$/.test(e.address))throw new Error("You’ve entered an invalid ".concat(e.currency," withdraw address."))},cashierCheckSendCryptoWithdrawUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(t.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(t.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===t.limits.blockSponsor)throw new Error("You aren`t allowed to withdraw at the moment. Please contact the support for more information.");if(t.stats.deposit<5e3)throw new Error("You need to deposit 5 coin to request withdraw.")},cashierCheckSendCryptoWithdrawTransactions:function(e){if(e.length>=2)throw new Error("You aren`t allowed to have more then 2 pending crypto withdraws.")},cashierCryptoGetPrices:function(){return new Promise(function(){var e=u(o().mark((function e(t,r){var n,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={cmd:"rates",short:1,accepted:2,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},i=Object.entries(n).map((function(e){var t=a(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),s={"content-type":"application/x-www-form-urlencoded",hmac:d.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(i).digest("hex")},e.next=6,l("https://www.coinpayments.net/api.php",{method:"POST",headers:s,body:new URLSearchParams(n)});case 6:if(!(u=e.sent).ok){e.next=14;break}return e.next=10,u.json();case 10:u=e.sent,t(u.result),e.next=15;break;case 14:r(new Error(u.statusText));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddress:function(e){return new Promise(function(){var t=u(o().mark((function t(r,n){var i,s,u,c,f,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={cmd:"get_callback_address",currency:e,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},s=Object.entries(i).map((function(e){var t=a(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),u={"content-type":"application/x-www-form-urlencoded",hmac:d.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(s).digest("hex")},c=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.next=8,l("https://www.coinpayments.net/api.php",{method:"POST",headers:u,body:new URLSearchParams(i)});case 8:return f=t.sent,t.next=11,Promise.race([f,c]);case 11:if(!(h=t.sent).ok){t.next=19;break}return t.next=15,h.json();case 15:"ok"===(h=t.sent).error&&h.result?r(h.result):(console.log("unkonw coinpay error: ",h.error),n(new Error("The network is busy while creating the coin account."))),t.next=20;break;case 19:n(new Error(h.statusText));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),n(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetPricesByOxapay:function(){return new Promise(function(){var e=u(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,l("https://api.oxapay.com/v1/common/prices",{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:200===(n=e.sent).status?t(n.data):r(new Error(n.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddressByOxapay:function(e){return new Promise(function(){var t=u(o().mark((function t(r,n){var a,i,s,u,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={network:e,auto_withdrawal:!1,email:"expertleeyang@gmail.com",callback_url:"https://cheersino.com/api/callback/goon-oxapay"},i={merchant_api_key:process.env.OXAPAY_MERCHANT_API_KEY,"content-type":"application/json"},s=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.next=7,l("https://api.oxapay.com/v1/payment/static-address",{method:"POST",headers:i,body:JSON.stringify(a)});case 7:return u=t.sent,t.next=10,Promise.race([u,s]);case 10:if(!(c=t.sent).ok){t.next=18;break}return t.next=14,c.json();case 14:200===(c=t.sent).status&&c.data.address?r(c.data):n(new Error("The network is busy while creating the coin account.")),t.next=19;break;case 18:n(new Error(c.statusText));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),n(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetStableCurrencyName:function(e,t){var r=e;return"usdc"===r&&"ethereum network"===t?r="usdc_erc20":"usdt"===r&&"ethereum network"===t?r="usdt_erc20":"usdt"===r&&"tron network"===t&&(r="usdt_trc20"),r}}},3844:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{productId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxTransaction",o)},3932:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734),l=c.rateLimiter,d=(c.rateLimiterStrict,r(7908)),f=d.socketCheckUserData,h=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,y=d.socketCheckAntiSpam,v=d.socketRemoveAntiSpam,g=r(8461).settingCheck,w=r(8117),b=w.rollGetData,k=w.rollSendBetSocket,x=w.rollInit;e.exports=function(e){e.of("/socket/roll").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,h("roll",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=b(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roll").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("roll",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,f(s,!0),g(s,"games.roll.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("roll",r);case 2:case"end":return e.stop()}}),e)}))))})),x(e)}},4040:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=r(7906),c=r(573);e.exports={adminCheckGetBoxListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendBoxCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.");if(void 0===e.items||null===e.items||!0!==Array.isArray(e.items)||e.items.length<=0)throw new Error("Your entered items are invalid.")},adminCheckSendBoxCreateItems:function(e,t){var r,n=i(e.items);try{var o=function(){var e=r.value;if(void 0===e.item||null===e.item||"string"!=typeof e.item||!0!==u.isMongoId(e.item))throw new Error("Your entered item id is invalid.");if(void 0===e.tickets||null===e.tickets||!0===isNaN(e.tickets))throw new Error("Your entered item tickets is invalid.");if(void 0===e.tickets1||null===e.tickets1||!0===isNaN(e.tickets1))throw new Error("Your entered item tickets1 is invalid.");if(void 0===e.tickets2||null===e.tickets2||!0===isNaN(e.tickets2))throw new Error("Your entered item tickets2 is invalid.");if(!0!==t.some((function(t){return t._id.toString()===e.item.toString()})))throw new Error("Your entered item is invalid.")};for(n.s();!(r=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}},adminCheckSendBoxRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.")},adminCheckSendBoxRemoveBox:function(e){if(null===e)throw new Error("Your entered box was not found.");if("created"!==e.state)throw new Error("Your entered box is still active.")},adminSaveImage:function(e,t){return new Promise(function(){var r,n=(r=o().mark((function r(n,a){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{c.img(e,"./bin/public/img",t,(function(e,t){if(e)throw Error(e.message);n()}))}catch(e){a(e)}case 1:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},adminGetAmountBox:function(e,t){var r,n=0,o=i(e.items);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t._id.toString()===e.item.toString()}));-1!==o&&(n+=Math.floor(t[o].amountFixed*(e.tickets/1e5)*1.08))};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},adminCheckSendItemCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount))throw new Error("Your entered amount are invalid.")},adminFormatItemSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"name"===e?t={name:1}:"amountdec"===e?t={amount:-1}:"amountasc"===e&&(t={amount:1}),t},adminCheckSendItemNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendItemName:function(e){if(null===e)throw new Error("Your entered item is not available.")},adminCheckSendItemAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.amount||null===e.amount||isNaN(e.amount)||e.amount<0)throw new Error("Your entered Name is invalid.")},adminCheckSendItemTitleData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.title||null===e.title||""===e.title)throw new Error("Your entered Title is invalid.")},adminCheckSendBoxNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendBoxName:function(e){if(null===e)throw new Error("Your entered box is not available.")},adminCheckSendBoxStateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.state||null===e.state||""===e.state||"active"!==e.state&&"inactive"!==e.state)throw new Error("Your entered state is invalid.")},adminCheckSendBoxCategoriesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.")},adminCheckSendBoxImageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.image||null===e.image||""===e.state)throw new Error("Your entered box image is invalid.")},adminCheckSendBoxItemsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==u.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.items||null===e.items)throw new Error("Your entered box items is invalid.")}}},4145:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function c(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var l=r(8749),d=r(2299);r(9472).SERVICE_PROXY_TIME,e.exports={rouletteCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.color||"string"!=typeof e.color||!1===["red","black","green","bait"].includes(e.color))throw new Error("Your provided bet color is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided bet amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROULETTE_MIN_AMOUNT))throw new Error("You can only bet a min amount of $".concat(parseFloat(process.env.ROULETTE_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," per bet."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.ROULETTE_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.ROULETTE_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per bet."))},rouletteCheckSendBetUser:function(e,t,r){if(Math.floor(e.amount)>t.balance)throw new Error("You don’t have enough balance for this action.");if(r.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=process.env.ROULETTE_MAX_COUNT)throw new Error("You can only bet ".concat(process.env.ROULETTE_MAX_COUNT," times per game."));if("black"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"red"===e.color}))||"red"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"black"===e.color})))throw new Error("You can’t bet on red and black in the same game.")},rouletteCheckSendBetGame:function(e){if("created"!==e.state||(new Date).getTime()-13e3>=new Date(e.createdAt).getTime())throw new Error("You need to wait for the next round before you can bet.")},rouletteGetOutcome:function(e){var t="".concat(e._id,"-").concat(e.fair.seedServer,"-").concat(e.fair.seedPublic),r=l.createHash("sha256").update(t).digest("hex");return Math.abs(parseInt(r.substr(0,8),16))%15},rouletteGenerateGame:function(){return new Promise(function(){var e,t=(e=u().mark((function e(t,r){var n,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.randomBytes(24).toString("hex"),o=l.createHash("sha256").update(n).digest("hex"),e.next=4,d.create({fair:{seedServer:n,hash:o},state:"created"});case 4:a=(a=e.sent).toObject(),t(a);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rouletteSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return!1===["fairness","rolling","completed"].includes(t.state)&&(t.fair={hash:t.fair.hash}),t},rouletteSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank}}))}}catch(e){n.e(e)}finally{n.f()}return r},rouletteSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank},t}}},4162:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function u(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=r(8749),f=r(7067),h=r(9940);e.exports={rollCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.multiplier||null===e.multiplier||!0===isNaN(e.multiplier)||Math.floor(e.multiplier)<=100)throw new Error("Your entered bet multiplier is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROLL_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.ROLL_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},rollCheckSendBetUser:function(e,t,r){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(Math.floor(e.amount+r.bet)>Math.floor(1e3*process.env.ROLL_MAX_AMOUNT))throw new Error("You can only bet a total max amount of ".concat(parseFloat(process.env.ROLL_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount*(e.multiplier/100)+r.winnings)>Math.floor(1e3*process.env.ROLL_MAX_PROFIT))throw new Error("You can only have a total max win amount of ".concat(parseFloat(process.env.ROLL_MAX_PROFIT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},rollCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},rollGetUserGameStats:function(e,t){var r,n={bet:0,winnings:0},o=c(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.user._id.toString()===e._id.toString()&&(n.bet=Math.floor(n.bet+a.amount),n.winnings=Math.floor(n.winnings+a.amount*(a.multiplier/100)))}}catch(e){o.e(e)}finally{o.f()}return n},rollGenerateGame:function(){return new Promise(function(){var e,t=(e=s().mark((function e(t,r){var n,o,a,i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=d.randomBytes(8).toString("hex"),o=d.randomBytes(24).toString("hex"),a=d.createHash("sha256").update(o).digest("hex"),e.next=6,h.findOne({state:"created"}).sort({_id:-1}).lean();case 6:if(i=e.sent){e.next=11;break}return i=new h({seedServer:n,hash:a,seedPublic:o,state:"created"}),e.next=11,i.save();case 11:return e.next=13,Promise.all([f.create({fair:{seed:i._id},state:"created"}),h.findByIdAndUpdate(i._id,{state:"completed"},{}),h.create({seedPublic:n,seedServer:o,hash:a,state:"created"})]);case 13:return u=e.sent,e.next=16,u[0].populate({path:"fair.seed",select:"seedServer hash"});case 16:u[0]=e.sent,u[0]=u[0].toObject(),t(u[0]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),r(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rollGetOutcome:function(e){if(!0===function(e,t){for(var r=0,n=e.length%4,o=n>0?n-4:0;o<e.length;o+=4)r=((r<<16)+parseInt(e.substring(o,o+4),16))%t;return 0===r}(e,parseInt(20)))return 100;var t=parseInt(e.slice(0,13),16),r=Math.pow(2,52);return Math.floor((100*r-t)/(r-t))},rollSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"rolling"!==t.state&&"completed"!==t.state&&(delete t.outcome,delete t.fair),t},rollSanitizeBets:function(e){var t,r=[],n=c(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback.name,stats:o.user.stats,createdAt:o.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},rollSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback.name,stats:t.user.stats,createdAt:t.user.createdAt},t}}},4214:e=>{e.exports={generalCheckSendRakebackClaimUser:function(e){if(e.rakeback.available<.1)throw new Error("You’ll need a minimum of 0.1 coin in rakeback earnings to claim.")}}},4217:e=>{"use strict";e.exports=require("cheerio")},4229:e=>{"use strict";e.exports=require("node-fetch")},4269:(e,t,r)=>{var n=r(6037),o=new n.Schema({token:{type:String},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Token",o)},4276:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(829);r(2789),e.exports={authorizeUser:function(e){return function(){var t,r=(t=o().mark((function t(r,n,a){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof(s=r.header("x-auth-token"))||!1!==e){t.next=6;break}return r.user=null,t.abrupt("return",a());case 6:if("string"==typeof s){t.next=8;break}return t.abrupt("return",n.status(401).json({success:!1,message:"Authorization denied."}));case 8:return t.prev=8,t.next=11,i.verify(s,process.env.TOKEN_SECRET);case 11:r.user=t.sent,a(),t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(8),t.abrupt("return",n.status(401).json({success:!1,error:{type:"error",message:"Authorization denied."}}));case 18:case"end":return t.stop()}}),t,null,[[8,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}()},authorizeAdmin:function(e,t,r){try{if("admin"!==e.user.rank)return t.status(403).json({success:!1,message:"You are not authorized to access this route."});r()}catch(e){return t.status(403).json({success:!1,error:{type:"error",message:"You are not authorized to access this route."}})}}}},4330:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}r(8749);var f=r(2789),h=r(1545),p=r(8921),m=r(6232),y=r(3304),v=r(7908).socketRemoveAntiSpam,g=r(168),w=g.authRobloxGetToken,b=g.authSendRobloxChallengeContinue,k=g.authSendRobloxTwoStepVerify,x=g.authRobloxSendSecurityEnable,S=r(901),E=S.cashierCheckSendLimitedEnableRoblox,_=(S.cashierCheckSendLimitedGenerateType,S.cashierCheckSendLimitedVerifyData),A=S.cashierCheckSendLimitedVerifyRoblox,O=S.cashierCheckSendLimitedDepositData,j=S.cashierCheckSendLimitedDepositRoblox,I=S.cashierCheckSendLimitedDepositItems,P=S.cashierCheckSendLimitedDepositUser,T=S.cashierCheckSendLimitedWithdrawData,C=S.cashierCheckSendLimitedWithdrawRoblox,G=S.cashierCheckSendLimitedWithdrawTransaction,N=S.cashierCheckSendLimitedWithdrawUser,D=S.cashierLimitedGetDummyItem,Y=S.cashierLimitedGetInventory,B=S.cashierLimitedGetItems,U=S.cashierLimitedGetItemImages,R=S.cashierGetUserCanTrade,M=(S.cashierSendLimitedTwoStepRedeem,S.cashierLimitedSendTrade),F=S.cashierLimitedSendTradeAccept,$=S.cashierLimitedSendTradeDecline,L=S.cashierLimitedFormatItems,q=S.cashierLimitedFormatDepositItems,J=S.cashierLimitedFormatTransactions,K=S.cashierLimitedFormatTransaction,W=[],V=function(){var e=d(i().mark((function e(t,r,n,o,a){var u,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u=[],u=[m.find({state:"created"}).select("amount deposit state").lean()],void 0!==n.roblox&&(u=[].concat(s(u),[h.findOne({user:n._id}).select("items updatedAt").lean(),p.find({accepted:!0}).select("assetId image amount accepted").lean()])),e.next=6,Promise.all(u);case 6:if(c=e.sent,void 0!==n.roblox){e.next=11;break}c[1]=[],e.next=19;break;case 11:if(!(null===c[1]||new Date(c[1].updatedAt).getTime()+6e4<(new Date).getTime())){e.next=19;break}return e.next=14,Y(n.proxy,n.roblox.id);case 14:return l=e.sent,d=L(l,c[2]),e.next=18,h.findOneAndUpdate({user:n._id},{items:d,updatedAt:(new Date).getTime()},{new:!0,upsert:!0}).select("items").lean();case 18:c[1]=e.sent;case 19:a({success:!0,deposit:c[1].items,withdraw:J(c[0])}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=d(i().mark((function e(t,r,n,o,a){var s,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E(n),s=null,u={},void 0===o.challengeId){e.next=15;break}return e.next=7,w(n.proxy);case 7:return s=e.sent,u={actionType:"Generic",challengeId:o.twoStepId,code:o.twoStepCode},e.next=11,k(n.proxy,s,n.roblox.cookie,n.roblox.id,"Authenticator",u);case 11:return c=e.sent,u={challengeType:"twostepverification",challengeId:o.challengeId,twoStepId:o.twoStepId,challengeMetadata:JSON.stringify({actionType:"Generic",challengeId:o.twoStepId,verificationToken:c.verificationToken,rememberDevice:!1})},e.next=15,b(n.proxy,s,n.roblox.cookie,u);case 15:return e.next=17,w(n.proxy,n.roblox.cookie);case 17:return s=e.sent,e.next=20,x(n.proxy,s,n.roblox.cookie,n.roblox.id,u);case 20:void 0!==(l=e.sent).sessionId?a({success:!0}):a({success:!0,challengeId:l.challengeId,twoStepId:l.twoStepId}),v(n._id),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=d(i().mark((function e(t,r,n,o,a){var s,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(o),A(n),e.next=5,w(n.proxy);case 5:return s=e.sent,u={actionType:"Generic",challengeId:o.challengeId,code:o.twoStepCode},e.next=9,k(s,n.proxy,n.roblox.cookie,n.roblox.id,"Authenticator",u);case 9:return c=e.sent,e.next=12,x(s,n.proxy,n.roblox.cookie,n.roblox.id,o.challengeId,c.verificationToken);case 12:e.sent,a({success:!0,user:userDatabase}),v(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=d(i().mark((function e(t,r,n,o,a){var s,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(o),j(n),e.next=5,Promise.all([h.findOne({user:n._id}).select("items").lean(),m.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),m.find({"deposit.user":n._id,state:"canceled",updatedAt:{$gte:new Date((new Date).getTime()-36e5)}}).select("deposit state updatedAt").lean()]);case 5:return s=e.sent,I(o,s[0].items,s[1]),u=q(o,s[0].items),e.next=10,R(n.proxy,n.roblox.cookie,"4586404680");case 10:return c=e.sent,P(n,s[1],s[2],c),l=u.reduce((function(e,t){return e+t.amount}),0),e.next=15,m.create({amount:l,deposit:{user:n._id,items:u},state:"created"});case 15:s=(s=e.sent).toObject(),t.of("/socket/cashier").emit("limitedTransaction",{transaction:K(s)}),a({success:!0,transaction:s}),v(n._id),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=d(i().mark((function e(t,r,n,o,a){var s,u,c,l,d,p,g,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(o),C(n),e.next=5,Promise.all([m.findById(o.transactionId).select("amount deposit state").populate({path:"deposit.user",select:"roblox affiliates proxy"}).lean(),m.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),h.findOne({user:n._id}).select("items").lean()]);case 5:return s=e.sent,G(n,s[0],W),e.prev=7,W.push(s[0]._id.toString()),u=D(s[2].items,s[1]),c=Math.floor(s[0].amount-u.amount)>0?Math.floor(s[0].amount-u.amount):0,l=Math.floor(c/1e3*3),e.next=14,R(n.proxy,n.roblox.cookie,s[0].deposit.user.roblox.id);case 14:return d=e.sent,N(n,c,d),e.next=18,Promise.all([w(n.proxy,n.roblox.cookie),w(s[0].deposit.user.proxy,s[0].deposit.user.roblox.cookie)]);case 18:return p=e.sent,body={offers:[{userId:s[0].deposit.user.roblox.id,userAssetIds:s[0].deposit.items.map((function(e){return e.uniqueId})),robux:0},{userId:n.roblox.id,userAssetIds:[u.uniqueId],robux:0}]},e.next=22,M(p[1],s[0].deposit.user.proxy,s[0].deposit.user.roblox.cookie,body);case 22:if(!0!==(g=e.sent).success){e.next=27;break}return e.next=26,F(p[0],n.proxy,n.roblox.cookie,g.tradeId);case 26:g=e.sent;case 27:if(b=[],!0!==g.success){e.next=37;break}return b=[m.findByIdAndUpdate(s[0]._id,{amount:c,data:{tradeId:g.tradeId},withdraw:{user:n._id,items:[u]},state:"completed"},{new:!0}).select("amount deposit state").lean(),f.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.withdraw":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(s[0].deposit.user._id,{$inc:{balance:c,"stats.deposit":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":l,"stats.total.withdraw":l,"stats.limited.deposit":l,"stats.limited.withdraw":l}},{upsert:!0})],void 0!==s[0].deposit.user.affiliates.referrer&&b.push(f.findByIdAndUpdate(s[0].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":c},updatedAt:(new Date).getTime()},{})),e.next=33,Promise.all(b);case 33:s=e.sent,t.of("/socket/general").to(s[2]._id.toString()).emit("user",{user:s[2]}),e.next=53;break;case 37:if(void 0===g.tradeId){e.next=49;break}return e.next=40,$(p[1],s[0].deposit.user.proxy,s[0].deposit.user.roblox.cookie,g.tradeId);case 40:return g=e.sent,b=[m.findByIdAndUpdate(s[0]._id,{amount:c,data:{tradeId:g.tradeId},withdraw:{user:n._id,items:[u]},state:!0===g.success?"canceled":"sent"},{new:!0}).select("amount deposit state").lean()],!0!==g.success&&b.push(f.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.withdraw":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=45,Promise.all(b);case 45:s=e.sent,!0!==g.success&&Z(t,s[0]),e.next=53;break;case 49:return b=[m.findByIdAndUpdate(s[0]._id,{amount:c,state:"canceled"},{new:!0}).select("amount deposit state").lean()],e.next=52,Promise.all(b);case 52:s=e.sent;case 53:t.of("/socket/cashier").emit("limitedTransaction",{transaction:K(s[0])}),a({success:!0,transaction:s[0],user:s[1]}),W.splice(W.indexOf(s[0]._id.toString()),1),v(n._id),e.next=64;break;case 59:e.prev=59,e.t0=e.catch(7),v(r.decoded._id),W.splice(W.indexOf(s[0]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 64:e.next=70;break;case 66:e.prev=66,e.t1=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t1.relogin?e.t1.message:"Your roblox session has been expired. Please login again."}});case 70:case"end":return e.stop()}}),e,null,[[0,66],[7,59]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=d(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ee=function(){var e=d(i().mark((function e(){var t,r,n,s,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:return t=e.sent,r=Object.entries(t).map((function(e){var t=a(e,2),r=t[0];return t[1],r})),e.next=7,U(r);case 7:return n=e.sent,t=Object.entries(t).map((function(e){var t=a(e,2),r=t[0],o=t[1],i=n.findIndex((function(e){return e.targetId.toString()===r.toString()}));return{assetId:r,name:o[0],image:-1!==i?n[i].imageUrl:"",amount:Math.floor(1e3*o[4]),accepted:!0}})),e.next=11,p.find({}).select("assetId").lean();case 11:s=e.sent,u=o(t),e.prev=13,l=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.value,-1!==s.findIndex((function(e){return e.assetId===t.assetId}))){e.next=7;break}return e.next=5,p.create({assetId:t.assetId,name:t.name,image:t.image,amount:t.amount,amountFixed:t.amount,accepted:t.accepted});case 5:e.next=9;break;case 7:return e.next=9,p.findOneAndUpdate({assetId:t.assetId},{amount:t.amount,accepted:t.accepted},{upsert:!0});case 9:case"end":return e.stop()}}),e)})),u.s();case 16:if((c=u.n()).done){e.next=20;break}return e.delegateYield(l(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),u.e(e.t1);case 25:return e.prev=25,u.f(),e.finish(25);case 28:setTimeout((function(){ee()}),864e5),e.next=35;break;case 31:e.prev=31,e.t2=e.catch(0),setTimeout((function(){ee()}),864e5),console.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,31],[13,22,25,28]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetLimitedDataSocket:V,cashierSendLimitedEnableSocket:H,cashierSendLimitedVerifySocket:z,cashierSendLimitedDepositSocket:Q,cashierSendLimitedWithdrawSocket:X,cashierLimitedInit:function(e){try{ee(e)}catch(e){console.error(e)}}}},4332:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,u,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}r(8749);var f=r(2789),h=r(5632),p=r(4946),m=r(8744),y=r(8875),v=r(6112),g=r(7908).socketRemoveAntiSpam,w=r(8461),b=w.settingGet,k=(w.getMinimumValue,w.getMaximumValue,w.findPercent),x=w.findTCountPercent,S=r(4599),E=S.towersCheckSendBetData,_=S.towersCheckSendBetUser,A=S.towersCheckSendBetGame,O=S.towersCheckSendBetSeed,j=S.towersCheckSendRevealData,I=S.towersCheckSendRevealGame,P=S.towersCheckSendCashoutGame,T=S.towersGetGamePayout,C=S.towersGenerateDeck,G=S.towersShuffleDeck,N=S.towersSanitizeGame,D=r(836),Y=D.generalUserGetRakeback,B=D.generalUserGetFormated,U=r(5507).generalAddBetsList,R=[],M=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s,u,l,d,v,w,k,x,S,j,I,P,T;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(o),_(o,n),i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),A(i),e.next=7,h.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 7:return s=e.sent,O(s),e.next=11,m.findOne({state:"running"}).select("state").lean();case 11:return u=e.sent,l=Math.floor(o.amount),d=b(),v=Y(n),w=!0!==n.limits.blockSponsor?Math.floor(l*v.percentage*d.general.reward.multiplier):0,k=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*l):0,x="".concat(s.seedServer,"-").concat(s.nonce,"-").concat(s.seedClient),S=C(o.risk),S=G(S,x),j=[],e.next=23,y.find({enabled:"true"}).select("creators").lean();case 23:return I=e.sent,P=I.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),j=[f.findByIdAndUpdate(n._id,{$inc:{balance:-l,xp:!0!==n.limits.blockSponsor?Math.floor(l*process.env.XP_RATE*d.general.reward.multiplier):0,"stats.bet":l,"leaderboard.points":null!==u&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"affiliates.generated":k,"affiliates.leaderboardpoints":P&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"rakeback.earned":w,"rakeback.available":w},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(s._id,{$inc:{nonce:1}},{}),p.create({amount:l,risk:o.risk,deck:S,fair:{seed:s._id,nonce:s.nonce},user:n._id,state:"created"})],void 0!==n.affiliates.referrer&&k>0&&j.push(f.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":k,"affiliates.available":k},updatedAt:(new Date).getTime()},{})),e.next=29,Promise.all(j);case 29:(T=e.sent)[2]=T[2].toObject(),R.push(T[2]),a({success:!0,user:T[0],game:N(T[2])}),g(n._id),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),g(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=d(c().mark((function e(t,r,n,o,i){var u,l,d,h,m,y,w,S,E,_,A,O,P;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(o),u=R.find((function(e){return e.user._id.toString()===n._id.toString()})),I(u),l="medium"===u.risk&&2===Math.floor(o.tile)?1:Math.floor(o.tile),d=u.revealed.length+1,"coin"===u.deck[u.revealed.length][l]&&b().games.ctotal.enabled&&("user"===n.rank&&(h=k(u.amount,n.balance,b().games.ctowers),Math.floor(100*Math.random())+1<h&&(u.deck[u.revealed.length]=$(u.deck[u.revealed.length],l)),0===h&&(m=x(u.amount,u.risk,d,b().games.cstowers),Math.floor(100*Math.random())+1<m&&(u.deck[u.revealed.length]=$(u.deck[u.revealed.length],l)))),"mod"!==n.rank&&"partner"!==n.rank||(y=k(u.amount,n.balance,b().games.mctowers),Math.floor(100*Math.random())+1<y&&(u.deck[u.revealed.length]=$(u.deck[u.revealed.length],l)),0===y&&(w=x(u.amount,u.risk,d,b().games.mcstowers),Math.floor(100*Math.random())+1<w&&(u.deck[u.revealed.length]=$(u.deck[u.revealed.length],l))))),u.revealed.push({tile:l,row:u.deck[u.revealed.length]}),!("lose"===u.revealed[u.revealed.length-1].row[l]||u.revealed.length>=8)){e.next=26;break}return S="lose"!==u.revealed[u.revealed.length-1].row[l]?T(u):0,E=Math.floor(S/u.amount*100),_=0===S||E>=125?u.amount:S,A=!0!==n.limits.blockSponsor?u.amount:0,O=[],O=[f.findByIdAndUpdate(n._id,{$inc:{balance:S,"stats.won":S,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-_)<=0?-n.limits.betToWithdraw:-_,"limits.betToRain":Math.floor(n.limits.betToRain-_)<=0?-n.limits.betToRain:-_},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(u._id,{payout:S,multiplier:E,deck:u.deck,revealed:u.revealed,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier risk deck revealed user state updatedAt").lean()],S>0&&(O=[].concat(s(O),[v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*A)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.next=18,Promise.all(O);case 18:P=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===P[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:P[0]}),S>0&&t.of("/socket/general").emit("rain",{rain:P[2]}),U(t,a(a({},P[1]),{},{user:B(n),method:"towers"})),u=P[1],e.next=30;break;case 26:return e.next=28,p.findByIdAndUpdate(u._id,{revealed:u.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount risk deck revealed user state").lean();case 28:u=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===u._id.toString()})),1,u);case 30:i({success:!0,game:N(u)}),g(n._id),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(0),g(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 38:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(e,t){var r=s(e);if("lose"===r[t])return r;r[t]="lose";for(var n=0;n<r.length;n++)if("lose"===r[n]&&t!==n){r[n]="coin";break}return r},L=function(){var e=d(c().mark((function e(t,r,n,o,i){var s,u,l,d,h,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=R.find((function(e){return e.user._id.toString()===n._id.toString()})),P(s),u=T(s),l=Math.floor(u/s.amount*100),d=l>=125?s.amount:u,h=!0!==n.limits.blockSponsor?s.amount:0,e.next=9,Promise.all([f.findByIdAndUpdate(n._id,{$inc:{balance:u,"stats.won":u,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-d)<=0?-n.limits.betToWithdraw:-d,"limits.betToRain":Math.floor(n.limits.betToRain-d)<=0?-n.limits.betToRain:-d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(s._id,{payout:u,multiplier:l,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier risk deck revealed user state updatedAt").lean(),v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*h)}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 9:m=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===m[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:m[2]}),U(t,a(a({},m[1]),{},{user:B(n),method:"towers"})),i({success:!0,user:m[0],game:N(m[1])}),g(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),g(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),q=function(){var e=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.find({state:"created"}).select("amount risk deck revealed user state").lean();case 3:R=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();e.exports={towersGetGame:function(e){var t=R.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?N(R[t]):null},towersSendBetSocket:M,towersSendRevealSocket:F,towersSendCashoutSocket:L,towersInit:q}},4383:e=>{"use strict";e.exports=require("fs")},4386:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(5734).rateLimiter,u=r(7908).socketCheckUserData,c=r(8461).settingCheck,l=r(5507).generalGetBetsDataSocket;e.exports=function(e,t){t.on("getBetsData",function(){var r,n=(r=o().mark((function r(n,a){var d,f;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,d=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(d);case 6:if(r.prev=6,f=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:f=r.sent;case 12:u(f,!1),c(f),l(e,t,f,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},4437:e=>{"use strict";e.exports=require("socket.io")},4569:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,u,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(3304),h=(r(2789),r(5632),r(3844),r(6232),r(5958),r(4823)),p=r(827),m=r(6930),y=r(6363),v=r(5329),g=r(286),w=(r(988),r(6966),r(6769),r(5964),r(8702),r(4946),r(3702),r(2256),r(2974),r(5241),r(8455),r(1590)),b=w.adminCheckGetStatsListData,k=w.adminFormatStats,x=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.find({}).sort({createdAt:-1}).limit(420).select("stats.total createdAt").lean();case 3:i=e.sent,s=k(i),a({success:!0,stats:s,list:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=d(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(o),i=12*(o.page-1),e.next=5,Promise.all([f.countDocuments({}),f.find({}).limit(12).skip(i).sort({createdAt:-1}).select("stats createdAt").lean()]);case 5:s=e.sent,a({success:!0,count:s[0],stats:s[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=d(c().mark((function e(t,r,n,o,i){var u,l,d,f,w;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.countDocuments({state:"completed"}),p.countDocuments({state:"completed"}),m.countDocuments({state:"completed"}),y.countDocuments({state:"completed"}),v.countDocuments({state:"completed"}),g.countDocuments({state:"completed"}),h.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),p.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),m.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount sender receiver state createdAt").populate({path:"receiver.user",select:"username avatar"}).populate({path:"sender.user",select:"username avatar"}).lean(),g.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean()]);case 3:u=e.sent,l=u.slice(0,6).reduce((function(e,t){return e+t}),0),(d=[].concat(s(u[6].map((function(e){return a(a({},e),{},{method:"crypto"})}))),s(u[7].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),s(u[8].map((function(e){return a(a({},e),{},{method:"gift"})}))),s(u[9].map((function(e){return a(a({},e),{},{method:"credit"})}))),s(u[10].map((function(e){return a(a({},e),{},{method:"tip"})}))),s(u[11].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=12*(o.page-1),w=12*o.page,d=d.slice(f,w),i({success:!0,count:l,transactions:d}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetStatsDataSocket:x,adminGetStatsListSocket:S,adminGetCryptoTransactionListSocket:E}},4585:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(5734).rateLimiter,u=r(7908),c=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckAntiSpam),d=u.socketRemoveAntiSpam,f=r(8461).settingCheck,h=r(1814).generalSendPromoClaimSocket;e.exports=function(e,t){t.on("sendPromoClaim",function(){var r,n=(r=o().mark((function r(n,a){var u,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,u=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(u);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar ips rank xp stats limits mute ban").lean();case 12:p=r.sent,c(p,!0),f(p),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},4599:(e,t,r)=>{var n=r(8749),o=r(1024);e.exports={towersCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.risk||"string"!=typeof e.risk||!0!==["easy","medium","hard"].includes(e.risk))throw new Error("You’ve entered an invalid risk.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.TOWERS_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.TOWERS_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.TOWERS_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.TOWERS_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},towersCheckSendBetUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},towersCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running towers game first.")},towersCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},towersCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||null===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>2)throw new Error("You’ve entered an invalid tile.")},towersCheckSendRevealGame:function(e){if(void 0===e)throw new Error("You’ve no running towers game at the moment.")},towersCheckSendCashoutGame:function(e){if(null===e)throw new Error("You’ve no running towers game at the moment.");if(0===e.revealed.length)throw new Error("You’ve to reveal at least one row.")},towersGetGamePayout:function(e){var t="easy"===e.risk?1.425:"medium"===e.risk?1.9:2.85;return Math.floor(e.amount*Math.pow(t,e.revealed.length))},towersGenerateDeck:function(e){for(var t=[],r=0;r<8;r++){var n="medium"===e?2:3,o="hard"===e?2:1;t[r]=[];for(var a=0;a<n;a++)a<o?t[r].push("lose"):t[r].push("coin")}return t},towersShuffleDeck:function(e,t){for(var r=[],a=0;a<8;a++){var i=n.createHash("sha256").update("".concat(t,"-").concat(a)).digest("hex"),s=new o(i).shuffle(e[a]);r.push(s)}return r},towersSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},4607:(e,t,r)=>{var n=r(7906);e.exports={adminCheckSendSettingValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.setting||null===e.setting||"string"!=typeof e.setting||e.setting.length>=100||!0!==n.isAlphanumeric(e.setting,"en-US",{ignore:"."}))throw new Error("Your entered setting is invalid.");if(void 0===e.value||null===e.value||!0!==["chat.mode","general.reward.multiplier","depositbonus.amount","depositbonus.famount","redeem.amount","games.cases","games.mcases","games.cmines","games.ctowers","games.csmines","games.cstowers","games.mcmines","games.mctowers","games.mcsmines","games.mcstowers","games.crashees","games.slides","games.cblackjack.value"].includes(e.setting)&&"boolean"!=typeof e.value||"general.reward.multiplier"===e.setting&&"string"!=typeof e.value||"chat.mode"===e.setting&&"string"!=typeof e.value)throw new Error("Your entered value is invalid.")}}},4680:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckAntiSpam,f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(8361),m=p.generalGetRakebackDataSocket,y=p.generalSendRakebackClaimSocket;e.exports=function(e,t){t.on("getRakebackData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:c=r.sent;case 12:l(c,!1),h(c),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRakebackClaim",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank limits rakeback mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},4729:e=>{"use strict";e.exports=require("bcryptjs")},4823:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},transaction:{type:String},sender:{type:String},receiver:{type:String},currency:{type:String},cryptoAmount:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoTransaction",o)},4825:(e,t,r)=>{var n=r(6037),o=new n.Schema({code:{type:String},reward:{type:Number},redeemer:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftCode",o)},4862:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashSeed",o)},4906:(e,t,r)=>{e.exports=function(e){r(1049)(e),r(6466)(e),r(3932)(e),r(7073)(e),r(3170)(e),r(7097)(e),r(9039)(e),r(8481)(e),r(4917)(e),r(1418)(e),r(5009)(e),r(8858)(e),r(7523)(e),r(2848)(e),r(2934)(e),r(2973)(e)}},4917:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(6338),w=g.unboxGetData,b=g.unboxGetBoxDataSocket,k=g.unboxSendBetSocket;e.exports=function(e){e.of("/socket/unbox").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("unbox",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w();case 18:i=e.sent,t.emit("init",{boxes:i.boxes}),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/unbox").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("unbox",r),t.on("getBoxData",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,c.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,u.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:d(s,!1),v(s),b(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.unbox.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("unbox",r);case 2:case"end":return e.stop()}}),e)}))))}))}},4946:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},risk:{type:String},deck:[[{type:String}]],revealed:[{tile:{type:Number},row:[{type:String}]}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TowersGame",o)},5009:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(829),r(2789),r(5734).rateLimiter;var s=r(7908),u=(s.socketCheckUserData,s.socketCheckConnectionLimit,s.socketAddConnectionLimit),c=(s.socketRemoveConnectionLimit,s.socketCheckAntiSpam,s.socketRemoveAntiSpam,r(8461).settingCheck,r(3184));c.upgraderGetItemsDataSocket,c.upgraderSendCreateSocket,e.exports=function(e){e.of("/socket/upgrader").use(function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/upgrader").on("connection",(function(e){var t=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;u("upgrader",t),e.on("getItemsData",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.on("sendCreate",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.on("disconnect",i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))}))}},5102:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},price:{type:Number},fee:{type:Number}});e.exports=n.model("CryptoPrice",o)},5165:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(1572).createTransport({host:process.env.EMAIL_SMTP_HOST,port:process.env.EMAIL_SMTP_PORT,auth:{user:process.env.EMAIL_SMTP_USER,pass:process.env.EMAIL_SMTP_PASSWORD}});e.exports={emailSend:function(e,t,r){return new Promise(function(){var n,s=(n=o().mark((function n(a,s){var u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,u={from:"".concat(process.env.EMAIL_FROM_NAME," <").concat(process.env.EMAIL_FROM,">"),to:e,subject:t,text:r},n.next=4,i.sendMail(u);case 4:a(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return s.apply(this,arguments)}}())}}},5182:(e,t,r)=>{var n=r(6037),o=new n.Schema({code:{type:String},reward:{type:Number},levelMin:{type:Number},redeemers:[{user:{type:n.Schema.ObjectId,ref:"User"}}],allowLevel:{type:Number},ipRestricktLevel:{type:Number},redeemptionsTotal:{type:Number,default:0},redeemptionsMax:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PromoCode",o)},5241:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},rows:{type:Number},risk:{type:String},ticket:{type:Number},fair:{seedOld:{type:n.Schema.ObjectId,ref:"PlinkoSeed"},seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User"},stats:{balanceBefore:{type:Number,default:0}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PlinkoGame",o)},5297:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateCodeCode:function(e){if(null!=e)throw new Error("You’ve entered an affiliate code that is already used by another user.")},generalCheckSendAffiliateClaimCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateClaimCodeUser:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0!==e.affiliates.referredAddress)throw new Error("You have already redeemed a affiliate code.")},generalCheckSendAffiliateClaimCodeCode:function(e,t){if(null===t)throw new Error("Your provided affiliate code is invalid.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to redeem your own affiliate code.")},generalCheckSendAffiliateClaimEarningsUser:function(e){if(void 0===e)throw new Error("Something went wrong. Please try again in a few seconds.");if(e.affiliates.available<Math.floor(1e3*process.env.AFFILIATE_MIN_CLAIM))throw new Error("You’ll need a minimum of ".concat(process.env.AFFILIATE_MIN_CLAIM," coin in earnings to claim."))}}},5329:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},sender:{user:{type:n.Schema.ObjectId,ref:"User"}},receiver:{user:{type:n.Schema.ObjectId,ref:"User"}},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TipTransaction",o)},5398:(e,t,r)=>{var n=r(6037),o=new n.Schema({deck:[{rank:{type:String},suit:{type:String}}],dealerCards:[{rank:{type:String},suit:{type:String}}],fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},table:{type:Number},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"BlackjackBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("BlackjackGame",o)},5507:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}r(6037);var f=r(988),h=r(6966),p=r(6769),m=r(5964),y=r(8702),v=r(4946),g=r(3702),w=r(2256),b=r(2974),k=r(5241),x=r(8455),S=r(836).generalUserGetFormated,E={all:[],whale:[],lucky:[],my:[]},_=function(){var e=d(o().mark((function e(t,r,n,a,s){var c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=E,null==n){e.next=10;break}return l=[f.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.next=6,Promise.all(l);case 6:d=e.sent,c.my=[].concat(u(d[0].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),u(d[1].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),u(d[2].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),u(d[3].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),u(d[4].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),u(d[5].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),u(d[6].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),u(d[7].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),u(d[8].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),u(d[9].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),u(d[10].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),c.my.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),c.my=c.my.slice(0,15);case 10:s({success:!0,bets:c}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),A=function(){var e=d(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[f.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),f.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),f.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.next=4,Promise.all(t);case 4:r=e.sent,E.all=[].concat(u(r[0].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),u(r[1].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),u(r[2].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),u(r[3].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),u(r[4].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),u(r[5].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),u(r[6].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),u(r[7].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),u(r[8].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),u(r[9].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),u(r[10].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.whale=[].concat(u(r[11].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),u(r[12].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),u(r[13].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),u(r[14].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),u(r[15].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),u(r[16].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),u(r[17].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),u(r[18].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),u(r[19].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),u(r[20].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),u(r[21].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.lucky=[].concat(u(r[22].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),u(r[23].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),u(r[24].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),u(r[25].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),u(r[26].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),u(r[27].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),u(r[28].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),u(r[29].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),u(r[30].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),u(r[31].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),u(r[32].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.all=E.all.slice(0,15),E.whale=E.whale.slice(0,15),E.lucky=E.lucky.slice(0,15),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e.exports={generalGetBetsDataSocket:_,generalAddBetsList:function(e,t){try{E.all.unshift(t),E.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.all.length>15&&E.all.pop(),t.payout>=1e7&&(E.whale.unshift(t),E.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.whale.length>15&&E.whale.pop()),t.payout>=10&&t.multiplier>=500&&(E.lucky.unshift(t),E.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.lucky.length>15&&E.lucky.pop()),e.of("/socket/general").emit("bet",{bet:t})}catch(e){console.error(e)}},generalBetsInit:A}},5515:e=>{e.exports={adminCheckGetRainListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendRainAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||e.amount<0)throw new Error("Your entered rain amount value is invalid.")},adminCheckSendRainAmountRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")}}},5632:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedClient:{type:String},seedServer:{type:String},hash:{type:String},nonce:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserSeed",o)},5657:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}var c=r(8938);function l(e,t){return d.apply(this,arguments)}function d(){return(d=u(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{Cookie:".ROBLOSECURITY=".concat(t)}});case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(null===(n=e.t0.response)||void 0===n?void 0:n.headers["x-csrf-token"])||null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function f(e,t){return h.apply(this,arguments)}function h(){return(h=u(i().mark((function e(t,r){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(t,r);case 3:return n=e.sent,e.next=6,c.post("https://auth.roblox.com/v1/authentication-ticket",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 6:return o=e.sent,e.abrupt("return",[o.headers["rbx-authentication-ticket"],n]);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","Failed to fetch auth ticket");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function p(e,t){return m.apply(this,arguments)}function m(){return(m=u(i().mark((function e(t,r){var n,o,a,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.post("https://auth.roblox.com/v1/authentication-ticket/redeem",{authenticationTicket:t},{proxy:!1,httpsAgent:r,headers:{RBXAuthenticationNegotiation:"1"}});case 3:return a=e.sent,s=(null===(n=a.headers["set-cookie"])||void 0===n?void 0:n.toString())||"",u=null===(o=s.match(/(_\|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.\|_[A-Za-z0-9]+)/g))||void 0===o?void 0:o.toString(),e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return","fail");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function y(e,t,r){return v.apply(this,arguments)}function v(){return(v=u(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(null===(o=e.t0.response)||void 0===o?void 0:o.headers["x-csrf-token"])||null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(){return(g=u(i().mark((function e(t,r){var n,a,s,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t,r);case 3:return n=e.sent,a=o(n,2),s=a[0],u=a[1],console.log("authTicket: ",s,u),e.next=10,p(s,r);case 10:return c=e.sent,console.log("redemptionResult: ",c),y(t,r,u),e.abrupt("return",c);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return","fail");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}r(168).authRobloxGetToken,e.exports={generateAuthTicket:f,redeemAuthTicket:p,refresh_cookie:function(e,t){return g.apply(this,arguments)}}},5729:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},playerCount:{type:Number},mode:{type:String},boxes:[{box:{type:n.Schema.ObjectId,ref:"Box"},count:{type:Number}}],options:{levelMin:{type:Number},funding:{type:Number},cursed:{type:Boolean},terminal:{type:Boolean},private:{type:Boolean},affiliateOnly:{type:Boolean},trust:{type:Boolean},trust1:{type:Boolean}},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"BattlesBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("BattlesGame",o)},5734:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(857).RateLimiterMemory,u=new s({points:120,duration:60}),c=new s({points:8,duration:60}),l=function(){var e=i(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.next=4,u.consume(a);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),d=function(){var e=i(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.next=4,c.consume(a);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}();e.exports={rateLimiter:u,rateLimiterStrict:c,rateLimiterMiddleware:l,rateLimiterStrictMiddleware:d}},5949:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function h(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,s,"next",e)}function s(e){h(a,n,o,i,s,"throw",e)}i(void 0)}))}}var m=r(8749),y=r(2789),v=r(1373),g=r(5964),w=r(6112),b=r(8744),k=r(7908).socketRemoveAntiSpam,x=r(8461).settingGet,S=r(2507).fairGetData,E=r(7242),_=E.duelsCheckGetGameDataData,A=E.duelsCheckGetGameDataGame,O=E.duelsCheckSendCreateData,j=E.duelsCheckSendCreateUser,I=E.duelsCheckSendBotData,P=E.duelsCheckSendBotGame,T=E.duelsCheckSendJoinData,C=E.duelsCheckSendJoinGame,G=E.duelsCheckSendJoinUser,N=E.duelsCheckSendCancelData,D=E.duelsCheckSendCancelGame,Y=E.duelsGenerateGame,B=E.duelsGetGameIndex,U=E.duelsSanitizeGames,R=E.duelsSanitizeGame,M=r(836),F=M.generalUserGetLevel,$=M.generalUserGetRakeback,L=M.generalUserGetFormated,q=r(5507).generalAddBetsList,J=[],K=[],W=[],V=[],H=function(){var e=p(f().mark((function e(t,r,n,o,a){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_(o),void 0!==(i=J[B(J,o.gameId)])){e.next=7;break}return e.next=6,v.findById(o.gameId).select("amount playerCount winner fair state createdAt").populate({path:"winner",populate:{path:"user",select:"roblox.id username avatar rank"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank"}}).lean();case 6:i=e.sent;case 7:A(i),a({success:!0,game:R(i)}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,c,l,d,h,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(o),i=J.filter((function(e){return void 0!==e.bets[0]&&e.bets[0].user._id.toString()===n._id.toString()})),j(o,n,i),s=Math.floor(o.amount),u=Math.floor(o.playerCount),c=F(n),l=$(n),e.next=10,Y(s,u);case 10:return d=e.sent,h=[y.findByIdAndUpdate(n._id,{$inc:{balance:-s,"stats.bet":s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.create({amount:s,game:d._id,user:n._id,bot:!1})],e.next=15,Promise.all(h);case 15:(p=e.sent)[1]=p[1].toObject(),p[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:c,rakeback:l,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},d.bets=[p[1]],J.push(d),t.of("/socket/general").to(n._id.toString()).emit("user",{user:p[0]}),t.of("/socket/duels").emit("game",{game:R(d)}),a({success:!0}),k(n._id),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,I(o),P(n,J[B(J,o.gameId)],W,V),e.prev=3,W.push(o.gameId.toString()),i=J[B(J,o.gameId)].amount,s=[],u=0;u<J[B(J,o.gameId)].playerCount-J[B(J,o.gameId)].bets.length;u++)s.push(g.create({amount:i,game:J[B(J,o.gameId)]._id,bot:!0}));return e.next=10,Promise.all(s);case 10:l=(l=e.sent).map((function(e){return e.toObject()})),J[B(J,o.gameId)].bets=[].concat(c(J[B(J,o.gameId)].bets),c(l)),t.of("/socket/duels").emit("game",{game:R(J[B(J,o.gameId)])}),J[B(J,o.gameId)].playerCount<=J[B(J,o.gameId)].bets.length&&"created"===J[B(J,o.gameId)].state&&ee(t,J[B(J,o.gameId)]),a({success:!0}),W.splice(W.indexOf(o.gameId.toString()),1),k(n._id),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),k(r.decoded._id),W.splice(W.indexOf(o.gameId.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 31:case"end":return e.stop()}}),e,null,[[0,27],[3,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=p(f().mark((function e(t,r,n,o,a){var i,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(o),C(n,J[B(J,o.gameId)],W,V),e.prev=3,V.push(J[B(J,o.gameId)]._id.toString()),G(n,J[B(J,o.gameId)]),i=J[B(J,o.gameId)].amount,s=F(n),u=$(n),c=[y.findByIdAndUpdate(n._id,{$inc:{balance:-i,"stats.bet":i},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.create({amount:i,game:J[B(J,o.gameId)]._id,user:n._id,bot:!1})],e.next=13,Promise.all(c);case 13:(l=e.sent)[1]=l[1].toObject(),l[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:u,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},J[B(J,o.gameId)].bets.push(l[1]),t.of("/socket/general").to(n._id.toString()).emit("user",{user:l[0]}),t.of("/socket/duels").emit("game",{game:R(J[B(J,o.gameId)])}),J[B(J,o.gameId)].playerCount<=J[B(J,o.gameId)].bets.length&&"created"===J[B(J,o.gameId)].state&&ee(t,J[B(J,o.gameId)]),a({success:!0}),V.splice(V.indexOf(J[B(J,o.gameId)]._id.toString()),1),k(n._id),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(3),k(r.decoded._id),V.splice(V.indexOf(J[B(J,o.gameId)]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 36:case"end":return e.stop()}}),e,null,[[0,32],[3,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=p(f().mark((function e(t,r,n,o,a){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N(o),D(n,J[B(J,o.gameId)],W,V);try{W.push(o.gameId.toString()),a({success:!0}),W.splice(W.indexOf(o.gameId.toString()),1),k(n._id)}catch(e){k(r.decoded._id),W.splice(W.indexOf(o.gameId.toString()),1),a({success:!1,error:{type:"error",message:e.message}})}}catch(e){k(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ee=function(e,t){t.state="countdown",t.updatedAt=(new Date).getTime(),J.splice(B(J,t._id),1,t),e.of("/socket/duels").emit("game",{game:R(t)}),setTimeout((function(){te(e,t)}),4e3)},te=function(){var e=p(f().mark((function e(t,r){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="pending",J.splice(B(J,r._id),1,r),t.of("/socket/duels").emit("game",{game:R(r)}),e.next=6,S();case 6:n=e.sent,r.fair.seedPublic=n.data.head_block_id,r.fair.blockId=n.data.head_block_num,J.splice(B(J,r._id),1,r),setTimeout((function(){re(t,r)}),1e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){te(t,r)}),15e3);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),re=function(){var e=p(f().mark((function e(t,r){var n,o,a,i,c,l,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=u(r.bets.entries());try{for(n.s();!(o=n.n()).done;)a=s(o.value,2),i=a[0],a[1],c=m.createHash("sha256").update("".concat(r._id,"-").concat(r.fair.seedServer,"-").concat(r.fair.seedPublic,"-").concat(i)).digest("hex"),l=parseInt(c.substr(0,8),16)%1e4,r.bets[i].roll=l}catch(e){n.e(e)}finally{n.f()}(d=r.bets.reduce((function(e,t){return e.roll>t.roll?e:t}))).payout=Math.floor(r.amount*r.playerCount*.95),r.state="rolling",r.winner=d,r.bets[r.bets.findIndex((function(e){return e._id.toString()===d._id.toString()}))]=d,r.updatedAt=(new Date).getTime(),J.splice(B(J,r._id),1,r),t.of("/socket/duels").emit("game",{game:R(r)}),setTimeout((function(){ne(t,r)}),5e3*r.bets.length)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(){var e=p(f().mark((function e(t,r){var n,o,i,s,c,l,d,h,p,m,k,S,E,_,A,O,j,I,P;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="completed",e.next=4,b.findOne({state:"running"}).select("state").lean();case 4:n=e.sent,o=[],i=[],s=[],c=0,l=u(r.bets);try{for(l.s();!(d=l.n()).done;)h=d.value,p=r.winner._id.toString()===h._id.toString()?r.winner.payout:0,!0!==h.bot&&(h.amount,c+=!0!==h.user.limits.blockSponsor?h.amount:0,m=x(),k=!0!==h.user.limits.blockSponsor?Math.floor(h.amount*h.user.rakeback.percentage*m.general.reward.multiplier):0,S=void 0!==h.user.affiliates.referrer&&!0!==h.user.limits.blockSponsor&&"user"===h.user.rank?Math.floor(.005*h.amount):0,o.push(y.findByIdAndUpdate(h.user._id,{$inc:{balance:p,xp:!0!==h.user.limits.blockSponsor?Math.floor(h.amount*m.general.reward.multiplier):0,"stats.won":p,"limits.betToWithdraw":h.user.limits.betToWithdraw<=h.amount?-h.user.limits.betToWithdraw:-h.amount,"limits.betToRain":h.user.limits.betToRain<=h.amount?-h.user.limits.betToRain:-h.amount,"leaderboard.points":null!==n&&!0!==h.user.limits.blockSponsor&&!0!==h.user.limits.blockLeaderboard?h.amount:0,"affiliates.generated":S,"rakeback.earned":k,"rakeback.available":k},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==h.user.affiliates.referrer&&S>0&&s.push(y.findByIdAndUpdate(h.user.affiliates.referrer,{$inc:{"affiliates.earned":S,"affiliates.available":S},updatedAt:(new Date).getTime()},{}))),i.push(g.findByIdAndUpdate(h._id,{payout:p,multiplier:Math.floor(p/r.amount*100),roll:h.roll,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user bot updatedAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean())}catch(e){l.e(e)}finally{l.f()}return e.next=14,Promise.all([v.findByIdAndUpdate(r._id,{winner:r.winner._id,fair:r.fair,state:"completed",updatedAt:(new Date).getTime()},{}),w.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*c)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(o,i,s));case 14:E=e.sent,K.unshift(R(r)),K.length>25&&K.pop(),J.splice(B(J,r._id),1),t.of("/socket/duels").emit("game",{game:R(r)}),t.of("/socket/general").emit("rain",{rain:E[1]}),_=u(E.slice(2,o.length+2));try{for(_.s();!(A=_.n()).done;)O=A.value,t.of("/socket/general").to(O._id.toString()).emit("user",{user:O})}catch(e){_.e(e)}finally{_.f()}j=u(E.slice(o.length+2,o.length+i.length+2));try{for(j.s();!(I=j.n()).done;)!0!==(P=I.value).bot&&q(t,a(a({},P),{},{user:L(P.user),method:"duels"}))}catch(e){j.e(e)}finally{j.f()}e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.error(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,r){return e.apply(this,arguments)}}(),oe=function(){var e=p(f().mark((function e(t){var r,n,o,a,i,s,c,l,d,h,p,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([v.find({$or:[{state:"created"},{state:"pending"},{state:"rolling"}]}).select("amount playerCount fair state updatedAt createdAt").populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp limits stats.total affiliates anonymous createdAt"}}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("amount playerCount winner fair state createdAt").populate({path:"winner",populate:{path:"user",select:"roblox.id username avatar rank createdAt"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank createdAt"}}).lean()]);case 3:r=e.sent,K=r[1],n=[],o=u(r[0]);try{for(o.s();!(a=o.n()).done;)if((i=a.value).playerCount===i.bets.length){n.push(v.findByIdAndUpdate(i._id,{state:"canceled",updatedAt:(new Date).getTime()},{})),s=u(i.bets);try{for(s.s();!(c=s.n()).done;)l=c.value,n.push(y.findByIdAndUpdate(l.user,{$inc:{balance:i.amount,"stats.total.bet":-i.amount,"stats.duels.bet":-i.amount},updatedAt:(new Date).getTime()},{}))}catch(e){s.e(e)}finally{s.f()}}else{d=u(i.bets);try{for(d.s();!(h=d.n()).done;)p=h.value,m=F(p.user),g=$(p.user),p.user={_id:p.user._id,roblox:p.user.roblox,username:p.user.username,avatar:p.user.avatar,rank:p.user.rank,level:m,rakeback:g,stats:!0===p.user.anonymous?null:p.user.stats,limits:p.user.limits,affiliates:p.user.affiliates,createdAt:p.user.createdAt}}catch(e){d.e(e)}finally{d.f()}J.push(i)}}catch(e){o.e(e)}finally{o.f()}return e.next=10,Promise.all(n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();e.exports={duelsGetData:function(){return{games:U(J),history:K}},duelsGetGameDataSocket:H,duelsSendCreateSocket:z,duelsSendBotSocket:Q,duelsSendJoinSocket:X,duelsSendCancelSocket:Z,duelsInit:oe}},5958:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("SteamTransaction",o)},5964:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},roll:{type:Number},game:{type:n.Schema.ObjectId,ref:"DuelsGame"},user:{type:n.Schema.ObjectId,ref:"User"},bot:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DuelsBet",o)},6037:e=>{"use strict";e.exports=require("mongoose")},6040:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam),h=c.socketRemoveAntiSpam,p=r(8475),m=p.adminGetBoxListSocket,y=p.adminSendBoxCreateSocket,v=p.adminSendBoxRemoveSocket,g=p.adminSendBoxNameSocket,w=p.adminSendBoxAmountSocket,b=p.adminSendBoxStateSocket,k=p.adminSendBoxCategorySocket,x=p.adminSendBoxImageSocket,S=p.adminSendBoxItemsSocket;e.exports=function(e,t){t.on("getBoxList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=26;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.prev=7,r.next=10,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 10:c=r.sent,l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(7),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:r.next=27;break;case 26:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 27:case"end":return r.stop()}}),r,null,[[3,21],[7,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxRemove",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxName",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxAmount",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxState",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCategory",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxImage",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxItems",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),S(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},6042:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetAffiliateListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckSendAffiliateBlockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.block||null===e.block||"boolean"!=typeof e.block)throw new Error("Your entered affiliate block value is invalid.")},adminCheckSendAffiliateClearData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.code||null!==e.code&&("string"!=typeof e.code||""===e.code.trim()||e.code.length<=3||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"})))throw new Error("Your entered affiliate code is invalid.")},adminCheckSendAffiliateCodeCode:function(e){if(null!==e)throw new Error("Your entered affiliate code is already used by a other user.")},adminCheckSendAffiliateAvailableData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<0)throw new Error("Your entered available amount is invalid.")},adminFormatAffiliateSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:1}:"rank"===e&&(t={rank:1}),t},adminCheckGetAffiliateItemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.referrer_id||null===e.referrer_id)throw new Error("Your entered referrer is invalid.")}}},6049:e=>{e.exports=[[{rank:"J",suit:"club"},{rank:"4",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"spade"},{rank:"9",suit:"heart"},{rank:"10",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"3",suit:"spade"},{rank:"10",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"Q",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"spade"},{rank:"9",suit:"heart"},{rank:"4",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"spade"},{rank:"2",suit:"heart"},{rank:"7",suit:"diamond"}],[{rank:"6",suit:"club"},{rank:"6",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"spade"},{rank:"8",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"4",suit:"heart"},{rank:"10",suit:"club"},{rank:"2",suit:"spade"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"3",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"2",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"6",suit:"spade"},{rank:"7",suit:"club"},{rank:"4",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"heart"},{rank:"5",suit:"spade"},{rank:"9",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"10",suit:"club"},{rank:"3",suit:"club"}],[{rank:"6",suit:"club"},{rank:"6",suit:"diamond"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"6",suit:"club"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"Q",suit:"spade"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"5",suit:"club"},{rank:"4",suit:"spade"},{rank:"5",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"5",suit:"spade"},{rank:"Q",suit:"club"},{rank:"2",suit:"spade"},{rank:"4",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"6",suit:"club"},{rank:"2",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"club"},{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"9",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"4",suit:"club"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"3",suit:"club"},{rank:"10",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"K",suit:"spade"},{rank:"4",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"spade"},{rank:"4",suit:"heart"},{rank:"7",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"10",suit:"diamond"},{rank:"7",suit:"heart"}],[{rank:"7",suit:"spade"},{rank:"2",suit:"heart"},{rank:"2",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"spade"},{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"Q",suit:"club"},{rank:"7",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"6",suit:"heart"},{rank:"4",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"6",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"4",suit:"spade"},{rank:"5",suit:"club"}],[{rank:"A",suit:"club"},{rank:"9",suit:"heart"},{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"5",suit:"diamond"},{rank:"A",suit:"spade"},{rank:"K",suit:"spade"},{rank:"5",suit:"diamond"}],[{rank:"8",suit:"club"},{rank:"10",suit:"club"},{rank:"A",suit:"club"},{rank:"2",suit:"club"}],[{rank:"9",suit:"spade"},{rank:"10",suit:"club"},{rank:"A",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"9",suit:"club"},{rank:"2",suit:"diamond"},{rank:"9",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"Q",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"4",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"9",suit:"diamond"},{rank:"6",suit:"club"},{rank:"5",suit:"club"}],[{rank:"3",suit:"spade"},{rank:"5",suit:"heart"},{rank:"10",suit:"heart"},{rank:"3",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"club"},{rank:"9",suit:"club"},{rank:"Q",suit:"heart"}],[{rank:"7",suit:"club"},{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"5",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"spade"}],[{rank:"4",suit:"heart"},{rank:"2",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"10",suit:"club"},{rank:"4",suit:"diamond"},{rank:"3",suit:"diamond"}],[{rank:"3",suit:"heart"},{rank:"6",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"club"},{rank:"6",suit:"club"},{rank:"2",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"Q",suit:"club"},{rank:"2",suit:"diamond"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"4",suit:"heart"},{rank:"J",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"},{rank:"3",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"6",suit:"heart"},{rank:"Q",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"8",suit:"club"}],[{rank:"3",suit:"club"},{rank:"9",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"heart"},{rank:"J",suit:"club"},{rank:"4",suit:"club"}],[{rank:"5",suit:"club"},{rank:"J",suit:"spade"},{rank:"3",suit:"spade"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"8",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"2",suit:"diamond"},{rank:"2",suit:"club"},{rank:"6",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"5",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"4",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"6",suit:"spade"},{rank:"4",suit:"spade"},{rank:"9",suit:"diamond"}],[{rank:"8",suit:"club"},{rank:"8",suit:"club"},{rank:"4",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"6",suit:"spade"},{rank:"3",suit:"heart"},{rank:"2",suit:"heart"},{rank:"Q",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"10",suit:"club"},{rank:"2",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"6",suit:"club"},{rank:"A",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"10",suit:"club"},{rank:"5",suit:"diamond"},{rank:"4",suit:"diamond"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"3",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"2",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"9",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"club"},{rank:"7",suit:"club"},{rank:"3",suit:"diamond"}],[{rank:"4",suit:"diamond"},{rank:"10",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"8",suit:"spade"}],[{rank:"5",suit:"spade"},{rank:"9",suit:"heart"},{rank:"4",suit:"club"},{rank:"3",suit:"heart"}],[{rank:"5",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"5",suit:"club"},{rank:"5",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"2",suit:"spade"},{rank:"K",suit:"heart"},{rank:"8",suit:"club"}],[{rank:"K",suit:"club"},{rank:"3",suit:"club"},{rank:"5",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"3",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"6",suit:"heart"},{rank:"2",suit:"heart"},{rank:"2",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"6",suit:"spade"},{rank:"5",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"4",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"2",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"5",suit:"spade"}],[{rank:"7",suit:"spade"},{rank:"A",suit:"heart"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"6",suit:"spade"},{rank:"6",suit:"spade"}],[{rank:"3",suit:"heart"},{rank:"7",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"9",suit:"heart"}],[{rank:"3",suit:"club"},{rank:"10",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"diamond"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"},{rank:"9",suit:"diamond"}]]},6088:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(2789);var s=r(6112),u=r(7908).socketRemoveAntiSpam,c=r(5515),l=c.adminCheckGetRainListData,d=c.adminCheckSendRainAmountData,f=c.adminCheckSendRainAmountRain,h=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),u=12*(a.page-1),e.next=5,Promise.all([s.countDocuments({type:{$regex:a.search,$options:"i"}}),s.find({type:{$regex:a.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(u).select("amount participants creator type state createdAt").populate({path:"participants.user",select:"roblox.id username avatar balance"}).populate({path:"creator",select:"roblox.id username avatar balance"}).lean()]);case 5:c=e.sent,i({success:!0,count:c[0],rains:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),e.next=4,s.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 4:return c=e.sent,f(c),l=Math.floor(a.amount),e.next=9,s.findByIdAndUpdate(c._id,{amount:l},{new:!0}).select("amount participants type state updatedAt").lean();case 9:c=e.sent,t.of("/socket/general").emit("rain",{rain:c}),i({success:!0}),u(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetRainListSocket:h,adminSendRainAmountSocket:p}},6112:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},participants:[{user:{type:n.Schema.ObjectId,ref:"User"}}],totalUsers:{type:Number},creator:{type:n.Schema.ObjectId,ref:"User"},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Rain",o)},6232:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{tradeId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedTransaction",o)},6234:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function c(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var l=r(8749),d=r(8109),f=r(4862),h=(r(9472).SERVICE_PROXY_TIME,function(e,t){for(var r=0,n=e.length%4,o=n>0?n-4:0;o<e.length;o+=4)r=((r<<16)+parseInt(e.substring(o,o+4),16))%t;return 0===r});e.exports={crashCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.autoCashout||null===e.autoCashout||!0===isNaN(e.autoCashout)||Math.floor(e.autoCashout)<0)throw new Error("Your entered auto cashout is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CRASH_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.CRASH_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.CRASH_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.CRASH_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},crashCheckSendBetUser:function(e,t,r){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===r.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You can only bet one time per round.")},crashCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},crashCheckSendCashoutGame:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("rolling"!==e.state||t<=100)throw new Error("You need to wait for the start of the round before you can cashout.")},crashCheckSendCashoutBet:function(e,t,r){if(void 0===e||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(null===r||void 0!==r.multiplier||r.autoCashout>=101&&r.autoCashout<=t)throw new Error("Your bet is not available or was already cashed out.");if(e.outcome<t)throw new Error("Your are not allowed to cashout your bet because the game already completed.")},crashGetGameMultiplier:function(e){return Math.floor(100*Math.pow(Math.E,6e-5*e))},crashGenerateGame:function(){return new Promise(function(){var e,t=(e=u().mark((function e(t,r){var n,o,a,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l.randomBytes(8).toString("hex"),o=l.randomBytes(24).toString("hex"),a=l.createHash("sha256").update(o).digest("hex"),e.next=6,f.findOne({state:"created"}).sort({_id:-1}).lean();case 6:if(i=e.sent){e.next=11;break}return i=new f({seedServer:n,hash:a,seedPublic:o,state:"created"}),e.next=11,i.save();case 11:return e.next=13,Promise.all([d.create({fair:{seed:i._id},state:"created"}),f.findByIdAndUpdate(i._id,{state:"completed"},{}),f.create({seedPublic:n,seedServer:o,hash:a,state:"created"})]);case 13:return s=e.sent,e.next=16,s[0].populate({path:"fair.seed",select:"seedServer hash"});case 16:s[0]=e.sent,s[0]=s[0].toObject(),t(s[0]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),r(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},crashGetOutcome:function(e){var t=parseInt(20);if(!0===h(e,t))return 100;var r=parseInt(e.slice(0,13),16),n=Math.pow(2,52);return Math.floor((100*n-r)/(n-r))},crashSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.outcome,delete t.fair),t},crashSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback,stats:o.user.stats,createdAt:o.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},crashSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback,stats:t.user.stats,createdAt:t.user.createdAt},t}}},6245:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}var u=r(2789),c=r(7908).socketRemoveAntiSpam,l=r(6042),d=l.adminCheckGetAffiliateListData,f=l.adminCheckSendAffiliateBlockData,h=l.adminCheckSendAffiliateClearData,p=l.adminCheckSendAffiliateCodeData,m=l.adminCheckSendAffiliateCodeCode,y=l.adminCheckSendAffiliateAvailableData,v=l.adminFormatAffiliateSort,g=l.adminCheckGetAffiliateItemData,w=function(){var e=s(a().mark((function e(t,r,n,o,i){var s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(o),s=12*(o.page-1),c=v(o.sort),e.next=6,Promise.all([u.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}),u.find({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}).sort(c).limit(12).skip(s).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 6:if(l=e.sent,"fulladmin"===n.fullrank){e.next=11;break}return e.next=10,Promise.all([u.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}),u.find({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}).sort(c).limit(12).skip(s).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 10:l=e.sent;case 11:i({success:!0,count:l[0],affiliates:l[1]}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(o),e.next=4,Promise.all([u.find({"affiliates.referrer":o.referrer_id,rank:"user"}).sort({createdAt:-1}).select("stats.bet stats.deposit stats.withdraw createdAt").lean()]);case 4:s=e.sent,i({success:!0,affiliate:k(s[0])}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),k=function(e){var t,r={users:{amount:0},deposit:{amount:0},withdraw:{amount:0},revenue:{amount:0},wager:{amount:0}},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.deposit.amount=r.deposit.amount+a.stats.deposit,r.withdraw.amount=r.withdraw.amount+a.stats.withdraw,r.wager.amount=r.wager.amount+a.stats.bet}}catch(e){n.e(e)}finally{n.f()}return r.users.amount=e.length,r.revenue.amount=r.deposit.amount-1.2*r.withdraw.amount,r},x=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(o),e.next=4,u.findByIdAndUpdate(o.userId,{"limits.blockAffiliate":o.block},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:s=e.sent,i({success:!0,affiliate:s}),c(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(o),e.next=4,Promise.all([u.findByIdAndUpdate(o.userId,{"affiliates.referred":0,"affiliates.deposited":0,"affiliates.earned":0,"affiliates.available":0},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean(),u.updateMany({"affiliates.referrer":o.userId},{$unset:{"affiliates.referrer":1}},{})]);case 4:s=e.sent,i({success:!0,affiliate:s[0]}),c(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=s(a().mark((function e(t,r,n,o,i){var s,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(o),s={$unset:{"affiliates.code":1}},null===o.code){e.next=9;break}return e.next=6,u.findOne({"affiliates.code":o.code}).select("affiliates").lean();case 6:l=e.sent,m(l),s={"affiliates.code":o.code};case 9:return e.next=11,u.findByIdAndUpdate(o.userId,s,{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 11:d=e.sent,i({success:!0,affiliate:d}),c(n._id),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),_=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(o),e.next=4,u.findByIdAndUpdate(o.userId,{"affiliates.available":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:s=e.sent,i({success:!0,affiliate:s}),c(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),A=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(o),e.next=4,u.findByIdAndUpdate(o.userId,{"affiliates.cashOut":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:s=e.sent,i({success:!0,affiliate:s}),c(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetAffiliateListSocket:w,adminSendAffiliateBlockSocket:x,adminSendAffiliateClearSocket:S,adminSendAffiliateCodeSocket:E,adminSendAffiliateAvailableSocket:_,adminGetAffiliateItemSocket:b,adminSendAffiliateCashSocket:A}},6338:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function h(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,s,"next",e)}function s(e){h(a,n,o,i,s,"throw",e)}i(void 0)}))}}var m=r(8749),y=r(2789),v=r(5632),g=r(2725),w=r(3702),b=r(8744),k=r(8875),x=r(6112),S=r(7908).socketRemoveAntiSpam,E=r(8461).settingGet,_=r(1181),A=_.unboxCheckGetBoxDataData,O=_.unboxCheckGetBoxDataBox,j=_.unboxCheckSendBetData,I=_.unboxCheckSendBetBox,P=_.unboxCheckSendBetUser,T=_.unboxCheckSendBetSeed,C=_.unboxGetOutcomeItem,G=_.unboxSetOutcomeItem,N=_.findPercent,D=r(836),Y=D.generalUserGetRakeback,B=D.generalUserGetFormated,U=r(5507).generalAddBetsList,R=function(){var e=p(f().mark((function e(t,r,n,o,a){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(o),e.next=4,g.findById(o.boxId).select("name slug amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 4:i=e.sent,O(i),a({success:!0,box:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=p(f().mark((function e(t,r,n,a,u){var l,d,h,_,A,O,D,R,M,F,$,L,q,J,K,W,V;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(a),e.next=4,g.findById(a.boxId).select("amount items state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 4:return l=e.sent,I(l),d=Math.floor(a.unboxCount),h=Math.floor(l.amount*d),P(n,h),e.next=11,v.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 11:return _=e.sent,T(_),e.next=15,b.findOne({state:"running"}).select("state").lean();case 15:A=e.sent,O=!0!==n.limits.blockSponsor?h:0,D=E(),R=Y(n),M=!0!==n.limits.blockSponsor?Math.floor(h*R.percentage*D.general.reward.multiplier):0,F=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*h):0,$=[],L=0,q=f().mark((function e(){var t,r,o,a,s,u,c,p,y;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="".concat(_.seedServer,"-").concat(_.nonce+i,"-").concat(_.seedClient),r=m.createHash("sha256").update(t).digest("hex"),o=parseInt(r.substr(0,8),16)%1e5,a=C(l,o),s=h/d,D.games.ctotal.enabled&&("user"===n.rank&&s<a.amountFixed&&(u=N((a.amountFixed-s)/1e3,D.games.cases),Math.floor(100*Math.random())+1<u&&(c=(c=l.items.filter((function(e){return e.item.amountFixed<a.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),a=G(c,a.amountFixed))),"mod"!==n.rank&&"partner"!==n.rank||s<a.amountFixed&&(p=N((a.amountFixed-s)/1e3,D.games.mcases),Math.floor(100*Math.random())+1<p&&(y=(y=l.items.filter((function(e){return e.item.amountFixed<a.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),a=G(y,a.amountFixed)))),L+=a.amountFixed,$.push(w.create({amount:l.amount,payout:a.amountFixed,multiplier:Math.floor(a.amountFixed/l.amount*100),outcome:o,box:l._id,fair:{seed:_._id,nonce:_.nonce+i},user:n._id,state:"completed"}));case 8:case"end":return e.stop()}}),e)})),i=0;case 25:if(!(i<d)){e.next=30;break}return e.delegateYield(q(),"t0",27);case 27:i++,e.next=25;break;case 30:return e.next=32,k.find({enabled:"true"}).select("creators").lean();case 32:return J=e.sent,K=J.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),$=[y.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(L-h),xp:!0!==n.limits.blockSponsor?Math.floor(h*process.env.XP_RATE*D.general.reward.multiplier):0,"stats.bet":h,"stats.won":L,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-h)<=0?-n.limits.betToWithdraw:-h,"limits.betToRain":Math.floor(n.limits.betToRain-h)<=0?-n.limits.betToRain:-h,"leaderboard.points":null!==A&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?h:0,"affiliates.generated":F,"affiliates.leaderboardpoints":K&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?h:0,"rakeback.earned":M,"rakeback.available":M},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.findByIdAndUpdate(_._id,{$inc:{nonce:d}},{}),x.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*O)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(c($)),void 0!==n.affiliates.referrer&&F>0&&$.push(y.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":F,"affiliates.available":F},updatedAt:(new Date).getTime()},{})),e.next=38,Promise.all($);case 38:W=e.sent,V=(V=W.slice(3,3+d)).map((function(e){return e.toObject()})),t.of("/socket/general").emit("rain",{rain:W[2]}),u({success:!0,user:s(s({},W[0]),{},{balance:Math.floor(n.balance-h)}),games:V}),setTimeout(p(f().mark((function e(){var r,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.of("/socket/general").to(n._id.toString()).emit("user",{user:W[0]}),r=o(V);try{for(r.s();!(a=r.n()).done;)i=a.value,U(t,s(s({},i),{},{user:B(n),method:"unbox"}))}catch(e){r.e(e)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),5e3),S(n._id),e.next=51;break;case 47:e.prev=47,e.t1=e.catch(0),S(r.decoded._id),u({success:!1,error:{type:"error",message:e.t1.message}});case 51:case"end":return e.stop()}}),e,null,[[0,47]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={unboxGetData:function(){return new Promise(function(){var e=p(f().mark((function e(t,r){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt").lean();case 3:n=e.sent,t({boxes:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}())},unboxGetBoxDataSocket:R,unboxSendBetSocket:M}},6363:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String},currency:{type:String},amountCurrency:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CreditTransaction",o)},6466:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734),l=c.rateLimiter,d=(c.rateLimiterStrict,r(7908)),f=d.socketCheckUserData,h=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,y=d.socketCheckAntiSpam,v=d.socketRemoveAntiSpam,g=r(8461).settingCheck,w=r(7165),b=w.crashGetData,k=w.crashSendBetSocket,x=w.crashSendCashoutSocket,S=w.crashInit;e.exports=function(e){e.of("/socket/crash").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,h("crash",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=b(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/crash").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("crash",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,f(s,!0),g(s,"games.crash.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:s=r.sent,f(s,!0),g(s),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("crash",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},6533:(e,t,r)=>{var n=r(6037),o=new n.Schema({phrase:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("FilterPhrase",o)},6701:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(6037);i.set("strictQuery",!0),i.set("autoIndex",!1);var s=function(){var e,t=(e=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.connect(process.env.DATABASE_URI,{useUnifiedTopology:!0,useNewUrlParser:!0,serverSelectionTimeoutMS:3e4});case 3:t=e.sent,console.log("MongoDB Connected: ".concat(t.connection.host)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("MongoDB Error: ".concat(e.t0.message)),process.exit(1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();e.exports=s},6734:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function f(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,s,"next",e)}function s(e){f(a,n,o,i,s,"throw",e)}i(void 0)}))}}r(8749);var p=r(2789),m=r(2299),y=r(8455),v=r(8744),g=r(8875),w=r(3304),b=r(7908).socketRemoveAntiSpam,k=r(2507),x=k.fairGetData,S=k.fairGetBlockData,E=r(836),_=E.generalUserGetRakeback,A=E.generalUserGetFormated,O=r(4145),j=O.rouletteCheckSendBetData,I=O.rouletteCheckSendBetUser,P=O.rouletteCheckSendBetGame,T=O.rouletteGetOutcome,C=O.rouletteGenerateGame,G=O.rouletteSanitizeGame,N=O.rouletteSanitizeBets,D=O.rouletteSanitizeBet,Y=r(8461).settingGet,B=r(5507).generalAddBetsList,U=null,R=[],M=[],F=0,$=function(){var e=h(d().mark((function e(t,r,n,o,a){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{game:G(U),bets:N(R),history:M});case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),L=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(o),I(o,n,R),P(U),e.prev=4,F+=1,i=Math.floor(o.amount),s=_(n),u=[p.findByIdAndUpdate(n._id,{$inc:{balance:-i,"stats.bet":i,"stats.roulette.bet":i,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-i)<=0?-n.limits.betToWithdraw:-i,"limits.betToRain":Math.floor(n.limits.betToRain-i)<=0?-n.limits.betToRain:-i},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean(),y.create({amount:i,color:o.color,game:U._id,user:n._id})],e.next=12,Promise.all(u);case 12:(c=e.sent)[1]=c[1].toObject(),c[1].user={_id:n._id,username:n.username,avatar:n.avatar,rank:n.rank,limits:n.limits,affiliates:n.affiliates,rakeback:s},R.push(c[1]),t.of("/socket/roulette").emit("bet",{bet:D(c[1])}),a({success:!0,user:c[0]}),F-=1,b(n._id),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(4),F-=1,b(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(0),b(n._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 33:case"end":return e.stop()}}),e,null,[[0,29],[4,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),q=function(){var e=h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:U=e.sent,R=[],t.of("/socket/roulette").emit("game",{game:G(U)}),setTimeout((function(){J(t)}),13e3-((new Date).getTime()-new Date(U.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"pending"!==U.state&&(U.state="pending",t.of("/socket/roulette").emit("game",{game:G(U)})),F<=0?K(t):setTimeout((function(){J(t)}),1e3)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=h(d().mark((function e(t){var r,n,o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U.state="fairness",void 0!==U.fair.blockNum){e.next=8;break}return e.next=5,x();case 5:r=e.sent,U.fair.blockNum=r.data.head_block_num+1,t.of("/socket/roulette").emit("game",{game:G(U)});case 8:return e.next=10,S(U.fair.blockNum);case 10:n=e.sent,U.fair.seedPublic=n.data.id,U.outcome=T(U),o={red:0,green:0,bait:0,black:0},R.forEach((function(e){void 0!==o[e.color]&&(o[e.color]+=e.amount)})),a=0===U.outcome&&(o.green>0||o.bait>0)||U.outcome>=1&&U.outcome<=7&&o.red>o.black||U.outcome>=8&&o.red<o.black,i=Y(),a&&i.games.ctotal.enabled&&i.games.croulette.enabled&&(U.outcome=W()),U.state="rolling",U.updatedAt=(new Date).getTime(),t.of("/socket/roulette").emit("game",{game:G(U)}),setTimeout((function(){V(t)}),5500),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),setTimeout((function(){K(t)}),2e3);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=[1,2,3,5,6,7,8,9,10,12,13,14];return e[Math.floor(Math.random()*e.length)]},V=function(){var e=h(d().mark((function e(t){var r,n,o,a,s,c,l,f,h,b,k,x,S,E,_,O;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U.state="completed",e.next=4,v.findOne({state:"running"}).select("state").lean();case 4:r=e.sent,n=[],o=[],a=[],s=0,c=0,l=d().mark((function e(){var t,i,u,l,m,v,w,b,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h[f],i=0,0===U.outcome&&"green"===t.color?i=Math.floor(14*t.amount):4!==U.outcome&&11!==U.outcome||"bait"!==t.color?(U.outcome<=7&&U.outcome>=1&&"red"===t.color||U.outcome>=8&&"black"===t.color)&&(i=Math.floor(2*t.amount)):i=Math.floor(7*t.amount),s+=t.amount,c+=i,u=null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,l=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage):0,m=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.0025*t.amount):0,!(i>0)){e.next=16;break}return e.next=11,g.find({enabled:"true"}).select("creators").lean();case 11:v=e.sent,w=v.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),n.push(p.findByIdAndUpdate(t.user._id,{$inc:{balance:i,xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"stats.total.won":i,"stats.roulette.won":i,"leaderboard.points":u,"affiliates.leaderboardpoints":w&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":m,"rakeback.earned":l,"rakeback.available":l},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean()),e.next=21;break;case 16:return e.next=18,g.find({enabled:"true"}).select("creators").lean();case 18:b=e.sent,k=b.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),n.push(p.findByIdAndUpdate(t.user._id,{$inc:{xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"leaderboard.points":u,"affiliates.leaderboardpoints":k&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean());case 21:m>0&&o.push(p.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":m,"affiliates.available":m},updatedAt:(new Date).getTime()},{})),a.push(y.findByIdAndUpdate(t._id,{payout:i,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 23:case"end":return e.stop()}}),e)})),f=0,h=R;case 12:if(!(f<h.length)){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:f++,e.next=12;break;case 17:return e.next=19,Promise.all([m.findByIdAndUpdate(U._id,{outcome:U.outcome,fair:U.fair,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").lean(),w.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":s,"stats.total.won":c,"stats.roulette.bet":s,"stats.roulette.won":c}},{upsert:!0})].concat(n,o,a));case 19:b=e.sent,M.unshift(b[0]),M.length>100&&M.pop(),t.of("/socket/roulette").emit("game",{game:b[0]}),k=u(b.slice(2,n.length+2));try{for(k.s();!(x=k.n()).done;)S=x.value,t.of("/socket/general").to(S._id.toString()).emit("user",{user:S})}catch(e){k.e(e)}finally{k.f()}E=u(b.slice(n.length+o.length+2));try{for(E.s();!(_=E.n()).done;)O=_.value,B(t,i(i({},O),{},{user:A(O.user),method:"roulette"}))}catch(e){E.e(e)}finally{E.f()}setTimeout((function(){q(t)}),3e3),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),console.error(e.t1);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=h(d().mark((function e(t){var r,n,a,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([m.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"bets",select:"amount payout game user"}).lean(),m.find({state:"completed"}).sort({createdAt:-1}).limit(100).select("outcome fair state createdAt").lean()]);case 3:if(r=e.sent,M=r[1],null===r[0]||"completed"===r[0].state){e.next=15;break}n=[],a=u(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(s=i.value).payout&&(n=[].concat(o(n),[y.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),p.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.total.bet":-s.amount,"stats.roulette.bet":-s.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return r[0].outcome=T(r[0]),e.next=12,Promise.all([m.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair.nonce state createdAt").lean()].concat(o(n)));case 12:r=e.sent,M.unshift(r[0]),M.length>100&&M.pop();case 15:q(t),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rouletteGetDataSocket:$,rouletteSendBetSocket:L,rouletteInit:H,getRandomWithoutExcluded:W}},6769:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{main:{type:Number},sideLeft:{type:Number},sideRight:{type:Number}},payout:{type:Number},multiplier:{type:Number},cards:[{rank:{type:String},suit:{type:String}}],cardsLeft:[{rank:{type:String},suit:{type:String}}],cardsRight:[{rank:{type:String},suit:{type:String}}],actions:[{type:String}],seat:{type:Number},game:{type:n.Schema.ObjectId,ref:"BlackjackGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BlackjackBet",o)},6888:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckAntiSpam,f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(485),m=(p.cashierGetCryptoDataSocket,p.cashierSendCryptoWithdrawSocket),y=p.cashierGetCryptoDataSocketByOxapay;e.exports=function(e,t){t.on("getCryptoData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),h(c),y(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCryptoWithdraw",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban stats").lean();case 12:c=r.sent,l(c,!0),h(c,"crypto.withdraw.enabled"),m(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},6905:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=r(8749),l=r(1024),d=r(5398),f=(r(8461).settingGet,r(8223)),h=r(1325),p=r(6049),m=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],y=["heart","spade","diamond","club"],v=function(e){var t,r=0,n=!1,o=i(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;"A"===a.rank?(r+=1,n=!0):"K"===a.rank||"Q"===a.rank||"J"===a.rank?r+=10:r+=Math.floor(a.rank)}}catch(e){o.e(e)}finally{o.f()}return!0===n&&r<=11&&(r+=10),r},g=function(e){return color="",!0===["heart","diamond"].includes(e.suit)?color="red":color="black",color},w=function(e){var t=process.env.BLACKJACK_MIN_AMOUNT_STANDARD;return"whale"===e&&(t=process.env.BLACKJACK_MIN_AMOUNT_WHALE),t},b=function(e){var t=process.env.BLACKJACK_MAX_AMOUNT_STANDARD;return"whale"===e&&(t=process.env.BLACKJACK_MAX_AMOUNT_WHALE),t},k=function(e){return Math.floor(e.main+e.sideLeft+e.sideRight)};e.exports={blackjackCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendJoinTable:function(e,t,r){if(void 0===r||"created"!==r.game.state&&"countdown"!==r.game.state)throw new Error("Your requested table is not available.");if(!0===r.players.some((function(t){return t.seat===e.seat})))throw new Error("Your requested table seat is already occupied.");if(r.players.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=3)throw new Error("You aren’t allowed to sit at more than three seats at once.");if(!0===r.players.some((function(e){return e.user._id.toString()===t._id.toString()&&null===e.bet})))throw new Error("You need to place a bet first on your other seats.")},blackjackCheckSendJoinUser:function(e,t){if(e.balance<Math.floor(1e3*w(t.game.type)))throw new Error("You have not enough balance for this action.")},blackjackCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.bets||!0!==Array.isArray(e.bets)||e.bets.length<=0)throw new Error("Your provided bets are invalid.")},blackjackCheckSendBetTable:function(e){if(void 0===e||"countdown"!==e.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendBetBets:function(e){var t,r=[],n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(null==o)throw new Error("Your provided bets are invalid.");if(void 0===o.seat||!0===isNaN(o.seat)||!1===["0","1","2","3","4"].includes(o.seat.toString()))throw new Error("Your provided table seat is invalid.");if(void 0===o.amount||null===o.amount)throw new Error("You’ve provided an invalid bet amount.");if(void 0===o.amount.main||!0===isNaN(o.amount.main)||Math.floor(o.amount.main)<0)throw new Error("You’ve provided an invalid main bet amount.");if(void 0===o.amount.sideLeft||!0===isNaN(o.amount.sideLeft)||Math.floor(o.amount.sideLeft)<0)throw new Error("You’ve provided an invalid side bet amount.");if(void 0===o.amount.sideRight||!0===isNaN(o.amount.sideRight)||Math.floor(o.amount.sideRight)<0)throw new Error("You’ve provided an invalid side bet amount.");if(!0===r.includes(o.seat.toString()))throw new Error("You’ve provided multiple bets for one seat.");r.push(o.seat.toString())}}catch(e){n.e(e)}finally{n.f()}},blackjackCheckSendBetSeat:function(e,t,r,n){if(void 0===n||n.user._id.toString()!==t._id.toString())throw new Error("Your requested table seat is not available.");if(k(e.amount)<=0||!0===[Math.floor(e.amount.main),Math.floor(e.amount.sideLeft),Math.floor(e.amount.sideRight)].some((function(e){return 0!==e&&e<Math.floor(1e3*w(r.game.type))})))throw new Error("You can only bet a min amount of ".concat(parseFloat(w(r.game.type)).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," DL per seat."));if(Math.floor((null===n.bet?0:k(n.bet.amount))+k(e.amount))>Math.floor(1e3*b(r.game.type)))throw new Error("You can only bet a total max amount of ".concat(parseFloat(b(r.game.type)).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," DL per seat."));if((Math.floor(e.amount.sideLeft)>0||Math.floor(e.amount.sideRight)>0)&&Math.floor(e.amount.main)<=0&&null===n.bet)throw new Error("You need to place a main bet before you can place side bets.");if((new Date).getTime()>=new Date(r.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.")},blackjackCheckSendBetUser:function(e,t){if(e.balance<t)throw new Error("You don’t have enough balance for this action.")},blackjackCheckSendClearData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.")},blackjackCheckSendClearTable:function(e){if(void 0===e||"countdown"!==e.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendClearSeat:function(e,t){if(t.length<=0)throw new Error("You haven`t placed a bet yet.");if((new Date).getTime()>=new Date(e.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.")},blackjackCheckSendInsuranceData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.insurance||"boolean"!=typeof e.insurance)throw new Error("Your entered insurance value is invalid.")},blackjackCheckSendInsuranceTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendInsuranceSeat:function(e,t){if(void 0===t)throw new Error("Your requested table seat is not available.");if("all"!==e.playersPos||(new Date).getTime()>=new Date(e.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(t.bet.actions.length>1||!0===t.bet.actions.includes("insurance")||!0===t.bet.actions.includes("noinsurance"))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendInsuranceUser:function(e,t,r){if(!0===e.insurance&&t.balance<Math.floor(r))throw new Error("You have not enough balance for this action!")},blackjackCheckSendHitData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendHitTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendHitSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("double"))throw new Error("Your requested action is not available for your seat.");if(!1===r.bet.actions.includes("split")&&(!0===r.bet.actions.includes("stand")||v(r.bet.cards)>=21))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendStandData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendStandTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendStandSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("double")||!1===r.bet.actions.includes("split")&&(!0===r.bet.actions.includes("stand")||v(r.bet.cards)>=21)||!0===r.bet.actions.includes("split")&&(r.bet.actions.filter((function(e){return"stand"===e})).length>=2||!0===r.bet.actions.includes("stand")&&(v(r.bet.cardsLeft)>=21||v(r.bet.cardsRight)>=21)||v(r.bet.cardsLeft)>=21&&v(r.bet.cardsRight)>=21))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendSplitData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendSplitTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendSplitSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("split"))throw new Error("Your requested action is not available for your seat.");if(2!==r.bet.cards.length||r.bet.cards[0].rank!==r.bet.cards[1].rank)throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendSplitUser:function(e,t){if(e.balance<Math.floor(t.bet.amount.main))throw new Error("You have not enough balance for this action.")},blackjackCheckSendDoubleData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendDoubleTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendDoubleSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("split"))throw new Error("Your requested action is not available for your seat.");if(2!==r.bet.cards.length||v(r.bet.cards)<9||v(r.bet.cards)>11)throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendDoubleUser:function(e,t){if(e.balance<Math.floor(t.bet.amount.main))throw new Error("You have not enough balance for this action.")},blackjackGenerateGame:function(e,t){return new Promise(function(){var r,n=(r=o().mark((function r(n,a){var i,s,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=c.randomBytes(24).toString("hex"),s=c.createHash("sha256").update(i).digest("hex"),r.next=5,d.create({fair:{seedServer:i,hash:s},table:e,type:t,state:"created"});case 5:u=(u=r.sent).toObject(),n(u),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),a(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},blackjackGenerateDeck:function(){for(var e=[],t=0;t<process.env.BLACKJACK_DECK_COUNT;t++)for(var r=0;r<y.length;r++)for(var n=0;n<m.length;n++)e.push({rank:m[n],suit:y[r]});return e},blackjackShuffleDeck:function(e,t){var r=c.createHash("sha256").update(t).digest("hex");return new l(r).shuffle(e)},blackjackGetCardsValue:v,blackjackCheckCardsSoftSeventeen:function(e){var t,r=0,n=!1,o=i(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;"A"===a.rank?(r+=1,n=!0):"K"===a.rank||"Q"===a.rank||"J"===a.rank?r+=10:r+=Math.floor(a.rank)}}catch(e){o.e(e)}finally{o.f()}return!0===n&&7===r},blackjackTableListSanitize:function(e){var t,r=[],n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;"completed"!==(o=JSON.parse(JSON.stringify(o))).game.state&&(delete o.game.deck,delete o.game.fair.seedServer,"running"===o.game.state&&void 0!==o.game.dealerCards[1]&&(o.game.dealerCards[1]={rank:"hidden",suit:"hidden"}));var a,s=i(o.players);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.user={_id:u.user._id,roblox:u.user.roblox,username:u.user.username,avatar:u.user.avatar,rank:u.user.rank,level:u.user.level,rakeback:u.user.rakeback.name,stats:u.user.stats,createdAt:u.user.createdAt}}}catch(e){s.e(e)}finally{s.f()}r.push(o)}}catch(e){n.e(e)}finally{n.f()}return r},blackjackTableSanitize:function(e){var t=JSON.parse(JSON.stringify(e));"completed"!==t.game.state&&(delete t.game.deck,delete t.game.fair.seedServer,"running"===t.game.state&&void 0!==t.game.dealerCards[1]&&(t.game.dealerCards[1]={rank:"hidden",suit:"hidden"}));var r,n=i(t.players);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.user={_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback.name,stats:o.user.stats,createdAt:o.user.createdAt}}}catch(e){n.e(e)}finally{n.f()}return t},blackjackGetBetAmountMin:w,blackjackGetBetAmountMax:b,blackjackGetBetAmount:k,blackjackGetSideBetMultiplier:function(e,t){var r,n,o={left:0,right:0};return t[0].rank===t[1].rank&&g(t[0])===g(t[1])&&(o.left=t[0].suit===t[1].suit?25:10),e[0].rank===t[0].rank===t[1].rank?o.right=e[0].suit===t[0].suit===t[1].suit?100:30:!0===(n=!1,(r=(r=[e[0],t[0],t[1]]).map((function(e){return v([e])}))).sort((function(e,t){return e-t})),3===(r=function(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(r))).length&&(r[2]-r[0]!=2&&!0===r.includes(11)&&(r=[1,r[0],r[1]]),r[2]-r[0]==2&&(n=!0)),n)?o.right=e[0].suit===t[0].suit===t[1].suit?40:10:e[0].suit===t[0].suit===t[1].suit&&(o.right=5),o},generateBlackjackWinningHand:function(e){console.log("count",e),num=Math.floor(100*Math.random()),console.log("num",num),console.log("test",f[29]);var t=function(e){if(3===e)return 3;for(var t=[],r=3;r<=e;r++)t.push(r);return t[Math.floor(Math.random()*t.length)]}(e);return 3===t?(console.log("num1",f[num]),f[num]):4==t?(console.log("num2",p[num]),p[num]):h[num]}}},6919:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(4229);e.exports={cashierCheckSendSteamDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.game||"string"!=typeof e.game||!0!==["csgo","dota2"].includes(e.game))throw new Error("Your provided game is invalid.")},cashierSteamCreateTransaction:function(e){return new Promise(function(){var t,r=(t=o().mark((function t(r,n){var a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={Token:process.env.SKINIFY_API_KEY},t.next=4,i("https://skinify.io/api/create-deposit",{method:"POST",headers:a,body:JSON.stringify(e)});case 4:if(200!==(s=t.sent).status){t.next=12;break}return t.next=8,s.json();case 8:s=t.sent,r(s),t.next=13;break;case 12:n(new Error("ERROR: ".concat(s.statusText)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())}}},6930:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{transaction:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftTransaction",o)},6966:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},game:{type:n.Schema.ObjectId,ref:"RollGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollBet",o)},6998:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(4825),u=r(6930),c=r(3304),l=r(7908).socketRemoveAntiSpam,d=r(7587),f=d.captchaCheckData,h=d.captchaGetData,p=r(2745),m=p.cashierCheckSendGiftRedeemData,y=p.cashierCheckSendGiftRedeemCode,v=[],g=function(){var e,t=(e=o().mark((function e(t,r,n,a,d){var p,g,w,b,k;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),e.next=4,h(a.captcha);case 4:return p=e.sent,f(p),e.next=8,s.findOne({code:a.code}).select("code reward redeemer");case 8:return g=e.sent,y(g,v),e.prev=10,v.push(g._id.toString()),w=Math.floor(g.reward/process.env.COIN_RATE*1e3),b=[],b=[i.findByIdAndUpdate(n._id,{$inc:{balance:w,"stats.deposit":w,"limits.betToWithdraw":w},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),s.findByIdAndUpdate(g._id,{redeemer:n._id,updatedAt:(new Date).getTime()}),u.create({amount:w,data:{transaction:g.code},type:"deposit",user:n._id,state:"completed"}),c.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":g.reward,"stats.gift.deposit":g.reward}},{upsert:!0})],void 0!==n.affiliates.referrer&&b.push(i.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.deposit":w},updatedAt:(new Date).getTime()},{})),e.next=18,Promise.all(b);case 18:k=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:k[0]}),d({success:!0}),v.splice(v.indexOf(g._id.toString()),1),l(n._id),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(10),v.splice(v.indexOf(g._id.toString()),1),l(r.decoded._id),d({success:!1,error:{type:"error",message:e.t0.message}});case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),l(r.decoded._id),d({success:!1,error:{type:"error",message:e.t1.message}});case 36:case"end":return e.stop()}}),e,null,[[0,32],[10,25]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendGiftRedeemSocket:g}},7046:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}var u=r(2789),c=r(286),l=r(7908).socketRemoveAntiSpam,d=r(7587),f=(d.captchaCheckData,d.captchaGetData,r(836)),h=(f.generalUserGetFormated,f.generalUserGetFormatedWithBalance),p=r(5297),m=p.generalCheckSendAffiliateCodeData,y=p.generalCheckSendAffiliateCodeCode,v=p.generalCheckSendAffiliateClaimCodeData,g=p.generalCheckSendAffiliateClaimCodeUser,w=p.generalCheckSendAffiliateClaimCodeCode,b=p.generalCheckSendAffiliateClaimEarningsUser,k=function(){var e=s(a().mark((function e(t,r,n,o,i){var s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.find({"affiliates.referrer":n._id,rank:"user"}).sort({createdAt:-1}).select("username avatar rank xp affiliates.generated affiliates.referrer anonymous stats balance createdAt").lean();case 3:return s=(s=e.sent).map((function(e){return{user:h(e),affiliates:e.affiliates}})),e.next=7,u.findById(n.affiliates.referrer).select("username affiliates.code").lean();case 7:c=e.sent,i({success:!0,data:n.affiliates,referred:s,referrer:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(){var e=s(a().mark((function e(t,r,n,o,i){var s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(o),s=o.code.toLowerCase(),e.next=5,u.findOne({"affiliates.code":s}).select("affiliates.code").lean();case 5:return c=e.sent,y(c),e.next=9,u.findByIdAndUpdate(n._id,{"affiliates.code":s},{new:!0}).select("affiliates").lean();case 9:c=e.sent,i({success:!0,data:c.affiliates}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=s(a().mark((function e(t,r,n,i,s){var d,f,h,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(i),d=r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,f=i.code.toLowerCase(),e.next=6,Promise.all([u.findOne({"affiliates.referredAddress":d}).select("affiliates").lean(),u.findOne({"affiliates.code":f}).select("affiliates").lean()]);case 6:return h=e.sent,g(n,h[0]),w(n,h[1]),p="goon"===f?100:0,e.next=12,Promise.all([u.findByIdAndUpdate(n._id,o(o(o({$inc:{balance:p},"affiliates.referrer":h[1]._id,"affiliates.referredAddress":d},"affiliates.referredAddress",d),"affiliates.leaderboardpoints",0),"updatedAt",(new Date).getTime()),{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),u.findByIdAndUpdate(h[1]._id,{$inc:{"affiliates.referred":1}}),c.create({amount:p,type:"affiliateCodeClaim",user:n._id,state:"goon"===f?"completed":"created"})]);case 12:h=e.sent,s({success:!0,user:h[0]}),l(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),l(r.decoded._id),s({success:!1,error:{type:"error",message:e.t0.message}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=s(a().mark((function e(t,r,n,o,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(n),e.next=4,Promise.all([u.findByIdAndUpdate(n._id,{$inc:{balance:n.affiliates.available},"affiliates.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback affiliates mute ban verifiedAt updatedAt"),c.create({amount:n.affiliates.available,type:"affiliateEarningClaim",user:n._id,state:"completed"})]);case 4:s=e.sent,i({success:!0,user:s[0]}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetAffiliateDataSocket:k,generalSendAffiliateCodeSocket:x,generalSendAffiliateClaimCodeSocket:S,generalSendAffiliateClaimEarningsSocket:E}},7067:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"RollSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"RollBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RollGame",o)},7073:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(1198),w=g.blackjackGetData,b=g.blackjackSendJoinSocket,k=g.blackjackSendBetSocket,x=g.blackjackSendClearSocket,S=g.blackjackSendInsuranceSocket,E=g.blackjackSendHitSocket,_=g.blackjackSendStandSocket,A=g.blackjackSendSplitSocket,O=g.blackjackSendDoubleSocket,j=g.blackjackInit;e.exports=function(e){e.of("/socket/blackjack").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("blackjack",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=w(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/blackjack").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("blackjack",r),t.prependAny((function(e){})),t.on("sendJoin",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits mute ban affiliates createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.blackjack.enabled"),b(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s,"games.blackjack.enabled"),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendClear",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendInsurance",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),S(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendHit",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),E(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendStand",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),_(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendSplit",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),A(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendDouble",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 12:s=r.sent,d(s,!0),v(s),O(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("blackjack",r);case 2:case"end":return e.stop()}}),e)}))))})),j(e)}},7078:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam),h=c.socketRemoveAntiSpam,p=r(7929),m=p.adminGetPromoListSocket,y=p.adminSendPromoCreateSocket,v=p.adminSendPromoRemoveSocket;e.exports=function(e,t){t.on("getPromoList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),m(e,t,c,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:case"end":return r.stop()}}),r,null,[[2,21],[6,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoRemove",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},7089:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)}))}}var f=r(6037),h=r(7906),p=r(6533),m=r(7908).socketRemoveAntiSpam,y=r(8461),v=y.settingGet,g=y.settingSetValue,w=r(1454),b=w.generalCheckGetChatMessagesData,k=w.generalCheckSendChatMessageData,x=w.generalCheckSendChatMessageRoom,S=w.generalCheckSendChatMessageUser,E=w.generalCheckSendChatRemoveData,_=w.generalCheckSendChatRemoveRoom,A=w.generalCheckSendChatRemoveMessage,O=w.generalCheckSendChatClearRoom,j=w.generalCheckSendChatLockData,I=w.generalCheckSendChatLockRoom,P=w.generalGetChatOnlineCount,T=w.generalFilterMessage,C=r(836),G=C.generalUserGetLevel,N=C.generalUserGetRakeback,D=(r(9472).SERVICE_PROXY_TIME,{en:[],tr:[],de:[],es:[],beg:[],whale:[]}),Y=[],B=[],U=function(){var e=d(i().mark((function e(t,r,n,o,a){var u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(o),void 0!==(u=s(r.rooms)[1])&&r.leave(u),r.join(o.room),e.next=7,P(t);case 7:c=e.sent,t.of("/socket/general").emit("chatOnline",{online:c}),a({success:!0,messages:D[o.room]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),R=function(){var e=d(i().mark((function e(t,r,n,o,a){var u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E(o),u=s(r.rooms)[1],_(u),A(o,D[u]),c=D[u].findIndex((function(e){return e._id.toString()===o.messageId.toString()})),D[u].splice(c,1),t.of("/socket/general").to(u).emit("chatRemove",{messageId:o.messageId}),a({success:!0}),m(n._id)}catch(e){m(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=d(i().mark((function e(t,r,n,o,a){var u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{u=s(r.rooms)[1],O(u),D[u]=[],t.of("/socket/general").to(u).emit("chatClear",{}),message={room:u,message:"Chat has been cleared by an administrator.",type:"system"},$(t,message),a({success:!0}),m(n._id)}catch(e){m(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=d(i().mark((function e(t,r,n,o,a){var u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(o),u=v(),c=s(r.rooms)[1],I(o,u,c),e.next=7,g("chat.rooms.".concat(c,".enabled"),o.value);case 7:u=e.sent,t.of("/socket/general").emit("settings",{settings:u}),message={message:"Chat has been ".concat(!0===o.value?"unlocked":"locked"," by an administrator."),room:c,type:"system"},$(t,message),a({success:!0}),m(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),m(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(e,t){try{var r="user"===t.type||void 0!==t.room?[t.room]:Object.keys(D);t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_id:new f.Types.ObjectId},t);var n,i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;"rainCompleted"===t.type&&(D[s]=D[s].filter((function(e){return"rainCompleted"!==e.type}))),D[s].length>50&&D[s].shift(),D[s].push(t),e.of("/socket/general").to(s).emit("chatMessage",{message:t})}}catch(e){i.e(e)}finally{i.f()}}catch(e){console.error(e)}},L=function(){var e=d(i().mark((function e(t){var r,n,o,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.find({}).select("phrase").lean();case 3:for(r=e.sent,B=r.map((function(e){return e.phrase})),n=v(),message={message:"Chat has been locked by an administrator.",type:"system"},o=0,a=Object.keys(D);o<a.length;o++)s=a[o],!1===n.chat.rooms[s].enabled&&(message.room=s,$(t,message));e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetChatMessagesSocket:U,generalSendChatMessageSocket:function(e,t,r,n,o){try{k(n);var a,i=v(),u=s(t.rooms)[1];if(x(r,i,u),S(r,i,Y),Y[r._id.toString()]=(new Date).getTime(),"admin"===r.rank&&!0===n.message.trim().startsWith("/system"))a={message:h.escape(n.message.replace("/system","").trim()),type:"system"};else{var c=G(r),l=N(r);a={message:T(n.message,B),room:u,user:{_id:r._id,roblox:r.roblox,username:r.username,avatar:r.avatar,rank:r.rank,level:c,rakeback:l.name,stats:!0===r.anonymous?null:r.stats,createdAt:r.createdAt},type:"user"}}$(e,a),o({success:!0}),m(r._id)}catch(e){m(t.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}},generalSendChatRemoveSocket:R,generalSendChatClearSocket:M,generalSendChatLockSocket:F,generalChatAddMessage:$,generalChatAddFilter:function(e){B.push(e)},generalChatRemoveFilter:function(e){var t=B.indexOf(e);-1!==t&&B.splice(t,1)},generalChatInit:L}},7097:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(3298),w=g.minesGetGame,b=g.minesSendBetSocket,k=g.minesSendRevealSocket,x=g.minesSendCashoutSocket,S=g.minesInit;e.exports=function(e){e.of("/socket/mines").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("mines",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=20;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:t.emit("init",{game:w(t.decoded)}),r(),e.next=21;break;case 20:r(new Error("You need to sign in to perform this action."));case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/mines").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("mines",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.mines.enabled"),b(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("mines",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},7157:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,r(8461).settingCheck),f=r(8078),h=f.generalGetLeaderboardDataSocket,p=(f.generalLeaderboardInit,!1);e.exports=function(e,t){t.on("getLeaderboardData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:c=r.sent;case 12:l(c,!1),d(c),h(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}());var n=function(){var t=i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(r,8078,23));case 2:(0,t.sent.generalLeaderboardInit)(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();p||(n(),p=!0)}},7165:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function f(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,s,"next",e)}function s(e){f(a,n,o,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(2789),y=r(8109),v=r(988),g=r(6112),w=r(8744),b=r(8875),k=r(7908).socketRemoveAntiSpam,x=r(8461).settingGet,S=r(6234),E=S.crashCheckSendBetData,_=S.crashCheckSendBetUser,A=S.crashCheckSendBetGame,O=S.crashCheckSendCashoutGame,j=S.crashCheckSendCashoutBet,I=S.crashGetGameMultiplier,P=S.crashGenerateGame,T=S.crashGetOutcome,C=S.crashSanitizeGame,G=S.crashSanitizeBets,N=S.crashSanitizeBet,D=r(836),Y=D.generalUserGetLevel,B=D.generalUserGetRakeback,U=D.generalUserGetFormated,R=r(5507).generalAddBetsList,M=null,F=[],$=[],L=0,q=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u,c,l,f,h,p,y,g,S,O;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(o),_(o,n,F),A(M),e.prev=4,L+=1,e.next=8,w.findOne({state:"running"}).select("state").lean();case 8:return i=e.sent,e.next=11,b.find({enabled:"true"}).select("creators").lean();case 11:return s=e.sent,u=s.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),c=Math.floor(o.amount),l=Math.floor(o.autoCashout)<=100?0:Math.floor(o.autoCashout),f=Y(n),h=x(),p=B(n),y=!0!==n.limits.blockSponsor?Math.floor(c*p.percentage*h.general.reward.multiplier):0,g=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*c):0,S=[m.findByIdAndUpdate(n._id,{$inc:{balance:-c,xp:!0!==n.limits.blockSponsor?Math.floor(c*process.env.XP_RATE*h.general.reward.multiplier):0,"stats.bet":c,"leaderboard.points":null!==i&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?c:0,"affiliates.generated":g,"affiliates.leaderboardpoints":u&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?c:0,"rakeback.earned":y,"rakeback.available":y},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.create({amount:c,autoCashout:l,game:M._id,user:n._id})],void 0!==n.affiliates.referrer&&g>0&&S.push(m.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":g,"affiliates.available":g},updatedAt:(new Date).getTime()},{})),e.next=24,Promise.all(S);case 24:(O=e.sent)[1]=O[1].toObject(),O[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:f,rakeback:p.name,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},F.push(O[1]),t.of("/socket/crash").emit("bet",{bet:N(O[1])}),a({success:!0,user:O[0]}),L-=1,k(n._id),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(4),k(r.decoded._id),L-=1,a({success:!1,error:{type:"error",message:e.t0.message}});case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 45:case"end":return e.stop()}}),e,null,[[0,41],[4,34]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),J=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=(new Date).getTime()-M.updatedAt,s=I(i),O(M,s),u=F[F.findIndex((function(e){return e.user._id.toString()===n._id.toString()}))],j(M,s,u),Z(t,s,u),a({success:!0}),k(n._id)}catch(e){k(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),K=function(){var e=h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F=[],e.next=4,P();case 4:M=e.sent,t.of("/socket/crash").emit("game",{game:C(M)}),setTimeout((function(){V(t)}),6e3-((new Date).getTime()-new Date(M.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},V=function(){var e=h(d().mark((function e(t){var r,n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{M.state="pending",t.of("/socket/crash").emit("game",{game:C(M)}),L<=0?(r=p.createHash("sha256").update("".concat(M._id,"-").concat(M.fair.seed.seedServer)).digest("hex"),M.outcome=T(r),n=x(),o=F.reduce((function(e,t){return e+t.amount}),0),0!==(a=W(o/1e3,n.games.crashees))&&n.games.ctotal.enabled&&(M.outcome=Math.floor(Math.random()*(a-100+1))+100),M.state="rolling",M.updatedAt=(new Date).getTime(),t.of("/socket/crash").emit("game",{game:C(M)}),H(t,0)):setTimeout((function(){V(t)}),500)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=h(d().mark((function e(t,r){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=Math.ceil(16666.666667*Math.log(.01*(M.outcome+1)))-r,o=Math.max(0,Math.min(n,150)),setTimeout((function(){z(t)}),o)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z=function(){var e=h(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=(new Date).getTime()-M.updatedAt,n=I(r),t.of("/socket/crash").emit("tick",{multiplier:n}),X(t,n),n>M.outcome?Q(t):H(t,r)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=h(d().mark((function e(t){var r,n,o,a,s,c,l,f,h,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,M.state="completed",t.of("/socket/crash").emit("game",{game:M}),r=[],n=[],o=0,a=0,s=F;a<s.length;a++)c=s[a],o+=!0!==c.user.limits.blockSponsor?c.amount:0,void 0===c.multiplier&&(r.push(m.findByIdAndUpdate(c.user._id,{$inc:{"limits.betToWithdraw":Math.floor(c.user.limits.betToWithdraw-c.amount)<=0?-c.user.limits.betToWithdraw:-c.amount,"limits.betToRain":Math.floor(c.user.limits.betToRain-c.amount)<=0?-c.user.limits.betToRain:-c.amount},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),n.push(v.findByIdAndUpdate(c._id,{payout:0,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean()));return e.next=9,Promise.all([y.findByIdAndUpdate(M._id,{outcome:M.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),g.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*o)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(r,n));case 9:l=e.sent,$.unshift(l[0]),$.length>25&&$.pop(),t.of("/socket/general").emit("rain",{rain:l[1]}),f=u(l.slice(r.length+2));try{for(f.s();!(h=f.n()).done;)p=h.value,R(t,i(i({},p),{},{user:U(p.user),method:"crash"}))}catch(e){f.e(e)}finally{f.f()}setTimeout((function(){K(t)}),3e3),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),X=function(e,t){try{for(var r=0,n=F;r<n.length;r++){var o=n[r];void 0===o.multiplier&&o.autoCashout>=101&&o.autoCashout<=t&&o.autoCashout<=M.outcome?Z(e,o.autoCashout,o):void 0===o.multiplier&&Math.floor(o.amount*(t/100))>=Math.floor(1e3*process.env.CRASH_MAX_PROFIT)&&t<=M.outcome&&Z(e,t,o)}}catch(e){console.error(e)}},Z=function(){var e=h(d().mark((function e(t,r,n){var o,a,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1===(o=F.findIndex((function(e){return e._id.toString()===n._id.toString()})))){e.next=13;break}return a=Math.floor(F[o].amount*(r/100)),s=r>=125?F[o].amount:a,F[o].payout=a,F[o].multiplier=r,t.of("/socket/crash").emit("bet",{bet:N(F[o])}),e.next=10,Promise.all([m.findByIdAndUpdate(F[o].user._id,{$inc:{balance:a,"stats.won":a,"limits.betToWithdraw":Math.floor(F[o].user.limits.betToWithdraw-s)<=0?-F[o].user.limits.betToWithdraw:-s,"limits.betToRain":Math.floor(F[o].user.limits.betToRain-s)<=0?-F[o].user.limits.betToRain:-s},updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id username avatar balance rank xp stats rakeback anonymous mute ban verifiedAt updatedAt").lean(),v.findByIdAndUpdate(F[o]._id,{payout:a,multiplier:r,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout actions user updatedAt createdAt").lean()]);case 10:u=e.sent,t.of("/socket/general").to(u[0]._id.toString()).emit("user",{user:u[0]}),R(t,i(i({},u[1]),{},{user:U(u[0]),method:"crash"}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n){return e.apply(this,arguments)}}(),ee=function(){var e=h(d().mark((function e(t){var r,n,a,i,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([y.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 3:if(r=e.sent,$=r[1],null===r[0]||"completed"===r[0].state){e.next=16;break}n=[],a=u(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(s=i.value).payout&&(n=[].concat(o(n),[v.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),m.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.bet":-s.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return c=p.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=T(c),e.next=13,Promise.all([y.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(o(n)));case 13:r=e.sent,$.unshift(r[0]),$.length>25&&$.pop();case 16:K(t),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();e.exports={crashGetData:function(){return{game:C(M),bets:G(F),history:$}},crashSendBetSocket:q,crashSendCashoutSocket:J,crashInit:ee}},7242:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var u=r(7906),c=r(8749),l=r(1373);e.exports={duelsCheckGetGameDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==u.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckGetGameDataGame:function(e){if(null===e)throw new Error("Your entered game id is not available.")},duelsCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.playerCount||!0===isNaN(e.playerCount)||Math.floor(e.playerCount)<=1||Math.floor(e.playerCount)>10)throw new Error("Your entered player count is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.DUELS_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.DUELS_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.DUELS_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.DUELS_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},duelsCheckSendCreateUser:function(e,t,r){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(r.length>=6)throw new Error("You are not allowed to have more then 6 open duels games.")},duelsCheckSendBotData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==u.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendBotGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to call bots for this game.")},duelsCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==u.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendJoinGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(!0===t.bets.some((function(t){return t.user._id.toString()===e._id.toString()})))throw new Error("You are not allowed to join more then one time per duels game.")},duelsCheckSendJoinUser:function(e,t){if(e.balance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.")},duelsCheckSendCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==u.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendCancelGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to cancel this game.")},duelsGenerateGame:function(e,t){return new Promise(function(){var r,n=(r=i().mark((function r(n,o){var a,s,u;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=c.randomBytes(24).toString("hex"),s=c.createHash("sha256").update(a).digest("hex"),r.next=5,l.create({amount:e,playerCount:t,fair:{seedServer:a,hash:s},state:"created"});case 5:u=(u=r.sent).toObject(),n(u),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),o(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},duelsGetGameIndex:function(e,t){return e.findIndex((function(e){return e._id.toString()===t.toString()}))},duelsSanitizeGames:function(e){var t,r=[],n=o(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;"completed"!==(a=JSON.parse(JSON.stringify(a))).state&&(a.fair={hash:a.fair.hash});var i,s=o(a.bets);try{for(s.s();!(i=s.n()).done;){var u=i.value;u.user=!0===u.bot?{}:{_id:u.user._id,roblox:u.user.roblox,username:u.user.username,avatar:u.user.avatar,rank:u.user.rank,level:u.user.level,rakeback:u.user.rakeback.name,stats:u.user.stats,createdAt:u.user.createdAt}}}catch(e){s.e(e)}finally{s.f()}r.push(a)}}catch(e){n.e(e)}finally{n.f()}return r},duelsSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));"completed"!==t.state&&(t.fair={hash:t.fair.hash});var r,n=o(t.bets);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.user=!0===a.bot?{}:{_id:a.user._id,roblox:a.user.roblox,username:a.user.username,avatar:a.user.avatar,rank:a.user.rank,level:a.user.level,rakeback:a.user.rakeback.name,stats:a.user.stats,createdAt:a.user.createdAt}}}catch(e){n.e(e)}finally{n.f()}return t}}},7252:e=>{"use strict";e.exports=require("express")},7263:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},address:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoAddress",o)},7348:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(7252),u=r(4729),c=r(6037),l=r(8749),d=s.Router(),f=r(573),h=r(2789),p=r(5632),m=r(4269),y=r(3304),v=r(4276).authorizeUser,g=r(5734).rateLimiterStrictMiddleware,w=r(7587),b=w.captchaCheckData,k=w.captchaGetData,x=r(5165).emailSend,S=r(84).authGenerateJwtToken,E=r(190),_=E.authCheckPostCredentialsData,A=E.authCheckPostCredentialsUser,O=E.authCheckPostCredentialsRegisterData,j=E.authCheckPostCredentialsRegisterUser,I=E.authCheckPostCredentialsLinkData,P=E.authCheckPostCredentialsLinkUser,T=E.authCheckPostCredentialsRequestData,C=E.authCheckPostCredentialsRequestUser,G=E.authCheckPostCredentialsRequestToken,N=E.authCheckPostCredentialsVerifyData,D=E.authCheckPostCredentialsVerifyToken,Y=E.authCheckPostCredentialsResetData,B=E.authCheckPostCredentialsResetToken,U=E.authCheckPostCredentialsUsernameData,R=E.authCheckPostCredentialsUsernameUser,M=E.authCheckPostCredentialsRegisterUserName,F=E.authCheckPostCredentialsProfileImage;e.exports=function(){return d.post("/",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,s,c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(t.body),e.next=4,k(t.body.captcha);case 4:return n=e.sent,b(n),a=t.body.email.toLowerCase().trim(),i=t.body.password.trim(),e.next=10,h.findOne({"local.email":a}).select("local ips").lean();case 10:return s=e.sent,e.next=13,u.compare(i,null!==s&&void 0!==s.local?s.local.password:"");case 13:return c=e.sent,A(s,c),l=t.headers["x-forwarded-for"]||t.socket.remoteAddress,s.ips=s.ips||[],s.ips.unshift({address:l}),e.next=20,h.findByIdAndUpdate(s._id,{ips:s.ips.slice(0,25),updatedAt:(new Date).getTime()}).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 20:s=e.sent,d=S(s._id),r.status(200).json({success:!0,token:d,user:s}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/register",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,s,d,f,m,v,g,w,x,E,_,A,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(t.body),e.next=4,k(t.body.captcha);case 4:return n=e.sent,b(n),a=t.body.username.trim(),i=t.body.email.toLowerCase().trim(),s=t.body.password.trim(),e.next=11,h.findOne({"local.email":i}).select("local").lean();case 11:return d=e.sent,j(d),e.next=15,h.findOne({username:a}).select("local").lean();case 15:return f=e.sent,M(f),e.next=19,u.genSalt(10);case 19:return m=e.sent,e.next=22,u.hash(s,m);case 22:return s=e.sent,v=[l.randomBytes(8).toString("hex"),l.randomBytes(8).toString("hex")],g=[l.randomBytes(24).toString("hex"),l.randomBytes(24).toString("hex")],w=[l.createHash("sha256").update(g[0]).digest("hex"),l.createHash("sha256").update(g[1]).digest("hex")],x=t.headers["x-forwarded-for"]||t.socket.remoteAddress,E=new c.Types.ObjectId,_=Math.floor(39*Math.random())+1,e.next=31,Promise.all([h.create({_id:E,username:a,local:{email:t.body.email.toLowerCase(),password:s},ips:[{address:x}],avatar:"/public/img/avatar/".concat(_,".webp")}),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),p.create({seedClient:v[0],seedServer:g[0],hash:w[0],nonce:1,user:E,state:"active"}),p.create({seedClient:v[1],seedServer:g[1],hash:w[1],nonce:1,user:E,state:"created"})]);case 31:(A=e.sent)[0]=A[0].toObject(),delete A[0].local.password,I=S(A[0]._id),r.status(200).json({success:!0,token:I,user:A[0]}),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 41:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/username",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(t.body),n=t.body.username.trim(),e.next=5,Promise.all([h.findById(t.user._id).select("local").lean(),h.findOne({username:n})]);case 5:return a=e.sent,R(a),e.next=9,h.findByIdAndUpdate(t.user._id,{username:n},{new:!0}).select("local.email username").lean();case 9:a=e.sent,r.status(200).json({success:!0,user:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/profileimage",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a,s,u,c,l,d,p,m,y,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.findById(t.user._id).select("local avatar").lean()]);case 3:return n=e.sent,a=t.body.image,F(n),s=n[0].avatar||"",u=s.split("/").pop(),c=Array.from({length:40},(function(e,t){return"".concat(t+1,".webp")})),l=a.match(/^data:image\/([a-zA-Z0-9+]+);base64,/),d=l?l[1]:"png",p=u,c.includes(u)||void 0===p?(m=Date.now(),y=Math.floor(1e6*Math.random()),p="img_".concat(m,"_").concat(y)):((v=p.split(".")).pop(),p=v.join(".")),new Promise(function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f.img(a,"./bin/public/img/avatar/",p,(function(e,r){if(e)throw Error(e.message);t()}))}catch(e){r(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.next=16,h.findByIdAndUpdate(t.user._id,{avatar:"/public/img/avatar/"+p+"."+d},{new:!0}).select("local.email username").lean();case 16:n=e.sent,r.status(200).json({success:!0,user:n}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/link",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(t.body),n=t.body.email.trim(),a=t.body.password.trim(),e.next=6,Promise.all([h.findById(t.user._id).select("local").lean(),h.findOne({"local.email":n}).select("local").lean()]);case 6:return i=e.sent,P(i),e.next=10,u.genSalt(10);case 10:return s=e.sent,e.next=13,u.hash(a,s);case 13:return a=e.sent,e.next=16,h.findByIdAndUpdate(t.user._id,{local:{email:t.body.email,password:a}},{new:!0}).select("local.email local.emailVerified").lean();case 16:i=e.sent,r.status(200).json({success:!0,user:i}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/request",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(t.body),e.next=4,h.findOne({"local.email":t.body.email}).select("local").lean();case 4:return n=e.sent,C(n,t.body),e.next=8,m.findOne({type:t.body.type,user:n._id}).select("type user updatedAt").lean();case 8:return a=e.sent,G(a),i=l.randomBytes(16).toString("hex"),e.next=13,m.findOneAndUpdate({type:t.body.type,user:n._id},{token:i,updatedAt:new Date},{upsert:!0});case 13:return s="verify"===t.body.type?"Please verify your e-mail address on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/verify?userId=").concat(n._id,"&token=").concat(i):"Please reset your password on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/reset?userId=").concat(n._id,"&token=").concat(i),e.next=16,x(n.local.email,"verify"===t.body.type?"Verify your e-mail address.":"Reset your password.",s);case 16:r.status(200).json({success:!0}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/verify",g,function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(t.body),e.next=4,m.findOne({token:t.body.token,type:"verify",user:t.body.userId}).select("token type user updatedAt").lean();case 4:return n=e.sent,D(n),e.next=8,Promise.all([m.findByIdAndDelete(n._id),h.findByIdAndUpdate(n.user,{"local.emailVerified":!0},{})]);case 8:r.status(200).json({success:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/reset",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(t.body),e.next=4,k(t.body.captcha);case 4:return n=e.sent,b(n),e.next=8,m.findOne({token:t.body.token,type:"reset",user:t.body.userId}).select("token type user updatedAt").lean();case 8:return a=e.sent,B(a),i=t.body.password.trim(),e.next=13,u.genSalt(10);case 13:return s=e.sent,e.next=16,u.hash(i,s);case 16:return i=e.sent,e.next=19,Promise.all([m.findByIdAndDelete(a._id),h.findByIdAndUpdate(a.user,{"local.password":i},{})]);case 19:r.status(200).json({success:!0}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r){return e.apply(this,arguments)}}()),d}},7402:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=r(8340),i=r(8749);e.exports={callbackCheckPostOxapayData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.")},callbackOxapayCreateHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.OXAPAY_MERCHANT_API_KEY).update(t).digest("hex")},callbackOxapayCreatePayoutHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.PAYOUT_API_KEY).update(t).digest("hex")},callbackCheckPostOxapayHmac:function(e,t){if(e.toString()!==t.hmac.toString())throw new Error("Your provided hmac is invalid.")},callbackCheckPostCoinpaymentsData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.");if(void 0===t.merchant||null===t.merchant||"string"!=typeof t.merchant||t.merchant.toString()!==process.env.COINPAYMENTS_MERCHANT.toString())throw new Error("Your provided merchant is invalid.")},callbackCheckPostCoinpaymentsHmac:function(e,t){if("CoinPayments.net IPN Generator"!==t["user-agent"])throw new Error("Your Payment Origin is Coinpayment.")},callbackCheckPostCoinpaymentsTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided transaction id is currently processed.")},callbackCheckPostSkinifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transaction_id||!0===isNaN(e.transaction_id))throw new Error("Your provided transaction id is invalid.");if(void 0===e.token_md5||"string"!=typeof e.token_md5)throw new Error("Your provided token is invalid.");if(void 0===e.status||"string"!=typeof e.status)throw new Error("Your provided status is invalid.")},callbackCheckPostSkinifyToken:function(e,t){if(e.toString()!==t.token_md5.toString())throw new Error("Your provided token is invalid.")},callbackCheckPostSkinifyTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCheckPostZebrasmarketData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.orderId)throw new Error("Your provided order id is invalid.")},callbackCheckPostZebrasmarketSignature:function(e,t){if(e.toString()!==t.signature.toString())throw new Error("Your provided signature is invalid.")},callbackCheckPostZebrasmarketTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCoinpaymentsCreateHmac:function(e){var t=a.stringify(e).replace(/%20/g,"+");return i.createHmac("sha512",process.env.COINPAYMENTS_SECRET).update(t).digest("hex")},callbackZebrasmarketCreateSignature:function(e){var t,r="",a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(Object.keys(e).sort());try{for(a.s();!(t=a.n()).done;){var s=t.value;"signature"!==s&&"object"!==n(e[s])&&(r+=e[s])}}catch(e){a.e(e)}finally{a.f()}return i.createHash("sha256").update("".concat(r+process.env.ZEBRASMARKET_API_KEY)).digest("hex")}}},7523:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(6734),w=g.rouletteGetDataSocket,b=g.rouletteSendBetSocket,k=g.rouletteInit;e.exports=function(e){e.of("/socket/roulette").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("roulette",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w();case 18:i=e.sent,t.emit("init",i),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roulette").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("roulette",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.roulette.enabled"),b(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("roulette",r);case 2:case"end":return e.stop()}}),e)}))))})),k(e)}},7526:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=c.socketCheckUserFullRank,h=(c.socketCheckAntiSpam,c.socketRemoveAntiSpam,r(4569)),p=h.adminGetStatsDataSocket,m=h.adminGetStatsListSocket,y=h.adminGetCryptoTransactionListSocket;e.exports=function(e,t){t.on("getStatsData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),f(c,["fulladmin"]),p(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getStatsList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getCryptoTransactionList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:c=r.sent;case 12:l(c,!0),f(c,["fulladmin"]),y(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}())}},7558:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var c=r(7252),l=(r(8749),c.Router()),d=r(2789),f=(r(7263),r(4823),r(5958),r(6363),r(3304),r(5734).rateLimiterMiddleware),h=r(7402),p=(h.callbackCheckPostCoinpaymentsData,h.callbackCheckPostCoinpaymentsHmac,h.callbackCheckPostCoinpaymentsTransaction,h.callbackCheckPostSkinifyData,h.callbackCheckPostSkinifyToken,h.callbackCheckPostSkinifyTransaction,h.callbackCheckPostZebrasmarketData,h.callbackCheckPostZebrasmarketSignature,h.callbackCheckPostZebrasmarketTransaction,h.callbackCoinpaymentsCreateHmac,h.callbackZebrasmarketCreateSignature,h.callbackCheckPostOxapayData,h.callbackOxapayCreateHmac,h.callbackCheckPostOxapayHmac,h.callbackOxapayCreatePayoutHmac,r(3818));p.cashierCryptoGenerateAddress,p.cashierCryptoGetStableCurrencyName,r(8461).settingGet,e.exports=function(e){var t=r(6037);return l.get("/getrank",f,function(){var e,r=(e=o().mark((function e(r,n){var a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.query.affiliate){e.next=3;break}return e.abrupt("return",n.status(400).json({error:"Missing affiliate parameter"}));case 3:if(t.Types.ObjectId.isValid(a)){e.next=6;break}return e.abrupt("return",n.status(400).json({error:"Invalid affiliate ID format"}));case 6:return e.prev=6,e.next=9,d.find({"affiliates.referrer":a}).sort({"affiliates.leaderboardpoints":-1}).select("username affiliates.leaderboardpoints avatar createdAt").lean();case 9:return(s=e.sent).map((function(e){return i(i({},e),{},{avatar:e.avatar?"https://cheersino.com/api".concat(e.avatar):null})})),u=s.map((function(e){var t;return{username:e.username,avatar:e.avatar?"https://cheersino.com/api".concat(e.avatar):null,wagered:Math.floor(((null===(t=e.affiliates)||void 0===t?void 0:t.leaderboardpoints)||0)/1e3),createdAt:e.createdAt}})),e.abrupt("return",n.status(200).json({data:u,message:"affiliate data retrieved successfully"}));case 15:return e.prev=15,e.t0=e.catch(6),console.error("Error fetching rank:",e.t0),e.abrupt("return",n.status(500).json({error:"Internal server error"}));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),l}},7587:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(4229),u=r(8340),c=r(3688);e.exports={captchaCheckData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(!0!==e.success)throw new Error("Your provided captcha token is invalid.")},captchaGetData:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("https://hcaptcha.com/siteverify?secret=".concat(process.env.CAPTCHA_SECRET,"&response=").concat(e),{method:"POST"});case 3:if(void 0===(a=t.sent)||200!==a.status){t.next=11;break}return t.next=7,a.json();case 7:i=t.sent,r(i),t.next=12;break;case 11:r({success:!1});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),r({success:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}())},captchaGetDataRoblox:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var l,d,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l=new c(e),d={"Sec-Ch-Ua":t.headers["sec-ch-ua"],"Sec-Ch-Ua-Mobile":t.headers["sec-ch-ua-mobile"],"Sec-Ch-Ua-Platform":t.headers["sec-ch-ua-platform"],"User-Agent":t.headers["user-agent"],Accept:"*/*",Origin:"https://www.roblox.com","Sec-Fetch-Site":"cross-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty",Referer:"https://www.roblox.com/","Accept-Encoding":"gzip, deflate","Accept-Language":t.headers["accept-language"],"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.next=5,s("https://client-api.arkoselabs.com/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",{method:"POST",agent:l,headers:d,body:u.stringify(r)});case 5:if(!(f=n.sent).ok){n.next=13;break}return n.next=9,f.json();case 9:f=n.sent,a(f),n.next=14;break;case 13:i(new Error(f.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())}}},7711:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(2789),s=r(5734).rateLimiter,u=r(7908),c=u.socketCheckUserData,l=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,f=r(8461).settingCheck,h=r(8796).cashierSendSteamDepositSocket;e.exports=function(e,t){t.on("sendSteamDeposit",function(){var r,n=(r=o().mark((function r(n,a){var u,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,u=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(u);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:p=r.sent,c(p,!0),f(p,"steam.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},7906:e=>{"use strict";e.exports=require("validator")},7908:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(){"use strict";r=function(){return n};var e,n={},o=Object.prototype,a=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==o&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,r){function n(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==t(d)&&a.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):r.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,t){function a(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(r){if(null!=r){var n=r[s];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function t(){for(;++o<r.length;)if(a.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(r)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},n.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),n.AsyncIterator=x,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new x(d(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},n.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},n}function n(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function s(e){n(i,o,a,s,u,"next",e)}function u(e){n(i,o,a,s,u,"throw",e)}s(void 0)}))}}var a={general:[],crash:[],roll:[],blackjack:[],duels:[],mines:[],towers:[],unbox:[],battles:[],upgrader:[],plinko:[],roulette:[],cashier:[],admin:[],streammer:[]},i=[];e.exports={socketCheckUserData:function(e,t){if(!0===t&&null===e)throw new Error("You need to sign in to perform this action.");if(!0===t&&void 0!==e.ban&&new Date(e.ban.expire).getTime()>(new Date).getTime())throw new Error("You got banned for ".concat(e.ban.type," because of the reason: ").concat(e.ban.reason,"."))},socketCheckUserRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.rank||!0!==t.includes(e.rank))throw new Error("You are not authorized to perform the requested action.")},socketCheckConnectionLimit:function(e,t){return new Promise(function(){var n=o(r().mark((function n(o,i){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!(a[e].filter((function(e){return e===t.toString()})).length>=5)){r.next=6;break}throw new Error("Too many active socket connections.");case 6:o();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),i(r.t0);case 12:case"end":return r.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}())},socketAddConnectionLimit:function(e,t){a[e].push(t.toString())},socketRemoveConnectionLimit:function(e,t){var r=a[e].findIndex((function(e){return e===t.toString()}));-1!==r&&a[e].splice(r,1)},socketCheckAntiSpam:function(e){return new Promise(function(){var t=o(r().mark((function t(n,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==i.includes(e.toString())){t.next=5;break}throw new Error("You need to slow down, we still processing your last request.");case 5:i.push(e.toString()),n();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),o(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}())},socketRemoveAntiSpam:function(e){var t=i.indexOf(e.toString());-1!==t&&i.splice(t,1)},socketCheckUserFullRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.fullrank||!0!==t.includes(e.fullrank))throw new Error("You are not authorized to perform the requested action.")}}},7929:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}r(2789);var s=r(5182),u=r(7908).socketRemoveAntiSpam,c=r(1550),l=c.adminCheckGetPromoListData,d=c.adminCheckSendPromoCreateData,f=c.adminCheckSendPromoCreateCode,h=c.adminCheckSendPromoRemoveData,p=c.adminCheckSendPromoRemoveCode,m=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),u=12*(a.page-1),e.next=5,Promise.all([s.countDocuments({code:{$regex:a.search,$options:"i"}}),s.find({code:{$regex:a.search,$options:"i"}}).limit(12).skip(u).select("code reward redeemptionsTotal redeemptionsMax allowLevel levelMin createdAt").lean()]);case 5:c=e.sent,i({success:!0,count:c[0],promos:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),y=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,h,p,m,y,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),c=a.code.toLowerCase(),l=Math.floor(a.reward),h=Math.floor(a.redeemptions),p=Math.floor(a.level),m=Math.floor(a.allowlevel),y=Math.floor(a.ipallow),e.next=10,s.findOne({code:c}).select("code").lean();case 10:return v=e.sent,f(v),e.next=14,s.create({code:c,reward:l,levelMin:p,allowLevel:m,ipRestricktLevel:y,redeemptionsMax:h});case 14:v=(v=e.sent).toObject(),i({success:!0,promo:v}),u(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,s.findById(a.promoId).select("_id").lean();case 4:return c=e.sent,p(c),e.next=8,s.findByIdAndDelete(a.promoId);case 8:i({success:!0,promo:c}),u(n._id),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetPromoListSocket:m,adminSendPromoCreateSocket:y,adminSendPromoRemoveSocket:v}},7950:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,u,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function l(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=r(7906),m=r(8749),y=r(8461).settingGet,v=r(5729),g=(r(9472).SERVICE_PROXY_TIME,function(e){var t,r=[],n=d(e);try{for(n.s();!(t=n.n()).done;)for(var o=t.value,a=0;a<o.count;a++)r.push({box:o.box})}catch(e){n.e(e)}finally{n.f()}return r}),w=function(e,t,r,n){var o=0,a=null;if(r){var i,s=d(e);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(t<=(o+=u.tickets1)){a=u.item;break}}}catch(e){s.e(e)}finally{s.f()}return a}if(n){var c,l=d(e);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(t<=(o+=f.tickets2)){a=f.item;break}}}catch(e){l.e(e)}finally{l.f()}return a}var h,p=d(e);try{for(p.s();!(h=p.n()).done;){var m=h.value;if(t<=(o+=m.tickets)){a=m.item;break}}}catch(e){p.e(e)}finally{p.f()}return a};e.exports={battlesCheckGetGameDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckGetGameDataGame:function(e){if(null===e)throw new Error("Your entered game id is not available.")},battlesCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.playerCount||null===e.playerCount||!0===isNaN(e.playerCount)||Math.floor(e.playerCount)<2||Math.floor(e.playerCount)>6)throw new Error("Your entered mode is invalid.");if(void 0===e.mode||null===e.mode||"string"!=typeof e.mode||!0!==["standard","team","group"].includes(e.mode))throw new Error("Your entered mode is invalid.");if(void 0===e.boxes||null===e.boxes||!0!==Array.isArray(e.boxes)||e.boxes.length<=0)throw new Error("Your entered boxes are invalid.");if(void 0===e.levelMin||null===e.levelMin||!0===isNaN(e.levelMin)||e.levelMin<0||e.levelMin>100)throw new Error("Your entered min level is invalid.");if(void 0===e.funding||null===e.funding||!0===isNaN(e.funding)||e.funding<0||e.funding>100)throw new Error("Your entered funding value is invalid.");if(void 0===e.private||null===e.private||"boolean"!=typeof e.private)throw new Error("Your entered private value is invalid.");if(void 0===e.affiliateOnly||null===e.affiliateOnly||"boolean"!=typeof e.affiliateOnly)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.cursed||null===e.cursed||"boolean"!=typeof e.cursed)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.terminal||null===e.terminal||"boolean"!=typeof e.terminal)throw new Error("Your entered affiliate value is invalid.")},battlesCheckSendCreateBoxes:function(e){var t,r=0,n=d(e.boxes);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(void 0===o._id||"string"!=typeof o._id||!0!==p.isMongoId(o._id))throw new Error("Your entered box id is invalid.");if(void 0===o.count||!0===isNaN(o.count)||Math.floor(o.count)<=0)throw new Error("Your entered box count is invalid.");r+=o.count}}catch(e){n.e(e)}finally{n.f()}if(r>50)throw new Error("Your are not allowed to select more then 50 boxes.")},battlesCheckSendCreateUser:function(e,t,r){if(e.balance<r)throw new Error("You don’t have enough balance for this action.");if(!0===e.limits.blockSponsor&&t.funding>0)throw new Error("You are not allowed to add funding to your battles.")},battlesCheckSendBotData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.")},battlesCheckSendBotGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to call bots for this game.")},battlesCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.");if(void 0===e.slot||null===e.slot||!0===isNaN(e.slot)||Math.floor(e.slot)<1||Math.floor(e.slot)>5)throw new Error("You’ve entered an invalid slot.")},battlesCheckSendJoinGame:function(e,t,r,n,o){if(null==r||"created"!==r.state||!0===o.includes(r._id.toString())||r.playerCount<=Math.floor(r.bets.length+n.filter((function(e){return e.toString()===r._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(r.playerCount<=Math.floor(e.slot))throw new Error("Your requested slot is not available.");if(!0===r.bets.some((function(t){return t.slot===Math.floor(e.slot)})))throw new Error("Your requested slot is already occupied.");if(!0===r.bets.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You aren't allowed to join more then one time per battles game.");if(r.options.levelMin>Math.floor(Math.pow(t.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of ".concat(r.options.levelMin," to join this battles game."));if(!0===r.options.affiliateOnly&&(void 0===t.affiliates.referrer||t.affiliates.referrer.toString()!==r.bets[0].user._id.toString()))throw new Error("You need to be an creators affiliate to join this battles game.")},battlesCheckSendJoinUser:function(e,t){if(e.balance<t.amount-Math.floor(t.amount*t.options.funding/100))throw new Error("You don’t have enough balance for this action.")},battlesCheckSendCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckSendCancelGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.some((function(e){return e.toString()===t._id.toString()}))||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to cancel this game.")},battlesGenerateGame:function(e,t,r){return new Promise(function(){var n,o=(n=c().mark((function n(o,a){var i,s,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=m.randomBytes(24).toString("hex"),s=m.createHash("sha256").update(i).digest("hex"),n.next=5,v.create({amount:t,playerCount:Math.floor(e.playerCount),mode:e.mode,boxes:r,options:{levelMin:Math.floor(e.levelMin),funding:Math.floor(e.funding),cursed:e.cursed,terminal:e.terminal,private:e.private,affiliateOnly:e.affiliateOnly,trust:y().games.cbattles.enabled,trust1:y().games.cmbattles.enabled},fair:{seedServer:i,hash:s},state:"created"});case 5:return u=n.sent,n.next=8,u.populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}});case 8:u=(u=n.sent).toObject(),o(u),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),a(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){l(a,r,o,i,s,"next",e)}function s(e){l(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return o.apply(this,arguments)}}())},battlesFormatBoxes:function(e,t){var r,n=[],o=d(e.boxes);try{var a=function(){var e=r.value,o=t.find((function(t){return t._id.toString()===e._id.toString()}));if(void 0===o)throw new Error("Your entered boxes are invalid.");var a=n.findIndex((function(e){return e.box._id.toString()===o.toString()}));-1!==a?n[a].count=n[a].count+Math.floor(e.count):n.push({box:o,count:Math.floor(e.count)})};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},battlesGetGameIndex:function(e,t){return e.findIndex((function(e){return e._id.toString()===t.toString()}))},battlesGetAmountGame:function(e){var t,r=0,n=d(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r+=Math.floor(o.box.amount*o.count)}}catch(e){n.e(e)}finally{n.f()}return r},battlesGetAmountWin:function(e){var t,r,n,o,a,i=g(e.boxes),s=0,c=e.mode,l=null===(t=e.options)||void 0===t?void 0:t.cursed,f=null===(r=e.options)||void 0===r?void 0:r.trust,h=null===(n=e.options)||void 0===n?void 0:n.trust1,p=e.playerCount,m=null===(o=e.options)||void 0===o?void 0:o.funding,y=d(e.bets);try{for(y.s();!(a=y.n()).done;){var v=a.value,b=!0,k=v.bot;"standard"===c?b=l||!k:"team"===c&&(m>0?(b=l||2===v.slot||3===v.slot||!k,6===p&&(b=l||3===v.slot||4===v.slot||5===v.slot||!k)):(b=l||0===v.slot||1===v.slot||!k,6===p&&(b=l||0===v.slot||1===v.slot||2===v.slot||!k)));var x,S=d(v.outcomes.entries());try{for(S.s();!(x=S.n()).done;){var E=u(x.value,2),_=E[0],A=E[1];s=Math.floor(s+w(i[_].box.items,A,b&&f,b&&h).amountFixed)}}catch(e){S.e(e)}finally{S.f()}}}catch(e){y.e(e)}finally{y.f()}return s},battlesGetCountUser:function(e){var t=2;return"1v1v1"===e?t=3:"1v1v1v1"!==e&&"2v2"!==e||(t=4),t},battlesGetRounds:g,battlesGetOutcomeItem:w,battlesGetWinnerBets:function(e){var t,r,n,a,s=g(e.boxes),c=e.mode,l=null===(t=e.options)||void 0===t?void 0:t.cursed,f=null===(r=e.options)||void 0===r?void 0:r.trust,h=null===(n=e.options)||void 0===n?void 0:n.trust1,p=e.playerCount,m=null===(a=e.options)||void 0===a?void 0:a.funding,y=e.bets.map((function(e){var t,r=e.bot,n=e.slot;if("standard"===c)t=l||!r;else if("team"===c){var o=4===p?[0,1]:6===p?[0,1,2]:[];m>0&&(o=4===p?[2,3]:6===p?[3,4,5]:[]),t=l||o.includes(n)||!r}else t=!0;var a=e.outcomes.map((function(e,r){return w(s[r].box.items,e,t&&f,t&&h).amountFixed}));return i(i({},e),{},{outcomes:a})})),v=[];if("group"===e.mode)v=e.bets;else if("team"===e.mode){if(4===e.playerCount){var b=!1===e.options.terminal?[].concat(o(y[0].outcomes),o(y[1].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[0].outcomes[y[0].outcomes.length-1]+y[1].outcomes[y[1].outcomes.length-1]),k=!1===e.options.terminal?[].concat(o(y[2].outcomes),o(y[3].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[2].outcomes[y[2].outcomes.length-1]+y[3].outcomes[y[3].outcomes.length-1]);v=b===k?e.bets:!1===e.options.cursed&&b>k||!0===e.options.cursed&&b<k?[e.bets[0],e.bets[1]]:[e.bets[2],e.bets[3]]}if(6===e.playerCount){var x=!1===e.options.terminal?[].concat(o(y[0].outcomes),o(y[1].outcomes),o(y[2].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[0].outcomes[y[0].outcomes.length-1]+y[1].outcomes[y[1].outcomes.length-1]+y[2].outcomes[y[2].outcomes.length-1]),S=!1===e.options.terminal?[].concat(o(y[3].outcomes),o(y[4].outcomes),o(y[5].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[3].outcomes[y[3].outcomes.length-1]+y[4].outcomes[y[4].outcomes.length-1]+y[5].outcomes[y[5].outcomes.length-1]);v=x===S?e.bets:!1===e.options.cursed&&x>S||!0===e.options.cursed&&x<S?[e.bets[0],e.bets[1],e.bets[2]]:[e.bets[3],e.bets[4],e.bets[5]]}}else{var E=y.map((function(t){return!1===e.options.terminal?t.outcomes.reduce((function(e,t){return e+t}),0):t.outcomes[t.outcomes.length-1]})),_=!1===e.options.cursed?Math.max.apply(Math,o(E)):Math.min.apply(Math,o(E));console.log("amount win",_);var A,O=d(y.entries());try{for(O.s();!(A=O.n()).done;){var j=u(A.value,2),I=j[0],P=j[1],T=!1===e.options.terminal?P.outcomes.reduce((function(e,t){return e+t}),0):P.outcomes[P.outcomes.length-1];console.log("amount bet",T),_===T&&v.push(e.bets[I])}}catch(e){O.e(e)}finally{O.f()}}return v},battlesSanitizeGames:function(e){var t,r=[],n=d(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!1===o.options.private){"completed"!==(o=JSON.parse(JSON.stringify(o))).state&&(o.fair={hash:o.fair.hash});var a,i=d(o.boxes);try{for(i.s();!(a=i.n()).done;)a.value.box.items=[]}catch(e){i.e(e)}finally{i.f()}var s,u=d(o.bets);try{for(u.s();!(s=u.n()).done;){var c=s.value;c.user=!0===c.bot?{}:{_id:c.user._id,roblox:c.user.roblox,username:c.user.username,avatar:c.user.avatar,rank:c.user.rank,level:c.user.level,rakeback:c.user.rakeback.name,stats:c.user.stats,createdAt:c.user.createdAt}}}catch(e){u.e(e)}finally{u.f()}r.push(o)}}}catch(e){n.e(e)}finally{n.f()}return r},battlesSanitizeGame:function(e,t){var r=JSON.parse(JSON.stringify(e));if("completed"!==r.state&&(r.fair={hash:r.fair.hash,blockNum:r.fair.blockNum}),!0!==t){var n,o=d(r.boxes);try{for(o.s();!(n=o.n()).done;)n.value.box.items=[]}catch(e){o.e(e)}finally{o.f()}}var a,i=d(r.bets);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.user=!0===s.bot?{}:{_id:s.user._id,roblox:s.user.roblox,username:s.user.username,avatar:s.user.avatar,rank:s.user.rank,level:s.user.level,rakeback:s.user.rakeback.name,stats:s.user.stats,createdAt:s.user.createdAt}}}catch(e){i.e(e)}finally{i.f()}return r}}},7986:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetUserListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank","deposit","withdraw","rank","wagered","xp"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckGetUserDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckGetUserDataUser:function(e){if(null===e)throw new Error("Your entered user id is not available.")},adminCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckGetUserGamesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckSendUserValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.setting||"string"!=typeof e.setting||!0!==["rank","flags","stats.deposit","vault.amount","stats.withdraw","limits.blockRain","limits.blockTip","limits.limitTip","limits.blockSponsor","limits.blockLeaderboard","leaderboard.points"].includes(e.setting))throw new Error("Your entered setting is invalid.");if(void 0===e.value)throw new Error("Your entered value is invalid.")},adminCheckSendUserBalanceData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.balance||null===e.balance||!0===isNaN(e.balance)||e.balance<0)throw new Error("Your entered balance value is invalid.")},adminCheckSendUserBalanceUser:function(e){if(null===e)throw new Error("Your entered user is not available.")},adminCheckSendUserMuteData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered mute time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["insulting","racism","begging","self promotion","other"].includes(e.reason))throw new Error("Your entered mute reason is invalid.")},adminCheckSendUserBanData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered ban time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["cheating","scamming","self request","other"].includes(e.reason))throw new Error("Your entered ban reason is invalid.")},adminFormatUserSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:-1}:"rank"===e?t={rank:1}:"deposit"===e?t={"stats.deposit":-1}:"withdraw"===e?t={"stats.withdraw":-1}:"wagered"===e?t={"stats.bet":-1}:"xp"===e&&(t={xp:-1}),t}}},8078:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(8744),c=r(286),l=r(836).generalUserGetFormated,d=r(593).generalGetLeaderboardTimeLeft,f=null,h=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([u.findOne({state:"running"}).select("winners duration type state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 3:if(null===(c=e.sent)[0]){e.next=8;break}c[0].winners=c[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==c[1][t]?c[1][t].leaderboard.points:0,user:void 0!==c[1][t]?l(c[1][t]):void 0}})),e.next=12;break;case 8:return e.next=10,Promise.all([u.findOne({state:"completed"}).sort({updatedAt:-1}).select("winners duration type state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 10:null!==(c=e.sent)[0]&&(c[0].winners=c[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==c[1][t]?c[1][t].leaderboard.points:0,user:void 0!==c[1][t]?l(c[1][t]):void 0}})));case 12:i({success:!0,leaderboard:c[0]}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=d(r),f=setTimeout((function(){y(t,r)}),n)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{clearTimeout(f)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=i(o().mark((function e(t,r){var n,a,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,clearTimeout(f),e.next=4,Promise.all([u.findById(r._id).select("winners state updatedAt").lean(),u.findOne({state:"created"}).sort({createdAt:1}).select("state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(10).select("leaderboard").lean()]);case 4:for(n=e.sent,a=[],i=[],l=0;l<n[0].winners.length;l++)void 0!==n[2][l]||null!==n[2][l]?(a.push({prize:n[0].winners[l].prize,points:n[2][l].leaderboard.points,user:n[2][l]._id}),i.push(c.create({amount:n[0].winners[l].prize,type:"leaderboardPayout",user:n[2][l]._id,state:"completed"}))):a.push({prize:n[0].winners[l].prize,points:0});return e.next=10,Promise.all([u.findByIdAndUpdate(r._id,{winners:a,state:"completed",updatedAt:(new Date).getTime()},{})].concat(i));case 10:if(null===n[1]){e.next=15;break}return e.next=13,Promise.all([u.findByIdAndUpdate(n[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),s.updateMany({},{"leaderboard.points":0},{})]);case 13:n=e.sent,p(t,n[0]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([u.findOne({state:"running"}).select("duration state updatedAt").lean(),u.findOne({state:"created"}).sort({createdAt:1}).select("duration state updatedAt").lean()]);case 3:if(null===(r=e.sent)[0]){e.next=9;break}(n=d(r[0]))>0?f=setTimeout((function(){y(t,r[0])}),n):y(t,r[0]),e.next=14;break;case 9:if(null===r[1]){e.next=14;break}return e.next=12,Promise.all([u.findByIdAndUpdate(r[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),s.updateMany({},{"leaderboard.points":0},{})]);case 12:r=e.sent,p(t,r[0]);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetLeaderboardDataSocket:h,generalLeaderboardStart:p,generalLeaderboardStop:m,generalLeaderboardInit:v}},8109:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"CrashSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"CrashBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("CrashGame",o)},8117:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return c(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function p(){}function m(){}function y(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;c(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,c(b,"constructor",y),c(y,"constructor",m),m.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function f(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,s,"next",e)}function s(e){f(a,n,o,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(2789),y=r(7067),v=r(6966),g=r(6112),w=r(8744),b=r(8875),k=r(7908).socketRemoveAntiSpam,x=r(8461).settingGet,S=r(4162),E=S.rollCheckSendBetData,_=S.rollCheckSendBetUser,A=S.rollCheckSendBetGame,O=S.rollGetUserGameStats,j=S.rollGenerateGame,I=S.rollGetOutcome,P=S.rollSanitizeGame,T=S.rollSanitizeBets,C=S.rollSanitizeBet,G=r(836),N=G.generalUserGetLevel,D=G.generalUserGetRakeback,Y=G.generalUserGetFormated,B=r(5507).generalAddBetsList,U=null,R=[],M=[],F=[],$=function(){var e=h(d().mark((function e(t,r,n,o,a){var i,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(o),i=O(n,R),_(o,n,i),A(U),e.prev=5,F+=1,s=Math.floor(o.amount),u=Math.floor(o.multiplier),c=N(n),l=D(n),e.next=13,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:-s,"stats.bet":s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.create({amount:s,multiplier:u,game:U._id,user:n._id})]);case 13:(f=e.sent)[1]=f[1].toObject(),f[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,xp:n.xp,level:c,rakeback:l,affiliates:n.affiliates,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},R.push(f[1]),t.of("/socket/roll").emit("bet",{bet:C(f[1])}),a({success:!0,user:f[0]}),F-=1,k(n._id),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(5),k(r.decoded._id),F-=1,a({success:!1,error:{type:"error",message:e.t0.message}});case 28:e.next=34;break;case 30:e.prev=30,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 34:case"end":return e.stop()}}),e,null,[[0,30],[5,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),L=function(){var e=h(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R=[],e.next=4,j();case 4:U=e.sent,t.of("/socket/roll").emit("game",{game:P(U)}),setTimeout((function(){J(t)}),13e3-((new Date).getTime()-new Date(U.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},J=function(){var e=h(d().mark((function e(t){var r,n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{U.state="pending",t.of("/socket/roll").emit("game",{game:P(U)}),F<=0?(r=p.createHash("sha256").update("".concat(U._id,"-").concat(U.fair.seed.seedServer)).digest("hex"),U.outcome=I(r),n=x(),o=R.reduce((function(e,t){return e+t.amount}),0),0!==(a=q(o/1e3,n.games.slides))&&n.games.ctotal.enabled&&(U.outcome=Math.floor(Math.random()*(a-100+1))+100),U.state="rolling",U.updatedAt=(new Date).getTime(),t.of("/socket/roll").emit("game",{game:U}),setTimeout((function(){K(t)}),5e3)):setTimeout((function(){J(t)}),500)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=h(d().mark((function e(t){var r,n,o,a,s,c,l,f,h,p,k,S,E,_,A;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U.state="completed",e.next=4,w.findOne({state:"running"}).select("state").lean();case 4:r=e.sent,n=x(),o=[],a=[],s=[],c=0,l=d().mark((function e(){var t,i,u,l,p,y,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h[f],i=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*n.general.reward.multiplier):0,u=U.outcome>=t.multiplier?Math.floor(t.amount*(t.multiplier/100)):0,l=t.multiplier>=125||0===u?t.amount:u,p=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,c+=!0!==t.user.limits.blockSponsor?t.amount:0,e.next=8,b.find({enabled:"true"}).select("creators").lean();case 8:y=e.sent,g=y.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),o.push(m.findByIdAndUpdate(t.user._id,{$inc:{balance:u,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*n.general.reward.multiplier):0,"stats.won":u,"leaderboard.points":null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"limits.betToWithdraw":Math.floor(t.user.limits.betToWithdraw-l)<=0?-t.user.limits.betToWithdraw:-l,"limits.betToRain":Math.floor(t.user.limits.betToRain-l)<=0?-t.user.limits.betToRain:-l,"rakeback.earned":i,"rakeback.available":i,"affiliates.generated":p,"affiliates.leaderboardpoints":g&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==t.user.affiliates.referrer&&p>0&&a.push(m.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":p,"affiliates.available":p},updatedAt:(new Date).getTime()},{})),s.push(v.findByIdAndUpdate(t._id,{payout:u,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 13:case"end":return e.stop()}}),e)})),f=0,h=R;case 12:if(!(f<h.length)){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:f++,e.next=12;break;case 17:return e.next=19,Promise.all([y.findByIdAndUpdate(U._id,{outcome:U.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),g.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*c)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(o,a,s));case 19:r=e.sent,M.unshift(r[0]),M.length>25&&M.pop(),t.of("/socket/roll").emit("game",{game:r[0]}),t.of("/socket/general").emit("rain",{rain:r[1]}),p=u(r.slice(2,o.length+a.length+2));try{for(p.s();!(k=p.n()).done;)S=k.value,t.of("/socket/general").to(S._id.toString()).emit("user",{user:S})}catch(e){p.e(e)}finally{p.f()}E=u(r.slice(o.length+a.length+2));try{for(E.s();!(_=E.n()).done;)A=_.value,B(t,i(i({},A),{},{user:Y(A.user),method:"roll"}))}catch(e){E.e(e)}finally{E.f()}setTimeout((function(){L(t)}),3e3),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=h(d().mark((function e(t){var r,n,a,i,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([y.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 3:if(r=e.sent,M=r[1],null===r[0]||"completed"===r[0].state){e.next=16;break}n=[],a=u(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(s=i.value).payout&&(n=[].concat(o(n),[v.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),m.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.bet":-s.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return c=p.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=I(c),e.next=13,Promise.all([y.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(o(n)));case 13:r=e.sent,M.unshift(r[0]),M.length>25&&M.pop();case 16:L(t),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rollGetData:function(){return{game:P(U),bets:T(R),history:M}},rollSendBetSocket:$,rollInit:W}},8128:(e,t,r)=>{var n=r(6037),o=new n.Schema({general:{maintenance:{enabled:{type:Boolean}},rain:{enabled:{type:Boolean}},leaderboard:{enabled:{type:Boolean}},tip:{enabled:{type:Boolean}},affiliate:{enabled:{type:Boolean}},reward:{multiplier:{type:Number}}},chat:{mode:{type:String},enabled:{type:Boolean},rooms:{en:{enabled:{type:Boolean}},tr:{enabled:{type:Boolean}},de:{enabled:{type:Boolean}},es:{enabled:{type:Boolean}},beg:{enabled:{type:Boolean}},whale:{enabled:{type:Boolean}}}},games:{crash:{enabled:{type:Boolean}},roll:{enabled:{type:Boolean}},blackjack:{enabled:{type:Boolean}},duels:{enabled:{type:Boolean}},mines:{enabled:{type:Boolean}},towers:{enabled:{type:Boolean}},unbox:{enabled:{type:Boolean}},battles:{enabled:{type:Boolean}},upgrader:{enabled:{type:Boolean}},plinko:{enabled:{type:Boolean}},roulette:{enabled:{type:Boolean}},cases:[{value:{type:Number},percent:{type:Number}}],cbattles:{enabled:{type:Boolean}},cmbattles:{enabled:{type:Boolean}},croulette:{enabled:{type:Boolean}},cblackjack:{enabled:{type:Boolean},value:{type:Number}},ctotal:{enabled:{type:Boolean}},mcases:[{value:{type:Number},percent:{type:Number}}],cmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],csmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],ctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],cstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mcmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcsmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],crashees:[{value:{type:Number},percent:{type:Number}}],slides:[{value:{type:Number},percent:{type:Number}}]},robux:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},limited:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},steam:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},crypto:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},gift:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},credit:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},depositbonus:{enabled:{type:Boolean},amount:{type:Number},famount:{type:Number}},rainrestrict:{enabled:{type:Boolean}},redeem:{enabled:{type:Boolean},amount:{type:Number}}});e.exports=n.model("Setting",o)},8223:e=>{e.exports=[[{rank:"6",suit:"heart"},{rank:"K",suit:"diamond"},{rank:"5",suit:"club"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"8",suit:"spade"},{rank:"A",suit:"diamond"},{rank:"2",suit:"diamond"}],[{rank:"9",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"3",suit:"club"},{rank:"Q",suit:"club"},{rank:"8",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"8",suit:"club"},{rank:"3",suit:"club"}],[{rank:"4",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"7",suit:"diamond"}],[{rank:"8",suit:"spade"},{rank:"8",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"9",suit:"heart"},{rank:"2",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"5",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"9",suit:"spade"},{rank:"7",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"6",suit:"diamond"},{rank:"4",suit:"diamond"}],[{rank:"10",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"9",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"10",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"9",suit:"heart"}],[{rank:"7",suit:"spade"},{rank:"9",suit:"heart"},{rank:"5",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"4",suit:"club"},{rank:"10",suit:"club"}],[{rank:"10",suit:"club"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"2",suit:"club"},{rank:"8",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"7",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"K",suit:"spade"},{rank:"8",suit:"diamond"}],[{rank:"8",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"7",suit:"diamond"}],[{rank:"6",suit:"club"},{rank:"5",suit:"spade"},{rank:"10",suit:"diamond"}],[{rank:"K",suit:"spade"},{rank:"6",suit:"club"},{rank:"5",suit:"club"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"club"},{rank:"9",suit:"diamond"}],[{rank:"4",suit:"heart"},{rank:"Q",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"6",suit:"club"},{rank:"5",suit:"club"},{rank:"10",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"9",suit:"spade"},{rank:"2",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"A",suit:"club"},{rank:"8",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"club"},{rank:"J",suit:"heart"}],[{rank:"7",suit:"heart"},{rank:"8",suit:"heart"},{rank:"6",suit:"spade"}],[{rank:"6",suit:"diamond"},{rank:"Q",suit:"club"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"10",suit:"spade"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"diamond"},{rank:"J",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"4",suit:"club"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"spade"},{rank:"3",suit:"heart"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"7",suit:"heart"},{rank:"10",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"},{rank:"Q",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"7",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"8",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"6",suit:"club"},{rank:"K",suit:"heart"},{rank:"5",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"},{rank:"J",suit:"heart"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"heart"},{rank:"9",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"A",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"spade"},{rank:"K",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"spade"},{rank:"K",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"10",suit:"club"},{rank:"4",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"10",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"6",suit:"spade"},{rank:"10",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"5",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"K",suit:"heart"},{rank:"3",suit:"heart"},{rank:"8",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"9",suit:"club"},{rank:"9",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"4",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"9",suit:"spade"},{rank:"2",suit:"club"},{rank:"J",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"7",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"9",suit:"club"},{rank:"9",suit:"heart"},{rank:"3",suit:"diamond"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"diamond"},{rank:"K",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"3",suit:"spade"},{rank:"8",suit:"diamond"}],[{rank:"6",suit:"heart"},{rank:"4",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"Q",suit:"club"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"K",suit:"heart"},{rank:"10",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"10",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"9",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"K",suit:"club"},{rank:"6",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"8",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"8",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"5",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"J",suit:"club"},{rank:"8",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"club"}],[{rank:"9",suit:"heart"},{rank:"2",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"5",suit:"diamond"},{rank:"10",suit:"club"},{rank:"6",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"10",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"2",suit:"club"},{rank:"10",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"3",suit:"club"},{rank:"7",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"Q",suit:"diamond"},{rank:"2",suit:"club"},{rank:"9",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"J",suit:"spade"},{rank:"4",suit:"diamond"}],[{rank:"10",suit:"club"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"9",suit:"heart"},{rank:"6",suit:"club"},{rank:"6",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"K",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"10",suit:"club"},{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"J",suit:"spade"}]]},8278:e=>{"use strict";e.exports=require("passport")},8340:e=>{"use strict";e.exports=require("qs")},8361:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(2725),c=r(286),l=r(7908).socketRemoveAntiSpam,d=r(4214).generalCheckSendRakebackClaimUser,f=function(){var e=i(o().mark((function e(t,r,n,a,i){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.find({type:"reward",state:"active"}).select("name amount levelMin type state");case 3:s=e.sent,i({success:!0,boxes:s}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),h=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(n),e.next=4,Promise.all([s.findByIdAndUpdate(n._id,{$inc:{balance:n.rakeback.available},"rakeback.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt"),c.create({amount:n.rakeback.available,type:"rakebackClaim",user:n._id,state:"completed"})]);case 4:u=e.sent,i({success:!0,user:u[0]}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetRakebackDataSocket:f,generalSendRakebackClaimSocket:h}},8455:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},color:{type:String},game:{type:n.Schema.ObjectId,ref:"RouletteGame"},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RouletteBet",o)},8461:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}var u=r(8128),c=null,l=function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.findOne({}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 3:if(null!=(c=e.sent)){e.next=9;break}return e.next=7,u.create({general:{"maintenance.enabled":!1,"rain.enabled":!1,"leaderboard.enabled":!1,"tip.enabled":!0,"affiliate.enabled":!0,"reward.multiplier":1},chat:{mode:"normal",enabled:!0,rooms:{"en.enabled":!0,"tr.enabled":!0,"de.enabled":!0,"es.enabled":!0,"beg.enabled":!0,"whale.enabled":!0}},games:{"crash.enabled":!0,"roll.enabled":!0,"blackjack.enabled":!0,"duels.enabled":!0,"mines.enabled":!0,"towers.enabled":!0,"unbox.enabled":!0,"battles.enabled":!0,"upgrader.enabled":!0,"plinko.enabled":!0,"roulette.enabled":!0,cases:[],"cbattles.enabled":!0,"cmbattles.enabled":!0,"ctotal.enabled":!0,"croulette.enabled":!0,"cblackjack.enabled":!0,"cblackjack.value":3,mcases:[],cmines:[],csmines:[],ctowers:[],mcmines:[],mctowers:[],crashees:[],slides:[]},robux:{"deposit.enabled":!1,"withdraw.enabled":!1},limited:{"deposit.enabled":!1,"withdraw.enabled":!1},steam:{"deposit.enabled":!1,"withdraw.enabled":!1},crypto:{"deposit.enabled":!0,"withdraw.enabled":!0},gift:{"deposit.enabled":!1,"withdraw.enabled":!1},credit:{"deposit.enabled":!1,"withdraw.enabled":!1},depositbonus:{enabled:!1,amount:0,famount:0},rainrestrict:{enabled:!1},redeem:{enabled:!1,amount:0}});case 7:c=(c=e.sent).toObject();case 9:delete c._id,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error: ".concat(e.t0.message)),process.exit(1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e.exports={settingInitDatabase:l,settingCheck:function(e,t){if(!0===c.general.maintenance.enabled&&(null===e||"admin"!==e.rank))throw new Error("Site is in maintenance! Please try again later.");if(void 0!==t&&!1===t.split(".").reduce((function(e,t){return e[t]}),c)&&(null===e||"admin"!==e.rank))throw new Error("The action you’ve requested is currently unavailable.")},settingGet:function(){return c},settingSetValue:function(e,t){return new Promise(function(){var r=s(a().mark((function r(n,i){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.findOneAndUpdate({},o({},e,t),{new:!0}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 2:delete(c=r.sent)._id,n(c);case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getMinimumValue:function(e){switch(e){case 5:return 47;case 10:return 44;case 15:return 41;case 20:return 39;case 25:return 37;case 30:return 34;case 35:return 32;case 40:return 29;case 45:return 26;case 50:return 24;case 55:return 21;case 60:return 19;case 65:return 16;case 70:return 13;case 75:return 11;case 80:return 9;case 85:return 7;case 90:return 4;case 95:return 3}},getMaximumValue:function(e){switch(e){case 5:return 53;case 10:return 55;case 15:return 57;case 20:return 60;case 25:return 63;case 30:return 65;case 35:return 68;case 40:return 70;case 45:return 72;case 50:return 75;case 55:return 77;case 60:return 80;case 65:return 82;case 70:return 84;case 75:return 87;case 80:return 90;case 85:return 93;case 90:return 95;case 95:return 98}},findPercent:function(e,t,r){for(var n=0,o=0;o<r.length;o++)e>=1e3*r[o].value&&t<1e3*r[o].remain&&(n=r[o].percent);return n},findCountPercent:function(e,t,r,n){for(var o=0,a=0;a<n.length;a++)e>=1e3*n[a].value&&t>=n[a].count&&r>=n[a].step&&(o=n[a].percent);return o},findTCountPercent:function(e,t,r,n){var o=0,a=0;"medium"===t&&(o=1),"hard"===t&&(o=2);for(var i=0;i<n.length;i++)e>=1e3*n[i].value&&o===n[i].count&&r>=n[i].step&&(a=n[i].percent);return a}}},8475:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(9591),u=r(2725),c=r(8921),l=r(7908).socketRemoveAntiSpam,d=r(4040),f=d.adminCheckGetBoxListData,h=d.adminCheckSendBoxCreateData,p=d.adminCheckSendBoxCreateItems,m=d.adminCheckSendBoxRemoveData,y=(d.adminCheckSendBoxRemoveBox,d.adminSaveImage),v=d.adminGetAmountBox,g=d.adminFormatItemSort,w=d.adminCheckSendBoxNameData,b=d.adminCheckSendBoxName,k=d.adminCheckSendItemAmountData,x=d.adminCheckSendBoxStateData,S=d.adminCheckSendBoxCategoriesData,E=d.adminCheckSendBoxImageData,_=d.adminCheckSendBoxItemsData,A=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),s=12*(a.page-1),l=g(a.sort),e.next=6,Promise.all([u.countDocuments({name:{$regex:a.search,$options:"i"}}),u.find({name:{$regex:a.search,$options:"i"}}).sort(l).limit(12).skip(s).select("name amount items slug categories state createdAt").lean(),c.find({}).select("name image amountFixed").lean()]);case 6:d=e.sent,i({success:!0,count:d[0],boxes:d[1],items:d[2]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),O=function(){var e=i(o().mark((function e(t,r,n,a,i){var d,f,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,c.find({}).select("amountFixed").lean();case 4:return d=e.sent,p(a,d),f=v(a,d),m=s(a.name,{lower:!0}),e.next=10,y(a.image,m);case 10:return e.next=12,u.create({name:a.name,slug:m,amount:f,items:a.items,categories:a.categories,type:"site",state:"active"});case 12:g=(g=e.sent).toObject(),i({success:!0,box:g}),l(n._id),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),j=function(){var e=i(o().mark((function e(t,r,n,a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),e.next=4,u.findByIdAndDelete(a.boxId);case 4:boxDatabase=e.sent,i({success:!0,box:boxDatabase}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),I=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(a),e.next=4,u.findById(a.boxId).select("name").lean();case 4:return s=e.sent,b(s),c=a.name,e.next=9,Promise.all([u.findByIdAndUpdate(s._id,{name:c},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),P=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(a),e.next=4,u.findById(a.boxId).select("name").lean();case 4:return s=e.sent,b(s),c=a.amount,e.next=9,Promise.all([u.findByIdAndUpdate(s._id,{amount:c},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),T=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(a),e.next=4,u.findById(a.boxId).select("name").lean();case 4:return s=e.sent,b(s),c=a.state,e.next=9,Promise.all([u.findByIdAndUpdate(s._id,{state:c},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),C=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(a),e.next=4,u.findById(a.boxId).select("name").lean();case 4:return s=e.sent,b(s),c=a.categories,e.next=9,Promise.all([u.findByIdAndUpdate(s._id,{categories:c},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 9:d=e.sent,i({success:!0,item:d[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),G=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(a),e.next=4,u.findById(a.boxId).select("name slug").lean();case 4:return s=e.sent,b(s),c=a.image,e.next=9,y(c,s.slug);case 9:return e.next=11,Promise.all([u.findById(s._id).select("name amount items slug categories state createdAt").lean()]);case 11:d=e.sent,i({success:!0,item:d[0]}),l(n._id),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),N=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,d,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(a),e.next=4,u.findById(a.boxId).select("name").lean();case 4:return s=e.sent,b(s),d=a.items,e.next=9,c.find({}).select("amountFixed").lean();case 9:return f=e.sent,e.next=12,Promise.all([u.findByIdAndUpdate(s._id,{items:d,amount:v(a,f)},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 12:h=e.sent,i({success:!0,item:h[0]}),l(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetBoxListSocket:A,adminSendBoxCreateSocket:O,adminSendBoxRemoveSocket:j,adminSendBoxNameSocket:I,adminSendBoxAmountSocket:P,adminSendBoxStateSocket:T,adminSendBoxCategorySocket:C,adminSendBoxImageSocket:G,adminSendBoxItemsSocket:N}},8481:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(4332),w=g.towersGetGame,b=g.towersSendBetSocket,k=g.towersSendRevealSocket,x=g.towersSendCashoutSocket,S=g.towersInit;e.exports=function(e){e.of("/socket/towers").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("towers",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=20;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:t.emit("init",{game:w(t.decoded)}),r(),e.next=21;break;case 20:r(new Error("You need to sign in to perform this action."));case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/towers").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("towers",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.towers.enabled"),b(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("towers",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},8521:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function i(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(7906),d=r(4229),f=r(3688),h=[];e.exports={cashierCheckGetRobuxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||!0!==["deposit","withdraw"].includes(e.type))throw new Error("Your entered type is invalid.")},cashierCheckGetRobuxDataRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only deposit a minmum amount of DL".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositUser:function(e,t,r){if(e.amount+t>Math.floor(1e3*r))throw new Error("You don’t have enough robux for this action.")},cashierCheckSendRobuxWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided withdraw amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only withdraw a minmum amount of R$".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxWithdrawUser:function(e,t){if(e.balance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierCheckSendRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==l.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},cashierCheckSendRobuxCancelRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if("created"!==e.state||!0===t.includes(e._id.toString()))throw new Error("You aren't allowed to cancel this offer at the moment.")},cashierRobuxGetBlockOffer:function(){return h},cashierRobuxAddBlockOffer:function(e){h.push(e)},cashierRobuxRemoveBlockOffer:function(e){h.splice(h.indexOf(e),1)},cashierRobuxSortOffers:function(e){var t,r={},n=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=new Date(o.createdAt),i="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate(),"-").concat(a.getHours());void 0===r[i]?r[i]=[o]:r[i].push(o)}}catch(e){n.e(e)}finally{n.f()}for(var s in r)r[s].sort((function(e,t){return t.amount-e.amount}));return Object.values(r).flat()},cashierGetUserRobux:function(e,t){return new Promise(function(){var r=s(a().mark((function r(n,o){var i,s,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new f(e),s={cookie:".ROBLOSECURITY=".concat(t)},r.next=5,d("https://economy.roblox.com/v1/user/currency",{agent:i,headers:s});case 5:if(200!==(u=r.sent).status){r.next=13;break}return r.next=9,u.json();case 9:u=r.sent,n(u.robux),r.next=14;break;case 13:401===u.status?o({relogin:!0}):o(new Error("ERROR: ".concat(u.statusText)));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),o(r.t0);case 19:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(e,t){return r.apply(this,arguments)}}())},cashierRobuxGetGameId:function(e,t,r){return new Promise(function(){var n=s(a().mark((function n(o,i){var s,u,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new f(e),u={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,d("https://apis.roblox.com/universes/v1/search?CreatorType=User&CreatorTargetId=".concat(r,"&IsArchived=false&PageSize=10&SortParam=GameCreated&SortOrder=Desc"),{agent:s,headers:u});case 5:if(200!==(c=n.sent).status){n.next=13;break}return n.next=9,c.json();case 9:c=n.sent,o(c.data[0].id),n.next=14;break;case 13:401===c.status?i({relogin:!0}):i(new Error("ERROR: ".concat(c.statusText)));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxGetProducts:function(e,t,r){return new Promise(function(){var n=s(a().mark((function n(i,s){var u,c,l,h,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,u=new f(e),c={cookie:".ROBLOSECURITY=".concat(t)},l=[],h=1;case 5:return n.next=8,d("https://apis.roblox.com/developer-products/v1/universes/".concat(r,"/developerproducts?pageNumber=").concat(h,"&pageSize=250"),{agent:u,headers:c});case 8:if(200!==(p=n.sent).status){n.next=21;break}return n.next=12,p.json();case 12:if(p=n.sent,l=[].concat(o(l),o(p)),!(p.length>=250)){n.next=18;break}h+=1,n.next=19;break;case 18:return n.abrupt("break",30);case 19:n.next=28;break;case 21:if(401!==p.status){n.next=26;break}return s({relogin:!0}),n.abrupt("break",30);case 26:return s(new Error("ERROR: ".concat(p.statusText))),n.abrupt("break",30);case 28:n.next=5;break;case 30:i(l),n.next=36;break;case 33:n.prev=33,n.t0=n.catch(0),s(n.t0);case 36:case"end":return n.stop()}}),n,null,[[0,33]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxGetProduct:function(e,t,r){return new Promise(function(){var n=s(a().mark((function n(o,i){var s,u,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new f(e),u={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,d("https://apis.roblox.com/developer-products/v1/developer-products/".concat(r),{agent:s,headers:u});case 5:if(200!==(c=n.sent).status){n.next=14;break}return n.next=9,c.json();case 9:c=n.sent,console.log("Scond Get prodct: ",c),o(c),n.next=15;break;case 14:401===c.status?i({relogin:!0}):i(new Error("ERROR: ".concat(c.statusText)));case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),i(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxCreateProduct:function(e,t,r,n,o,i){return new Promise(function(){var u=s(a().mark((function s(u,c){var l,h,p;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=new f(t),h={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.next=5,d("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts?name=").concat(o,"&description=&priceInRobux=").concat(i),{method:"POST",agent:l,headers:h});case 5:if(200!==(p=a.sent).status){a.next=13;break}return a.next=9,p.json();case 9:p=a.sent,u(p),a.next=14;break;case 13:401===p.status?c({relogin:!0}):c(new Error("ERROR: ".concat(p.statusText)));case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),c(a.t0);case 19:case"end":return a.stop()}}),s,null,[[0,16]])})));return function(e,t){return u.apply(this,arguments)}}())},cashierRobuxUpdateProduct:function(e,t,r,n,o,i,u){return new Promise(function(){var c=s(a().mark((function s(c,l){var h,p,m,y;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,h=new f(t),p={"content-type":"application/json-patch+json","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},m={Name:i,PriceInRobux:u},a.next=6,d("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts/").concat(o,"/update"),{method:"POST",agent:h,headers:p,body:JSON.stringify(m)});case 6:if(200!==(y=a.sent).status){a.next=14;break}return a.next=10,y.json();case 10:y=a.sent,c(y),a.next=15;break;case 14:l(new Error(y.statusText));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),l(a.t0);case 20:case"end":return a.stop()}}),s,null,[[0,17]])})));return function(e,t){return c.apply(this,arguments)}}())},cashierRobuxPurchaseProduct:function(e,t,r,n,o,i){return new Promise(function(){var u=s(a().mark((function s(u,c){var l,h,p,m;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=new f(t),h={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},p={expectedCurrency:1,expectedPrice:o,expectedSellerId:i},a.next=6,d("https://economy.roblox.com/v1/purchases/products/".concat(n),{method:"POST",agent:l,headers:h,body:JSON.stringify(p)});case 6:if(!(m=a.sent).ok){a.next=14;break}return a.next=10,m.json();case 10:!0===(m=a.sent).purchased?u():c(new Error("".concat(m.title,": ").concat(m.errorMsg))),a.next=15;break;case 14:c(new Error(m.statusText));case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),c(a.t0);case 21:case"end":return a.stop()}}),s,null,[[0,17]])})));return function(e,t){return u.apply(this,arguments)}}())}}},8577:e=>{"use strict";e.exports=require("cors")},8610:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetLeaderboardListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendLeaderboardCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||""===e.type.trim()||!0!==["wager","deposit","balance"].includes(e.type))throw new Error("Your entered type is invalid.");if(void 0===e.duration||null===e.duration||!0===isNaN(e.duration)||Math.floor(e.duration)<=0||Math.floor(e.duration)>30)throw new Error("Your entered duration is invalid.");if(void 0===e.prizes||!0!==Array.isArray(e.prizes)||e.prizes.length<=0)throw new Error("Your entered prizes are invalid.")},adminCheckSendLeaderboardStopData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.leaderboardId||null===e.leaderboardId||"string"!=typeof e.leaderboardId||!0!==n.isMongoId(e.leaderboardId))throw new Error("Your entered leaderboard id is invalid.")},adminCheckSendLeaderboardStopLeaderboard:function(e){if(null===e)throw new Error("Your entered leaderboard was not found.");if("canceled"===e.state||"completed"===e.state)throw new Error("Your entered leaderboard is already canceled or completed.")}}},8629:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckUserFullRank),f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(538),m=p.adminSendSettingValueSocket,y=p.adminSendALeaderboardValueSocket,v=p.adminGetLeaderboardCreatorsSocket,g=p.adminSendDLeaderboardValueSocket,w=p.adminSendSLeaderboardValueSocket;e.exports=function(e,t){t.on("sendSettingValue",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),m(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendStopLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendDeleteLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getLeaderboardCreators",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8702:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},minesCount:{type:Number},deck:[{type:String}],revealed:[{tile:{type:Number},value:{type:String}}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("MinesGame",o)},8725:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckUserFullRank),f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(6088),m=p.adminGetRainListSocket,y=p.adminSendRainAmountSocket;e.exports=function(e,t){t.on("getRainList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["fulladmin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainAmount",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8744:(e,t,r)=>{var n=r(6037),o=new n.Schema({winners:[{prize:{type:Number},points:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"}}],duration:{type:Number},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Leaderboard",o)},8747:e=>{e.exports={upgraderCheckGetItemsDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your provided page is invalid.");if(void 0===e.search||"string"!=typeof e.search)throw new Error("Your provided keyword is invalid.");if(void 0===e.select||"string"!=typeof e.select||!1===["all","0 - 1","1 - 5","5 - 25","25 - 100","+100"].includes(e.select))throw new Error("Your provided select value is invalid.");if(void 0===e.sort||"string"!=typeof e.sort||!1===["descending","ascending"].includes(e.sort))throw new Error("Your provided sort value is invalid.")},upgraderCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided bet amount is invalid.");if(void 0===e.amountPayout||!0===isNaN(e.amountPayout)||Math.floor(e.amountPayout)<=0)throw new Error("Your provided bet payout amount is invalid.");if(void 0===e.mode||"string"!=typeof e.mode||"under"!==e.mode&&"over"!==e.mode)throw new Error("Your provided mode is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.UPGRADER_MIN_AMOUNT))throw new Error("You can only bet a min amount of $".concat(parseFloat(process.env.UPGRADER_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.UPGRADER_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.UPGRADER_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},upgraderCheckSendCreateUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},upgraderCheckSendCreateSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},upgraderCheckSendCreateMultiplier:function(e){if(e<=100)throw new Error("Your provided bet multiplier is to low.")},upgraderSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return delete t.fair,t},upgraderFormatItemSelect:function(e){var t={amount:{$gt:0}};return"0 - 1"===e?t={amount:{$gt:0,$lte:1e3}}:"1 - 5"===e?t={amount:{$gt:1e3,$lte:5e3}}:"5 - 25"===e?t={amount:{$gt:5e3,$lte:25e3}}:"25 - 100"===e?t={amount:{$gt:25e3,$lte:1e5}}:"+100"===e&&(t={amount:{$gt:1e5}}),t}}},8749:e=>{"use strict";e.exports=require("crypto")},8781:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckAntiSpam),f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(2396),m=p.generalGetUserInfoSocket,y=p.generalGetUserBetsSocket,v=p.generalGetUserTransactionsSocket,g=p.generalGetUserSeedSocket,w=p.generalSendUserAnonymousSocket,b=p.generalSendUserDiscordSocket,k=p.generalSendUserClientSeedSocket,x=p.generalSendUserServerSeedSocket,S=p.generalSendUserTipSocket;e.exports=function(e,t){t.on("getUserInfo",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!0),h(c),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserBets",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!0),h(c),y(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactions",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!0),h(c),v(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserSeed",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:c=r.sent;case 12:l(c,!0),h(c),g(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserAnonymous",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserDiscord",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("discordId username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserClientSeed",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserServerSeed",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserTip",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance stats limits mute ban").lean();case 12:c=r.sent,l(c,!0),h(c,"general.tip.enabled"),S(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8796:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}var i=r(6037),s=(r(2789),r(5958)),u=(r(3304),r(7908).socketRemoveAntiSpam),c=r(6919),l=c.cashierCheckSendSteamDepositData,d=c.cashierSteamCreateTransaction,f=function(){var e,t=(e=o().mark((function e(t,r,n,a,c){var f,h,p,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),e.next=4,s.findOne({type:"deposit",user:n._id,state:"created",createdAt:{$gte:(new Date).getTime()-6e4}}).select("data type user state createdAt").lean();case 4:if(null!==(f=e.sent)){e.next=15;break}return h=new i.Types.ObjectId,p={deposit_id:h,result_url:"".concat(process.env.SERVER_BACKEND_URL,"/callback/skinify"),priority_game:a.game},e.next=10,d(p);case 10:return m=e.sent,e.next=13,s.create({_id:h,data:{providerId:m.transaction_id,providerUrl:m.url},type:"deposit",user:n._id,state:"created"});case 13:f=(f=e.sent).toObject();case 15:c({success:!0,transaction:f}),u(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),u(r.decoded._id),c({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendSteamDepositSocket:f}},8858:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function u(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)}))}}var l=r(829),d=r(8749),f=r(1024),h=r(2789),p=r(5632),m=r(5241),y=r(3304),v=r(8744),g=r(8875),w=r(5734).rateLimiter,b=r(7908),k=b.socketCheckUserData,x=b.socketCheckConnectionLimit,S=b.socketAddConnectionLimit,E=b.socketRemoveConnectionLimit,_=b.socketCheckAntiSpam,A=b.socketRemoveAntiSpam,O=r(8461).settingCheck,j=r(9580),I=j.plinkoCheckSendCreateData,P=j.plinkoCheckSendCreateUser,T=j.plinkoCheckSendCreateSeed,C=j.plinkoGenerateDeck,G=j.plinkoGetPayoutAmount,N=r(836),D=N.generalUserGetRakeback,Y=N.generalUserGetFormated,B=r(5507).generalAddBetsList;e.exports=function(e){e.of("/socket/plinko").use(function(){var e=c(s().mark((function e(t,r){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,x("plinko",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,l.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:o=e.sent,t.decoded=o,t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("Please sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("Please sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r(new Error("Something went wrong! Please try again in a few seconds.")));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/plinko").on("connection",(function(e){var r=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;S("plinko",r),e.on("sendCreate",function(){var r=c(s().mark((function r(n,o){var a,i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==o&&"function"==typeof o){r.next=2;break}return r.abrupt("return");case 2:if(void 0===e.decoded||null===e.decoded){r.next=29;break}return r.prev=3,a=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress,r.next=7,w.consume(a);case 7:return r.next=9,_(e.decoded._id);case 9:return r.prev=9,r.next=12,h.findById(e.decoded._id).select("rank balance stats limits fair agreed affiliates mute ban").lean();case 12:i=r.sent,k(i,!0,!0),O(i,"games.plinko.enabled"),t(e,i,n,o),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),A(e.decoded._id),o({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),o({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"Please slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:o({success:!1,error:{type:"error",message:"Please sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),e.on("disconnect",(function(){var t=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;E("plinko",t)}))}));var t=function(){var t=c(s().mark((function t(r,n,o,i){var u,c,l,w,b,k,x,S,E,_,O,j,N,U,R,M,F;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(o),P(o,n),t.next=5,p.findOne({user:n._id,state:"created"}).select("seedClient seedServer nonce user state");case 5:return u=t.sent,T(u),c=Math.floor(o.amount),l=Math.floor(o.rows),w=D(n),b=!0!==n.limits.blockSponsor?Math.floor(c*w.percentage):0,k=C(l+1),x="".concat(u.seedServer,"-").concat(u.nonce,"-").concat(u.seedClient),S=d.createHash("sha256").update(x).digest("hex"),E=new f(S),_=E.integer({min:1,max:k.reduce((function(e,t){return e+t}),0)}),O=G(c,k,o.risk,_),j=Math.floor(Math.floor(O)/c*100),N=[],t.next=21,v.findOne({state:"running"}).select("state").lean();case 21:return U=t.sent,t.next=24,g.find({enabled:"true"}).select("creators").lean();case 24:return R=t.sent,M=R.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),N=[h.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(O-c),xp:!0!==n.limits.blockSponsor?c*process.env.XP_RATE*.5:0,"stats.bet":.5*c,"stats.won":O,"leaderboard.points":null!==U&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*c:0,"affiliates.leaderboardpoints":M&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*c:0,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-c)<=0?-n.limits.betToWithdraw:-c,"limits.betToRain":Math.floor(n.limits.betToRain-c)<=0?-n.limits.betToRain:-c,"rakeback.earned":b,"rakeback.available":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean(),p.findByIdAndUpdate(u._id,{$inc:{nonce:1}},{}),m.create({amount:c,payout:O,multiplier:j,rows:l,risk:o.risk,ticket:_,fair:{seed:u._id,nonce:u.nonce,clientSeed:u.seedClient},user:n._id,stats:{balanceBefore:n.balance},state:"completed"})],"admin"!==n.rank&&N.push(y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":c,"stats.total.won":O,"stats.plinko.bet":c,"stats.plinko.won":O}},{upsert:!0})),t.next=30,Promise.all(N);case 30:return F=t.sent,t.next=33,F[2].populate({path:"user",select:"username xp stats avatar rank anonymous"});case 33:F[2]=t.sent,F[2]=F[2].toObject(),F[2].method="plinko",F[2].fair=void 0,setTimeout((function(){e.of("/socket/general").to(n._id.toString()).emit("user",{user:F[0]}),e.of("/socket/general").emit("bet",{bet:a(a({},F[2]),{},{user:Y(F[2].user)})}),B(e,a(a({},F[2]),{},{user:Y(F[2].user),method:"plinko"}))}),500*F[2].rows),i({success:!0,game:F[2]}),A(n._id),t.next=46;break;case 42:t.prev=42,t.t0=t.catch(0),A(n._id),i({success:!1,error:{type:"error",message:t.t0.message}});case 46:case"end":return t.stop()}}),t,null,[[0,42]])})));return function(e,r,n,o){return t.apply(this,arguments)}}()}},8875:(e,t,r)=>{var n=r(6037),o=new n.Schema({creators:{type:String},enabled:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("leaderboardCreator",o)},8900:e=>{"use strict";e.exports=require("hpp")},8921:(e,t,r)=>{var n=r(6037),o=new n.Schema({assetId:{type:String},name:{type:String},title:{type:String},image:{type:String},amount:{type:Number},amountFixed:{type:Number},accepted:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedItem",o)},8938:e=>{"use strict";e.exports=require("axios")},9039:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(829),u=r(2789),c=r(5734).rateLimiter,l=r(7908),d=l.socketCheckUserData,f=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,m=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(3298),w=g.minesGetGame,b=g.minesSendBetSocket,k=g.minesSendRevealSocket,x=g.minesSendCashoutSocket,S=g.minesInit;e.exports=function(e){e.of("/socket/minesbattle").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,f("mines",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=20;break}return e.prev=5,e.next=8,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:t.emit("init",{game:w(t.decoded)}),r(),e.next=21;break;case 20:r(new Error("You need to sign in to perform this action."));case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/minesbattle").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("mines",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s,"games.mines.enabled"),b(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,u.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:s=r.sent,d(s,!0),v(s),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("mines",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},9109:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckAntiSpam,f=c.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(4330),m=p.cashierGetLimitedDataSocket,y=p.cashierSendLimitedEnableSocket,v=p.cashierSendLimitedVerifySocket,g=p.cashierSendLimitedDepositSocket,w=p.cashierSendLimitedWithdrawSocket;e.exports=function(e,t){t.on("getLimitedData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 11:c=r.sent;case 12:l(c,!0),h(c),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedEnable",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedVerify",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 12:c=r.sent,l(c,!0),h(c),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedDeposit",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban verifiedAt").lean();case 12:c=r.sent,l(c,!0),h(c,"limited.deposit.enabled"),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedWithdraw",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban verifiedAt").lean();case 12:c=r.sent,l(c,!0),h(c,"limited.withdraw.enabled"),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},9381:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,i)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function c(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}r(6037);var d=r(2789),f=r(6112),h=r(3844),p=r(5958),m=r(6232),y=r(4823),v=r(6930),g=r(6363),w=r(286),b=r(7908).socketRemoveAntiSpam,k=r(8461).settingGet,x=r(7587),S=x.captchaCheckData,E=x.captchaGetData,_=r(3602),A=_.generalCheckSendRainCreateData,O=_.generalCheckSendRainCreateRain,j=_.generalCheckSendRainCreateUser,I=_.generalCheckSendRainTipData,P=_.generalCheckSendRainTipRain,T=_.generalCheckSendRainTipUser,C=_.generalCheckSendRainJoinData,G=_.generalCheckSendRainJoinRain,N=_.generalCheckSendRainJoinUser,D=_.generalCheckSendRainJoinTransactions,Y=r(836).generalUserGetFormated,B=r(7089).generalChatAddMessage,U=[],R=function(){var e=l(u().mark((function e(t,r,n,o,a){var i,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(o),e.next=4,f.findOne({type:"user",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state createdAt").lean();case 4:return i=e.sent,O(i,U),e.prev=6,U.push(n._id.toString()),j(o,n),s=Math.floor(o.amount),e.next=12,Promise.all([d.findByIdAndUpdate(n._id,{$inc:{balance:-s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.create({amount:s,creator:n._id,type:"user",state:"created"}),w.create({amount:-s,type:"rainCreate",user:n._id,state:"completed"})]);case 12:(c=e.sent)[1]=c[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:c[0]}),$(t,c[1]),a({success:!0}),U.splice(U.indexOf(n._id.toString()),1),b(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),U.splice(U.indexOf(n._id.toString()),1),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[6,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=l(u().mark((function e(t,r,n,o,a){var i,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(o),e.next=4,f.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 4:return i=e.sent,P(i),T(o,n),s=Math.floor(o.amount),e.next=10,Promise.all([d.findByIdAndUpdate(n._id,{$inc:{balance:-s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(i._id,{$inc:{amount:s}},{new:!0}).select("amount participants type state updatedAt").lean(),w.create({amount:-s,type:"rainTip",user:n._id,state:"completed"})]);case 10:(c=e.sent)[2]=c[2].toObject(),c[2].user={_id:n._id,username:n.username},t.of("/socket/general").to(n._id.toString()).emit("user",{user:c[0]}),t.of("/socket/general").emit("rain",{rain:c[1]}),l={transaction:c[2],type:"rainTip"},B(t,l),a({success:!0}),b(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=l(u().mark((function e(t,r,n,o,i){var s,c,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(o),e.next=4,E(o.captcha);case 4:return s=e.sent,S(s),e.next=8,Promise.all([f.findOne({state:"running"}).select("participants type state updatedAt").lean(),f.find({"participants.user":n._id,state:"completed",updatedAt:{$gte:new Date((new Date).getTime()-864e5)}}).select("participants type state updatedAt").lean()]);case 8:if(c=e.sent,l=k(),G(n,c[0],l),N(n,c[0],c[1]),"site"!==c[0].type){e.next=17;break}return e.next=15,Promise.all([h.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),m.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),p.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),y.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),v.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),g.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean()]);case 15:d=e.sent,D([].concat(a(d[0]),a(d[1]),a(d[2]),a(d[3]),a(d[4]),a(d[5])));case 17:return e.next=19,f.findByIdAndUpdate(c[0]._id,{$push:{participants:{user:n._id}}},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username"}).lean();case 19:c[0]=e.sent,t.of("/socket/general").emit("rain",{rain:c[0]}),i({success:!0}),b(n._id),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),b(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(){var e=l(u().mark((function e(t,r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.findOne({state:"running"}).select("state updatedAt").lean();case 3:if(null===(n=e.sent)){e.next=12;break}return o=new Date(n.updatedAt).getTime()+1e3+12e4-(new Date).getTime(),e.next=8,f.findByIdAndUpdate(r._id,{state:"pending",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").lean();case 8:n=e.sent,setTimeout((function(){$(t,n)}),o),e.next=17;break;case 12:return e.next=14,f.findByIdAndUpdate(r._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username avatar rank stats anonymous createdAt"}).lean();case 14:"user"===(n=e.sent).type&&(n.creator=Y(n.creator)),setTimeout((function(){L(t,n)}),12e4);case 17:t.of("/socket/general").emit("rain",{rain:n}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}(),L=function(){var e=l(u().mark((function e(t,r){var n,a,i,s,c,l,h,p,m,y,v,g,b,x,S,E,_,A,O,j,I;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.findById(r._id).select("amount participants creator type state updatedAt").populate({path:"participants",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 3:if(n=e.sent,a=k(),i=[],s=[],c=[],l=Math.floor(5*Math.random())+3,n.participants.length>0){h=n.participants.reduce((function(e,t){return e+t.user.xp}),0),p=h/n.participants.length,h+=p*l,m=o(n.participants);try{for(m.s();!(y=m.n()).done;)v=y.value,g=Math.floor(n.amount*v.user.xp/h),!0!==i.includes(v.user.ips[0].address)&&!1===isNaN(g)&&g>=10&&(i.push(v.user.ips[0].address),s.push(d.findByIdAndUpdate(v.user._id,{$inc:{balance:g,"limits.betToWithdraw":g,"limits.betToRain":g},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),c.push(w.create({amount:g,type:"rainPayout",user:v.user._id,state:"completed"})))}catch(e){m.e(e)}finally{m.f()}}return b=a.rainrestrict.enabled?l+n.participants.length:n.participants.length,0===n.participants.length&&a.rainrestrict.enabled,e.next=14,Promise.all([f.findByIdAndUpdate(n._id,{state:"completed",totalUsers:b,updatedAt:(new Date).getTime()},{new:!0}).select("amount participants state totalUsers updatedAt").lean()].concat(s,c));case 14:x=e.sent,S=o(x.slice(1,s.length+1));try{for(S.s();!(E=S.n()).done;)_=E.value,t.of("/socket/general").to(_._id.toString()).emit("user",{user:_})}catch(e){S.e(e)}finally{S.f()}A=o(x.slice(s.length+1));try{for(A.s();!(O=A.n()).done;)j=O.value,t.of("/socket/general").to(j.user._id.toString()).emit("rainPayout",{transaction:j})}catch(e){A.e(e)}finally{A.f()}if(I={rain:x[0],type:"rainCompleted"},B(t,I),"site"!==r.type){e.next=28;break}return e.next=24,f.create({amount:2500,type:"site",state:"created"});case 24:n=(n=e.sent).toObject(),t.of("/socket/general").emit("rain",{rain:n}),setTimeout((function(){$(t,n)}),168e4);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),console.error(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=l(u().mark((function e(t){var r,n,a,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.find({$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("participants type state createdAt").populate({path:"participants",populate:{path:"user",select:"balance stats"}}).lean();case 3:r=e.sent,n=o(r),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=13;break}return i=a.value,e.next=11,f.findByIdAndUpdate(i._id,{state:"canceled",updatedAt:(new Date).getTime()},{});case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.next=23,f.create({amount:2500,type:"site",state:"created"});case 23:s=(s=e.sent).toObject(),setTimeout((function(){$(t,s)}),168e4),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),console.error(e.t1);case 31:case"end":return e.stop()}}),e,null,[[0,28],[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetRains:function(){return new Promise(function(){var e=l(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([f.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("amount participants type state totalUsers updatedAt").lean(),f.findOne({state:"running"}).select("amount participants totalUsers creator type state updatedAt").populate({path:"creator",select:"username avatar rank xp stats anonymous createdAt"}).lean()]);case 3:null!==(n=e.sent)[1]&&"user"===n[1].type&&(n[1].creator=Y(n[1].creator)),t({site:n[0],active:n[1]}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}())},generalSendRainCreateSocket:R,generalSendRainTipSocket:M,generalSendRainJoinSocket:F,generalRainInit:q}},9420:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckUserFullRank),f=c.socketCheckAntiSpam,h=c.socketRemoveAntiSpam,p=r(3239),m=p.adminGetCashierListSocket,y=(p.adminSendCashierCryptoActionSocket,p.adminSendCashierRobuxCancelSocket),v=p.adminSendCashierCreateSocket,g=p.adminAproveWithdrawCryptoByOxapay;e.exports=function(e,t){t.on("getCashierList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["fulladmin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCryptoAction",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierRobuxCancel",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),y(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["fulladmin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},9472:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}r(4229);var i=[],s=[],u=new Date("2024-08-13T00:00:00Z");e.exports={requestGetProxy:function(e,t){return new Promise(function(){var r,n=(r=o().mark((function r(n,a){var u,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,u=s.findIndex((function(t){return t.userIp===e})),console.log("usedProxies: ",s.length," : ",s),console.log("used proxy exist? ",u," : ",e,t),-1===u){r.next=8;break}n(s[u].proxy),r.next=21;break;case 8:if(!(i.length>0)){r.next=20;break}u=!1===["XX","T1"].includes(t)?i.findIndex((function(e){return e.country_code.toLowerCase()===t.toLowerCase()})):-1,c={userIp:e},console.log("availableProxies: ",i.length),console.log("available proxy exist? ",u),c.proxy=-1!==u?i.splice(u,1)[0]:i.shift(),s.push(c),console.log("addedUsedProxies: ",s.length),console.log("reducedProxies: ",i.length),n(c.proxy),r.next=21;break;case 20:throw new Error("We can`t currently process your request. Please try again in a few seconds.");case 21:r.next=26;break;case 23:r.prev=23,r.t0=r.catch(0),a(r.t0);case 26:case"end":return r.stop()}}),r,null,[[0,23]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},requestRemoveProxy:function(e){try{var t=s.findIndex((function(t){return t.userIp===e}));-1!==t&&(-1===i.findIndex((function(e){return e.proxy_address===s[t].proxy.proxy_address}))&&(i.push(s[t].proxy),console.log("remove - add used proxy")),s.splice(t,1),console.log("remove used proxy: ",e))}catch(e){console.log(e)}},SERVICE_PROXY_TIME:u}},9544:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(2789),u=r(5734).rateLimiter,c=r(7908),l=c.socketCheckUserData,d=c.socketCheckUserRank,f=(c.socketCheckUserFullRank,c.socketCheckAntiSpam),h=c.socketRemoveAntiSpam,p=r(481),m=p.adminGetItemListSocket,y=p.adminSendItemCreateSocket,v=p.adminSendBoxRemoveSocket,g=p.adminSendItemNameSocket,w=p.adminSendItemTitleSocket,b=p.adminSendItemAmountSocket,k=p.adminSendItemImageSocket;e.exports=function(e,t){t.on("getItemList",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:l(c,!0),d(c,["admin"]),m(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=26;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.prev=7,r.next=10,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 10:c=r.sent,l(c,!0),d(c,["admin"]),y(e,t,c,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(7),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:r.next=27;break;case 26:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 27:case"end":return r.stop()}}),r,null,[[3,21],[7,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemRemove",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),v(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemName",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),g(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemTitle",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),w(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemAmount",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemImage",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,l(c,!0),d(c,["admin"]),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},9580:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o={8:{easy:[6,2.1,1.1,.93,.46,.93,1.1,2.1,6],medium:[13,3,1.3,.63,.37,.63,1.3,3,13],hard:[29,4,1.5,.23,.16,.23,1.5,4,29]},9:{easy:[7,2,1.6,.94,.65,.65,.94,1.6,2,7],medium:[18,4,1.7,.83,.46,.46,.83,1.7,4,18],hard:[44,7,2,.51,.17,.17,.51,2,7,44]},10:{easy:[9,3,1.4,1.1,.92,.47,.92,1.1,1.4,3,9],medium:[23,5,2,1.4,.53,.35,.53,1.4,2,5,23],hard:[77,10,3,.9,.22,.16,.22,.9,3,10,77]},11:{easy:[9,3,1.9,1.3,.93,.66,.66,.93,1.3,1.9,3,9],medium:[25,6,3,1.8,.63,.46,.46,.63,1.8,3,6,25],hard:[123,14,5.2,1.4,.32,.16,.16,.32,1.4,5.2,14,123]},12:{easy:[11,3,1.6,1.4,1.1,.92,.46,.92,1.1,1.4,1.6,3,11],medium:[34,11,4,2,1.1,.52,.26,.52,1.1,2,4,11,34],hard:[174,24,8.1,2,.7,.13,.13,.13,.7,2,8.1,24,174]},13:{easy:[22,4,3,1.9,1.2,.83,.65,.65,.83,1.2,1.9,3,4,22],medium:[53,13,6,3,1.3,.62,.36,.36,.62,1.3,3,6,13,53],hard:[274,37,11,4,1,.14,.14,.14,.14,1,4,11,37,274]},14:{easy:[22,4,1.9,1.4,1.3,1.1,.91,.46,.91,1.1,1.3,1.4,1.9,4,22],medium:[73,15,7,4,1.9,1,.41,.16,.41,1,1.9,4,7,15,73],hard:[429,56,18,5,1.9,.3,.13,.13,.13,.3,1.9,5,18,56,429]},15:{easy:[38,8,3,2,1.5,1.1,.93,.65,.65,.93,1.1,1.5,2,3,8,38],medium:[96,18,11,5,3,1.3,.42,.26,.26,.42,1.3,3,5,11,18,96],hard:[643,83,27,8,3,.5,.14,.14,.14,.14,.5,3,8,27,83,643]},16:{easy:[71,9,2,1.4,1.4,1.2,1.1,.91,.45,.91,1.1,1.2,1.4,1.4,2,9,71],medium:[170,41,10,5,3,1.5,1,.41,.25,.41,1,1.5,3,5,10,41,170],hard:[1030,130,26,9,4,2,.2,.12,.14,.12,.2,2,4,9,26,130,1030]}};e.exports={plinkoCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered bet amount is invalid.");if(void 0===e.rows||null===e.rows||!0===isNaN(e.rows)||Math.floor(e.rows)<8||Math.floor(e.rows)>16)throw new Error("Your entered rows amount is invalid.");if(void 0===e.risk||null===e.risk||"string"!=typeof e.risk||!1===["easy","medium","hard"].includes(e.risk))throw new Error("Your entered risk is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.PLINKO_MIN_AMOUNT))throw new Error("You can only bet a minmum amount of $".concat(parseFloat(process.env.PLINKO_MIN_AMOUNT).toFixed(2)," per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.PLINKO_MAX_AMOUNT))throw new Error("You can only bet a maximum amount of $".concat(parseFloat(process.env.PLINKO_MAX_AMOUNT).toFixed(2)," per game."))},plinkoCheckSendCreateUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(t.balance<Math.floor(e.amount))throw new Error("You have not enough balance for this action.")},plinkoCheckSendCreateSeed:function(e){if(null==e)throw new Error("You need to generate a personal server seed first at the provably fair page.")},plinkoGenerateDeck:function(e){for(var t=[[1],[1,1]],r=2;r<e;r++){for(var n=t[r-1],o=[1],a=0;a<n.length-1;a++)o.push(n[a]+n[a+1]);o.push(1),t.push(o)}return t[t.length-1]},plinkoGetPayoutAmount:function(e,n,a,i){var s,u=n.length-1,c=0,l=0,d=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=r(e))){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}(n.entries());try{for(d.s();!(s=d.n()).done;){var f=t(s.value,2),h=f[0];if((c+=f[1])>=i){l=Math.floor(o[u][a][h]*e);break}}}catch(e){d.e(e)}finally{d.f()}return l}}},9591:e=>{"use strict";e.exports=require("slugify")},9716:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetCashierListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendCashierCryptoActionData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==n.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.");if("approve"===e.action&&(void 0===e.transactionHash||null===e.transactionHash||"string"!=typeof e.transactionHash))throw new Error("Your provided transaction hash is invalid.")},adminCheckSendCashierCryptoActionTransaction:function(e,t){if(null===e||"pending"!==e.state||!0===t.includes(e._id.toString()))throw new Error("Your provided transaction is not available.")},adminCheckSendCashierRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==n.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},adminCheckSendCashierRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if(!0===t.includes(e._id.toString()))return!0},adminCheckSendCashierCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.reward||!0===isNaN(e.reward))throw new Error("Your entered reward amount is invalid.");if(void 0===e.count||!0===isNaN(e.count)||Math.floor(e.count)<=0)throw new Error("Your entered card count is invalid.")},adminCheckSendCashierCryptoActionDataByOxapay:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==n.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")}}},9794:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&a.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,s,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;l(this,"_invoke",(function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function a(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,u,"next",e)}function u(e){a(i,n,o,s,u,"throw",e)}s(void 0)}))}}var s=r(7252).Router(),u=r(84).authGetDiscordToken;e.exports=function(){return s.get("/",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.redirect("https://discord.com/api/oauth2/authorize?client_id=".concat(process.env.DISCORD_CLIENT_ID,"&redirect_uri=").concat(process.env.SERVER_BACKEND_URL,"/auth/discord/callback&response_type=code&scope=identify%20guilds"))}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),s.get("/callback",function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.query.code,e.next=4,u(n);case 4:a=e.sent,r.render("discord",{success:!0,tokenDiscord:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.render("discord",{success:!1,tokenDiscord:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),s}},9845:e=>{e.exports=[[{rank:"A",suit:"diamond"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"club"}],[{rank:"A",suit:"club"},{rank:"J",suit:"club"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"diamond"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"K",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"10",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"K",suit:"club"},{rank:"A",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"club"}],[{rank:"A",suit:"club"},{rank:"J",suit:"club"}],[{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"10",suit:"club"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"Q",suit:"diamond"}],[{rank:"10",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"10",suit:"club"}],[{rank:"Q",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"Q",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"club"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"10",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"heart"}]]},9856:e=>{"use strict";e.exports=require("http")},9940:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollSeed",o)},9949:(e,t,r)=>{var n=r(1024),o=function(e){for(var t=e,r=e;r>1;r--)t*=r-1;return t};e.exports={minesCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.minesCount||!0===isNaN(e.minesCount)||Math.floor(e.minesCount)<=0||Math.floor(e.minesCount)>24)throw new Error("You’ve entered an invalid mines count.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.MINES_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.MINES_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.MINES_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.MINES_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},minesCheckSendBetUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},minesCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running mines game first.")},minesCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},minesCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>24)throw new Error("Your entered tile is invalid.")},minesCheckSendRevealGame:function(e,t){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(!0===e.revealed.some((function(e){return e.tile===Math.floor(t.tile)})))throw new Error("Your entered tile is already revealed.")},minesCheckSendCashoutGame:function(e){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(0===e.revealed.length)throw new Error("You need to reveal at least one tile.")},minesGetGamePayout:function(e){var t=0;return e.revealed.length>=1&&(t=(t=(25===e.revealed.length?1:o(25)/(o(e.revealed.length)*o(25-e.revealed.length)))/(25-e.minesCount===e.revealed.length?1:o(25-e.minesCount)/(o(e.revealed.length)*o(25-e.minesCount-e.revealed.length)))*.95)<1?1.01:t,t=Math.round(100*t)/100),Math.floor(e.amount*t)},minesGetGameDeck:function(e,t){for(var r=new n(t),o=[],a=0;a<25;a++)a<e?o.push("mine"):o.push("coin");return r.shuffle(o)},minesSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},9974:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var a=r&&r.prototype instanceof p?r:p,i=Object.create(a.prototype);return l(i,"_invoke",function(t,r,n){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=S(s,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(t,n,new A(o||[])),!0),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function p(){}function m(){}function y(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==r&&o.call(w,s)&&(v=w);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,u){var c=f(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;l(this,"_invoke",(function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}),!0)}function S(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,t.i,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[t.r]=i.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function E(e){this.tryEntries.push(e)}function _(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function A(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function O(t){if(null!=t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return m.prototype=y,l(b,"constructor",y),l(y,"constructor",m),m.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){i.type="throw",i.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return n("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,n(u),!0;if(s<c)return n(c),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:O(t),r,n},"next"===this.method&&(this.arg=e),h}},t}function s(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}var c=r(2789),l=r(2298),d=r(3844),f=r(3304),h=r(7908).socketRemoveAntiSpam,p=r(168).authRobloxGetToken,m=r(8521),y=m.cashierCheckGetRobuxData,v=m.cashierCheckGetRobuxDataRoblox,g=m.cashierCheckSendRobuxDepositData,w=m.cashierCheckSendRobuxDepositRoblox,b=m.cashierCheckSendRobuxDepositUser,k=m.cashierCheckSendRobuxWithdrawData,x=m.cashierCheckSendRobuxWithdrawRoblox,S=m.cashierCheckSendRobuxWithdrawUser,E=m.cashierCheckSendRobuxCancelData,_=m.cashierCheckSendRobuxCancelRoblox,A=m.cashierCheckSendRobuxCancelOffer,O=m.cashierRobuxGetBlockOffer,j=m.cashierRobuxAddBlockOffer,I=m.cashierRobuxRemoveBlockOffer,P=m.cashierRobuxSortOffers,T=m.cashierGetUserRobux,C=m.cashierRobuxGetGameId,G=m.cashierRobuxGetProducts,N=m.cashierRobuxGetProduct,D=m.cashierRobuxCreateProduct,Y=m.cashierRobuxUpdateProduct,B=m.cashierRobuxPurchaseProduct,U=function(){var e=u(i().mark((function e(t,r,n,o,a){var s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(o),v(n),s=8*(o.page-1),e.next=6,Promise.all([l.countDocuments({type:o.type,user:n._id}),l.find({type:o.type,user:n._id}).sort({createdAt:-1}).limit(8).skip(s).select("amount amountProcessed type user state createdAt").lean()]);case 6:u=e.sent,a({success:!0,count:u[0],offers:u[1]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),R=function(){var e=u(i().mark((function e(t,r,n,o,a){var s,u,c,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(o),w(n),e.next=5,l.find({type:"deposit",user:n._id,state:"created"}).select("amount amountProcessed type user state").lean();case 5:return s=e.sent,u=s.reduce((function(e,t){return t.amount-t.amountProcessed+e}),0),e.next=9,T(n.proxy,n.roblox.cookie);case 9:return c=e.sent,b(o,u,c),d=Math.floor(o.amount),e.next=14,l.create({amount:d,type:"deposit",user:n._id,state:"created"});case 14:f=(f=e.sent).toObject(),console.log("success offer: ",f),a({success:!0,offer:f}),h(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),h(r.decoded._id),a({success:!1,error:void 0===e.t0.relogin?{type:"error",message:e.t0.message}:{type:"error",message:"Your roblox session has been expired. Please login again.",relogin:!0}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=u(i().mark((function e(t,r,n,o,a){var s,u,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(o),x(n),S(n,o),e.next=6,p(n.proxy,n.roblox.cookie);case 6:return s=e.sent,e.next=9,C(n.proxy,n.roblox.cookie,n.roblox.id);case 9:return u=e.sent,e.next=12,G(n.proxy,n.roblox.cookie,u);case 12:if(!0===e.sent.some((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))){e.next=16;break}return e.next=16,D(s,n.proxy,n.roblox.cookie,u,"wonderfulbeginnerbackpackapple",100);case 16:return d=Math.floor(o.amount),e.next=19,Promise.all([c.findByIdAndUpdate(n._id,{$inc:{balance:-d,"stats.withdraw":d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),l.create({amount:d,type:"withdraw",user:n._id,state:"created"})]);case 19:(f=e.sent)[1]=f[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:f[0]}),a({success:!0,offer:f[1]}),h(n._id),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),h(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=u(i().mark((function e(t,r,n,o,a){var s,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(o),_(n),e.next=5,l.findById(o.offerId).select("amount amountProcessed type user state").lean();case 5:return s=e.sent,A(s,O()),e.prev=7,j(s._id.toString()),u=[],u=[l.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===s.type&&u.push(c.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(s.amount-s.amountProcessed),"stats.withdraw":-Math.floor(s.amount-s.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=14,Promise.all(u);case 14:d=e.sent,"withdraw"===s.type&&t.of("/socket/general").to(d[1]._id.toString()).emit("user",{user:d[1]}),a({success:!0,offer:d[0]}),I(s._id.toString()),h(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(7),h(r.decoded._id),I(s._id.toString()),a({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),h(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[7,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(){var e=u(i().mark((function e(t){var r,n,a,s,u,c,f,h,p,m,y,v,g,w,b,k,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.find({$or:[{state:"created"},{state:"pending"}]}).sort({updatedAt:1}).select("amount amountProcessed type user state createdAt").lean();case 3:if(r=e.sent,n=P(r.filter((function(e){return"deposit"===e.type&&!1===O().includes(e._id.toString())}))),a=P(r.filter((function(e){return"withdraw"===e.type&&!1===O().includes(e._id.toString())})))[0],!(n.length>=1&&void 0!==a)){e.next=64;break}j(a._id.toString()),s=[],u=[],c=o(n),e.prev=11,c.s();case 13:if((f=c.n()).done){e.next=30;break}if(h=f.value,j(h._id.toString()),p=h.amount-h.amountProcessed,m=a.amount-a.amountProcessed,y=p<m?p:m,console.log("tracked deposit: ",h.user._id,"-",h.amount,h.amountProcessed,p),console.log("tracked withdraw: ",a.user._id,"-",a.amount,a.amountProcessed,m),console.log("tracked transaction amount: ",y),h.amountProcessed=h.amountProcessed+y,a.amountProcessed=a.amountProcessed+y,s.push(l.findByIdAndUpdate(h._id,{amountProcessed:h.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),u.push(d.create({amount:y,deposit:{user:h.user._id,offer:h._id},withdraw:{user:a.user._id,offer:a._id},state:"created"})),!(a.amount<=a.amountProcessed)){e.next=28;break}return e.abrupt("break",30);case 28:e.next=13;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(11),c.e(e.t0);case 35:return e.prev=35,c.f(),e.finish(35);case 38:return s.push(l.findByIdAndUpdate(a._id,{amountProcessed:a.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),e.next=41,Promise.all([].concat(s,u));case 41:v=e.sent,g=v.slice(s.length).map((function(e){return e.toObject()})),w=o(v.slice(0,s.length)),e.prev=44,k=i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b.value,I(r._id.toString()),-1!==(n=g.findIndex((function(e){return e.deposit.offer._id.toString()===r._id.toString()})))&&(g[n].deposit.offer=r),t.of("/socket/cashier").to(r.user.toString()).emit("robuxOffer",{offer:r});case 5:case"end":return e.stop()}}),e)})),w.s();case 47:if((b=w.n()).done){e.next=51;break}return e.delegateYield(k(),"t1",49);case 49:e.next=47;break;case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(44),w.e(e.t2);case 56:return e.prev=56,w.f(),e.finish(56);case 59:x={user:a.user,offer:a,transactions:g},console.log("created new Group: ",x),L(t,x),e.next=65;break;case 64:setTimeout((function(){$(t)}),1e4);case 65:e.next=70;break;case 67:e.prev=67,e.t3=e.catch(0),setTimeout((function(){$(t)}),1e4);case 70:case"end":return e.stop()}}),e,null,[[0,67],[11,32,35,38],[44,53,56,59]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=u(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.findById(r.user._id).select("roblox proxy");case 3:return r.user=e.sent,e.next=6,p(r.user.proxy,r.user.roblox.cookie);case 6:return r.user.token=e.sent,console.log("created group user token: ",r.user.token),console.log("group user: ",r.user),e.next=11,C(r.user.proxy,r.user.roblox.cookie,r.user.roblox.id);case 11:return r.gameId=e.sent,e.next=14,G(r.user.proxy,r.user.roblox.cookie,r.gameId);case 14:if(n=e.sent,r.product=n[n.findIndex((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))],console.log("First Get Product: ",r.product),void 0===r.product){e.next=23;break}return e.next=20,N(r.user.proxy,r.user.roblox.cookie,r.product.id);case 20:e.t0=e.sent,e.next=24;break;case 23:e.t0=null;case 24:r.product=e.t0,null!==r.product?q(t,0,r):J(t,r),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),J(t,r);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=u(i().mark((function e(t,r,n){var a,s,u,h,m,y,v,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.findById(n.transactions[r].deposit.user).select("roblox.cookie affiliates proxy");case 3:if(n.transactions[r].deposit.user=e.sent,console.log("start robux transaction"),n.user._id.toString()===n.transactions[r].deposit.user._id.toString()){e.next=27;break}return console.log("receive user: ",n.user),console.log("deposit user: ",n.transactions[r].deposit.user),a=Math.floor(n.transactions[r].amount/1e3),console.log("group trx: ",n.transactions[r]),console.log("trx amount: ",n.transactions[r].amount,a),console.log("receive user token: ",n.user.token),console.log("update product params: ",n.gameId,n.product.id),e.t0=console,e.next=16,Y(n.user.token,n.user.proxy,n.user.roblox.cookie,n.gameId,n.product.id,"wonderfulbeginnerbackpackapple",a);case 16:return e.t1=e.sent,e.t0.log.call(e.t0,"update product : ",e.t1),e.next=20,p(n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie);case 20:return s=e.sent,console.log("get token",s),e.t2=console,e.next=25,B(s,n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie,n.product.id,a,n.user.roblox.id);case 25:e.t3=e.sent,e.t2.log.call(e.t2,"purchace product: ",e.t3);case 27:return u=Math.floor(n.transactions[r].amount/1e3*process.env.COIN_RATE),h=[],h=[c.findByIdAndUpdate(n.transactions[r].deposit.user._id,{$inc:{balance:n.transactions[r].amount,"stats.deposit":n.transactions[r].amount,"limits.betToWithdraw":n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.findByIdAndUpdate(n.transactions[r]._id,{"data.productId":n.product.targetId,state:"completed"},{new:!0}).lean(),f.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":u,"stats.total.withdraw":u,"stats.robux.deposit":u,"stats.robux.withdraw":u}},{upsert:!0})],void 0!==n.transactions[r].deposit.user.affiliates.referrer&&h.push(c.findByIdAndUpdate(n.transactions[r].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":n.transactions[r].amount},updatedAt:(new Date).getTime()},{})),n.transactions[r].deposit.offer.amount<=n.transactions[r].deposit.offer.amountProcessed&&(h.push(l.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 1")),r+1===n.transactions.length&&n.offer.amount===n.offer.amountProcessed&&(h.push(l.findByIdAndUpdate(n.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 2")),e.next=35,Promise.all(h);case 35:m=e.sent,t.of("/socket/general").to(m[0]._id.toString()).emit("user",{user:m[0]}),y=o(m.slice(void 0!==n.transactions[r].deposit.user.affiliates.referrer?4:3));try{for(y.s();!(v=y.n()).done;)g=v.value,t.of("/socket/cashier").to(g.user.toString()).emit("robuxOffer",{offer:g})}catch(e){y.e(e)}finally{y.f()}r+1<n.transactions.length?q(t,r+1,n):setTimeout((function(){$(t)}),1e3),e.next=46;break;case 42:e.prev=42,e.t4=e.catch(0),console.log("robux transaction canceld"),K(t,r,n);case 46:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(t,r,n){return e.apply(this,arguments)}}(),J=function(){var e=u(i().mark((function e(t,r){var n,a,s,u,f,h,p,m,y,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],a=[],s=0,u=o(r.transactions);try{for(u.s();!(f=u.n()).done;)h=f.value,s+=h.amount,n.push(d.findByIdAndUpdate(h._id,{state:"canceled"},{new:!0}).select("amount state").lean()),a.push(l.findByIdAndUpdate(h.deposit.offer._id,{$inc:{amountProcessed:-h.amount}},{new:!0}).select("amount amountProcessed type user state createdAt").lean())}catch(e){u.e(e)}finally{u.f()}return a.push(l.findByIdAndUpdate(r.offer,{$inc:{amountProcessed:-s},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),e.next=9,Promise.all([c.findByIdAndUpdate(r.user._id,{$inc:{balance:Math.floor(r.offer.amount-r.offer.amountProcessed+s),"stats.withdraw":-Math.floor(r.offer.amount-r.offer.amountProcessed+s)}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(n,a));case 9:p=e.sent,t.of("/socket/general").to(p[0]._id.toString()).emit("user",{user:p[0]}),m=o(p.slice(n.length+1));try{for(m.s();!(y=m.n()).done;)v=y.value,t.of("/socket/cashier").to(v.user.toString()).emit("robuxOffer",{offer:v})}catch(e){m.e(e)}finally{m.f()}setTimeout((function(){$(t)}),1e3),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){$(t)}),1e4);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=u(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([c.findByIdAndUpdate(n.user._id,{$inc:{balance:n.transactions[r].amount,"stats.withdraw":-n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.findByIdAndUpdate(n.transactions[r]._id,{state:"canceled"},{new:!0}).select("amount state").lean(),l.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{$inc:{amountProcessed:-n.transactions[r].amount},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()]);case 3:o=e.sent,t.of("/socket/general").to(o[0]._id.toString()).emit("user",{user:o[0]}),t.of("/socket/cashier").to(o[2].user.toString()).emit("robuxOffer",{offer:o[2]}),r+1<n.transactions.length?q(t,r+1,n):setTimeout((function(){$(t)}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){$(t)}),1e4);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n){return e.apply(this,arguments)}}(),W=function(){var e=u(i().mark((function e(t){var r,n,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.find({state:"created"}).select("amount deposit withdraw state").lean();case 3:r=e.sent,n=o(r),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=13;break}return s=a.value,e.next=11,Promise.all([c.findByIdAndUpdate(s.withdraw.user._id,{$inc:{balance:s.amount,"stats.withdraw":-s.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("amount state").lean()]);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:$(t),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),console.error(e.t1);case 27:case"end":return e.stop()}}),e,null,[[0,24],[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierGetRobuxDataSocket:U,cashierSendRobuxDepositSocket:R,cashierSendRobuxWithdrawSocket:M,cashierSendRobuxCancelSocket:F,cashierRobuxInit:W}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,o),a.exports}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var a=Object.create(null);o.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,o.d(a,i),a},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s=o(2003),u=o(7252),c=o(9856),l=(o(2057),o(8900)),d=o(8577),f=o(4437);o(4383),o(818).config();var h=u();h.use(d());var p,m=c.createServer(h),y=f(m,{transports:["websocket"],cors:{origin:process.env.SERVER_FRONTEND_URL,credentials:!0},maxHttpBufferSize:1e7});o(6701)(),o(8461).settingInitDatabase(),h.set("trust proxy",1),h.use(u.json()),h.use(u.urlencoded({extended:!0})),h.use(l()),h.use(d({origin:[].concat((p=process.env.SERVER_FRONTEND_URL.split(","),function(e){if(Array.isArray(e))return a(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["http://77.221.151.45"]),credentials:!0})),h.set("view engine","ejs"),h.set("views",s.join(__dirname,"/views")),h.use("/api",o(2622)(y)),h.use("/api/public",u.static(s.join(__dirname,"public"))),o(4906)(y);var v=process.env.SERVER_PORT||5001;m.listen(v,"0.0.0.0",(function(){return console.log("Server running in ".concat("production"," mode on port ").concat(v))}))})();