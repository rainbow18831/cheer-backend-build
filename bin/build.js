/*! For license information please see build.js.LICENSE.txt */
(()=>{var e,t,r={6245:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}var s=r(2789),u=r(7908).socketRemoveAntiSpam,l=r(6042),f=l.adminCheckGetAffiliateListData,d=l.adminCheckSendAffiliateBlockData,h=l.adminCheckSendAffiliateClearData,p=l.adminCheckSendAffiliateCodeData,y=l.adminCheckSendAffiliateCodeCode,m=l.adminCheckSendAffiliateAvailableData,v=l.adminFormatAffiliateSort,g=l.adminCheckGetAffiliateItemData,w=function(){var e=c(a().mark((function e(t,r,n,o,i){var c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(o),c=12*(o.page-1),u=v(o.sort),e.next=6,Promise.all([s.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}),s.find({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}).sort(u).limit(12).skip(c).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 6:if(l=e.sent,"fulladmin"===n.fullrank){e.next=11;break}return e.next=10,Promise.all([s.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}),s.find({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}).sort(u).limit(12).skip(c).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 10:l=e.sent;case 11:i({success:!0,count:l[0],affiliates:l[1]}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=c(a().mark((function e(t,r,n,o,i){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(o),e.next=4,Promise.all([s.find({"affiliates.referrer":o.referrer_id,rank:"user"}).sort({createdAt:-1}).select("stats.bet stats.deposit stats.withdraw createdAt").lean()]);case 4:c=e.sent,i({success:!0,affiliate:x(c[0])}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(e){var t,r={users:{amount:0},deposit:{amount:0},withdraw:{amount:0},revenue:{amount:0},wager:{amount:0}},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.deposit.amount=r.deposit.amount+a.stats.deposit,r.withdraw.amount=r.withdraw.amount+a.stats.withdraw,r.wager.amount=r.wager.amount+a.stats.bet}}catch(e){n.e(e)}finally{n.f()}return r.users.amount=e.length,r.revenue.amount=r.deposit.amount-r.withdraw.amount,r},k=function(){var e=c(a().mark((function e(t,r,n,o,i){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(o),e.next=4,s.findByIdAndUpdate(o.userId,{"limits.blockAffiliate":o.block},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:c=e.sent,i({success:!0,affiliate:c}),u(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=c(a().mark((function e(t,r,n,o,i){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(o),e.next=4,Promise.all([s.findByIdAndUpdate(o.userId,{"affiliates.referred":0,"affiliates.deposited":0,"affiliates.earned":0,"affiliates.available":0},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean(),s.updateMany({"affiliates.referrer":o.userId},{$unset:{"affiliates.referrer":1}},{})]);case 4:c=e.sent,i({success:!0,affiliate:c[0]}),u(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=c(a().mark((function e(t,r,n,o,i){var c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(o),c={$unset:{"affiliates.code":1}},null===o.code){e.next=9;break}return e.next=6,s.findOne({"affiliates.code":o.code}).select("affiliates").lean();case 6:l=e.sent,y(l),c={"affiliates.code":o.code};case 9:return e.next=11,s.findByIdAndUpdate(o.userId,c,{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 11:f=e.sent,i({success:!0,affiliate:f}),u(n._id),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),L=function(){var e=c(a().mark((function e(t,r,n,o,i){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(o),e.next=4,s.findByIdAndUpdate(o.userId,{"affiliates.available":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:c=e.sent,i({success:!0,affiliate:c}),u(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),_=function(){var e=c(a().mark((function e(t,r,n,o,i){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(o),e.next=4,s.findByIdAndUpdate(o.userId,{"affiliates.cashOut":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 4:c=e.sent,i({success:!0,affiliate:c}),u(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetAffiliateListSocket:w,adminSendAffiliateBlockSocket:k,adminSendAffiliateClearSocket:S,adminSendAffiliateCodeSocket:E,adminSendAffiliateAvailableSocket:L,adminGetAffiliateItemSocket:b,adminSendAffiliateCashSocket:_}},8475:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(9591),s=r(2725),u=r(8921),l=r(7908).socketRemoveAntiSpam,f=r(4040),d=f.adminCheckGetBoxListData,h=f.adminCheckSendBoxCreateData,p=f.adminCheckSendBoxCreateItems,y=f.adminCheckSendBoxRemoveData,m=(f.adminCheckSendBoxRemoveBox,f.adminSaveImage),v=f.adminGetAmountBox,g=f.adminFormatItemSort,w=f.adminCheckSendBoxNameData,b=f.adminCheckSendBoxName,x=f.adminCheckSendItemAmountData,k=f.adminCheckSendBoxStateData,S=f.adminCheckSendBoxCategoriesData,E=f.adminCheckSendBoxImageData,L=f.adminCheckSendBoxItemsData,_=f.adminCheckSendBoxTypeData,O=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),c=12*(a.page-1),l=g(a.sort),e.next=6,Promise.all([s.countDocuments({name:{$regex:a.search,$options:"i"}}),s.find({name:{$regex:a.search,$options:"i"}}).sort(l).limit(12).skip(c).select("name amount items slug categories state type rewardDuration rewardRanking createdAt").lean(),u.find({}).select("name image amountFixed").lean()]);case 6:f=e.sent,i({success:!0,count:f[0],boxes:f[1],items:f[2]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),A=function(){var e=i(o().mark((function e(t,r,n,a,i){var f,d,y,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,u.find({}).select("amountFixed").lean();case 4:return f=e.sent,p(a,f),d=v(a,f),y=c(a.name,{lower:!0}),e.next=10,m(a.image,y);case 10:return e.next=12,s.create({name:a.name,slug:y,amount:d,items:a.items,categories:a.categories,type:"site",state:"active"});case 12:g=(g=e.sent).toObject(),i({success:!0,box:g}),l(n._id),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),j=function(){var e=i(o().mark((function e(t,r,n,a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(a),e.next=4,s.findByIdAndDelete(a.boxId);case 4:boxDatabase=e.sent,i({success:!0,box:boxDatabase}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),P=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,b(c),u=a.name,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{name:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),I=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,b(c),u=a.amount,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{amount:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),T=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,b(c),u=a.state,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{state:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),N=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:if(c=e.sent,b(c),u=a.type,f=[],"0"!==u[0]){e.next=14;break}return e.next=11,Promise.all([s.findByIdAndUpdate(c._id,{type:"site",$unset:{rewardDuration:"",rewardRanking:""}},{new:!0}).select("name amount items slug categories state type createdAt").lean()]);case 11:f=e.sent,e.next=17;break;case 14:return e.next=16,Promise.all([s.findByIdAndUpdate(c._id,{type:u[0],rewardDuration:u[1],rewardRanking:u[2]},{new:!0}).select("name amount items slug categories state type rewardDuration rewardRanking createdAt").lean()]);case 16:f=e.sent;case 17:i({success:!0,item:f[0]}),l(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),C=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,b(c),u=a.categories,e.next=9,Promise.all([s.findByIdAndUpdate(c._id,{categories:u},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),G=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(a),e.next=4,s.findById(a.boxId).select("name slug").lean();case 4:return c=e.sent,b(c),u=a.image,e.next=9,m(u,c.slug);case 9:return e.next=11,Promise.all([s.findById(c._id).select("name amount items slug categories state createdAt").lean()]);case 11:f=e.sent,i({success:!0,item:f[0]}),l(n._id),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),D=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(a),e.next=4,s.findById(a.boxId).select("name").lean();case 4:return c=e.sent,b(c),f=a.items,e.next=9,u.find({}).select("amountFixed").lean();case 9:return d=e.sent,e.next=12,Promise.all([s.findByIdAndUpdate(c._id,{items:f,amount:v(a,d)},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 12:h=e.sent,i({success:!0,item:h[0]}),l(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),l(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetBoxListSocket:O,adminSendBoxCreateSocket:A,adminSendBoxRemoveSocket:j,adminSendBoxNameSocket:P,adminSendBoxAmountSocket:I,adminSendBoxStateSocket:T,adminSendBoxCategorySocket:C,adminSendBoxImageSocket:G,adminSendBoxItemsSocket:D,adminSendBoxTypeSocket:N}},3239:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(8749),h=r(4229),p=r(2789),y=r(2298),m=r(4823),v=r(4825),g=r(3304),w=r(7908).socketRemoveAntiSpam,b=r(8521),x=b.cashierRobuxGetBlockOffer,k=b.cashierRobuxAddBlockOffer,S=b.cashierRobuxRemoveBlockOffer,E=r(9716),L=E.adminCheckGetCashierListData,_=E.adminCheckSendCashierCryptoActionData,O=E.adminCheckSendCashierCryptoActionTransaction,A=E.adminCheckSendCashierRobuxCancelData,j=E.adminCheckSendCashierRobuxCancelOffer,P=E.adminCheckSendCashierCreateData,I=E.adminCheckSendCashierCryptoActionDataByOxapay,T=[],N=function(){var e=f(o().mark((function e(t,r,n,a,c){var u,l,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(a),e.next=4,Promise.all([y.countDocuments({$or:[{state:"created"},{state:"pending"}]}),m.countDocuments({type:"withdraw",state:"pending"}),y.find({$or:[{state:"created"},{state:"pending"}]}).sort({createdAt:1}).limit(12*a.page).select("amount amountProcessed type user state").populate({path:"user",select:"username avatar rank"}).lean(),m.find({type:"withdraw",state:"pending"}).sort({createdAt:1}).limit(12*a.page).select("amount data type user state").populate({path:"user",select:"username avatar rank"}).lean()]);case 4:u=e.sent,l=u.slice(0,2).reduce((function(e,t){return e+t}),0),(f=[].concat(s(u[2].map((function(e){return i(i({},e),{},{method:"robux"})}))),s(u[3].map((function(e){return i(i({},e),{},{method:"crypto"})}))))).sort((function(e,t){return t.amount-e.amount})),d=12*(a.page-1),h=12*a.page,f=f.slice(d,h),c({success:!0,count:l,transactions:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),c({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),C=function(){var e=f(o().mark((function e(t,r,n,a,i){var c,s,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(a),e.next=4,m.findById(a.transactionId).select("amount data type user state").lean();case 4:return c=e.sent,O(c,T),e.prev=6,T.push(c._id.toString()),s=[],"approve"===a.action?(s=[m.findByIdAndUpdate(c._id,{"data.transaction":a.transactionHash,state:"completed"},{new:!0}).select("state").lean()],u=Math.floor(c.amount/1e3*process.env.COIN_RATE),g.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":u,"stats.crypto.withdraw":u}},{upsert:!0})):s=[m.findByIdAndUpdate(c._id,{state:"canceled"},{new:!0}).select("state").lean(),p.findByIdAndUpdate(c.user,{$inc:{balance:c.amount,"stats.total.withdraw":-c.amount,"stats.crypto.withdraw":-c.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.next=12,Promise.all(s);case 12:l=e.sent,"cancel"===a.action&&t.of("/socket/general").to(l[1]._id.toString()).emit("user",{user:l[1]}),i({success:!0,transaction:l[0]}),T.splice(T.indexOf(c._id.toString()),1),w(n._id),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(6),w(r.decoded._id),T.splice(T.indexOf(c._id.toString()),1),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 30:case"end":return e.stop()}}),e,null,[[0,26],[6,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),G=function(){var e=f(o().mark((function e(t,r,n,a,i){var c,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(a),e.next=4,y.findById(a.offerId).select("amount amountProcessed type user state").lean();case 4:return c=e.sent,j(c,x()),e.prev=6,k(c._id.toString()),s=[],s=[y.findByIdAndUpdate(c._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===c.type&&s.push(p.findByIdAndUpdate(c.user,{$inc:{balance:Math.floor(c.amount-c.amountProcessed),"stats.withdraw":-Math.floor(c.amount-c.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=13,Promise.all(s);case 13:u=e.sent,"withdraw"===c.type&&t.of("/socket/general").to(u[1]._id.toString()).emit("user",{user:u[1]}),t.of("/socket/cashier").to(u[0].user.toString()).emit("robuxOffer",{offer:u[0]}),i({success:!0,offer:u[0]}),S(c._id.toString()),w(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),w(r.decoded._id),S(c._id.toString()),i({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[6,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),D=function(){var e=f(o().mark((function e(t,r,n,a,i){var c,s,u,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,P(a),c=Math.floor(a.reward),s=Math.floor(a.count),u=[],l=0;l<s;l++)f=d.randomBytes(16).toString("hex").substring(0,16).toUpperCase(),u.push(v.create({code:f,reward:c}));return e.next=8,Promise.all(u);case 8:h=(h=e.sent).map((function(e){return e.toObject()})),i({success:!0,codes:h}),w(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Y=function(){var e=f(o().mark((function e(t,r,n,a,i){var c,s,u,l,f,d,y,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(a),e.next=4,m.findById(a.transactionId).select("amount data type user state").lean();case 4:if(c=e.sent,console.log("payout trx: ",c),O(c,T),e.prev=7,T.push(c._id.toString()),s=[],"approve"!==a.action){e.next=27;break}return u=null,l=c.data.currency,"usdt_erc20"===c.data.currency?(u="ERC20",l="usdt"):"usdt_trc20"===c.data.currency?(u="TRC20",l="usdt"):"eth"===c.data.currency&&(u="eth"),f=null!==u?{address:c.data.receiver,amount:(c.data.cryptoAmount/1e8).toFixed(8),currency:l.toUpperCase(),network:u,callback_url:"https://wesuccess.biz/api/callback/goon-oxapay-payout"}:{address:c.data.receiver,amount:(c.data.cryptoAmount/1e8).toFixed(8),currency:l.toUpperCase(),callback_url:"https://wesuccess.biz/api/callback/goon-oxapay-payout"},d={payout_api_key:process.env.PAYOUT_API_KEY,"content-type":"application/json"},e.next=18,h("https://api.oxapay.com/v1/payout",{method:"POST",headers:d,body:JSON.stringify(f)});case 18:return y=e.sent,console.log("request body: ",f),e.next=22,y.json();case 22:y=e.sent,console.log("payoutresponse: ",y),200===y.status?i({success:!0,transaction:c}):400===y.status?y.error.message?i({success:!1,error:{type:"error",message:y.error.message}}):i({success:!1,error:{type:"error",message:"Hey! The hotwallet is currently being filled for your withdrawal if this happens in 10 minutes again please report to the staff in our discord server."}}):i({success:!1,error:{type:"error",message:y.message}}),e.next=33;break;case 27:return s=[m.findByIdAndUpdate(c._id,{state:"canceled"},{new:!0}).select("state").lean(),p.findByIdAndUpdate(c.user,{$inc:{balance:c.amount,"stats.withdraw":-c.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.next=30,Promise.all(s);case 30:v=e.sent,t.of("/socket/general").to(v[1]._id.toString()).emit("user",{user:v[1]}),i({success:!0,transaction:v[0]});case 33:T.splice(T.indexOf(c._id.toString()),1),w(n._id),e.next=42;break;case 37:e.prev=37,e.t0=e.catch(7),w(r.decoded._id),T.splice(T.indexOf(c._id.toString()),1),i({success:!1,error:{type:"error",message:e.t0.message}});case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(0),w(n._id),i({success:!1,error:{type:"error",message:e.t1.message}});case 48:case"end":return e.stop()}}),e,null,[[0,44],[7,37]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetCashierListSocket:N,adminSendCashierCryptoActionSocket:C,adminSendCashierRobuxCancelSocket:G,adminSendCashierCreateSocket:D,adminAproveWithdrawCryptoByOxapay:Y}},1204:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}r(2789);var c=r(6533),s=r(7908).socketRemoveAntiSpam,u=r(1567),l=u.adminCheckGetFilterListData,f=u.adminCheckSendFilterCreateData,d=u.adminCheckSendFilterCreateFilter,h=u.adminCheckSendFilterRemoveData,p=u.adminCheckSendFilterRemoveFilter,y=r(7089),m=y.generalChatAddFilter,v=y.generalChatRemoveFilter,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),s=12*(a.page-1),e.next=5,Promise.all([c.countDocuments({phrase:{$regex:a.search,$options:"i"}}),c.find({phrase:{$regex:a.search,$options:"i"}}).limit(12).skip(s).select("phrase createdAt").lean()]);case 5:u=e.sent,i({success:!0,count:u[0],filters:u[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),u=a.phrase.toLowerCase(),e.next=5,c.findOne({phrase:u}).select("phrase").lean();case 5:return l=e.sent,d(l),e.next=9,c.create({phrase:u});case 9:l=e.sent,m(l.phrase),i({success:!0,filter:l}),s(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,c.findById(a.filterId).select("phrase").lean();case 4:return u=e.sent,p(u),e.next=8,c.findByIdAndDelete(a.filterId);case 8:u=e.sent,v(u.phrase),i({success:!0,filter:u}),s(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetFilterListSocket:g,adminSendFilterCreateSocket:w,adminSendFilterRemoveSocket:b}},481:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}r(9591),r(2725);var c=r(8921),s=r(7908).socketRemoveAntiSpam,u=r(4040),l=u.adminCheckGetBoxListData,f=u.adminCheckSendItemCreateData,d=(u.adminCheckSendBoxCreateItems,u.adminCheckSendBoxRemoveData),h=(u.adminCheckSendBoxRemoveBox,u.adminSaveImage,u.adminGetAmountBox,u.adminFormatItemSort),p=u.adminCheckSendItemNameData,y=u.adminCheckSendItemName,m=u.adminCheckSendItemAmountData,v=u.adminCheckSendItemTitleData,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,u,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),s=h(a.sort),u=12*(a.page-1),e.next=6,Promise.all([c.countDocuments({accepted:!0}),c.find({$or:[{name:{$regex:a.search,$options:"i"}},{title:{$regex:a.search,$options:"i"}}]}).sort(s).limit(12).skip(u).select("name title image amount").lean()]);case 6:f=e.sent,i({success:!0,count:f[0],data:f[1]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),e.next=4,c.create({assetId:a.name,name:a.name,title:a.title,image:a.image,amount:a.amount,amountFixed:a.amount,accepted:a.accepted});case 4:u=(u=e.sent).toObject(),i({success:!0,item:u}),s(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),e.next=4,c.findById(a.boxId).select("name").lean();case 4:return u=e.sent,y(u),e.next=8,c.findByIdAndDelete(a.boxId);case 8:u=e.sent,i({success:!0,item:u}),s(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(a),e.next=4,c.findById(a.boxId).select("name").lean();case 4:return u=e.sent,y(u),l=a.name,e.next=9,Promise.all([c.findByIdAndUpdate(u._id,{name:l},{new:!0}).select("name image amount title").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),s(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),k=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(a),e.next=4,c.findById(a.boxId).select("name").lean();case 4:return u=e.sent,y(u),l=a.title,e.next=9,Promise.all([c.findByIdAndUpdate(u._id,{title:l},{new:!0}).select("name title image amount").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),s(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),e.next=4,c.findById(a.boxId).select("name").lean();case 4:return u=e.sent,y(u),l=a.amount,e.next=9,Promise.all([c.findByIdAndUpdate(u._id,{amount:l,amountFixed:l},{new:!0}).select("name image amount title").lean()]);case 9:f=e.sent,i({success:!0,item:f[0]}),s(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.findById(a.boxId).select("name").lean();case 3:return u=e.sent,y(u),l=a.image,e.next=8,Promise.all([c.findByIdAndUpdate(u._id,{image:l},{new:!0}).select("name image amount title").lean()]);case 8:f=e.sent,i({success:!0,item:f[0]}),s(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetItemListSocket:g,adminSendItemCreateSocket:w,adminSendBoxRemoveSocket:b,adminSendItemNameSocket:x,adminSendItemTitleSocket:k,adminSendItemAmountSocket:S,adminSendItemImageSocket:E}},2997:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(8744),u=r(7908).socketRemoveAntiSpam,l=r(8610),f=l.adminCheckGetLeaderboardListData,d=l.adminCheckSendLeaderboardCreateData,h=l.adminCheckSendLeaderboardStopData,p=l.adminCheckSendLeaderboardStopLeaderboard,y=r(8078),m=y.generalLeaderboardStart,v=y.generalLeaderboardStop,g=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),c=12*(a.page-1),e.next=5,Promise.all([s.countDocuments({type:{$regex:a.search,$options:"i"}}),s.find({type:{$regex:a.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(c).select("winners duration type state createdAt").lean()]);case 5:u=e.sent,i({success:!0,count:u[0],leaderboards:u[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=i(o().mark((function e(t,r,n,a,i){var l,f,h,p,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),e.next=4,s.findOne({state:"running"}).select("state").lean();case 4:return l=e.sent,f=Math.floor(a.duration),h=a.prizes.map((function(e){return{prize:e.amount}})),p=[],p=[s.create({winners:h,duration:f,type:a.type,state:null===l?"running":"created"})],null===l&&p.push(c.updateMany({},{"leaderboard.points":0},{})),e.next=12,Promise.all(p);case 12:(y=e.sent)[0]=y[0].toObject(),"running"===y[0].state&&m(t,y[0]),i({success:!0,leaderboard:y[0]}),u(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),b=function(){var e=i(o().mark((function e(t,r,n,a,i){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,Promise.all([s.findById(a.leaderboardId).select("state").lean()]);case 4:if(c=e.sent,p(c[0]),"created"!==c[0].state){e.next=12;break}return e.next=9,s.findByIdAndDelete(a.leaderboardId);case 9:c[0]=e.sent,e.next=16;break;case 12:return v(t,c[0]),e.next=15,s.findByIdAndUpdate(a.leaderboardId,{state:"canceled"},{new:!0});case 15:c[0]=e.sent;case 16:i({success:!0,leaderboard:c[0]}),u(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),u(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetLeaderboardListSocket:g,adminSendLeaderboardCreateSocket:w,adminSendLeaderboardStopSocket:b}},7929:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}r(2789);var c=r(5182),s=r(7908).socketRemoveAntiSpam,u=r(1550),l=u.adminCheckGetPromoListData,f=u.adminCheckSendPromoCreateData,d=u.adminCheckSendPromoCreateCode,h=u.adminCheckSendPromoRemoveData,p=u.adminCheckSendPromoRemoveCode,y=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),s=12*(a.page-1),e.next=5,Promise.all([c.countDocuments({code:{$regex:a.search,$options:"i"}}),c.find({code:{$regex:a.search,$options:"i"}}).limit(12).skip(s).select("code reward redeemptionsTotal redeemptionsMax allowLevel levelMin createdAt").lean()]);case 5:u=e.sent,i({success:!0,count:u[0],promos:u[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),m=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l,h,p,y,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),u=a.code.toLowerCase(),l=Math.floor(a.reward),h=Math.floor(a.redeemptions),p=Math.floor(a.level),y=Math.floor(a.allowlevel),m=Math.floor(a.ipallow),e.next=10,c.findOne({code:u}).select("code").lean();case 10:return v=e.sent,d(v),e.next=14,c.create({code:u,reward:l,levelMin:p,allowLevel:y,ipRestricktLevel:m,redeemptionsMax:h});case 14:v=(v=e.sent).toObject(),i({success:!0,promo:v}),s(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(a),e.next=4,c.findById(a.promoId).select("_id").lean();case 4:return u=e.sent,p(u),e.next=8,c.findByIdAndDelete(a.promoId);case 8:i({success:!0,promo:u}),s(n._id),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetPromoListSocket:y,adminSendPromoCreateSocket:m,adminSendPromoRemoveSocket:v}},6088:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}r(2789);var c=r(6112),s=r(7908).socketRemoveAntiSpam,u=r(5515),l=u.adminCheckGetRainListData,f=u.adminCheckSendRainAmountData,d=u.adminCheckSendRainAmountRain,h=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),s=12*(a.page-1),e.next=5,Promise.all([c.countDocuments({type:{$regex:a.search,$options:"i"}}),c.find({type:{$regex:a.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(s).select("amount participants creator type state createdAt").populate({path:"participants.user",select:"roblox.id username avatar balance"}).populate({path:"creator",select:"roblox.id username avatar balance"}).lean()]);case 5:u=e.sent,i({success:!0,count:u[0],rains:u[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(a),e.next=4,c.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 4:return u=e.sent,d(u),l=Math.floor(a.amount),e.next=9,c.findByIdAndUpdate(u._id,{amount:l},{new:!0}).select("amount participants type state updatedAt").lean();case 9:u=e.sent,t.of("/socket/general").emit("rain",{rain:u}),i({success:!0}),s(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),s(n._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetRainListSocket:h,adminSendRainAmountSocket:p}},538:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(7908).socketRemoveAntiSpam,l=r(8461).settingSetValue,f=r(9845).adminCheckSendSettingValueData,d=r(8875),h=r(2789),p=r(6037),y=function(){var e=s(i().mark((function e(t,r,n,o,a){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(o),e.next=4,l(o.setting,o.value);case 4:c=e.sent,t.of("/socket/general").emit("settings",{settings:c}),a({success:!0}),u(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),m=function(){var e=s(i().mark((function e(t,r,n,a,c){var s,l,f,h,p,y,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,s=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=[],f=o(s),e.prev=4,f.s();case 6:if((h=f.n()).done){e.next=22;break}return p=h.value,e.next=10,d.findOne({creators:p});case 10:if(y=e.sent){e.next=18;break}return m=new d({creators:p,enabled:!0}),e.next=15,m.save();case 15:l.push(p),e.next=20;break;case 18:return e.next=20,d.updateOne({_id:y._id},{$set:{enabled:!0}});case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),f.e(e.t0);case 27:return e.prev=27,f.f(),e.finish(27);case 30:return e.next=32,d.find();case 32:v=e.sent,c({success:!0,data:v}),u(n._id),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(0),u(n._id),c({success:!1,error:{type:"error",message:e.t1.message}});case 41:case"end":return e.stop()}}),e,null,[[0,37],[4,24,27,30]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=s(i().mark((function e(t,r,n,a,c){var s,l,f,h,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,s=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=o(s),e.prev=4,l.s();case 6:if((f=l.n()).done){e.next=13;break}return h=f.value,e.next=10,d.findOneAndUpdate({creators:h},{$set:{enabled:!1}},{new:!0});case 10:e.sent;case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),l.e(e.t0);case 18:return e.prev=18,l.f(),e.finish(18);case 21:return e.next=23,d.find();case 23:p=e.sent,c({success:!0,data:p}),u(n._id),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),u(n._id),c({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[4,15,18,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),g=function(){var e=s(i().mark((function e(t,r,n,a,c){var s,l,f,y,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,s=a.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),l=o(s),e.prev=4,l.s();case 6:if((f=l.n()).done){e.next=15;break}return y=f.value,e.next=10,d.deleteOne({creators:y});case 10:return new p.Types.ObjectId(y),e.next=13,h.updateMany({"affiliates.referrer":y},{$set:{"affiliates.leaderboardpoints":0}});case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:return e.next=25,d.find();case 25:m=e.sent,c({success:!0,data:m}),u(n._id),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(0),u(n._id),c({success:!1,error:{type:"error",message:e.t1.message}});case 34:case"end":return e.stop()}}),e,null,[[0,30],[4,17,20,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),w=function(){var e=s(i().mark((function e(t,r,n,o,a){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.find();case 3:c=e.sent,a({success:!0,data:c}),u(n._id),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminSendSettingValueSocket:y,adminSendALeaderboardValueSocket:m,adminGetLeaderboardCreatorsSocket:w,adminSendDLeaderboardValueSocket:g,adminSendSLeaderboardValueSocket:v}},4569:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(3304),h=(r(2789),r(5632),r(3844),r(6232),r(5958),r(4823)),p=r(827),y=r(6930),m=r(6363),v=r(5329),g=r(286),w=(r(988),r(6966),r(6769),r(5964),r(8702),r(4946),r(3702),r(2256),r(2974),r(5241),r(8455),r(1590)),b=w.adminCheckGetStatsListData,x=w.adminFormatStats,k=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.find({}).sort({createdAt:-1}).limit(420).select("stats.total createdAt").lean();case 3:i=e.sent,c=x(i),a({success:!0,stats:c,list:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(o),i=12*(o.page-1),e.next=5,Promise.all([d.countDocuments({}),d.find({}).limit(12).skip(i).sort({createdAt:-1}).select("stats createdAt").lean()]);case 5:c=e.sent,a({success:!0,count:c[0],stats:c[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=f(u().mark((function e(t,r,n,o,i){var s,l,f,d,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.countDocuments({state:"completed"}),p.countDocuments({state:"completed"}),y.countDocuments({state:"completed"}),m.countDocuments({state:"completed"}),v.countDocuments({state:"completed"}),g.countDocuments({state:"completed"}),h.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),p.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),m.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount sender receiver state createdAt").populate({path:"receiver.user",select:"username avatar"}).populate({path:"sender.user",select:"username avatar"}).lean(),g.find({state:"completed"}).sort({createdAt:-1}).limit(12*o.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean()]);case 3:s=e.sent,l=s.slice(0,6).reduce((function(e,t){return e+t}),0),(f=[].concat(c(s[6].map((function(e){return a(a({},e),{},{method:"crypto"})}))),c(s[7].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),c(s[8].map((function(e){return a(a({},e),{},{method:"gift"})}))),c(s[9].map((function(e){return a(a({},e),{},{method:"credit"})}))),c(s[10].map((function(e){return a(a({},e),{},{method:"tip"})}))),c(s[11].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=12*(o.page-1),w=12*o.page,f=f.slice(d,w),i({success:!0,count:l,transactions:f}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetStatsDataSocket:k,adminGetStatsListSocket:S,adminGetCryptoTransactionListSocket:E}},2541:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(7906),h=r(2789),p=r(3844),y=r(6232),m=r(5958),v=r(4823),g=r(827),w=r(6930),b=r(6363),x=r(5329),k=r(286),S=r(988),E=r(6966),L=r(8455),_=r(6769),O=r(5964),A=r(8702),j=r(4946),P=r(3702),I=r(2256),T=r(2974),N=r(5241),C=r(7908).socketRemoveAntiSpam,G=r(7986),D=G.adminCheckGetUserListData,Y=G.adminCheckGetUserDataData,U=G.adminCheckGetUserDataUser,B=G.adminCheckGetUserTransactionsData,R=G.adminCheckGetUserGamesData,F=G.adminCheckSendUserValueData,M=G.adminCheckSendUserBalanceData,$=G.adminCheckSendUserBalanceUser,q=G.adminCheckSendUserMuteData,W=G.adminCheckSendUserBanData,V=G.adminFormatUserSort,z=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,u,l,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(o),i=12*(o.page-1),u=V(o.sort),l=n.fullrank,f={$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},"fulladmin"!==l&&(f={$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}),!0===d.isMongoId(o.search)&&(f.$or=[].concat(s(f.$or),[{_id:o.search}])),e.next=10,Promise.all([h.countDocuments(f),h.find(f).sort(u).limit(12).skip(i).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt affiliates").populate({path:"affiliates.referrer",select:"username"}).lean()]);case 10:p=e.sent,a({success:!0,count:p[0],users:p[1]}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),J=function(){var e=f(c().mark((function e(t,r,n,o,a){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(o),e.next=4,h.findById(o.userId).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:i=e.sent,U(i),a({success:!0,data:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=f(c().mark((function e(t,r,n,o,i){var u,l,f,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,Promise.all([p.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}),y.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}),m.countDocuments({user:o.userId,state:"completed"}),v.countDocuments({user:o.userId,state:"completed"}),g.countDocuments({state:"completed"}),w.countDocuments({user:o.userId,state:"completed"}),b.countDocuments({user:o.userId,state:"completed"}),x.countDocuments({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}),k.countDocuments({user:o.userId,state:"completed"}),p.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),y.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),m.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),v.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),g.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean(),w.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),b.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),x.find({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount sender receiver state createdAt").populate({path:"sender.user",select:"username"}).populate({path:"receiver.user",select:"username"}).lean(),k.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean()]);case 4:u=e.sent,l=u.slice(0,9).reduce((function(e,t){return e+t}),0),(f=[].concat(s(u[9].map((function(e){return a(a({},e),{},{method:"robux"})}))),s(u[10].map((function(e){return a(a({},e),{},{method:"limited"})}))),s(u[11].map((function(e){return a(a({},e),{},{method:"steam"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"crypto"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"gift"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"credit"})}))),s(u[16].map((function(e){return a(a({},e),{},{method:"tip"})}))),s(u[17].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=14*(o.page-1),h=14*o.page,f=f.slice(d,h),i({success:!0,count:l,transactions:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=f(c().mark((function e(t,r,n,o,i){var u,l,f,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,Promise.all([S.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),E.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),_.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),O.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),A.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),j.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),P.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),I.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),T.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),N.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),L.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),S.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier user game createdAt").lean(),E.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),_.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier actions user game createdAt").lean(),O.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),A.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),j.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),P.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user multiplier createdAt").lean(),I.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),T.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),N.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user game multiplier createdAt").lean(),L.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout multiplier user game createdAt").lean()]);case 4:u=e.sent,l=u.slice(0,9).reduce((function(e,t){return e+t}),0),(f=[].concat(s(u[11].map((function(e){return a(a({},e),{},{method:"crash"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"roll"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"duels"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"mines"})}))),s(u[16].map((function(e){return a(a({},e),{},{method:"towers"})}))),s(u[17].map((function(e){return a(a({},e),{},{method:"unbox"})}))),s(u[18].map((function(e){return a(a({},e),{},{method:"battles"})}))),s(u[19].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),s(u[20].map((function(e){return a(a({},e),{},{method:"plinko"})}))),s(u[21].map((function(e){return a(a({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=14*(o.page-1),h=14*o.page,f=f.slice(d,h),i({success:!0,count:l,games:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),K=function(){var e=f(c().mark((function e(t,r,n,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(o),e.next=4,h.findByIdAndUpdate(o.userId,i({},o.setting,o.value),{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard affiliates limits ips mute ban updatedAt createdAt").lean();case 4:s=e.sent,a({success:!0,user:s}),C(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),C(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,$(i),s=Math.floor(o.balance),e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{balance:s},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard affiliates limits ips mute ban updatedAt createdAt").lean(),k.create({amount:Math.floor(s-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:u=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),a({success:!0,user:u[0]}),C(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,$(i),s=o.balance,e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{"affiliates.depobonus":s},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),k.create({amount:Math.floor(s-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:u=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),a({success:!0,user:u[0]}),C(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ee=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{mute:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:s=e.sent,a({success:!0,user:s}),C(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),C(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),te=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{ban:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:s=e.sent,a({success:!0,user:s}),C(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),C(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetUserListSocket:z,adminGetUserDataSocket:J,adminGetUserTransactionListSocket:H,adminGetUserGameListSocket:X,adminSendUserValueSocket:K,adminSendUserBalanceSocket:Z,adminSendAffiliateBonusSocket:Q,adminSendUserMuteSocket:ee,adminSendUserBanSocket:te}},1169:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};l(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function h(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,c,"next",e)}function c(e){h(a,n,o,i,c,"throw",e)}i(void 0)}))}}var y=r(8749),m=r(2789),v=r(2725),g=r(5729),w=r(2256),b=r(8744),x=r(6112),k=r(8875),S=r(9221),E=r(7908).socketRemoveAntiSpam,L=r(8461).settingGet,_=r(2507).fairGetData,O=r(7950),A=O.battlesCheckGetGameDataData,j=O.battlesCheckGetGameDataGame,P=O.battlesCheckSendCreateData,I=O.battlesCheckSendCreateBoxes,T=O.battlesCheckSendCreateUser,N=O.battlesCheckSendBotData,C=O.battlesCheckSendBotGame,G=O.battlesCheckSendJoinData,D=O.battlesCheckSendJoinGame,Y=O.battlesCheckSendJoinUser,U=O.battlesCheckSendCancelData,B=O.battlesCheckSendCancelGame,R=O.battlesGenerateGame,F=O.battlesFormatBoxes,M=O.battlesGetGameIndex,$=O.battlesGetAmountGame,q=O.battlesGetAmountWin,W=O.battlesGetRounds,V=O.battlesGetOutcomeItem,z=O.battlesGetWinnerBets,J=O.battlesSanitizeGames,H=O.battlesSanitizeGame,X=r(836),K=X.generalUserGetLevel,Z=X.generalUserGetRakeback,Q=X.generalUserGetFormated,ee=r(5507).generalAddBetsList,te=r(8781),re=[],ne=[],oe=[],ae=[],ie=function(){var e=p(d().mark((function e(t,r,n,o,a){var i,c,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,A(o),void 0!==(i=re[M(re,o.gameId)])){e.next=9;break}return e.next=6,g.findById(o.gameId).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp rakeback limits stats.total affiliates anonymous createdAt"}}).lean();case 6:i=e.sent,c=u(i.bets);try{for(c.s();!(s=c.n()).done;)!1===(l=s.value).bot&&(l.user.level=K(l.user),l.user.rakeback=Z(l.user))}catch(e){c.e(e)}finally{c.f()}case 9:j(i),a({success:!0,game:H(i,!0)}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ce=function(){var e=p(d().mark((function e(t,r,n,o,a){var i,c,s,u,l,f,h,p,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(o),I(o),e.next=5,v.find({state:"active"}).select("name amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 5:return i=e.sent,c=F(o,i),s=$(c),u=Math.floor(s+s*Math.floor(o.playerCount)*Math.floor(o.funding)/100),T(n,o,u),l=K(n),f=Z(n),e.next=14,R(o,s,c);case 14:if(h=e.sent,!n.affiliates.referrer){e.next=18;break}return e.next=18,S.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:s},updatedAt:(new Date).getTime()},{new:!0}).select("bet updatedAt").lean();case 18:return p=[m.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.bet":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:u,outcomes:[],slot:0,game:h._id,user:n._id,luck:n.limits.luck,bot:!1})],e.next=22,Promise.all(p);case 22:(y=e.sent)[1]=y[1].toObject(),y[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:l,rakeback:f,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},h.bets=[y[1]],re.push(h),t.of("/socket/general").to(n._id.toString()).emit("user",{user:y[0]}),!1===h.options.private&&t.of("/socket/battles").emit("game",{game:H(h)}),a({success:!0,game:H(h)}),E(n._id),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(0),E(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 37:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),se=function(){var e=p(d().mark((function e(t,r,n,o,a){var i,c,l,f,h,p,y,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,N(o),C(n,re[M(re,o.gameId)],ae,oe),e.prev=3,oe.push(re[M(re,o.gameId)]._id.toString()),i=re[M(re,o.gameId)].amount-Math.floor(re[M(re,o.gameId)].amount*re[M(re,o.gameId)].options.funding/100),c=[],l=d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0!==re[M(re,o.gameId)].bets.some((function(e){return e.slot===t}))&&c.push(w.create({amount:i,outcomes:[],slot:t,game:re[M(re,o.gameId)]._id,luck:!1,bot:!0}));case 1:case"end":return e.stop()}}),e)})),f=0;case 9:if(!(f<re[M(re,o.gameId)].playerCount)){e.next=14;break}return e.delegateYield(l(f),"t0",11);case 11:f++,e.next=9;break;case 14:return e.next=16,Promise.all(c);case 16:if(h=(h=e.sent).map((function(e){return e.toObject()})),re[M(re,o.gameId)].bets=[].concat(s(re[M(re,o.gameId)].bets),s(h)),!0===re[M(re,o.gameId)].options.private){p=u(re[M(re,o.gameId)].bets);try{for(p.s();!(y=p.n()).done;)!1===(m=y.value).bot&&t.of("/socket/battles").to(m.user._id.toString()).emit("game",{game:H(re[M(re,o.gameId)])})}catch(e){p.e(e)}finally{p.f()}}else t.of("/socket/battles").emit("game",{game:H(re[M(re,o.gameId)])});"created"===re[M(re,o.gameId)].state&&fe(t,re[M(re,o.gameId)]),a({success:!0}),oe.splice(oe.indexOf(re[M(re,o.gameId)]._id.toString()),1),E(n._id),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(3),E(r.decoded._id),oe.splice(oe.indexOf(re[M(re,o.gameId)]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t1.message}});case 31:e.next=37;break;case 33:e.prev=33,e.t2=e.catch(0),E(r.decoded._id),a({success:!1,error:{type:"error",message:e.t2.message}});case 37:case"end":return e.stop()}}),e,null,[[0,33],[3,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ue=function(){var e=p(d().mark((function e(t,r,n,o,a){var i,c,s,l,f,h,p,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,G(o),D(o,n,re[M(re,o.gameId)],ae,oe),e.prev=3,ae.push(re[M(re,o.gameId)]._id.toString()),Y(n,re[M(re,o.gameId)]),i=re[M(re,o.gameId)].amount-Math.floor(re[M(re,o.gameId)].amount*re[M(re,o.gameId)].options.funding/100),c=K(n),s=Z(n),!n.affiliates.referrer){e.next=12;break}return e.next=12,S.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:i},updatedAt:(new Date).getTime()},{new:!0}).select("bet updatedAt").lean();case 12:return l=[m.findByIdAndUpdate(n._id,{$inc:{balance:-i,"stats.bet":i},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:i,outcomes:[],slot:Math.floor(o.slot),game:re[M(re,o.gameId)]._id,user:n._id,luck:n.limits.luck,bot:!1})],e.next=16,Promise.all(l);case 16:if((f=e.sent)[1]=f[1].toObject(),f[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:c,rakeback:s,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},re[M(re,o.gameId)].bets.push(f[1]),t.of("/socket/general").to(n._id.toString()).emit("user",{user:f[0]}),!0===re[M(re,o.gameId)].options.private){h=u(re[M(re,o.gameId)].bets);try{for(h.s();!(p=h.n()).done;)!1===(y=p.value).bot&&t.of("/socket/battles").to(y.user._id.toString()).emit("game",{game:H(re[M(re,o.gameId)])})}catch(e){h.e(e)}finally{h.f()}}else t.of("/socket/battles").emit("game",{game:H(re[M(re,o.gameId)])});re[M(re,o.gameId)].playerCount<=re[M(re,o.gameId)].bets.length&&"created"===re[M(re,o.gameId)].state&&fe(t,re[M(re,o.gameId)]),a({success:!0}),ae.splice(ae.indexOf(re[M(re,o.gameId)]._id.toString()),1),E(n._id),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(3),E(r.decoded._id),ae.splice(ae.indexOf(re[M(re,o.gameId)]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(0),E(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 39:case"end":return e.stop()}}),e,null,[[0,35],[3,28]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),le=function(){var e=p(d().mark((function e(t,r,n,o,a){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{U(o),B(n,re[M(re,o.gameId)],ae,oe);try{oe.push(o.gameId.toString()),a({success:!0}),oe.splice(oe.indexOf(o.gameId.toString()),1),E(n._id)}catch(e){E(r.decoded._id),oe.splice(oe.indexOf(o.gameId.toString()),1),a({success:!1,error:{type:"error",message:e.message}})}}catch(e){E(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),fe=function(e,t){if(t.state="countdown",t.updatedAt=(new Date).getTime(),re.splice(M(re,t._id),1,t),!0===t.options.private){var r,n=u(t.bets);try{for(n.s();!(r=n.n()).done;){var o=r.value;!1===o.bot&&e.of("/socket/battles").to(o.user._id.toString()).emit("game",{game:H(t)})}}catch(e){n.e(e)}finally{n.f()}}else e.of("/socket/battles").emit("game",{game:H(t)});setTimeout((function(){de(e,t)}),3e3)},de=function(){var e=p(d().mark((function e(t,r){var n,o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="pending",re.splice(M(re,r._id),1,r),e.next=5,_();case 5:if(n=e.sent,r.fair.seedPublic=n.data.head_block_id,r.fair.blockId=n.data.head_block_num,r.fair.blockNum=n.data.head_block_num+1,!0===r.options.private){o=u(r.bets);try{for(o.s();!(a=o.n()).done;)!1===(i=a.value).bot&&t.of("/socket/battles").to(i.user._id.toString()).emit("game",{game:H(r)})}catch(e){o.e(e)}finally{o.f()}}else t.of("/socket/battles").emit("game",{game:H(r)});r.bets.sort((function(e,t){return e.slot-t.slot})),re.splice(M(re,r._id),1,r),setTimeout((function(){he(t,r)}),2e3),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),setTimeout((function(){de(t,r)}),15e3);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),he=function(){var e=p(d().mark((function e(t,r){var n,o,a,i,s,l,f,h,p,m,v,g,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r.mode,l=null===(n=r.options)||void 0===n?void 0:n.cursed,f=null===(o=r.options)||void 0===o?void 0:o.trust,h=null===(a=r.options)||void 0===a?void 0:a.trust1,p=r.playerCount,m=null===(i=r.options)||void 0===i?void 0:i.funding,e.prev=6,v=u(W(r.boxes).entries()),e.prev=8,w=d().mark((function e(){var n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c(g.value,2),o=n[0],a=n[1],setTimeout((function(){for(var e=0;e<r.bets.length;e++){var n,i,c,d="".concat(r._id,"-").concat(r.fair.seedServer,"-").concat(r.fair.seedPublic,"-").concat(o,"-").concat(e),v=y.createHash("sha256").update(d).digest("hex"),g=parseInt(v.substr(0,8),16)%1e5,w=!0,b=null===(n=r.bets)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.bot,x=(null===(i=r.bets)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.luck)&&!l;console.log("lucky?",null===(c=r.bets)||void 0===c||null===(c=c[e])||void 0===c?void 0:c.luck),"standard"===s?w=l||!b:"team"===s&&(m>0?(w=l||2===e||3===e||!b,6===p&&(w=l||3===e||4===e||5===e||!b)):(w=l||0===e||1===e||!b,6===p&&(w=l||0===e||1===e||2===e||!b))),r.bets[e].payout=r.bets[e].payout+V(a.box.items,g,w&&f&&!x,w&&h&&!x).amountFixed,r.bets[e].outcomes.push(g)}if(r.state="rolling",r.updatedAt=(new Date).getTime(),re.splice(M(re,r._id),1,r),!0===r.options.private){var k,S=u(r.bets);try{for(S.s();!(k=S.n()).done;){var E=k.value;!1===E.bot&&t.of("/socket/battles").to(E.user._id.toString()).emit("game",{game:H(r)})}}catch(e){S.e(e)}finally{S.f()}}else t.of("/socket/battles").emit("game",{game:H(r)})}),6500*o);case 2:case"end":return e.stop()}}),e)})),v.s();case 11:if((g=v.n()).done){e.next=15;break}return e.delegateYield(w(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),v.e(e.t1);case 20:return e.prev=20,v.f(),e.finish(20);case 23:setTimeout((function(){pe(t,r)}),6500*W(r.boxes).length),e.next=29;break;case 26:e.prev=26,e.t2=e.catch(6),console.error(e.t2);case 29:case"end":return e.stop()}}),e,null,[[6,26],[8,17,20,23]])})));return function(t,r){return e.apply(this,arguments)}}(),pe=function(){var e=p(d().mark((function e(t,r){var n,o,i,c,s,l,f,h,p,y,v,E,_,O,A,j,P,I,T,N;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.state="completed",e.next=4,b.findOne({state:"running"}).select("state").lean();case 4:n=e.sent,o=[],i=[],c=[],s=0,l=z(r),f=q(r),h=u(r.bets),e.prev=13,y=d().mark((function e(){var t,r,a,u,h,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=p.value).payout=!0===l.some((function(e){return e._id.toString()===t._id.toString()}))?Math.floor(f/l.length):0,!0===t.bot){e.next=17;break}return t.amount,s+=!0!==t.user.limits.blockSponsor?t.amount:0,r=L(),a=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*r.general.reward.multiplier):0,u=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,e.next=10,k.find({enabled:"true"}).select("creators").lean();case 10:if(h=e.sent,y=h.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates.referrer)||void 0===r?void 0:r.toString())})),!te.affiliates.referrer){e.next=15;break}return e.next=15,S.findOneAndUpdate({user:t.user._id,referrer:t.user.affiliates.referrer},{$inc:{won:t.payout,leaderboardpoints:y&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("won leaderboardpoints updatedAt").lean();case 15:o.push(m.findByIdAndUpdate(t.user._id,{$inc:{balance:t.payout,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*r.general.reward.multiplier):0,"stats.won":t.payout,"limits.betToWithdraw":t.user.limits.betToWithdraw<=t.amount?-t.user.limits.betToWithdraw:-t.amount,"limits.betToRain":t.user.limits.betToRain<=t.amount?-t.user.limits.betToRain:-t.amount,"leaderboard.points":null!==n&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.leaderboardpoints":y&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":u,"rakeback.earned":a,"rakeback.available":a},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==t.user.affiliates.referrer&&u>0&&c.push(m.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":u,"affiliates.available":u},updatedAt:(new Date).getTime()},{}));case 17:i.push(w.findByIdAndUpdate(t._id,{payout:t.payout,multiplier:Math.floor(t.payout/(0===t.amount?10:t.amount)*100),outcomes:t.outcomes,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user bot updatedAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 18:case"end":return e.stop()}}),e)})),h.s();case 16:if((p=h.n()).done){e.next=20;break}return e.delegateYield(y(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),h.e(e.t1);case 25:return e.prev=25,h.f(),e.finish(25);case 28:return e.next=30,Promise.all([g.findByIdAndUpdate(r._id,{fair:r.fair,state:"completed",updatedAt:(new Date).getTime()},{}),x.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*s)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(o,i,c));case 30:if(v=e.sent,ne.unshift(H(r)),ne.length>8&&ne.pop(),re.splice(M(re,r._id),1),!0===r.options.private){E=u(r.bets);try{for(E.s();!(_=E.n()).done;)!1===(O=_.value).bot&&t.of("/socket/battles").to(O.user._id.toString()).emit("game",{game:H(r)})}catch(e){E.e(e)}finally{E.f()}}else t.of("/socket/battles").emit("game",{game:H(r)});t.of("/socket/general").emit("rain",{rain:v[1]}),A=u(v.slice(2,o.length+2));try{for(A.s();!(j=A.n()).done;)P=j.value,t.of("/socket/general").to(P._id.toString()).emit("user",{user:P})}catch(e){A.e(e)}finally{A.f()}I=u(v.slice(o.length+2,o.length+i.length+2));try{for(I.s();!(T=I.n()).done;)!0!==(N=T.value).bot&&ee(t,a(a({},N),{},{user:Q(N.user),method:"battles"}))}catch(e){I.e(e)}finally{I.f()}e.next=45;break;case 42:e.prev=42,e.t2=e.catch(0),console.error(e.t2);case 45:case"end":return e.stop()}}),e,null,[[0,42],[13,22,25,28]])})));return function(t,r){return e.apply(this,arguments)}}(),ye=function(){var e=p(d().mark((function e(){var t,r,n,o,a,i,c,l,f,h,p,y,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([g.find({$or:[{state:"created"},{state:"pending"},{state:"rolling"}]}).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp limits stats.total affiliates anonymous createdAt"}}).lean(),g.find({"options.private":!1,state:"completed"}).sort({createdAt:-1}).limit(4).select("amount playerCount mode boxes options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp stats.total anonymous createdAt"}}).lean()]);case 3:for(t=e.sent,r=[],n=0,o=[].concat(s(t[0]),s(t[1]));n<o.length;n++)if("completed"!==(a=o[n]).state&&Math.floor(a.playerCount)===a.bets.length){r.push(g.findByIdAndUpdate(a._id,{state:"canceled",updatedAt:(new Date).getTime()},{})),i=u(a.bets);try{for(i.s();!(c=i.n()).done;)l=c.value,r.push(m.findByIdAndUpdate(l.user,{$inc:{balance:l.amount,"stats.bet":-l.amount},updatedAt:(new Date).getTime()},{}))}catch(e){i.e(e)}finally{i.f()}}else{f=u(a.bets);try{for(f.s();!(h=f.n()).done;)!1===(p=h.value).bot?(y=K(p.user),v=Z(p.user),p.user={_id:p.user._id,roblox:p.user.roblox,username:p.user.username,avatar:p.user.avatar,rank:p.user.rank,level:y,rakeback:v,stats:!0===p.user.anonymous?null:p.user.stats,limits:p.user.limits,affiliates:p.user.affiliates,createdAt:p.user.createdAt}):p.user={}}catch(e){f.e(e)}finally{f.f()}"completed"!==a.state?re.push(a):ne.unshift(a)}return e.next=8,Promise.all(r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e.exports={battlesGetData:function(e){return new Promise(function(){var t=p(d().mark((function t(r,n){var o,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt items").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 3:o=t.sent,a=re.filter((function(t){return!1===t.options.private||void 0!==e&&!0===t.bets.some((function(t){return!1===t.bot&&t.user._id.toString()===e._id.toString()}))})),r({boxes:o,games:J(a),history:ne}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},battlesGetGameDataSocket:ie,battlesSendCreateSocket:ce,battlesSendBotSocket:se,battlesSendJoinSocket:ue,battlesSendCancelSocket:le,battlesInit:ye}},1889:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}r(2789);var i=r(6363),c=(r(3304),r(7908).socketRemoveAntiSpam),s=r(3534),u=s.cashierCheckSendCreditDepositData,l=s.cashierCreditCreateSignature,f=s.cashierCreditCreateTransaction,d=s.cashierCreditCreateUrl,h=function(){var e,t=(e=o().mark((function e(t,r,n,a,s){var h,p,y,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(a),e.next=4,i.findOne({type:"deposit",user:n._id,state:"created"}).select("data type user state").lean();case 4:if(null!==(h=e.sent)){e.next=15;break}return(p={userId:n._id.toString()}).signature=l(p),e.next=10,f(p);case 10:return y=e.sent,e.next=13,i.create({data:{providerId:y.orderId,providerUrl:y.url},type:"deposit",user:n._id,state:"created"});case 13:h=(h=e.sent).toObject();case 15:return m=String(Math.floor(a.amount)/1e3*3/1e3),e.next=18,d(h.data.providerUrl,m);case 18:v=e.sent,s({success:!0,url:v}),c(n._id),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),c(r.decoded._id),s({success:!1,error:{type:"error",message:e.t0.message}});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendCreditDepositSocket:h}},485:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(2789),l=r(5102),f=r(7263),d=r(4823),h=r(3304),p=r(7908).socketRemoveAntiSpam,y=r(3818),m=y.cashierCheckSendCryptoWithdrawData,v=y.cashierCheckSendCryptoWithdrawUser,g=y.cashierCheckSendCryptoWithdrawTransactions,w=y.cashierCryptoGenerateAddress,b=(y.cashierCryptoGetPrices,y.cashierCryptoGenerateAddressByOxapay),x=y.cashierCryptoGetPricesByOxapay,k=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([f.find({user:n._id}).select("name address user").lean(),l.find({}).select("name price fee").lean()]);case 3:if(!((c=e.sent)[0].length<=0)){e.next=17;break}return e.next=7,Promise.all([w("btc"),w("eth"),w("ltc"),w("doge"),w("trx"),w("usdt")]);case 7:if(null!==(s=e.sent)[0]&&void 0!==s[0]&&null!==s[0].address&&void 0!==s[0].address&&""!==s[0].address){e.next=11;break}return console.log("failed in address creation...",s," - user - ",n._id),e.abrupt("return",a({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 11:return e.next=13,Promise.all([f.create({name:"btc",address:s[0].address,user:n._id}),f.create({name:"eth",address:s[1].address,user:n._id}),f.create({name:"ltc",address:s[2].address,user:n._id}),f.create({name:"doge",address:s[3].address,user:n._id}),f.create({name:"trx",address:s[4].address,user:n._id})]);case 13:c[0]={btc:s[0].address,eth:s[1].address,ltc:s[2].address,doge:s[3].address,trx:s[4].address},console.log("created address: ",s),e.next=18;break;case 17:c[0]=c[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 18:c[1]=c[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("send addrsS:",c[0]),a({success:!0,addresses:c[0],prices:c[1]}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([f.find({user:n._id}).select("name address user").lean(),l.find({}).select("name price fee").lean()]);case 3:if(!((c=e.sent)[0].length<=0)){e.next=16;break}return e.next=7,Promise.all([b("btc"),b("eth"),b("ltc"),b("doge"),b("trx")]);case 7:if(null!==(s=e.sent)[0]&&void 0!==s[0]&&null!==s[0].address&&void 0!==s[0].address&&""!==s[0].address){e.next=11;break}return console.log("failed in address creation...",s," - user - ",n._id),e.abrupt("return",a({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 11:return e.next=13,Promise.all([f.create({name:"btc",address:s[0].address,user:n._id}),f.create({name:"eth",address:s[1].address,user:n._id}),f.create({name:"ltc",address:s[2].address,user:n._id}),f.create({name:"doge",address:s[3].address,user:n._id}),f.create({name:"trx",address:s[4].address,user:n._id}),f.create({name:"usdc_erc20",address:s[1].address,user:n._id}),f.create({name:"usdt_erc20",address:s[1].address,user:n._id}),f.create({name:"usdt_trc20",address:s[4].address,user:n._id})]);case 13:c[0]={btc:s[0].address,eth:s[1].address,ltc:s[2].address,doge:s[3].address,trx:s[4].address,usdc_erc20:s[1].address,usdt_erc20:s[1].address,usdt_trc20:s[4].address},e.next=17;break;case 16:c[0]=c[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 17:c[1]=c[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("crypto addr: ",c[0]),a({success:!0,addresses:c[0],prices:c[1]}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),E=function(){var e=s(i().mark((function e(t,r,n,a,c){var s,f,y,w,b,x,k,S;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),v(a,n),e.next=5,Promise.all([l.findOne({name:a.currency}).select("name price").lean(),d.find({user:n._id,state:"pending"}).select("user state amount type data").lean()]);case 5:return s=e.sent,g(s[1]),f=Math.floor(a.amount),y=Math.floor(f*process.env.COIN_RATE/s[0].price*1e8),e.next=11,Promise.all([u.findByIdAndUpdate(n._id,{$inc:{balance:-f,"stats.withdraw":f}},{new:!0}).select("username balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.create({amount:f,data:{receiver:a.address,currency:a.currency,cryptoAmount:y},type:"withdraw",user:n._id,state:"pending"}),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.unreadWithdraws":1}},{upsert:!0})]);case 11:return(s=e.sent)[1]=s[1].toObject(),w={unreadWithdraws:s[2].stats.total.unreadWithdraws},e.next=16,u.find({rank:"admin",fullrank:"fulladmin"}).lean();case 16:b=e.sent,x=o(b);try{for(x.s();!(k=x.n()).done;)S=k.value,t.of("/socket/cashier").to(S._id.toString()).emit("cryptoTransaction",{type:"adminTrxNotification",user:s[0].username,transaction:s[1]}),t.of("/socket/general").to(S._id.toString()).emit("notifyUnreadStats",{adminUnreadStats:w})}catch(e){x.e(e)}finally{x.f()}c({success:!0,user:s[0],transaction:s[1]}),p(n._id),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),p(r.decoded._id),c({success:!1,error:{type:"error",message:e.t0.message}});case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),L=function(){var e=s(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:return t=e.sent,r=Math.floor(1/t.USDT*1e3),e.next=7,Promise.all([l.find({}).select("name price fee").lean()]);case 7:if(!(e.sent[0].length<=0)){e.next=11;break}return e.next=11,Promise.all([l.create({name:"btc",price:0,fee:0}),l.create({name:"eth",price:0,fee:0}),l.create({name:"ltc",price:0,fee:0}),l.create({name:"doge",price:0,fee:0}),l.create({name:"trx",price:0,fee:0}),l.create({name:"usdt_erc20",price:0,fee:0}),l.create({name:"usdt_trc20",price:0,fee:0})]);case 11:return e.next=13,Promise.all([l.findOneAndUpdate({name:"btc"},{price:Math.floor(r*t.BTC),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"eth"},{price:Math.floor(r*t.ETH),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"ltc"},{price:Math.floor(r*t.LTC),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"doge"},{price:Math.floor(r*t.DOGE),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"trx"},{price:Math.floor(r*t.TRX),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"usdt_erc20"},{price:Math.floor(r),fee:0},{upsert:!0}),l.findOneAndUpdate({name:"usdt_trc20"},{price:Math.floor(r),fee:0},{upsert:!0})]);case 13:setTimeout((function(){L()}),216e5),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),setTimeout((function(){L()}),216e5);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetCryptoDataSocket:k,cashierGetCryptoDataSocketByOxapay:S,cashierSendCryptoWithdrawSocket:E,cashierCryptoInit:function(e){try{L()}catch(e){console.error(e)}}}},6998:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(4825),s=r(6930),u=r(3304),l=r(7908).socketRemoveAntiSpam,f=r(7587),d=f.captchaCheckData,h=f.captchaGetData,p=r(2745),y=p.cashierCheckSendGiftRedeemData,m=p.cashierCheckSendGiftRedeemCode,v=[],g=function(){var e,t=(e=o().mark((function e(t,r,n,a,f){var p,g,w,b,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(a),e.next=4,h(a.captcha);case 4:return p=e.sent,d(p),e.next=8,c.findOne({code:a.code}).select("code reward redeemer");case 8:return g=e.sent,m(g,v),e.prev=10,v.push(g._id.toString()),w=Math.floor(g.reward/process.env.COIN_RATE*1e3),b=[],b=[i.findByIdAndUpdate(n._id,{$inc:{balance:w,"stats.deposit":w,"limits.betToWithdraw":w},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),c.findByIdAndUpdate(g._id,{redeemer:n._id,updatedAt:(new Date).getTime()}),s.create({amount:w,data:{transaction:g.code},type:"deposit",user:n._id,state:"completed"}),u.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":g.reward,"stats.gift.deposit":g.reward}},{upsert:!0})],void 0!==n.affiliates.referrer&&b.push(i.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.deposit":w},updatedAt:(new Date).getTime()},{})),e.next=18,Promise.all(b);case 18:x=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:x[0]}),f({success:!0}),v.splice(v.indexOf(g._id.toString()),1),l(n._id),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(10),v.splice(v.indexOf(g._id.toString()),1),l(r.decoded._id),f({success:!1,error:{type:"error",message:e.t0.message}});case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),l(r.decoded._id),f({success:!1,error:{type:"error",message:e.t1.message}});case 36:case"end":return e.stop()}}),e,null,[[0,32],[10,25]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendGiftRedeemSocket:g}},4330:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}r(8749);var d=r(2789),h=r(1545),p=r(8921),y=r(6232),m=r(3304),v=r(7908).socketRemoveAntiSpam,g=r(168),w=g.authRobloxGetToken,b=g.authSendRobloxChallengeContinue,x=g.authSendRobloxTwoStepVerify,k=g.authRobloxSendSecurityEnable,S=r(901),E=S.cashierCheckSendLimitedEnableRoblox,L=(S.cashierCheckSendLimitedGenerateType,S.cashierCheckSendLimitedVerifyData),_=S.cashierCheckSendLimitedVerifyRoblox,O=S.cashierCheckSendLimitedDepositData,A=S.cashierCheckSendLimitedDepositRoblox,j=S.cashierCheckSendLimitedDepositItems,P=S.cashierCheckSendLimitedDepositUser,I=S.cashierCheckSendLimitedWithdrawData,T=S.cashierCheckSendLimitedWithdrawRoblox,N=S.cashierCheckSendLimitedWithdrawTransaction,C=S.cashierCheckSendLimitedWithdrawUser,G=S.cashierLimitedGetDummyItem,D=S.cashierLimitedGetInventory,Y=S.cashierLimitedGetItems,U=S.cashierLimitedGetItemImages,B=S.cashierGetUserCanTrade,R=(S.cashierSendLimitedTwoStepRedeem,S.cashierLimitedSendTrade),F=S.cashierLimitedSendTradeAccept,M=S.cashierLimitedSendTradeDecline,$=S.cashierLimitedFormatItems,q=S.cashierLimitedFormatDepositItems,W=S.cashierLimitedFormatTransactions,V=S.cashierLimitedFormatTransaction,z=[],J=function(){var e=f(i().mark((function e(t,r,n,o,a){var s,u,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=[],s=[y.find({state:"created"}).select("amount deposit state").lean()],void 0!==n.roblox&&(s=[].concat(c(s),[h.findOne({user:n._id}).select("items updatedAt").lean(),p.find({accepted:!0}).select("assetId image amount accepted").lean()])),e.next=6,Promise.all(s);case 6:if(u=e.sent,void 0!==n.roblox){e.next=11;break}u[1]=[],e.next=19;break;case 11:if(!(null===u[1]||new Date(u[1].updatedAt).getTime()+6e4<(new Date).getTime())){e.next=19;break}return e.next=14,D(n.proxy,n.roblox.id);case 14:return l=e.sent,f=$(l,u[2]),e.next=18,h.findOneAndUpdate({user:n._id},{items:f,updatedAt:(new Date).getTime()},{new:!0,upsert:!0}).select("items").lean();case 18:u[1]=e.sent;case 19:a({success:!0,deposit:u[1].items,withdraw:W(u[0])}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=f(i().mark((function e(t,r,n,o,a){var c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E(n),c=null,s={},void 0===o.challengeId){e.next=15;break}return e.next=7,w(n.proxy);case 7:return c=e.sent,s={actionType:"Generic",challengeId:o.twoStepId,code:o.twoStepCode},e.next=11,x(n.proxy,c,n.roblox.cookie,n.roblox.id,"Authenticator",s);case 11:return u=e.sent,s={challengeType:"twostepverification",challengeId:o.challengeId,twoStepId:o.twoStepId,challengeMetadata:JSON.stringify({actionType:"Generic",challengeId:o.twoStepId,verificationToken:u.verificationToken,rememberDevice:!1})},e.next=15,b(n.proxy,c,n.roblox.cookie,s);case 15:return e.next=17,w(n.proxy,n.roblox.cookie);case 17:return c=e.sent,e.next=20,k(n.proxy,c,n.roblox.cookie,n.roblox.id,s);case 20:void 0!==(l=e.sent).sessionId?a({success:!0}):a({success:!0,challengeId:l.challengeId,twoStepId:l.twoStepId}),v(n._id),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=f(i().mark((function e(t,r,n,o,a){var c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(o),_(n),e.next=5,w(n.proxy);case 5:return c=e.sent,s={actionType:"Generic",challengeId:o.challengeId,code:o.twoStepCode},e.next=9,x(c,n.proxy,n.roblox.cookie,n.roblox.id,"Authenticator",s);case 9:return u=e.sent,e.next=12,k(c,n.proxy,n.roblox.cookie,n.roblox.id,o.challengeId,u.verificationToken);case 12:e.sent,a({success:!0,user:userDatabase}),v(n._id),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),K=function(){var e=f(i().mark((function e(t,r,n,o,a){var c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(o),A(n),e.next=5,Promise.all([h.findOne({user:n._id}).select("items").lean(),y.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),y.find({"deposit.user":n._id,state:"canceled",updatedAt:{$gte:new Date((new Date).getTime()-36e5)}}).select("deposit state updatedAt").lean()]);case 5:return c=e.sent,j(o,c[0].items,c[1]),s=q(o,c[0].items),e.next=10,B(n.proxy,n.roblox.cookie,"4586404680");case 10:return u=e.sent,P(n,c[1],c[2],u),l=s.reduce((function(e,t){return e+t.amount}),0),e.next=15,y.create({amount:l,deposit:{user:n._id,items:s},state:"created"});case 15:c=(c=e.sent).toObject(),t.of("/socket/cashier").emit("limitedTransaction",{transaction:V(c)}),a({success:!0,transaction:c}),v(n._id),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=f(i().mark((function e(t,r,n,o,a){var c,s,u,l,f,p,g,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(o),T(n),e.next=5,Promise.all([y.findById(o.transactionId).select("amount deposit state").populate({path:"deposit.user",select:"roblox affiliates proxy"}).lean(),y.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),h.findOne({user:n._id}).select("items").lean()]);case 5:return c=e.sent,N(n,c[0],z),e.prev=7,z.push(c[0]._id.toString()),s=G(c[2].items,c[1]),u=Math.floor(c[0].amount-s.amount)>0?Math.floor(c[0].amount-s.amount):0,l=Math.floor(u/1e3*3),e.next=14,B(n.proxy,n.roblox.cookie,c[0].deposit.user.roblox.id);case 14:return f=e.sent,C(n,u,f),e.next=18,Promise.all([w(n.proxy,n.roblox.cookie),w(c[0].deposit.user.proxy,c[0].deposit.user.roblox.cookie)]);case 18:return p=e.sent,body={offers:[{userId:c[0].deposit.user.roblox.id,userAssetIds:c[0].deposit.items.map((function(e){return e.uniqueId})),robux:0},{userId:n.roblox.id,userAssetIds:[s.uniqueId],robux:0}]},e.next=22,R(p[1],c[0].deposit.user.proxy,c[0].deposit.user.roblox.cookie,body);case 22:if(!0!==(g=e.sent).success){e.next=27;break}return e.next=26,F(p[0],n.proxy,n.roblox.cookie,g.tradeId);case 26:g=e.sent;case 27:if(b=[],!0!==g.success){e.next=37;break}return b=[y.findByIdAndUpdate(c[0]._id,{amount:u,data:{tradeId:g.tradeId},withdraw:{user:n._id,items:[s]},state:"completed"},{new:!0}).select("amount deposit state").lean(),d.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.withdraw":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.findByIdAndUpdate(c[0].deposit.user._id,{$inc:{balance:u,"stats.deposit":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),m.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":l,"stats.total.withdraw":l,"stats.limited.deposit":l,"stats.limited.withdraw":l}},{upsert:!0})],void 0!==c[0].deposit.user.affiliates.referrer&&b.push(d.findByIdAndUpdate(c[0].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":u},updatedAt:(new Date).getTime()},{})),e.next=33,Promise.all(b);case 33:c=e.sent,t.of("/socket/general").to(c[2]._id.toString()).emit("user",{user:c[2]}),e.next=53;break;case 37:if(void 0===g.tradeId){e.next=49;break}return e.next=40,M(p[1],c[0].deposit.user.proxy,c[0].deposit.user.roblox.cookie,g.tradeId);case 40:return g=e.sent,b=[y.findByIdAndUpdate(c[0]._id,{amount:u,data:{tradeId:g.tradeId},withdraw:{user:n._id,items:[s]},state:!0===g.success?"canceled":"sent"},{new:!0}).select("amount deposit state").lean()],!0!==g.success&&b.push(d.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.withdraw":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=45,Promise.all(b);case 45:c=e.sent,!0!==g.success&&Q(t,c[0]),e.next=53;break;case 49:return b=[y.findByIdAndUpdate(c[0]._id,{amount:u,state:"canceled"},{new:!0}).select("amount deposit state").lean()],e.next=52,Promise.all(b);case 52:c=e.sent;case 53:t.of("/socket/cashier").emit("limitedTransaction",{transaction:V(c[0])}),a({success:!0,transaction:c[0],user:c[1]}),z.splice(z.indexOf(c[0]._id.toString()),1),v(n._id),e.next=64;break;case 59:e.prev=59,e.t0=e.catch(7),v(r.decoded._id),z.splice(z.indexOf(c[0]._id.toString()),1),a({success:!1,error:{type:"error",message:e.t0.message}});case 64:e.next=70;break;case 66:e.prev=66,e.t1=e.catch(0),v(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t1.relogin?e.t1.message:"Your roblox session has been expired. Please login again."}});case 70:case"end":return e.stop()}}),e,null,[[0,66],[7,59]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Q=function(){var e=f(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ee=function(){var e=f(i().mark((function e(){var t,r,n,c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y();case 3:return t=e.sent,r=Object.entries(t).map((function(e){var t=a(e,2),r=t[0];return t[1],r})),e.next=7,U(r);case 7:return n=e.sent,t=Object.entries(t).map((function(e){var t=a(e,2),r=t[0],o=t[1],i=n.findIndex((function(e){return e.targetId.toString()===r.toString()}));return{assetId:r,name:o[0],image:-1!==i?n[i].imageUrl:"",amount:Math.floor(1e3*o[4]),accepted:!0}})),e.next=11,p.find({}).select("assetId").lean();case 11:c=e.sent,s=o(t),e.prev=13,l=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.value,-1!==c.findIndex((function(e){return e.assetId===t.assetId}))){e.next=7;break}return e.next=5,p.create({assetId:t.assetId,name:t.name,image:t.image,amount:t.amount,amountFixed:t.amount,accepted:t.accepted});case 5:e.next=9;break;case 7:return e.next=9,p.findOneAndUpdate({assetId:t.assetId},{amount:t.amount,accepted:t.accepted},{upsert:!0});case 9:case"end":return e.stop()}}),e)})),s.s();case 16:if((u=s.n()).done){e.next=20;break}return e.delegateYield(l(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),s.e(e.t1);case 25:return e.prev=25,s.f(),e.finish(25);case 28:setTimeout((function(){ee()}),864e5),e.next=35;break;case 31:e.prev=31,e.t2=e.catch(0),setTimeout((function(){ee()}),864e5),console.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,31],[13,22,25,28]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetLimitedDataSocket:J,cashierSendLimitedEnableSocket:H,cashierSendLimitedVerifySocket:X,cashierSendLimitedDepositSocket:K,cashierSendLimitedWithdrawSocket:Z,cashierLimitedInit:function(e){try{ee(e)}catch(e){console.error(e)}}}},9974:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(2789),l=r(2298),f=r(3844),d=r(3304),h=r(7908).socketRemoveAntiSpam,p=r(168).authRobloxGetToken,y=r(8521),m=y.cashierCheckGetRobuxData,v=y.cashierCheckGetRobuxDataRoblox,g=y.cashierCheckSendRobuxDepositData,w=y.cashierCheckSendRobuxDepositRoblox,b=y.cashierCheckSendRobuxDepositUser,x=y.cashierCheckSendRobuxWithdrawData,k=y.cashierCheckSendRobuxWithdrawRoblox,S=y.cashierCheckSendRobuxWithdrawUser,E=y.cashierCheckSendRobuxCancelData,L=y.cashierCheckSendRobuxCancelRoblox,_=y.cashierCheckSendRobuxCancelOffer,O=y.cashierRobuxGetBlockOffer,A=y.cashierRobuxAddBlockOffer,j=y.cashierRobuxRemoveBlockOffer,P=y.cashierRobuxSortOffers,I=y.cashierGetUserRobux,T=y.cashierRobuxGetGameId,N=y.cashierRobuxGetProducts,C=y.cashierRobuxGetProduct,G=y.cashierRobuxCreateProduct,D=y.cashierRobuxUpdateProduct,Y=y.cashierRobuxPurchaseProduct,U=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(o),v(n),c=8*(o.page-1),e.next=6,Promise.all([l.countDocuments({type:o.type,user:n._id}),l.find({type:o.type,user:n._id}).sort({createdAt:-1}).limit(8).skip(c).select("amount amountProcessed type user state createdAt").lean()]);case 6:s=e.sent,a({success:!0,count:s[0],offers:s[1]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),B=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s,u,f,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(o),w(n),e.next=5,l.find({type:"deposit",user:n._id,state:"created"}).select("amount amountProcessed type user state").lean();case 5:return c=e.sent,s=c.reduce((function(e,t){return t.amount-t.amountProcessed+e}),0),e.next=9,I(n.proxy,n.roblox.cookie);case 9:return u=e.sent,b(o,s,u),f=Math.floor(o.amount),e.next=14,l.create({amount:f,type:"deposit",user:n._id,state:"created"});case 14:d=(d=e.sent).toObject(),console.log("success offer: ",d),a({success:!0,offer:d}),h(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),h(r.decoded._id),a({success:!1,error:void 0===e.t0.relogin?{type:"error",message:e.t0.message}:{type:"error",message:"Your roblox session has been expired. Please login again.",relogin:!0}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),R=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s,f,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(o),k(n),S(n,o),e.next=6,p(n.proxy,n.roblox.cookie);case 6:return c=e.sent,e.next=9,T(n.proxy,n.roblox.cookie,n.roblox.id);case 9:return s=e.sent,e.next=12,N(n.proxy,n.roblox.cookie,s);case 12:if(!0===e.sent.some((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))){e.next=16;break}return e.next=16,G(c,n.proxy,n.roblox.cookie,s,"wonderfulbeginnerbackpackapple",100);case 16:return f=Math.floor(o.amount),e.next=19,Promise.all([u.findByIdAndUpdate(n._id,{$inc:{balance:-f,"stats.withdraw":f},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),l.create({amount:f,type:"withdraw",user:n._id,state:"created"})]);case 19:(d=e.sent)[1]=d[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:d[0]}),a({success:!0,offer:d[1]}),h(n._id),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),h(r.decoded._id),a({success:!1,error:{type:"error",message:void 0===e.t0.relogin?e.t0.message:"Your roblox session has been expired. Please login again."}});case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=s(i().mark((function e(t,r,n,o,a){var c,s,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(o),L(n),e.next=5,l.findById(o.offerId).select("amount amountProcessed type user state").lean();case 5:return c=e.sent,_(c,O()),e.prev=7,A(c._id.toString()),s=[],s=[l.findByIdAndUpdate(c._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===c.type&&s.push(u.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(c.amount-c.amountProcessed),"stats.withdraw":-Math.floor(c.amount-c.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.next=14,Promise.all(s);case 14:f=e.sent,"withdraw"===c.type&&t.of("/socket/general").to(f[1]._id.toString()).emit("user",{user:f[1]}),a({success:!0,offer:f[0]}),j(c._id.toString()),h(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(7),h(r.decoded._id),j(c._id.toString()),a({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),h(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[7,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=s(i().mark((function e(t){var r,n,a,c,s,u,d,h,p,y,m,v,g,w,b,x,k;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.find({$or:[{state:"created"},{state:"pending"}]}).sort({updatedAt:1}).select("amount amountProcessed type user state createdAt").lean();case 3:if(r=e.sent,n=P(r.filter((function(e){return"deposit"===e.type&&!1===O().includes(e._id.toString())}))),a=P(r.filter((function(e){return"withdraw"===e.type&&!1===O().includes(e._id.toString())})))[0],!(n.length>=1&&void 0!==a)){e.next=64;break}A(a._id.toString()),c=[],s=[],u=o(n),e.prev=11,u.s();case 13:if((d=u.n()).done){e.next=30;break}if(h=d.value,A(h._id.toString()),p=h.amount-h.amountProcessed,y=a.amount-a.amountProcessed,m=p<y?p:y,console.log("tracked deposit: ",h.user._id,"-",h.amount,h.amountProcessed,p),console.log("tracked withdraw: ",a.user._id,"-",a.amount,a.amountProcessed,y),console.log("tracked transaction amount: ",m),h.amountProcessed=h.amountProcessed+m,a.amountProcessed=a.amountProcessed+m,c.push(l.findByIdAndUpdate(h._id,{amountProcessed:h.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),s.push(f.create({amount:m,deposit:{user:h.user._id,offer:h._id},withdraw:{user:a.user._id,offer:a._id},state:"created"})),!(a.amount<=a.amountProcessed)){e.next=28;break}return e.abrupt("break",30);case 28:e.next=13;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(11),u.e(e.t0);case 35:return e.prev=35,u.f(),e.finish(35);case 38:return c.push(l.findByIdAndUpdate(a._id,{amountProcessed:a.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),e.next=41,Promise.all([].concat(c,s));case 41:v=e.sent,g=v.slice(c.length).map((function(e){return e.toObject()})),w=o(v.slice(0,c.length)),e.prev=44,x=i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b.value,j(r._id.toString()),-1!==(n=g.findIndex((function(e){return e.deposit.offer._id.toString()===r._id.toString()})))&&(g[n].deposit.offer=r),t.of("/socket/cashier").to(r.user.toString()).emit("robuxOffer",{offer:r});case 5:case"end":return e.stop()}}),e)})),w.s();case 47:if((b=w.n()).done){e.next=51;break}return e.delegateYield(x(),"t1",49);case 49:e.next=47;break;case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(44),w.e(e.t2);case 56:return e.prev=56,w.f(),e.finish(56);case 59:k={user:a.user,offer:a,transactions:g},console.log("created new Group: ",k),$(t,k),e.next=65;break;case 64:setTimeout((function(){M(t)}),1e4);case 65:e.next=70;break;case 67:e.prev=67,e.t3=e.catch(0),setTimeout((function(){M(t)}),1e4);case 70:case"end":return e.stop()}}),e,null,[[0,67],[11,32,35,38],[44,53,56,59]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=s(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.findById(r.user._id).select("roblox proxy");case 3:return r.user=e.sent,e.next=6,p(r.user.proxy,r.user.roblox.cookie);case 6:return r.user.token=e.sent,console.log("created group user token: ",r.user.token),console.log("group user: ",r.user),e.next=11,T(r.user.proxy,r.user.roblox.cookie,r.user.roblox.id);case 11:return r.gameId=e.sent,e.next=14,N(r.user.proxy,r.user.roblox.cookie,r.gameId);case 14:if(n=e.sent,r.product=n[n.findIndex((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))],console.log("First Get Product: ",r.product),void 0===r.product){e.next=23;break}return e.next=20,C(r.user.proxy,r.user.roblox.cookie,r.product.id);case 20:e.t0=e.sent,e.next=24;break;case 23:e.t0=null;case 24:r.product=e.t0,null!==r.product?q(t,0,r):W(t,r),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),W(t,r);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=s(i().mark((function e(t,r,n){var a,c,s,h,y,m,v,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.findById(n.transactions[r].deposit.user).select("roblox.cookie affiliates proxy");case 3:if(n.transactions[r].deposit.user=e.sent,console.log("start robux transaction"),n.user._id.toString()===n.transactions[r].deposit.user._id.toString()){e.next=27;break}return console.log("receive user: ",n.user),console.log("deposit user: ",n.transactions[r].deposit.user),a=Math.floor(n.transactions[r].amount/1e3),console.log("group trx: ",n.transactions[r]),console.log("trx amount: ",n.transactions[r].amount,a),console.log("receive user token: ",n.user.token),console.log("update product params: ",n.gameId,n.product.id),e.t0=console,e.next=16,D(n.user.token,n.user.proxy,n.user.roblox.cookie,n.gameId,n.product.id,"wonderfulbeginnerbackpackapple",a);case 16:return e.t1=e.sent,e.t0.log.call(e.t0,"update product : ",e.t1),e.next=20,p(n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie);case 20:return c=e.sent,console.log("get token",c),e.t2=console,e.next=25,Y(c,n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie,n.product.id,a,n.user.roblox.id);case 25:e.t3=e.sent,e.t2.log.call(e.t2,"purchace product: ",e.t3);case 27:return s=Math.floor(n.transactions[r].amount/1e3*process.env.COIN_RATE),h=[],h=[u.findByIdAndUpdate(n.transactions[r].deposit.user._id,{$inc:{balance:n.transactions[r].amount,"stats.deposit":n.transactions[r].amount,"limits.betToWithdraw":n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(n.transactions[r]._id,{"data.productId":n.product.targetId,state:"completed"},{new:!0}).lean(),d.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":s,"stats.total.withdraw":s,"stats.robux.deposit":s,"stats.robux.withdraw":s}},{upsert:!0})],void 0!==n.transactions[r].deposit.user.affiliates.referrer&&h.push(u.findByIdAndUpdate(n.transactions[r].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":n.transactions[r].amount},updatedAt:(new Date).getTime()},{})),n.transactions[r].deposit.offer.amount<=n.transactions[r].deposit.offer.amountProcessed&&(h.push(l.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 1")),r+1===n.transactions.length&&n.offer.amount===n.offer.amountProcessed&&(h.push(l.findByIdAndUpdate(n.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 2")),e.next=35,Promise.all(h);case 35:y=e.sent,t.of("/socket/general").to(y[0]._id.toString()).emit("user",{user:y[0]}),m=o(y.slice(void 0!==n.transactions[r].deposit.user.affiliates.referrer?4:3));try{for(m.s();!(v=m.n()).done;)g=v.value,t.of("/socket/cashier").to(g.user.toString()).emit("robuxOffer",{offer:g})}catch(e){m.e(e)}finally{m.f()}r+1<n.transactions.length?q(t,r+1,n):setTimeout((function(){M(t)}),1e3),e.next=46;break;case 42:e.prev=42,e.t4=e.catch(0),console.log("robux transaction canceld"),V(t,r,n);case 46:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(t,r,n){return e.apply(this,arguments)}}(),W=function(){var e=s(i().mark((function e(t,r){var n,a,c,s,d,h,p,y,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[],a=[],c=0,s=o(r.transactions);try{for(s.s();!(d=s.n()).done;)h=d.value,c+=h.amount,n.push(f.findByIdAndUpdate(h._id,{state:"canceled"},{new:!0}).select("amount state").lean()),a.push(l.findByIdAndUpdate(h.deposit.offer._id,{$inc:{amountProcessed:-h.amount}},{new:!0}).select("amount amountProcessed type user state createdAt").lean())}catch(e){s.e(e)}finally{s.f()}return a.push(l.findByIdAndUpdate(r.offer,{$inc:{amountProcessed:-c},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),e.next=9,Promise.all([u.findByIdAndUpdate(r.user._id,{$inc:{balance:Math.floor(r.offer.amount-r.offer.amountProcessed+c),"stats.withdraw":-Math.floor(r.offer.amount-r.offer.amountProcessed+c)}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(n,a));case 9:p=e.sent,t.of("/socket/general").to(p[0]._id.toString()).emit("user",{user:p[0]}),y=o(p.slice(n.length+1));try{for(y.s();!(m=y.n()).done;)v=m.value,t.of("/socket/cashier").to(v.user.toString()).emit("robuxOffer",{offer:v})}catch(e){y.e(e)}finally{y.f()}setTimeout((function(){M(t)}),1e3),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){M(t)}),1e4);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=s(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([u.findByIdAndUpdate(n.user._id,{$inc:{balance:n.transactions[r].amount,"stats.withdraw":-n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(n.transactions[r]._id,{state:"canceled"},{new:!0}).select("amount state").lean(),l.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{$inc:{amountProcessed:-n.transactions[r].amount},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()]);case 3:o=e.sent,t.of("/socket/general").to(o[0]._id.toString()).emit("user",{user:o[0]}),t.of("/socket/cashier").to(o[2].user.toString()).emit("robuxOffer",{offer:o[2]}),r+1<n.transactions.length?q(t,r+1,n):setTimeout((function(){M(t)}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),setTimeout((function(){M(t)}),1e4);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n){return e.apply(this,arguments)}}(),z=function(){var e=s(i().mark((function e(t){var r,n,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.find({state:"created"}).select("amount deposit withdraw state").lean();case 3:r=e.sent,n=o(r),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=13;break}return c=a.value,e.next=11,Promise.all([u.findByIdAndUpdate(c.withdraw.user._id,{$inc:{balance:c.amount,"stats.withdraw":-c.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(c._id,{state:"canceled"},{new:!0}).select("amount state").lean()]);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:M(t),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),console.error(e.t1);case 27:case"end":return e.stop()}}),e,null,[[0,24],[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierGetRobuxDataSocket:U,cashierSendRobuxDepositSocket:B,cashierSendRobuxWithdrawSocket:R,cashierSendRobuxCancelSocket:F,cashierRobuxInit:z}},8796:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(6037),c=(r(2789),r(5958)),s=(r(3304),r(7908).socketRemoveAntiSpam),u=r(6919),l=u.cashierCheckSendSteamDepositData,f=u.cashierSteamCreateTransaction,d=function(){var e,t=(e=o().mark((function e(t,r,n,a,u){var d,h,p,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),e.next=4,c.findOne({type:"deposit",user:n._id,state:"created",createdAt:{$gte:(new Date).getTime()-6e4}}).select("data type user state createdAt").lean();case 4:if(null!==(d=e.sent)){e.next=15;break}return h=new i.Types.ObjectId,p={deposit_id:h,result_url:"".concat(process.env.SERVER_BACKEND_URL,"/callback/skinify"),priority_game:a.game},e.next=10,f(p);case 10:return y=e.sent,e.next=13,c.create({_id:h,data:{providerId:y.transaction_id,providerUrl:y.url},type:"deposit",user:n._id,state:"created"});case 13:d=(d=e.sent).toObject();case 15:u({success:!0,transaction:d}),s(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),s(r.decoded._id),u({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={cashierSendSteamDepositSocket:d}},7165:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};l(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function d(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)}))}}var p=r(8749),y=r(2789),m=r(8109),v=r(988),g=r(6112),w=r(8744),b=r(8875),x=r(9221),k=r(7908).socketRemoveAntiSpam,S=r(8461).settingGet,E=r(6234),L=E.crashCheckSendBetData,_=E.crashCheckSendBetUser,O=E.crashCheckSendBetGame,A=E.crashCheckSendCashoutGame,j=E.crashCheckSendCashoutBet,P=E.crashGetGameMultiplier,I=E.crashGenerateGame,T=E.crashGetOutcome,N=E.crashSanitizeGame,C=E.crashSanitizeBets,G=E.crashSanitizeBet,D=r(836),Y=D.generalUserGetLevel,U=D.generalUserGetRakeback,B=D.generalUserGetFormated,R=r(5507).generalAddBetsList,F=null,M=[],$=[],q=0,W=function(){var e=h(f().mark((function e(t,r,n,o,a){var i,c,s,u,l,d,h,p,m,g,E,A;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(o),_(o,n,M),O(F),e.prev=4,q+=1,e.next=8,w.findOne({state:"running"}).select("state").lean();case 8:return i=e.sent,e.next=11,b.find({enabled:"true"}).select("creators").lean();case 11:if(c=e.sent,s=c.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),u=Math.floor(o.amount),l=Math.floor(o.autoCashout)<=100?0:Math.floor(o.autoCashout),d=Y(n),h=S(),p=U(n),m=!0!==n.limits.blockSponsor?Math.floor(u*p.percentage*h.general.reward.multiplier):0,g=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*u):0,!n.affiliates.referrer){e.next=23;break}return e.next=23,x.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:u,leaderboardpoints:s&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0},updatedAt:(new Date).getTime()},{new:!0}).select("bet updatedAt").lean();case 23:return E=[y.findByIdAndUpdate(n._id,{$inc:{balance:-u,xp:!0!==n.limits.blockSponsor?Math.floor(u*process.env.XP_RATE*h.general.reward.multiplier):0,"stats.bet":u,"leaderboard.points":null!==i&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0,"affiliates.generated":g,"affiliates.leaderboardpoints":s&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0,"rakeback.earned":m,"rakeback.available":m},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.create({amount:u,autoCashout:l,game:F._id,user:n._id,affiliates:n.affiliates})],void 0!==n.affiliates.referrer&&g>0&&E.push(y.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":g,"affiliates.available":g},updatedAt:(new Date).getTime()},{})),e.next=27,Promise.all(E);case 27:(A=e.sent)[1]=A[1].toObject(),A[1].user={_id:n._id,affiliates:n.affiliates,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:d,rakeback:p.name,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},M.push(A[1]),t.of("/socket/crash").emit("bet",{bet:G(A[1])}),a({success:!0,user:A[0]}),q-=1,k(n._id),e.next=42;break;case 37:e.prev=37,e.t0=e.catch(4),k(r.decoded._id),q-=1,a({success:!1,error:{type:"error",message:e.t0.message}});case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 48:case"end":return e.stop()}}),e,null,[[0,44],[4,37]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),V=function(){var e=h(f().mark((function e(t,r,n,o,a){var i,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=(new Date).getTime()-F.updatedAt,c=P(i),A(F,c),s=M[M.findIndex((function(e){return e.user._id.toString()===n._id.toString()}))],j(F,c,s),ee(t,c,s),a({success:!0}),k(n._id)}catch(e){k(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=h(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M=[],e.next=4,I();case 4:F=e.sent,t.of("/socket/crash").emit("game",{game:N(F)}),setTimeout((function(){H(t)}),6e3-((new Date).getTime()-new Date(F.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},H=function(){var e=h(f().mark((function e(t){var r,n,o,a,i,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{F.state="pending",t.of("/socket/crash").emit("game",{game:N(F)}),q<=0?(r=p.createHash("sha256").update("".concat(F._id,"-").concat(F.fair.seed.seedServer)).digest("hex"),F.outcome=T(r),n=S(),(o=M.reduce((function(e,t){return Math.max(e,t.amount)}),0))>0&&(a=Math.floor(11*Math.random())+20,(i=100*Math.floor((o+1e3*a)/o))<F.outcome&&(F.outcome=Math.floor(Math.random()*(i-100+1))+100,console.log("yes crash maxResult",F.outcome))),0!==(c=J(o/1e3,n.games.crashees))&&n.games.ctotal.enabled&&(s=Math.floor(Math.random()*(c-100+1))+100)<F.outcome&&(F.outcome=s,console.log("yes crash luckResult",F.outcome)),F.state="rolling",F.updatedAt=(new Date).getTime(),t.of("/socket/crash").emit("game",{game:N(F)}),X(t,0)):setTimeout((function(){H(t)}),500)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=h(f().mark((function e(t,r){var n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=Math.ceil(16666.666667*Math.log(.01*(F.outcome+1)))-r,o=Math.max(0,Math.min(n,150)),setTimeout((function(){K(t)}),o)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=h(f().mark((function e(t){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=(new Date).getTime()-F.updatedAt,n=P(r),t.of("/socket/crash").emit("tick",{multiplier:n}),Q(t,n),n>F.outcome?Z(t):X(t,r)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=h(f().mark((function e(t){var r,n,o,a,c,u,l,d,h,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,F.state="completed",t.of("/socket/crash").emit("game",{game:F}),r=[],n=[],o=0,a=0,c=M;a<c.length;a++)u=c[a],o+=!0!==u.user.limits.blockSponsor?u.amount:0,void 0===u.multiplier&&(r.push(y.findByIdAndUpdate(u.user._id,{$inc:{"limits.betToWithdraw":Math.floor(u.user.limits.betToWithdraw-u.amount)<=0?-u.user.limits.betToWithdraw:-u.amount,"limits.betToRain":Math.floor(u.user.limits.betToRain-u.amount)<=0?-u.user.limits.betToRain:-u.amount},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),n.push(v.findByIdAndUpdate(u._id,{payout:0,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean()));return e.next=9,Promise.all([m.findByIdAndUpdate(F._id,{outcome:F.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),g.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*o)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(r,n));case 9:l=e.sent,$.unshift(l[0]),$.length>25&&$.pop(),t.of("/socket/general").emit("rain",{rain:l[1]}),d=s(l.slice(r.length+2));try{for(d.s();!(h=d.n()).done;)p=h.value,R(t,i(i({},p),{},{user:B(p.user),method:"crash"}))}catch(e){d.e(e)}finally{d.f()}setTimeout((function(){z(t)}),3e3),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){try{for(var r=0,n=M;r<n.length;r++){var o=n[r];void 0===o.multiplier&&o.autoCashout>=101&&o.autoCashout<=t&&o.autoCashout<=F.outcome?ee(e,o.autoCashout,o):void 0===o.multiplier&&Math.floor(o.amount*(t/100))>=Math.floor(1e3*process.env.CRASH_MAX_PROFIT)&&t<=F.outcome&&ee(e,t,o)}}catch(e){console.error(e)}},ee=function(){var e=h(f().mark((function e(t,r,n){var o,a,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1===(o=M.findIndex((function(e){return e._id.toString()===n._id.toString()})))){e.next=16;break}if(a=Math.floor(M[o].amount*(r/100)),c=r>=125?M[o].amount:a,M[o].payout=a,M[o].multiplier=r,t.of("/socket/crash").emit("bet",{bet:G(M[o])}),!M[o].user.affiliates.referrer){e.next=11;break}return e.next=11,x.findOneAndUpdate({user:M[o].user._id,referrer:M[o].user.affiliates.referrer},{$inc:{won:a},updatedAt:(new Date).getTime()},{new:!0}).select("won leaderboardpoints updatedAt").lean();case 11:return e.next=13,Promise.all([y.findByIdAndUpdate(M[o].user._id,{$inc:{balance:a,"stats.won":a,"limits.betToWithdraw":Math.floor(M[o].user.limits.betToWithdraw-c)<=0?-M[o].user.limits.betToWithdraw:-c,"limits.betToRain":Math.floor(M[o].user.limits.betToRain-c)<=0?-M[o].user.limits.betToRain:-c},updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id username avatar balance rank xp stats rakeback anonymous mute ban verifiedAt updatedAt").lean(),v.findByIdAndUpdate(M[o]._id,{payout:a,multiplier:r,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout actions user updatedAt createdAt").lean()]);case 13:s=e.sent,t.of("/socket/general").to(s[0]._id.toString()).emit("user",{user:s[0]}),R(t,i(i({},s[1]),{},{user:B(s[0]),method:"crash"}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r,n){return e.apply(this,arguments)}}(),te=function(){var e=h(f().mark((function e(t){var r,n,a,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([m.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),m.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 3:if(r=e.sent,$=r[1],null===r[0]||"completed"===r[0].state){e.next=16;break}n=[],a=s(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(c=i.value).payout&&(n=[].concat(o(n),[v.findByIdAndUpdate(c._id,{payout:c.amount,updatedAt:(new Date).getTime()}),y.findByIdAndUpdate(c.user,{$inc:{balance:c.amount,"stats.bet":-c.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return u=p.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=T(u),e.next=13,Promise.all([m.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(o(n)));case 13:r=e.sent,$.unshift(r[0]),$.length>25&&$.pop();case 16:z(t),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();e.exports={crashGetData:function(){return{game:N(F),bets:C(M),history:$}},crashSendBetSocket:W,crashSendCashoutSocket:V,crashInit:te}},7046:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(9221),u=r(286),l=r(7908).socketRemoveAntiSpam,f=r(7587),d=(f.captchaCheckData,f.captchaGetData,r(836)),h=(d.generalUserGetFormated,d.generalUserGetFormatedWithBalance,r(5297)),p=h.generalCheckSendAffiliateCodeData,y=h.generalCheckSendAffiliateCodeCode,m=h.generalCheckSendAffiliateClaimCodeData,v=(h.generalCheckSendAffiliateClaimCodeUser,h.generalCheckSendAffiliateClaimCodeCode,h.generalCheckSendAffiliateClaimEarningsUser),g=h.generalCheckAffiliateClaim,w=h.generalCheckAffiliateClaimForPreventSameCode,b=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.find({referrer:n._id}).sort({createdAt:-1}).populate({path:"user",select:"avatar username rank xp balance affiliates"});case 3:return u=e.sent,e.next=6,c.findById(n.affiliates.referrer).select("username affiliates.code").lean();case 6:l=e.sent,i({success:!0,data:n.affiliates,referred:u,referrer:l}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),x=function(){var e=i(o().mark((function e(t,r,n,a,i){var s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(a),s=a.code.toLowerCase(),e.next=5,c.findOne({"affiliates.code":s}).select("affiliates.code").lean();case 5:return u=e.sent,y(u),e.next=9,c.findByIdAndUpdate(n._id,{"affiliates.code":s},{new:!0}).select("affiliates").lean();case 9:u=e.sent,i({success:!0,data:u.affiliates}),l(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),k=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(a),r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,u=a.code.toLowerCase(),e.next=6,c.findOne({"affiliates.code":u}).select("_id affiliates").lean();case 6:return f=e.sent,e.next=9,s.findOne({user:n._id,referrer:f._id}).lean();case 9:if(!(d=e.sent)){e.next=14;break}g(n,f,d),e.next=17;break;case 14:return w(n,f),e.next=17,s.create({referrer:f._id,user:n._id});case 17:return e.next=19,Promise.all([c.findByIdAndUpdate(n._id,{"affiliates.referrer":f._id,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),c.findByIdAndUpdate(f._id,{$inc:{"affiliates.referred":1}})]);case 19:h=e.sent,i({success:!0,user:h[0]}),l(n._id),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),S=function(){var e=i(o().mark((function e(t,r,n,a,i){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(n),e.next=4,Promise.all([c.findByIdAndUpdate(n._id,{$inc:{balance:n.affiliates.available},"affiliates.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback affiliates mute ban verifiedAt updatedAt"),u.create({amount:n.affiliates.available,type:"affiliateEarningClaim",user:n._id,state:"completed"})]);case 4:s=e.sent,i({success:!0,user:s[0]}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetAffiliateDataSocket:b,generalSendAffiliateCodeSocket:x,generalSendAffiliateClaimCodeSocket:k,generalSendAffiliateClaimEarningsSocket:S}},5507:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}r(6037);var d=r(988),h=r(6966),p=r(6769),y=r(5964),m=r(8702),v=r(4946),g=r(3702),w=r(2256),b=r(2974),x=r(5241),k=r(8455),S=r(836).generalUserGetFormated,E={all:[],whale:[],lucky:[],my:[]},L=function(){var e=f(o().mark((function e(t,r,n,a,c){var u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=E,null==n){e.next=10;break}return l=[d.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.next=6,Promise.all(l);case 6:f=e.sent,u.my=[].concat(s(f[0].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),s(f[1].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),s(f[2].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),s(f[3].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),s(f[4].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),s(f[5].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),s(f[6].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),s(f[7].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),s(f[8].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),s(f[9].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),s(f[10].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),u.my.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),u.my=u.my.slice(0,15);case 10:c({success:!0,bets:u}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),c({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),_=function(){var e=f(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[d.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),d.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),d.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),x.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.next=4,Promise.all(t);case 4:r=e.sent,E.all=[].concat(s(r[0].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),s(r[1].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),s(r[2].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),s(r[3].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),s(r[4].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),s(r[5].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),s(r[6].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),s(r[7].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),s(r[8].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),s(r[9].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),s(r[10].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.whale=[].concat(s(r[11].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),s(r[12].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),s(r[13].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),s(r[14].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),s(r[15].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),s(r[16].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),s(r[17].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),s(r[18].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),s(r[19].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),s(r[20].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),s(r[21].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.lucky=[].concat(s(r[22].map((function(e){return i(i({},e),{},{user:S(e.user),method:"crash"})}))),s(r[23].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roll"})}))),s(r[24].map((function(e){return i(i({},e),{},{user:S(e.user),method:"blackjack"})}))),s(r[25].map((function(e){return i(i({},e),{},{user:S(e.user),method:"duels"})}))),s(r[26].map((function(e){return i(i({},e),{},{user:S(e.user),method:"mines"})}))),s(r[27].map((function(e){return i(i({},e),{},{user:S(e.user),method:"towers"})}))),s(r[28].map((function(e){return i(i({},e),{},{user:S(e.user),method:"unbox"})}))),s(r[29].map((function(e){return i(i({},e),{},{user:S(e.user),method:"battles"})}))),s(r[30].map((function(e){return i(i({},e),{},{user:S(e.user),method:"upgrader"})}))),s(r[31].map((function(e){return i(i({},e),{},{user:S(e.user),method:"plinko"})}))),s(r[32].map((function(e){return i(i({},e),{},{user:S(e.user),method:"roulette"})})))),E.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.all=E.all.slice(0,15),E.whale=E.whale.slice(0,15),E.lucky=E.lucky.slice(0,15),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e.exports={generalGetBetsDataSocket:L,generalAddBetsList:function(e,t){try{E.all.unshift(t),E.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.all.length>15&&E.all.pop(),t.payout>=1e7&&(E.whale.unshift(t),E.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.whale.length>15&&E.whale.pop()),t.payout>=10&&t.multiplier>=500&&(E.lucky.unshift(t),E.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),E.lucky.length>15&&E.lucky.pop()),e.of("/socket/general").emit("bet",{bet:t})}catch(e){console.error(e)}},generalBetsInit:_}},7089:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(6037),h=r(7906),p=r(6533),y=r(7908).socketRemoveAntiSpam,m=r(8461),v=m.settingGet,g=m.settingSetValue,w=r(1454),b=w.generalCheckGetChatMessagesData,x=w.generalCheckSendChatMessageData,k=w.generalCheckSendChatMessageRoom,S=w.generalCheckSendChatMessageUser,E=w.generalCheckSendChatRemoveData,L=w.generalCheckSendChatRemoveRoom,_=w.generalCheckSendChatRemoveMessage,O=w.generalCheckSendChatClearRoom,A=w.generalCheckSendChatLockData,j=w.generalCheckSendChatLockRoom,P=w.generalGetChatOnlineCount,I=w.generalFilterMessage,T=r(836),N=T.generalUserGetLevel,C=T.generalUserGetRakeback,G=(r(9472).SERVICE_PROXY_TIME,{en:[],tr:[],de:[],es:[],beg:[],whale:[]}),D=[],Y=[],U=function(){var e=f(i().mark((function e(t,r,n,o,a){var s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(o),void 0!==(s=c(r.rooms)[1])&&r.leave(s),r.join(o.room),e.next=7,P(t);case 7:u=e.sent,t.of("/socket/general").emit("chatOnline",{online:u}),a({success:!0,messages:G[o.room]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),B=function(){var e=f(i().mark((function e(t,r,n,o,a){var s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E(o),s=c(r.rooms)[1],L(s),_(o,G[s]),u=G[s].findIndex((function(e){return e._id.toString()===o.messageId.toString()})),G[s].splice(u,1),t.of("/socket/general").to(s).emit("chatRemove",{messageId:o.messageId}),a({success:!0}),y(n._id)}catch(e){y(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),R=function(){var e=f(i().mark((function e(t,r,n,o,a){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=c(r.rooms)[1],O(s),G[s]=[],t.of("/socket/general").to(s).emit("chatClear",{}),message={room:s,message:"Chat has been cleared by an administrator.",type:"system"},M(t,message),a({success:!0}),y(n._id)}catch(e){y(r.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=f(i().mark((function e(t,r,n,o,a){var s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(o),s=v(),u=c(r.rooms)[1],j(o,s,u),e.next=7,g("chat.rooms.".concat(u,".enabled"),o.value);case 7:s=e.sent,t.of("/socket/general").emit("settings",{settings:s}),message={message:"Chat has been ".concat(!0===o.value?"unlocked":"locked"," by an administrator."),room:u,type:"system"},M(t,message),a({success:!0}),y(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),y(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(e,t){try{var r="user"===t.type||void 0!==t.room?[t.room]:Object.keys(G);t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_id:new d.Types.ObjectId},t);var n,i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(r);try{for(i.s();!(n=i.n()).done;){var c=n.value;"rainCompleted"===t.type&&(G[c]=G[c].filter((function(e){return"rainCompleted"!==e.type}))),G[c].length>50&&G[c].shift(),G[c].push(t),e.of("/socket/general").to(c).emit("chatMessage",{message:t})}}catch(e){i.e(e)}finally{i.f()}}catch(e){console.error(e)}},$=function(){var e=f(i().mark((function e(t){var r,n,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.find({}).select("phrase").lean();case 3:for(r=e.sent,Y=r.map((function(e){return e.phrase})),n=v(),message={message:"Chat has been locked by an administrator.",type:"system"},o=0,a=Object.keys(G);o<a.length;o++)c=a[o],!1===n.chat.rooms[c].enabled&&(message.room=c,M(t,message));e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetChatMessagesSocket:U,generalSendChatMessageSocket:function(e,t,r,n,o){try{x(n);var a,i=v(),s=c(t.rooms)[1];if(k(r,i,s),S(r,i,D),D[r._id.toString()]=(new Date).getTime(),"admin"===r.rank&&!0===n.message.trim().startsWith("/system"))a={message:h.escape(n.message.replace("/system","").trim()),type:"system"};else{var u=N(r),l=C(r);a={message:I(n.message,Y),room:s,user:{_id:r._id,roblox:r.roblox,username:r.username,avatar:r.avatar,rank:r.rank,level:u,rakeback:l.name,stats:!0===r.anonymous?null:r.stats,createdAt:r.createdAt},type:"user"}}M(e,a),o({success:!0}),y(r._id)}catch(e){y(t.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}},generalSendChatRemoveSocket:B,generalSendChatClearSocket:R,generalSendChatLockSocket:F,generalChatAddMessage:M,generalChatAddFilter:function(e){Y.push(e)},generalChatRemoveFilter:function(e){var t=Y.indexOf(e);-1!==t&&Y.splice(t,1)},generalChatInit:$}},8078:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(8744),u=r(286),l=r(836).generalUserGetFormated,f=r(593).generalGetLeaderboardTimeLeft,d=null,h=function(){var e=i(o().mark((function e(t,r,n,a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([s.findOne({state:"running"}).select("winners duration type state updatedAt").lean(),c.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 3:if(null===(u=e.sent)[0]){e.next=8;break}u[0].winners=u[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==u[1][t]?u[1][t].leaderboard.points:0,user:void 0!==u[1][t]?l(u[1][t]):void 0}})),e.next=12;break;case 8:return e.next=10,Promise.all([s.findOne({state:"completed"}).sort({updatedAt:-1}).select("winners duration type state updatedAt").lean(),c.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 10:null!==(u=e.sent)[0]&&(u[0].winners=u[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==u[1][t]?u[1][t].leaderboard.points:0,user:void 0!==u[1][t]?l(u[1][t]):void 0}})));case 12:i({success:!0,leaderboard:u[0]}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=f(r),d=setTimeout((function(){m(t,r)}),n)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{clearTimeout(d)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=i(o().mark((function e(t,r){var n,a,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,clearTimeout(d),e.next=4,Promise.all([s.findById(r._id).select("winners state updatedAt").lean(),s.findOne({state:"created"}).sort({createdAt:1}).select("state updatedAt").lean(),c.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(10).select("leaderboard").lean()]);case 4:for(n=e.sent,a=[],i=[],l=0;l<n[0].winners.length;l++)void 0!==n[2][l]||null!==n[2][l]?(a.push({prize:n[0].winners[l].prize,points:n[2][l].leaderboard.points,user:n[2][l]._id}),i.push(u.create({amount:n[0].winners[l].prize,type:"leaderboardPayout",user:n[2][l]._id,state:"completed"}))):a.push({prize:n[0].winners[l].prize,points:0});return e.next=10,Promise.all([s.findByIdAndUpdate(r._id,{winners:a,state:"completed",updatedAt:(new Date).getTime()},{})].concat(i));case 10:if(null===n[1]){e.next=15;break}return e.next=13,Promise.all([s.findByIdAndUpdate(n[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),c.updateMany({},{"leaderboard.points":0},{})]);case 13:n=e.sent,p(t,n[0]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([s.findOne({state:"running"}).select("duration state updatedAt").lean(),s.findOne({state:"created"}).sort({createdAt:1}).select("duration state updatedAt").lean()]);case 3:if(null===(r=e.sent)[0]){e.next=9;break}(n=f(r[0]))>0?d=setTimeout((function(){m(t,r[0])}),n):m(t,r[0]),e.next=14;break;case 9:if(null===r[1]){e.next=14;break}return e.next=12,Promise.all([s.findByIdAndUpdate(r[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),c.updateMany({},{"leaderboard.points":0},{})]);case 12:r=e.sent,p(t,r[0]);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetLeaderboardDataSocket:h,generalLeaderboardStart:p,generalLeaderboardStop:y,generalLeaderboardInit:v}},1814:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var s=r(2789),u=r(5182),l=r(286),f=r(7908).socketRemoveAntiSpam,d=r(7587),h=d.captchaCheckData,p=d.captchaGetData,y=r(1681),m=y.generalCheckSendPromoClaimData,v=y.generalCheckSendPromoClaimCode,g=[],w=function(){var e,t=(e=o().mark((function e(t,r,n,i,c){var d,y,w,b,x,k,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(i),e.next=4,p(i.captcha);case 4:return d=e.sent,h(d),e.next=8,u.findOne({code:i.code.toLowerCase()}).select("code reward levelMin redeemers redeemptionsTotal redeemptionsMax allowLevel ipRestricktLevel").populate({path:"redeemers",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 8:if(y=e.sent,v(n,y,g),0!==y.ipRestricktLevel){e.next=16;break}w=[],b=a(y.redeemers);try{for(b.s();!(x=b.n()).done;)k=x.value,w.push(k.user.ips[0].address)}catch(e){b.e(e)}finally{b.f()}if(!w.includes(n.ips[0].address)){e.next=16;break}throw new Error("You are detected to use more than 2 accounts");case 16:return e.prev=16,g.push(y._id.toString()),e.next=20,Promise.all([s.findByIdAndUpdate(n._id,{$inc:{balance:y.reward,"limits.betToWithdraw":Math.floor(y.reward/2)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),u.findByIdAndUpdate(y._id,{$push:{redeemers:{user:n._id}},$inc:{redeemptionsTotal:1},updatedAt:(new Date).getTime()}),l.create({amount:y.reward,type:"promoCodeClaim",user:n._id,state:"completed"})]);case 20:S=e.sent,t.of("/socket/general").to(n._id.toString()).emit("user",{user:S[0]}),c({success:!0}),g.splice(g.indexOf(y._id.toString()),1),f(n._id),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(16),g.splice(g.indexOf(y._id.toString()),1),f(r.decoded._id),c({success:!1,error:{type:"error",message:e.t0.message}});case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(0),f(r.decoded._id),c({success:!1,error:{type:"error",message:e.t1.message}});case 38:case"end":return e.stop()}}),e,null,[[0,34],[16,27]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r,n,o,a){return t.apply(this,arguments)}}();e.exports={generalSendPromoClaimSocket:w}},9381:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)}))}}r(6037);var f=r(2789),d=r(6112),h=r(3844),p=r(5958),y=r(6232),m=r(4823),v=r(6930),g=r(6363),w=r(286),b=r(7908).socketRemoveAntiSpam,x=r(8461).settingGet,k=r(7587),S=k.captchaCheckData,E=k.captchaGetData,L=r(3602),_=L.generalCheckSendRainCreateData,O=L.generalCheckSendRainCreateRain,A=L.generalCheckSendRainCreateUser,j=L.generalCheckSendRainTipData,P=L.generalCheckSendRainTipRain,I=L.generalCheckSendRainTipUser,T=L.generalCheckSendRainJoinData,N=L.generalCheckSendRainJoinRain,C=L.generalCheckSendRainJoinUser,G=L.generalCheckSendRainJoinTransactions,D=r(836).generalUserGetFormated,Y=r(7089).generalChatAddMessage,U=[],B=function(){var e=l(s().mark((function e(t,r,n,o,a){var i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(o),e.next=4,d.findOne({type:"user",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state createdAt").lean();case 4:return i=e.sent,O(i,U),e.prev=6,U.push(n._id.toString()),A(o,n),c=Math.floor(o.amount),e.next=12,Promise.all([f.findByIdAndUpdate(n._id,{$inc:{balance:-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.create({amount:c,creator:n._id,type:"user",state:"created"}),w.create({amount:-c,type:"rainCreate",user:n._id,state:"completed"})]);case 12:(u=e.sent)[1]=u[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),M(t,u[1]),a({success:!0}),U.splice(U.indexOf(n._id.toString()),1),b(n._id),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),U.splice(U.indexOf(n._id.toString()),1),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 32:case"end":return e.stop()}}),e,null,[[0,28],[6,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),R=function(){var e=l(s().mark((function e(t,r,n,o,a){var i,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(o),e.next=4,d.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 4:return i=e.sent,P(i),I(o,n),c=Math.floor(o.amount),e.next=10,Promise.all([f.findByIdAndUpdate(n._id,{$inc:{balance:-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.findByIdAndUpdate(i._id,{$inc:{amount:c}},{new:!0}).select("amount participants type state updatedAt").lean(),w.create({amount:-c,type:"rainTip",user:n._id,state:"completed"})]);case 10:(u=e.sent)[2]=u[2].toObject(),u[2].user={_id:n._id,username:n.username},t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),t.of("/socket/general").emit("rain",{rain:u[1]}),l={transaction:u[2],type:"rainTip"},Y(t,l),a({success:!0}),b(n._id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=l(s().mark((function e(t,r,n,o,i){var c,u,l,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(o),e.next=4,E(o.captcha);case 4:return c=e.sent,S(c),e.next=8,Promise.all([d.findOne({state:"running"}).select("participants type state updatedAt").lean(),d.find({"participants.user":n._id,state:"completed",updatedAt:{$gte:new Date((new Date).getTime()-864e5)}}).select("participants type state updatedAt").lean()]);case 8:if(u=e.sent,l=x(),N(n,u[0],l),C(n,u[0],u[1]),"site"!==u[0].type){e.next=17;break}return e.next=15,Promise.all([h.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),y.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),p.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),m.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),v.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),g.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean()]);case 15:f=e.sent,G([].concat(a(f[0]),a(f[1]),a(f[2]),a(f[3]),a(f[4]),a(f[5])));case 17:return e.next=19,d.findByIdAndUpdate(u[0]._id,{$push:{participants:{user:n._id}}},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username"}).lean();case 19:u[0]=e.sent,t.of("/socket/general").emit("rain",{rain:u[0]}),i({success:!0}),b(n._id),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),b(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=l(s().mark((function e(t,r){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.findOne({state:"running"}).select("state updatedAt").lean();case 3:if(null===(n=e.sent)){e.next=12;break}return o=new Date(n.updatedAt).getTime()+1e3+12e4-(new Date).getTime(),e.next=8,d.findByIdAndUpdate(r._id,{state:"pending",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").lean();case 8:n=e.sent,setTimeout((function(){M(t,n)}),o),e.next=17;break;case 12:return e.next=14,d.findByIdAndUpdate(r._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username avatar rank stats anonymous createdAt"}).lean();case 14:"user"===(n=e.sent).type&&(n.creator=D(n.creator)),setTimeout((function(){$(t,n)}),12e4);case 17:t.of("/socket/general").emit("rain",{rain:n}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}(),$=function(){var e=l(s().mark((function e(t,r){var n,a,i,c,u,l,h,p,y,m,v,g,b,k,S,E,L,_,O,A,j;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.findById(r._id).select("amount participants creator type state updatedAt").populate({path:"participants",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 3:if(n=e.sent,a=x(),i=[],c=[],u=[],l=Math.floor(5*Math.random())+3,n.participants.length>0){h=n.participants.reduce((function(e,t){return e+t.user.xp}),0),p=h/n.participants.length,h+=p*l,y=o(n.participants);try{for(y.s();!(m=y.n()).done;)v=m.value,g=Math.floor(n.amount*v.user.xp/h),!0!==i.includes(v.user.ips[0].address)&&!1===isNaN(g)&&g>=10&&(i.push(v.user.ips[0].address),c.push(f.findByIdAndUpdate(v.user._id,{$inc:{balance:g,"limits.betToWithdraw":g,"limits.betToRain":g},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),u.push(w.create({amount:g,type:"rainPayout",user:v.user._id,state:"completed"})))}catch(e){y.e(e)}finally{y.f()}}return b=a.rainrestrict.enabled?l+n.participants.length:n.participants.length,0===n.participants.length&&a.rainrestrict.enabled,e.next=14,Promise.all([d.findByIdAndUpdate(n._id,{state:"completed",totalUsers:b,updatedAt:(new Date).getTime()},{new:!0}).select("amount participants state totalUsers updatedAt").lean()].concat(c,u));case 14:k=e.sent,S=o(k.slice(1,c.length+1));try{for(S.s();!(E=S.n()).done;)L=E.value,t.of("/socket/general").to(L._id.toString()).emit("user",{user:L})}catch(e){S.e(e)}finally{S.f()}_=o(k.slice(c.length+1));try{for(_.s();!(O=_.n()).done;)A=O.value,t.of("/socket/general").to(A.user._id.toString()).emit("rainPayout",{transaction:A})}catch(e){_.e(e)}finally{_.f()}if(j={rain:k[0],type:"rainCompleted"},Y(t,j),"site"!==r.type){e.next=28;break}return e.next=24,d.create({amount:2500,type:"site",state:"created"});case 24:n=(n=e.sent).toObject(),t.of("/socket/general").emit("rain",{rain:n}),setTimeout((function(){M(t,n)}),168e4);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),console.error(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=l(s().mark((function e(t){var r,n,a,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.find({$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("participants type state createdAt").populate({path:"participants",populate:{path:"user",select:"balance stats"}}).lean();case 3:r=e.sent,n=o(r),e.prev=5,n.s();case 7:if((a=n.n()).done){e.next=13;break}return i=a.value,e.next=11,d.findByIdAndUpdate(i._id,{state:"canceled",updatedAt:(new Date).getTime()},{});case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.next=23,d.create({amount:2500,type:"site",state:"created"});case 23:c=(c=e.sent).toObject(),setTimeout((function(){M(t,c)}),168e4),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),console.error(e.t1);case 31:case"end":return e.stop()}}),e,null,[[0,28],[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetRains:function(){return new Promise(function(){var e=l(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([d.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("amount participants type state totalUsers updatedAt").lean(),d.findOne({state:"running"}).select("amount participants totalUsers creator type state updatedAt").populate({path:"creator",select:"username avatar rank xp stats anonymous createdAt"}).lean()]);case 3:null!==(n=e.sent)[1]&&"user"===n[1].type&&(n[1].creator=D(n[1].creator)),t({site:n[0],active:n[1]}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}())},generalSendRainCreateSocket:B,generalSendRainTipSocket:R,generalSendRainJoinSocket:F,generalRainInit:q}},8361:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(2725),u=r(286),l=r(7908).socketRemoveAntiSpam,f=r(4214).generalCheckSendRakebackClaimUser,d=function(){var e=i(o().mark((function e(t,r,n,a,i){var c,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.find({type:"reward",state:"active",rewardDuration:"daily"}).sort({rewardRanking:1}).select("name amount levelMin state type rewardDuration rewardRanking");case 3:return c=e.sent,e.next=6,s.find({type:"reward",state:"active",rewardDuration:"weekly"}).sort({rewardRanking:1}).select("name amount levelMin state type rewardDuration rewardRanking");case 6:return u=e.sent,e.next=9,s.find({type:"reward",state:"active",rewardDuration:"monthly"}).sort({rewardRanking:1}).select("name amount levelMin state type rewardDuration rewardRanking");case 9:l=e.sent,i({success:!0,boxes:[c,u,l]}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),h=function(){var e=i(o().mark((function e(t,r,n,a,i){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(n),e.next=4,Promise.all([c.findByIdAndUpdate(n._id,{$inc:{balance:n.rakeback.available},"rakeback.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt"),u.create({amount:n.rakeback.available,type:"rakebackClaim",user:n._id,state:"completed"})]);case 4:s=e.sent,i({success:!0,user:s[0]}),l(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetRakebackDataSocket:d,generalSendRakebackClaimSocket:h}},2396:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(8749),h=r(2789),p=r(5632),y=r(3844),m=r(6232),v=r(5958),g=r(4823),w=r(827),b=r(6930),x=r(6363),k=r(5329),S=r(286),E=r(988),L=r(6966),_=r(6769),O=r(5964),A=r(8702),j=r(4946),P=r(3702),I=r(2256),T=r(2974),N=r(5241),C=r(8455),G=r(7908).socketRemoveAntiSpam,D=r(836),Y=D.generalCheckGetUserInfoData,U=D.generalCheckGetUserInfoUser,B=D.generalCheckGetUserBetsData,R=D.generalCheckGetUserTransactionsData,F=D.generalCheckSendUserAnonymousData,M=D.generalCheckSendUserDiscordData,$=D.generalCheckSendUserDiscordUser,q=D.generalCheckSendUserSeedData,W=D.generalCheckSendUserSeedGames,V=D.generalCheckSendUserTipData,z=D.generalCheckSendUserTipUser,J=D.generalCheckSendUserTipReceiver,H=D.userGetDiscordUserData,X=D.generalUserGetFormated,K=D.generalSanitizeBets,Z=D.generalSanitizeUserSeed,Q=function(){var e=f(u().mark((function e(t,r,n,o,a){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(o),e.next=4,h.findById(o.userId).select("roblox.id username avatar rank xp stats createdAt").lean();case 4:i=e.sent,U(i),i=X(i),a({success:!0,user:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ee=function(){var e=f(u().mark((function e(t,r,n,o,i){var s,l,f,d,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,Promise.all([E.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),L.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),_.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),O.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),A.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),j.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),P.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),I.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),T.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),N.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),C.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),E.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),L.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),_.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),O.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),A.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),j.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),P.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcome fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),I.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcomes fair user createdAt").populate({path:"game",select:"fair"}).lean(),T.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout outcome items fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),N.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),C.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*o.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair",select:"seedServer hash seedPublic"}}).lean()]);case 4:s=e.sent,l=s.slice(0,8).reduce((function(e,t){return e+t}),0),(f=[].concat(c(s[11].map((function(e){return a(a({},e),{},{method:"crash"})}))),c(s[12].map((function(e){return a(a({},e),{},{method:"roll"})}))),c(s[13].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),c(s[14].map((function(e){return a(a({},e),{},{method:"duels"})}))),c(s[15].map((function(e){return a(a({},e),{},{method:"mines"})}))),c(s[16].map((function(e){return a(a({},e),{},{method:"towers"})}))),c(s[17].map((function(e){return a(a({},e),{},{method:"unbox"})}))),c(s[18].map((function(e){return a(a({},e),{},{method:"battles"})}))),c(s[19].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),c(s[20].map((function(e){return a(a({},e),{},{method:"plinko"})}))),c(s[21].map((function(e){return a(a({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=8*(o.page-1),h=8*o.page,f=f.slice(d,h),f=K(f),i({success:!0,count:l,bets:f}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),te=function(){var e=f(u().mark((function e(t,r,n,o,i){var s,l,f,d,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,Promise.all([y.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),m.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),v.countDocuments({user:n._id,state:"completed"}),g.countDocuments({user:n._id,state:"completed"}),w.countDocuments({user:n._id,state:"completed"}),b.countDocuments({user:n._id,state:"completed"}),x.countDocuments({user:n._id,state:"completed"}),k.countDocuments({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}),S.countDocuments({user:n._id,state:"completed"}),y.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data deposit withdraw state createdAt").lean(),m.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data deposit withdraw state createdAt").lean(),v.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),g.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),w.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount type user state createdAt").lean(),b.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),x.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount data type user state createdAt").lean(),k.find({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount sender receiver state createdAt").lean(),S.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*o.page).select("amount type user state createdAt").lean()]);case 4:s=e.sent,l=s.slice(0,9).reduce((function(e,t){return e+t}),0),(f=[].concat(c(s[9].map((function(e){return a(a({},e),{},{method:"robux"})}))),c(s[10].map((function(e){return a(a({},e),{},{method:"limited"})}))),c(s[11].map((function(e){return a(a({},e),{},{method:"steam"})}))),c(s[12].map((function(e){return a(a({},e),{},{method:"crypto"})}))),c(s[13].map((function(e){return a(a({},e),{},{method:"depositBonus"})}))),c(s[14].map((function(e){return a(a({},e),{},{method:"gift"})}))),c(s[15].map((function(e){return a(a({},e),{},{method:"credit"})}))),c(s[16].map((function(e){return a(a({},e),{},{method:"tip"})}))),c(s[17].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=8*(o.page-1),h=8*o.page,f=f.slice(d,h),i({success:!0,count:l,transactions:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),re=function(){var e=f(u().mark((function e(t,r,n,o,a){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.findOne({user:n._id,state:"active"}).select("seedClient seedServer hash nonce user state").lean(),p.findOne({user:n._id,state:"created"}).select("seedClient seedServer hash nonce user state").lean()]);case 3:i=e.sent,a({success:!0,seed:Z(i[0])}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ne=function(){var e=f(u().mark((function e(t,r,n,o,a){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(o),e.next=4,h.findByIdAndUpdate(n._id,{anonymous:o.anonymous});case 4:a({success:!0,anonymous:o.anonymous}),G(n._id),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),G(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),oe=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M(o),$(o,n),i=null,"link"!==o.method){e.next=11;break}return e.next=7,H(o.tokenDiscord);case 7:c=e.sent,i={discordId:c.id,updatedAt:(new Date).getTime()},e.next=12;break;case 11:i={$unset:{discordId:1},updatedAt:(new Date).getTime()};case 12:return e.next=14,h.findByIdAndUpdate(n._id,i,{new:!0}).select("roblox.id discordId username rank balance stats rakeback fair anonymous agreed mute ban updatedAt createdAt").lean();case 14:s=e.sent,a({success:!0,user:s}),G(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),G(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ae=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(o),e.next=4,Promise.all([p.findOne({user:n._id,state:"created"}).select("user state").lean(),p.findOne({user:n._id,state:"active"}).select("user state").lean(),A.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),j.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 4:return i=e.sent,W([].concat(c(i[2]),c(i[3]))),e.next=8,Promise.all([p.findByIdAndUpdate(i[1]._id,{seedClient:o.seedClient.trim(),updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 8:s=e.sent,a({success:!0,seed:Z(s[0])}),G(n._id),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),G(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ie=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,s,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.findOne({user:n._id,state:"created"}).select("user state").lean(),p.findOne({user:n._id,state:"active"}).select("user state").lean(),A.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),j.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 3:return i=e.sent,W([].concat(c(i[2]),c(i[3]))),s=d.randomBytes(24).toString("hex"),l=d.createHash("sha256").update(s).digest("hex"),e.next=9,Promise.all([p.findByIdAndUpdate(i[1]._id,{seedServer:s,hash:l,updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 9:f=e.sent,a({success:!0,seed:Z(f[0])}),G(n._id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),G(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),ce=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(o),z(o,n),e.next=5,h.findById(o.receiverId).select("balance ban");case 5:return i=e.sent,J(n,i),c=Math.floor(o.amount),e.next=10,Promise.all([h.findByIdAndUpdate(n._id,{$inc:{balance:-c,"limits.limitTip":n.limits.limitTip>c?-c:-n.limits.limitTip},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(i._id,{$inc:{balance:c,"limits.betToWithdraw":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),k.create({amount:c,sender:{user:n._id},receiver:{user:i._id},user:n._id,state:"completed"})]);case 10:(s=e.sent)[2]=s[2].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:s[0]}),t.of("/socket/general").to(s[1]._id.toString()).emit("user",{user:s[1]}),t.of("/socket/general").to(s[1]._id.toString()).emit("userTip",{transaction:s[2]}),a({success:!0,transaction:s[2]}),G(n._id),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),G(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalGetUserInfoSocket:Q,generalGetUserBetsSocket:ee,generalGetUserTransactionsSocket:te,generalGetUserSeedSocket:re,generalSendUserAnonymousSocket:ne,generalSendUserDiscordSocket:oe,generalSendUserClientSeedSocket:ae,generalSendUserServerSeedSocket:ie,generalSendUserTipSocket:ce}},2681:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=(r(286),r(7908).socketRemoveAntiSpam),u=r(2054),l=u.generalCheckSendVaultDepositData,f=u.generalCheckSendVaultDepositUser,d=u.generalCheckSendVaultWithdrawData,h=u.generalCheckSendVaultWithdrawUser,p=u.generalCheckSendVaultLockData,y=u.generalCheckSendVaultLockUser,m=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(a),f(a,n),u=Math.floor(a.amount),e.next=6,c.findByIdAndUpdate(n._id,{$inc:{balance:-u,"vault.amount":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:d=e.sent,i({success:!0,user:d}),s(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),v=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(a),h(a,n),u=Math.floor(a.amount),e.next=6,c.findByIdAndUpdate(n._id,{$inc:{balance:u,"vault.amount":-u},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:l=e.sent,i({success:!0,user:l}),s(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),g=function(){var e=i(o().mark((function e(t,r,n,a,i){var u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(a),y(n),u=Math.floor(a.time),e.next=6,c.findByIdAndUpdate(n._id,{"vault.expireAt":(new Date).getTime()+u,updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 6:l=e.sent,i({success:!0,user:l}),s(n._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={generalSendVaultDepositSocket:m,generalSendVaultWithdrawSocket:v,generalSendVaultLockSocket:g}},3298:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(8749),h=r(2789),p=r(5632),y=r(8702),m=r(8744),v=r(6112),g=r(8875),w=r(9221),b=r(7908).socketRemoveAntiSpam,x=r(8461),k=x.settingGet,S=(x.getMinimumValue,x.getMaximumValue,x.findPercent),E=x.findCountPercent,L=r(9949),_=L.minesCheckSendBetData,O=L.minesCheckSendBetUser,A=L.minesCheckSendBetGame,j=L.minesCheckSendBetSeed,P=L.minesCheckSendRevealData,I=L.minesCheckSendRevealGame,T=L.minesCheckSendCashoutGame,N=L.minesGetGamePayout,C=L.minesGetGameDeck,G=L.minesSanitizeGame,D=r(836),Y=D.generalUserGetRakeback,U=D.generalUserGetFormated,B=r(5507).generalAddBetsList,R=[],F=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c,s,l,f,v,x,S,E,L,P,I,T,N,D,U;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(o),O(o,n),i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),A(i),e.next=7,p.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 7:return c=e.sent,j(c),e.next=11,m.findOne({state:"running"}).select("state").lean();case 11:return s=e.sent,l=Math.floor(o.amount),f=Math.floor(o.minesCount),v=k(),x=Y(n),S=!0!==n.limits.blockSponsor?Math.floor(l*x.percentage*v.general.reward.multiplier):0,E=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*l):0,L="".concat(c.seedServer,"-").concat(c.nonce,"-").concat(c.seedClient),P=d.createHash("sha256").update(L).digest("hex"),I=C(f,P),T=[],e.next=24,g.find({enabled:"true"}).select("creators").lean();case 24:if(N=e.sent,D=N.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates.referrer)||void 0===t?void 0:t.toString())})),!n.affiliates.referrer){e.next=29;break}return e.next=29,w.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:l,leaderboardpoints:D&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0},updatedAt:(new Date).getTime()},{new:!0}).select("bet leaderboardpoints updatedAt").lean();case 29:return T=[h.findByIdAndUpdate(n._id,{$inc:{balance:-l,xp:!0!==n.limits.blockSponsor?Math.floor(l*process.env.XP_RATE*v.general.reward.multiplier):0,"stats.bet":l,"leaderboard.points":null!==s&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"affiliates.generated":E,"affiliates.leaderboardpoints":D&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"rakeback.earned":S,"rakeback.available":S},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(c._id,{$inc:{nonce:1}},{}),y.create({amount:l,minesCount:f,deck:I,fair:{seed:c._id,nonce:c.nonce},user:n._id,affiliates:n.affiliates,state:"created"})],void 0!==n.affiliates.referrer&&E>0&&T.push(h.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":E,"affiliates.available":E},updatedAt:(new Date).getTime()},{})),e.next=33,Promise.all(T);case 33:(U=e.sent)[2]=U[2].toObject(),R.push(U[2]),a({success:!0,user:U[0],game:G(U[2])}),b(n._id),e.next=44;break;case 40:e.prev=40,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 44:case"end":return e.stop()}}),e,null,[[0,40]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=f(u().mark((function e(t,r,n,a,i){var s,l,f,d,p,m,g,x,L,_,O,A,j,T,C,D,Y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,P(a),s=R.find((function(e){return e.user._id.toString()===n._id.toString()})),I(s,a),l=Math.floor(a.tile),f=!1,"coin"!==s.deck[l]||n.limits.luck||"user"!==n.rank||((d=c(c({},s),{},{revealed:o(s.revealed)})).revealed.length+=1,p=N(d),m=Math.floor(11*Math.random())+20,p-s.amount>1e3*m&&(s.deck=$(s.deck,l),f=!0)),g=s.revealed.length+1,"coin"===s.deck[l]&&k().games.ctotal.enabled&&!f&&("user"!==n.rank||n.limits.luck||(x=S(s.amount,n.balance,k().games.cmines),Math.floor(100*Math.random())+1<x&&(s.deck=$(s.deck,l)),0===x&&(L=E(s.amount,s.minesCount,g,k().games.csmines),Math.floor(100*Math.random())+1<L&&(s.deck=$(s.deck,l)))),("mod"===n.rank||"partner"===n.rank&&!n.limits.luck)&&(_=S(s.amount,n.balance,k().games.mcmines),Math.floor(100*Math.random())+1<_&&(s.deck=$(s.deck,l)),0===_&&(O=E(s.amount,s.minesCount,g,k().games.mcsmines),Math.floor(100*Math.random())+1<O&&(s.deck=$(s.deck,l))))),s.revealed.push({tile:l,value:s.deck[l]}),!("mine"===s.deck[l]||25-s.minesCount<=s.revealed.length)){e.next=31;break}if(A="mine"!==s.deck[l]?N(s):0,j=Math.floor(A/s.amount*100),T=0===A||j>=125?s.amount:A,C=!0!==n.limits.blockSponsor?s.amount:0,!n.affiliates.referrer){e.next=18;break}return e.next=18,w.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{won:A},updatedAt:(new Date).getTime()},{new:!0}).select("won updatedAt").lean();case 18:return D=[],D=[h.findByIdAndUpdate(n._id,{$inc:{balance:A,"stats.won":A,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-T)<=0?-n.limits.betToWithdraw:-T,"limits.betToRain":Math.floor(n.limits.betToRain-T)<=0?-n.limits.betToRain:-T},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),y.findByIdAndUpdate(s._id,{payout:A,multiplier:j,revealed:s.revealed,deck:s.deck,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier minesCount deck revealed user state updatedAt").lean()],A>0&&(D=[].concat(o(D),[v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*C)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.next=23,Promise.all(D);case 23:Y=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===Y[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:Y[0]}),A>0&&t.of("/socket/general").emit("rain",{rain:Y[2]}),B(t,c(c({},Y[1]),{},{user:U(n),method:"mines"})),s=Y[1],e.next=35;break;case 31:return e.next=33,y.findByIdAndUpdate(s._id,{revealed:s.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount minesCount deck revealed user state").lean();case 33:s=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===s._id.toString()})),1,s);case 35:i({success:!0,game:G(s)}),b(n._id),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(0),b(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 43:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(e,t){var r=o(e);if("mine"===r[t])return r;r[t]="mine";for(var n=0;n<r.length;n++)if("mine"===r[n]&&t!==n){r[n]="coin";break}return r},q=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,s,l,f,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),T(i),s=N(i),l=Math.floor(s/i.amount*100),f=l>=125?i.amount:s,d=!0!==n.limits.blockSponsor?i.amount:0,!n.affiliates.referrer){e.next=10;break}return e.next=10,w.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{won:s},updatedAt:(new Date).getTime()},{new:!0}).select("won updatedAt").lean();case 10:return e.next=12,Promise.all([h.findByIdAndUpdate(n._id,{$inc:{balance:s,"stats.won":s,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-f)<=0?-n.limits.betToWithdraw:-f,"limits.betToRain":Math.floor(n.limits.betToRain-f)<=0?-n.limits.betToRain:-f},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),y.findByIdAndUpdate(i._id,{payout:s,multiplier:l,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier minesCount deck revealed user state updatedAt").lean(),v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*d)}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 12:p=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===p[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:p[2]}),B(t,c(c({},p[1]),{},{user:U(n),method:"mines"})),a({success:!0,user:p[0],game:G(p[1])}),b(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),b(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),W=function(){var e=f(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.find({state:"created"}).select("amount minesCount deck revealed user state").lean();case 3:R=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();e.exports={minesGetGame:function(e){var t=R.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?G(R[t]):null},minesSendBetSocket:F,minesSendRevealSocket:M,minesSendCashoutSocket:q,minesInit:W}},8117:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};l(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function d(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)}))}}var p=r(8749),y=r(2789),m=r(7067),v=r(6966),g=r(6112),w=r(8744),b=r(8875),x=r(9221),k=r(7908).socketRemoveAntiSpam,S=r(8461).settingGet,E=r(4162),L=E.rollCheckSendBetData,_=E.rollCheckSendBetUser,O=E.rollCheckSendBetGame,A=E.rollGetUserGameStats,j=E.rollGenerateGame,P=E.rollGetOutcome,I=E.rollSanitizeGame,T=E.rollSanitizeBets,N=E.rollSanitizeBet,C=r(836),G=C.generalUserGetLevel,D=C.generalUserGetRakeback,Y=C.generalUserGetFormated,U=r(5507).generalAddBetsList,B=null,R=[],F=[],M=[],$=function(){var e=h(f().mark((function e(t,r,n,o,a){var i,c,s,u,l,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,L(o),i=A(n,R),_(o,n,i),O(B),e.prev=5,M+=1,c=Math.floor(o.amount),s=Math.floor(o.multiplier),u=G(n),l=D(n),!n.affiliates.referrer){e.next=14;break}return e.next=14,x.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:c},updatedAt:(new Date).getTime()},{new:!0}).select("bet updatedAt").lean();case 14:return e.next=16,Promise.all([y.findByIdAndUpdate(n._id,{$inc:{balance:-c,"stats.bet":c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.create({amount:c,multiplier:s,game:B._id,user:n._id,affiliates:n.affiliates})]);case 16:(d=e.sent)[1]=d[1].toObject(),d[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,xp:n.xp,level:u,rakeback:l,affiliates:n.affiliates,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},R.push(d[1]),t.of("/socket/roll").emit("bet",{bet:N(d[1])}),a({success:!0,user:d[0]}),M-=1,k(n._id),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(5),k(r.decoded._id),M-=1,a({success:!1,error:{type:"error",message:e.t0.message}});case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(0),k(r.decoded._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 37:case"end":return e.stop()}}),e,null,[[0,33],[5,26]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),q=function(){var e=h(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R=[],e.next=4,j();case 4:B=e.sent,t.of("/socket/roll").emit("game",{game:I(B)}),setTimeout((function(){V(t)}),13e3-((new Date).getTime()-new Date(B.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},V=function(){var e=h(f().mark((function e(t){var r,n,o,a,i,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{B.state="pending",t.of("/socket/roll").emit("game",{game:I(B)}),M<=0?(r=p.createHash("sha256").update("".concat(B._id,"-").concat(B.fair.seed.seedServer)).digest("hex"),B.outcome=P(r),n=S(),(o=R.reduce((function(e,t){return Math.max(e,t.amount)}),0))>0&&(a=Math.floor(11*Math.random())+20,(i=100*Math.floor((o+1e3*a)/o))<B.outcome&&(B.outcome=Math.floor(Math.random()*(i-100+1))+100,console.log("yes slide maxResult",B.outcome))),0!==(c=W(o/1e3,n.games.slides))&&n.games.ctotal.enabled&&(s=Math.floor(Math.random()*(c-100+1))+100)<B.outcome&&(B.outcome=s,console.log("yes slide luckResult",B.outcome)),B.state="rolling",B.updatedAt=(new Date).getTime(),t.of("/socket/roll").emit("game",{game:B}),setTimeout((function(){z(t)}),5e3)):setTimeout((function(){V(t)}),500)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=h(f().mark((function e(t){var r,n,o,a,c,u,l,d,h,p,k,E,L,_,O;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B.state="completed",e.next=4,w.findOne({state:"running"}).select("state").lean();case 4:r=e.sent,n=S(),o=[],a=[],c=[],u=0,l=f().mark((function e(){var t,i,s,l,p,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h[d],i=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*n.general.reward.multiplier):0,s=B.outcome>=t.multiplier?Math.floor(t.amount*(t.multiplier/100)):0,l=t.multiplier>=125||0===s?t.amount:s,p=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,u+=!0!==t.user.limits.blockSponsor?t.amount:0,e.next=8,b.find({enabled:"true"}).select("creators").lean();case 8:if(m=e.sent,g=m.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),!t.user.affiliates.referrer){e.next=13;break}return e.next=13,x.findOneAndUpdate({user:t.user._id,referrer:t.user.affiliates.referrer},{$inc:{won:s,leaderboardpoints:g&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("won updatedAt").lean();case 13:o.push(y.findByIdAndUpdate(t.user._id,{$inc:{balance:s,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*n.general.reward.multiplier):0,"stats.won":s,"leaderboard.points":null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"limits.betToWithdraw":Math.floor(t.user.limits.betToWithdraw-l)<=0?-t.user.limits.betToWithdraw:-l,"limits.betToRain":Math.floor(t.user.limits.betToRain-l)<=0?-t.user.limits.betToRain:-l,"rakeback.earned":i,"rakeback.available":i,"affiliates.generated":p,"affiliates.leaderboardpoints":g&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==t.user.affiliates.referrer&&p>0&&a.push(y.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":p,"affiliates.available":p},updatedAt:(new Date).getTime()},{})),c.push(v.findByIdAndUpdate(t._id,{payout:s,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 16:case"end":return e.stop()}}),e)})),d=0,h=R;case 12:if(!(d<h.length)){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:d++,e.next=12;break;case 17:return e.next=19,Promise.all([m.findByIdAndUpdate(B._id,{outcome:B.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),g.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*u)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(o,a,c));case 19:r=e.sent,F.unshift(r[0]),F.length>25&&F.pop(),t.of("/socket/roll").emit("game",{game:r[0]}),t.of("/socket/general").emit("rain",{rain:r[1]}),p=s(r.slice(2,o.length+a.length+2));try{for(p.s();!(k=p.n()).done;)E=k.value,t.of("/socket/general").to(E._id.toString()).emit("user",{user:E})}catch(e){p.e(e)}finally{p.f()}L=s(r.slice(o.length+a.length+2));try{for(L.s();!(_=L.n()).done;)O=_.value,U(t,i(i({},O),{},{user:Y(O.user),method:"roll"}))}catch(e){L.e(e)}finally{L.f()}setTimeout((function(){q(t)}),3e3),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=h(f().mark((function e(t){var r,n,a,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([m.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),m.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 3:if(r=e.sent,F=r[1],null===r[0]||"completed"===r[0].state){e.next=16;break}n=[],a=s(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(c=i.value).payout&&(n=[].concat(o(n),[v.findByIdAndUpdate(c._id,{payout:c.amount,updatedAt:(new Date).getTime()}),y.findByIdAndUpdate(c.user,{$inc:{balance:c.amount,"stats.bet":-c.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return u=p.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=P(u),e.next=13,Promise.all([m.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(o(n)));case 13:r=e.sent,F.unshift(r[0]),F.length>25&&F.pop();case 16:q(t),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rollGetData:function(){return{game:I(B),bets:T(R),history:F}},rollSendBetSocket:$,rollInit:J}},6734:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){"use strict";f=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};l(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function d(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)}))}}r(8749);var p=r(2789),y=r(2299),m=r(8455),v=r(8744),g=r(8875),w=r(3304),b=r(9221),x=r(7908).socketRemoveAntiSpam,k=r(2507),S=k.fairGetData,E=k.fairGetBlockData,L=r(836),_=L.generalUserGetRakeback,O=L.generalUserGetFormated,A=r(4145),j=A.rouletteCheckSendBetData,P=A.rouletteCheckSendBetUser,I=A.rouletteCheckSendBetGame,T=A.rouletteGetOutcome,N=A.rouletteGenerateGame,C=A.rouletteSanitizeGame,G=A.rouletteSanitizeBets,D=A.rouletteSanitizeBet,Y=r(8461).settingGet,U=r(5507).generalAddBetsList,B=null,R=[],F=[],M=0,$=function(){var e=h(f().mark((function e(t,r,n,o,a){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{game:C(B),bets:G(R),history:F});case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),q=function(){var e=h(f().mark((function e(t,r,n,o,a){var i,c,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(o),P(o,n,R),I(B),e.prev=4,M+=1,i=Math.floor(o.amount),c=_(n),!n.affiliates.referrer){e.next=11;break}return e.next=11,b.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:i},updatedAt:(new Date).getTime()},{new:!0}).select("bet updatedAt").lean();case 11:return s=[p.findByIdAndUpdate(n._id,{$inc:{balance:-i,"stats.bet":i,"stats.roulette.bet":i,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-i)<=0?-n.limits.betToWithdraw:-i,"limits.betToRain":Math.floor(n.limits.betToRain-i)<=0?-n.limits.betToRain:-i},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean(),m.create({amount:i,color:o.color,game:B._id,user:n._id})],e.next=15,Promise.all(s);case 15:(u=e.sent)[1]=u[1].toObject(),u[1].user={_id:n._id,username:n.username,avatar:n.avatar,rank:n.rank,limits:n.limits,affiliates:n.affiliates,rakeback:c},R.push(u[1]),t.of("/socket/roulette").emit("bet",{bet:D(u[1])}),a({success:!0,user:u[0]}),M-=1,x(n._id),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(4),M-=1,x(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(0),x(n._id),a({success:!1,error:{type:"error",message:e.t1.message}});case 36:case"end":return e.stop()}}),e,null,[[0,32],[4,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),W=function(){var e=h(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:B=e.sent,R=[],t.of("/socket/roulette").emit("game",{game:C(B)}),setTimeout((function(){V(t)}),13e3-((new Date).getTime()-new Date(B.createdAt).getTime())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=h(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"pending"!==B.state&&(B.state="pending",t.of("/socket/roulette").emit("game",{game:C(B)})),M<=0?z(t):setTimeout((function(){V(t)}),1e3)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=h(f().mark((function e(t){var r,n,o,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,B.state="fairness",void 0!==B.fair.blockNum){e.next=8;break}return e.next=5,S();case 5:r=e.sent,B.fair.blockNum=r.data.head_block_num+1,t.of("/socket/roulette").emit("game",{game:C(B)});case 8:return e.next=10,E(B.fair.blockNum);case 10:n=e.sent,B.fair.seedPublic=n.data.id,B.outcome=T(B),o={red:0,green:0,bait:0,black:0},R.forEach((function(e){void 0!==o[e.color]&&(o[e.color]+=e.amount)})),a=0===B.outcome&&(o.green>0||o.bait>0)||B.outcome>=1&&B.outcome<=7&&o.red>o.black||B.outcome>=8&&o.red<o.black,i=Y(),a&&i.games.ctotal.enabled&&i.games.croulette.enabled&&(B.outcome=J()),B.state="rolling",B.updatedAt=(new Date).getTime(),t.of("/socket/roulette").emit("game",{game:C(B)}),setTimeout((function(){H(t)}),5500),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),setTimeout((function(){z(t)}),2e3);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=[1,2,3,5,6,7,8,9,10,12,13,14];return e[Math.floor(Math.random()*e.length)]},H=function(){var e=h(f().mark((function e(t){var r,n,o,a,c,u,l,d,h,x,k,S,E,L,_,A;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B.state="completed",e.next=4,v.findOne({state:"running"}).select("state").lean();case 4:r=e.sent,n=[],o=[],a=[],c=0,u=0,l=f().mark((function e(){var t,i,s,l,y,v,w,x,k;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h[d],i=0,0===B.outcome&&"green"===t.color?i=Math.floor(14*t.amount):4!==B.outcome&&11!==B.outcome||"bait"!==t.color?(B.outcome<=7&&B.outcome>=1&&"red"===t.color||B.outcome>=8&&"black"===t.color)&&(i=Math.floor(2*t.amount)):i=Math.floor(7*t.amount),c+=t.amount,u+=i,s=null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,l=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage):0,y=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.0025*t.amount):0,!(i>0)){e.next=19;break}return e.next=11,g.find({enabled:"true"}).select("creators").lean();case 11:if(v=e.sent,w=v.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),!t.user.affiliates.referrer){e.next=16;break}return e.next=16,b.findOneAndUpdate({user:t.user._id,referrer:t.user.affiliates.referrer},{$inc:{won:i,leaderboardpoints:w&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("won leaderboardpoints updatedAt").lean();case 16:n.push(p.findByIdAndUpdate(t.user._id,{$inc:{balance:i,xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"stats.total.won":i,"stats.roulette.won":i,"leaderboard.points":s,"affiliates.leaderboardpoints":w&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":y,"rakeback.earned":l,"rakeback.available":l},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean()),e.next=24;break;case 19:return e.next=21,g.find({enabled:"true"}).select("creators").lean();case 21:x=e.sent,k=x.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),n.push(p.findByIdAndUpdate(t.user._id,{$inc:{xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"leaderboard.points":s,"affiliates.leaderboardpoints":k&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean());case 24:y>0&&o.push(p.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":y,"affiliates.available":y},updatedAt:(new Date).getTime()},{})),a.push(m.findByIdAndUpdate(t._id,{payout:i,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 26:case"end":return e.stop()}}),e)})),d=0,h=R;case 12:if(!(d<h.length)){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:d++,e.next=12;break;case 17:return e.next=19,Promise.all([y.findByIdAndUpdate(B._id,{outcome:B.outcome,fair:B.fair,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").lean(),w.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":c,"stats.total.won":u,"stats.roulette.bet":c,"stats.roulette.won":u}},{upsert:!0})].concat(n,o,a));case 19:x=e.sent,F.unshift(x[0]),F.length>100&&F.pop(),t.of("/socket/roulette").emit("game",{game:x[0]}),k=s(x.slice(2,n.length+2));try{for(k.s();!(S=k.n()).done;)E=S.value,t.of("/socket/general").to(E._id.toString()).emit("user",{user:E})}catch(e){k.e(e)}finally{k.f()}L=s(x.slice(n.length+o.length+2));try{for(L.s();!(_=L.n()).done;)A=_.value,U(t,i(i({},A),{},{user:O(A.user),method:"roulette"}))}catch(e){L.e(e)}finally{L.f()}setTimeout((function(){W(t)}),3e3),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),console.error(e.t1);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=h(f().mark((function e(t){var r,n,a,i,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([y.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"bets",select:"amount payout game user"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(100).select("outcome fair state createdAt").lean()]);case 3:if(r=e.sent,F=r[1],null===r[0]||"completed"===r[0].state){e.next=15;break}n=[],a=s(r[0].bets);try{for(a.s();!(i=a.n()).done;)void 0===(c=i.value).payout&&(n=[].concat(o(n),[m.findByIdAndUpdate(c._id,{payout:c.amount,updatedAt:(new Date).getTime()}),p.findByIdAndUpdate(c.user,{$inc:{balance:c.amount,"stats.total.bet":-c.amount,"stats.roulette.bet":-c.amount},updatedAt:(new Date).getTime()})]))}catch(e){a.e(e)}finally{a.f()}return r[0].outcome=T(r[0]),e.next=12,Promise.all([y.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair.nonce state createdAt").lean()].concat(o(n)));case 12:r=e.sent,F.unshift(r[0]),F.length>100&&F.pop();case 15:W(t),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rouletteGetDataSocket:$,rouletteSendBetSocket:q,rouletteInit:X,getRandomWithoutExcluded:J}},2050:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}var s=r(3304),u=r(2789),l=r(1590),f=l.adminCheckGetStatsListData,d=(l.adminFormatStats,function(){var e=c(a().mark((function e(t,r,n,o,i){var c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.find({"affiliates.referrer":n._id}).sort({createdAt:-1}).select("stats.bet stats.deposit stats.withdraw createdAt").lean();case 3:c=e.sent,s=p(c,n.affiliates),i({success:!0,stats:s}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}()),h=function(){var e=c(a().mark((function e(t,r,n,o,i){var c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(o),c=12*(o.page-1),e.next=5,Promise.all([s.countDocuments({}),s.find({}).limit(12).skip(c).sort({createdAt:-1}).select("stats createdAt").lean()]);case 5:u=e.sent,i({success:!0,count:u[0],stats:u[1]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),p=function(e,t){var r,n={users:{amount:0},deposit:{amount:0},withdraw:{amount:0},revenue:{amount:0},wager:{amount:0},cashOut:{amount:0}},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.deposit.amount=n.deposit.amount+i.stats.deposit,n.withdraw.amount=n.withdraw.amount+i.stats.withdraw,n.wager.amount=n.wager.amount+i.stats.bet}}catch(e){a.e(e)}finally{a.f()}return n.users.amount=e.length,n.revenue.amount=n.deposit.amount-1.2*n.withdraw.amount,n.cashOut.amount=n.revenue.amount-t.cashOut,n};e.exports={adminGetStatsDataSocket:d,adminGetStatsListSocket:h}},3232:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}var d=r(7906),h=r(2789),p=r(3844),y=r(6232),m=r(5958),v=r(4823),g=r(6930),w=r(6363),b=r(5329),x=r(286),k=r(988),S=r(6966),E=r(6769),L=r(5964),_=r(8702),O=r(4946),A=r(3702),j=r(2256),P=r(2974),I=r(5241),T=r(7908).socketRemoveAntiSpam,N=r(7986),C=N.adminCheckGetUserListData,G=N.adminCheckGetUserDataData,D=N.adminCheckGetUserDataUser,Y=N.adminCheckGetUserTransactionsData,U=N.adminCheckGetUserGamesData,B=N.adminCheckSendUserValueData,R=N.adminCheckSendUserBalanceData,F=N.adminCheckSendUserBalanceUser,M=N.adminCheckSendUserMuteData,$=N.adminCheckSendUserBanData,q=N.adminFormatUserSort,W=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,u,l,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(o),i=12*(o.page-1),u=q(o.sort),l={"affiliates.referrer":n._id,$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"ips.address":{$regex:o.search,$options:"i"}}]},!0===d.isMongoId(o.search)&&(l.$or=[].concat(s(l.$or),[{_id:o.search}])),e.next=8,Promise.all([h.countDocuments(l),h.find(l).sort(u).limit(12).skip(i).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean()]);case 8:f=e.sent,a({success:!0,count:f[0],users:f[1]}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),V=function(){var e=f(c().mark((function e(t,r,n,o,a){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(o),e.next=4,h.findById(o.userId).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:i=e.sent,D(i),a({success:!0,data:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),z=function(){var e=f(c().mark((function e(t,r,n,o,i){var u,l,f,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(o),e.next=4,Promise.all([p.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}),y.countDocuments({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}),m.countDocuments({user:o.userId,state:"completed"}),v.countDocuments({user:o.userId,state:"completed"}),g.countDocuments({user:o.userId,state:"completed"}),w.countDocuments({user:o.userId,state:"completed"}),b.countDocuments({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}),x.countDocuments({user:o.userId,state:"completed"}),p.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),y.find({$or:[{"deposit.user":o.userId},{"withdraw.user":o.userId}],state:{$in:["sent","canceled","completed"]}}).sort({createdAt:-1}).limit(14*o.page).select("amount data deposit withdraw state createdAt").lean(),m.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),v.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),g.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),w.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount data type user state createdAt").lean(),b.find({$or:[{"sender.user":o.userId},{"receiver.user":o.userId}],state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount sender receiver state createdAt").populate({path:"sender.user",select:"username"}).populate({path:"receiver.user",select:"username"}).lean(),x.find({user:o.userId,state:"completed"}).sort({createdAt:-1}).limit(14*o.page).select("amount type user state createdAt").lean()]);case 4:u=e.sent,l=u.slice(0,8).reduce((function(e,t){return e+t}),0),(f=[].concat(s(u[8].map((function(e){return a(a({},e),{},{method:"robux"})}))),s(u[9].map((function(e){return a(a({},e),{},{method:"limited"})}))),s(u[10].map((function(e){return a(a({},e),{},{method:"steam"})}))),s(u[11].map((function(e){return a(a({},e),{},{method:"crypto"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"gift"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"credit"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"tip"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=14*(o.page-1),h=14*o.page,f=f.slice(d,h),i({success:!0,count:l,transactions:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),J=function(){var e=f(c().mark((function e(t,r,n,o,i){var u,l,f,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(o),e.next=4,Promise.all([k.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),S.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),E.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),L.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),_.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),O.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),A.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),j.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),P.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),I.countDocuments({payout:{$exists:!0,$ne:null},user:o.userId}),k.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),S.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),E.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout actions user createdAt").lean(),L.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),_.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),O.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),A.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),j.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),P.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean(),I.find({payout:{$exists:!0,$ne:null},user:o.userId}).sort({createdAt:-1}).limit(14*o.page).select("amount payout user createdAt").lean()]);case 4:u=e.sent,l=u.slice(0,8).reduce((function(e,t){return e+t}),0),(f=[].concat(s(u[10].map((function(e){return a(a({},e),{},{method:"crash"})}))),s(u[11].map((function(e){return a(a({},e),{},{method:"roll"})}))),s(u[12].map((function(e){return a(a({},e),{},{method:"blackjack"})}))),s(u[13].map((function(e){return a(a({},e),{},{method:"duels"})}))),s(u[14].map((function(e){return a(a({},e),{},{method:"mines"})}))),s(u[15].map((function(e){return a(a({},e),{},{method:"towers"})}))),s(u[16].map((function(e){return a(a({},e),{},{method:"unbox"})}))),s(u[17].map((function(e){return a(a({},e),{},{method:"battles"})}))),s(u[18].map((function(e){return a(a({},e),{},{method:"upgrader"})}))),s(u[19].map((function(e){return a(a({},e),{},{method:"plinko"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),d=14*(o.page-1),h=14*o.page,f=f.slice(d,h),i({success:!0,count:l,games:f}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i({success:!1,error:{type:"error",message:e.t0.message}});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),H=function(){var e=f(c().mark((function e(t,r,n,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(o),e.next=4,h.findByIdAndUpdate(o.userId,i({},o.setting,o.value),{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 4:s=e.sent,a({success:!0,user:s}),T(n._id),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),T(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),X=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(o),e.next=4,h.findById(o.userId).select("balance").lean();case 4:return i=e.sent,F(i),s=Math.floor(o.balance),e.next=9,Promise.all([h.findByIdAndUpdate(i._id,{balance:s},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),x.create({amount:Math.floor(s-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 9:u=e.sent,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),a({success:!0,user:u[0]}),T(n._id),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),T(n._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),K=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{mute:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:s=e.sent,a({success:!0,user:s}),T(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),T(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),Z=function(){var e=f(c().mark((function e(t,r,n,o,a){var i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(o),i=(new Date).getTime()+1e3*Math.floor(o.time),e.next=5,h.findByIdAndUpdate(o.userId,{ban:{expire:i,reason:o.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 5:s=e.sent,a({success:!0,user:s}),T(n._id),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),T(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={adminGetUserListSocket:W,adminGetUserDataSocket:V,adminGetUserTransactionListSocket:z,adminGetUserGameListSocket:J,adminSendUserValueSocket:H,adminSendUserBalanceSocket:X,adminSendUserMuteSocket:K,adminSendUserBanSocket:Z}},4332:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)}))}}r(8749);var d=r(2789),h=r(5632),p=r(4946),y=r(8744),m=r(8875),v=r(6112),g=r(9221),w=r(7908).socketRemoveAntiSpam,b=r(8461),x=b.settingGet,k=(b.getMinimumValue,b.getMaximumValue,b.findPercent),S=b.findTCountPercent,E=r(4599),L=E.towersCheckSendBetData,_=E.towersCheckSendBetUser,O=E.towersCheckSendBetGame,A=E.towersCheckSendBetSeed,j=E.towersCheckSendRevealData,P=E.towersCheckSendRevealGame,I=E.towersCheckSendCashoutGame,T=E.towersGetGamePayout,N=E.towersGenerateDeck,C=E.towersShuffleDeck,G=E.towersSanitizeGame,D=r(836),Y=D.generalUserGetRakeback,U=D.generalUserGetFormated,B=r(5507).generalAddBetsList,R=[],F=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,c,s,l,f,v,b,k,S,E,j,P,I,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(o),_(o,n),i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),O(i),e.next=7,h.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 7:return c=e.sent,A(c),e.next=11,y.findOne({state:"running"}).select("state").lean();case 11:return s=e.sent,l=Math.floor(o.amount),f=x(),v=Y(n),b=!0!==n.limits.blockSponsor?Math.floor(l*v.percentage*f.general.reward.multiplier):0,k=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*l):0,S="".concat(c.seedServer,"-").concat(c.nonce,"-").concat(c.seedClient),E=N(o.risk),E=C(E,S),j=[],e.next=23,m.find({enabled:"true"}).select("creators").lean();case 23:if(P=e.sent,I=P.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),!n.affiliates.referrer){e.next=28;break}return e.next=28,g.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:l,leaderboardpoints:I&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0},updatedAt:(new Date).getTime()},{new:!0}).select("bet leaderboardpoints updatedAt").lean();case 28:return j=[d.findByIdAndUpdate(n._id,{$inc:{balance:-l,xp:!0!==n.limits.blockSponsor?Math.floor(l*process.env.XP_RATE*f.general.reward.multiplier):0,"stats.bet":l,"leaderboard.points":null!==s&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"affiliates.generated":k,"affiliates.leaderboardpoints":I&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?l:0,"rakeback.earned":b,"rakeback.available":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(c._id,{$inc:{nonce:1}},{}),p.create({amount:l,risk:o.risk,deck:E,fair:{seed:c._id,nonce:c.nonce},user:n._id,state:"created"})],void 0!==n.affiliates.referrer&&k>0&&j.push(d.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":k,"affiliates.available":k},updatedAt:(new Date).getTime()},{})),e.next=32,Promise.all(j);case 32:(T=e.sent)[2]=T[2].toObject(),R.push(T[2]),a({success:!0,user:T[0],game:G(T[2])}),w(n._id),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(0),w(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 43:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),M=function(){var e=f(u().mark((function e(t,r,n,a,i){var s,l,f,h,y,m,b,E,L,_,O,A,I,N,C,D,Y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j(a),s=R.find((function(e){return e.user._id.toString()===n._id.toString()})),P(s),l="medium"===s.risk&&2===Math.floor(a.tile)?1:Math.floor(a.tile),f=!1,"coin"!==s.deck[s.revealed.length][l]||n.limits.luck||"user"!==n.rank||((h=c(c({},s),{},{revealed:o(s.revealed)})).revealed.length+=1,y=T(h),m=Math.floor(11*Math.random())+20,y-s.amount>1e3*m&&(s.deck[s.revealed.length]=$(s.deck[s.revealed.length],l),f=!0)),b=s.revealed.length+1,"coin"===s.deck[s.revealed.length][l]&&x().games.ctotal.enabled&&!f&&("user"!==n.rank||n.limits.luck||(E=k(s.amount,n.balance,x().games.ctowers),Math.floor(100*Math.random())+1<E&&(s.deck[s.revealed.length]=$(s.deck[s.revealed.length],l)),0===E&&(L=S(s.amount,s.risk,b,x().games.cstowers),Math.floor(100*Math.random())+1<L&&(s.deck[s.revealed.length]=$(s.deck[s.revealed.length],l)))),("mod"===n.rank||"partner"===n.rank&&!n.limits.luck)&&(_=k(s.amount,n.balance,x().games.mctowers),Math.floor(100*Math.random())+1<_&&(s.deck[s.revealed.length]=$(s.deck[s.revealed.length],l)),0===_&&(O=S(s.amount,s.risk,b,x().games.mcstowers),Math.floor(100*Math.random())+1<O&&(s.deck[s.revealed.length]=$(s.deck[s.revealed.length],l))))),s.revealed.push({tile:l,row:s.deck[s.revealed.length]}),!("lose"===s.revealed[s.revealed.length-1].row[l]||s.revealed.length>=8)){e.next=31;break}if(A="lose"!==s.revealed[s.revealed.length-1].row[l]?T(s):0,I=Math.floor(A/s.amount*100),N=0===A||I>=125?s.amount:A,C=!0!==n.limits.blockSponsor?s.amount:0,!n.affiliates.referrer){e.next=18;break}return e.next=18,g.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{won:A},updatedAt:(new Date).getTime()},{new:!0}).select("won updatedAt").lean();case 18:return D=[],D=[d.findByIdAndUpdate(n._id,{$inc:{balance:A,"stats.won":A,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-N)<=0?-n.limits.betToWithdraw:-N,"limits.betToRain":Math.floor(n.limits.betToRain-N)<=0?-n.limits.betToRain:-N},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(s._id,{payout:A,multiplier:I,deck:s.deck,revealed:s.revealed,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier risk deck revealed user state updatedAt").lean()],A>0&&(D=[].concat(o(D),[v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*C)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.next=23,Promise.all(D);case 23:Y=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===Y[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:Y[0]}),A>0&&t.of("/socket/general").emit("rain",{rain:Y[2]}),B(t,c(c({},Y[1]),{},{user:U(n),method:"towers"})),s=Y[1],e.next=35;break;case 31:return e.next=33,p.findByIdAndUpdate(s._id,{revealed:s.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount risk deck revealed user state").lean();case 33:s=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===s._id.toString()})),1,s);case 35:i({success:!0,game:G(s)}),w(n._id),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(0),w(r.decoded._id),i({success:!1,error:{type:"error",message:e.t0.message}});case 43:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),$=function(e,t){var r=o(e);if("lose"===r[t])return r;r[t]="lose";for(var n=0;n<r.length;n++)if("lose"===r[n]&&t!==n){r[n]="coin";break}return r},q=function(){var e=f(u().mark((function e(t,r,n,o,a){var i,s,l,f,h,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=R.find((function(e){return e.user._id.toString()===n._id.toString()})),I(i),s=T(i),l=Math.floor(s/i.amount*100),f=l>=125?i.amount:s,h=!0!==n.limits.blockSponsor?i.amount:0,!n.affiliates.referrer){e.next=10;break}return e.next=10,g.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{won:s},updatedAt:(new Date).getTime()},{new:!0}).select("won updatedAt").lean();case 10:return e.next=12,Promise.all([d.findByIdAndUpdate(n._id,{$inc:{balance:s,"stats.won":s,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-f)<=0?-n.limits.betToWithdraw:-f,"limits.betToRain":Math.floor(n.limits.betToRain-f)<=0?-n.limits.betToRain:-f},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(i._id,{payout:s,multiplier:l,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier risk deck revealed user state updatedAt").lean(),v.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*h)}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 12:y=e.sent,R.splice(R.findIndex((function(e){return e._id.toString()===y[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:y[2]}),B(t,c(c({},y[1]),{},{user:U(n),method:"towers"})),a({success:!0,user:y[0],game:G(y[1])}),w(n._id),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),w(r.decoded._id),a({success:!1,error:{type:"error",message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),W=function(){var e=f(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.find({state:"created"}).select("amount risk deck revealed user state").lean();case 3:R=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();e.exports={towersGetGame:function(e){var t=R.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?G(R[t]):null},towersSendBetSocket:F,towersSendRevealSocket:M,towersSendCashoutSocket:q,towersInit:W}},6338:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){"use strict";d=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};l(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function h(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){h(a,n,o,i,c,"next",e)}function c(e){h(a,n,o,i,c,"throw",e)}i(void 0)}))}}var y=r(8749),m=r(2789),v=r(5632),g=r(2725),w=r(3702),b=r(8744),x=r(8875),k=r(6112),S=r(9221),E=r(7908).socketRemoveAntiSpam,L=r(8461).settingGet,_=r(1181),O=_.unboxCheckGetBoxDataData,A=_.unboxCheckGetBoxDataBox,j=_.unboxCheckSendBetData,P=_.unboxCheckSendBetBox,I=_.unboxCheckSendBetUser,T=_.unboxCheckSendBetSeed,N=_.unboxGetOutcomeItem,C=_.unboxSetOutcomeItem,G=_.findPercent,D=r(836),Y=D.generalUserGetRakeback,U=D.generalUserGetFormated,B=r(5507).generalAddBetsList,R=function(){var e=p(d().mark((function e(t,r,n,o,a){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(o),e.next=4,g.findById(o.boxId).select("name slug amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 4:i=e.sent,A(i),a({success:!0,box:i}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({success:!1,error:{type:"error",message:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),F=function(){var e=p(d().mark((function e(t,r,n,a,s){var l,f,h,_,O,A,D,R,F,M,$,q,W,V,z,J,H;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(a),e.next=4,g.findById(a.boxId).select("amount items state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 4:return l=e.sent,P(l),f=Math.floor(a.unboxCount),h=Math.floor(l.amount*f),I(n,h),e.next=11,v.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 11:return _=e.sent,T(_),e.next=15,b.findOne({state:"running"}).select("state").lean();case 15:O=e.sent,A=!0!==n.limits.blockSponsor?h:0,D=L(),R=Y(n),F=!0!==n.limits.blockSponsor?Math.floor(h*R.percentage*D.general.reward.multiplier):0,M=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*h):0,$=[],q=0,W=d().mark((function e(){var t,r,o,a,c,s,u,p,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="".concat(_.seedServer,"-").concat(_.nonce+i,"-").concat(_.seedClient),r=y.createHash("sha256").update(t).digest("hex"),o=parseInt(r.substr(0,8),16)%1e5,a=N(l,o),c=h/f,D.games.ctotal.enabled&&("user"!==n.rank||n.limits.luck||c<a.amountFixed&&(s=G((a.amountFixed-c)/1e3,D.games.cases),Math.floor(100*Math.random())+1<s&&(u=(u=l.items.filter((function(e){return e.item.amountFixed<a.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),a=C(u,a.amountFixed))),("mod"===n.rank||"partner"===n.rank&&!n.limits.luck)&&c<a.amountFixed&&(p=G((a.amountFixed-c)/1e3,D.games.mcases),Math.floor(100*Math.random())+1<p&&(m=(m=l.items.filter((function(e){return e.item.amountFixed<a.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),a=C(m,a.amountFixed)))),q+=a.amountFixed,$.push(w.create({amount:l.amount,payout:a.amountFixed,multiplier:Math.floor(a.amountFixed/l.amount*100),outcome:o,box:l._id,fair:{seed:_._id,nonce:_.nonce+i},user:n._id,state:"completed"}));case 8:case"end":return e.stop()}}),e)})),i=0;case 25:if(!(i<f)){e.next=30;break}return e.delegateYield(W(),"t0",27);case 27:i++,e.next=25;break;case 30:return e.next=32,x.find({enabled:"true"}).select("creators").lean();case 32:if(V=e.sent,z=V.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),!n.affiliates.referrer){e.next=37;break}return e.next=37,S.findOneAndUpdate({user:n._id,referrer:n.affiliates.referrer},{$inc:{bet:h,won:q,leaderboardpoints:z&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?h:0},updatedAt:(new Date).getTime()},{new:!0}).select("bet leaderboardpoints updatedAt").lean();case 37:return $=[m.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(q-h),xp:!0!==n.limits.blockSponsor?Math.floor(h*process.env.XP_RATE*D.general.reward.multiplier):0,"stats.bet":h,"stats.won":q,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-h)<=0?-n.limits.betToWithdraw:-h,"limits.betToRain":Math.floor(n.limits.betToRain-h)<=0?-n.limits.betToRain:-h,"leaderboard.points":null!==O&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?h:0,"affiliates.generated":M,"affiliates.leaderboardpoints":z&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?h:0,"rakeback.earned":F,"rakeback.available":F},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),v.findByIdAndUpdate(_._id,{$inc:{nonce:f}},{}),k.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*A)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(u($)),void 0!==n.affiliates.referrer&&M>0&&$.push(m.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":M,"affiliates.available":M},updatedAt:(new Date).getTime()},{})),e.next=41,Promise.all($);case 41:J=e.sent,H=(H=J.slice(3,3+f)).map((function(e){return e.toObject()})),t.of("/socket/general").emit("rain",{rain:J[2]}),s({success:!0,user:c(c({},J[0]),{},{balance:Math.floor(n.balance-h)}),games:H}),setTimeout(p(d().mark((function e(){var r,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.of("/socket/general").to(n._id.toString()).emit("user",{user:J[0]}),r=o(H);try{for(r.s();!(a=r.n()).done;)i=a.value,B(t,c(c({},i),{},{user:U(n),method:"unbox"}))}catch(e){r.e(e)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),5e3),E(n._id),e.next=54;break;case 50:e.prev=50,e.t1=e.catch(0),E(r.decoded._id),s({success:!1,error:{type:"error",message:e.t1.message}});case 54:case"end":return e.stop()}}),e,null,[[0,50]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();e.exports={unboxGetData:function(){return new Promise(function(){var e=p(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt").lean();case 3:n=e.sent,t({boxes:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}())},unboxGetBoxDataSocket:R,unboxSendBetSocket:F}},6701:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(6037);i.set("strictQuery",!0),i.set("autoIndex",!1);var c=function(){var e,t=(e=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.connect(process.env.DATABASE_URI,{useUnifiedTopology:!0,useNewUrlParser:!0,serverSelectionTimeoutMS:3e4});case 3:t=e.sent,console.log("MongoDB Connected: ".concat(t.connection.host)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("MongoDB Error: ".concat(e.t0.message)),process.exit(1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();e.exports=c},286:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BalanceTransaction",o)},2256:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcomes:[{type:Number}],slot:{type:Number},game:{type:n.Schema.ObjectId,ref:"BattlesGame"},user:{type:n.Schema.ObjectId,ref:"User"},luck:{type:Boolean,default:!1},bot:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BattlesBet",o)},5729:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},playerCount:{type:Number},mode:{type:String},boxes:[{box:{type:n.Schema.ObjectId,ref:"Box"},count:{type:Number}}],options:{levelMin:{type:Number},funding:{type:Number},cursed:{type:Boolean},terminal:{type:Boolean},private:{type:Boolean},affiliateOnly:{type:Boolean},trust:{type:Boolean},trust1:{type:Boolean}},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"BattlesBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("BattlesGame",o)},6769:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{main:{type:Number},sideLeft:{type:Number},sideRight:{type:Number}},payout:{type:Number},multiplier:{type:Number},cards:[{rank:{type:String},suit:{type:String}}],cardsLeft:[{rank:{type:String},suit:{type:String}}],cardsRight:[{rank:{type:String},suit:{type:String}}],actions:[{type:String}],seat:{type:Number},game:{type:n.Schema.ObjectId,ref:"BlackjackGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BlackjackBet",o)},2725:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},slug:{type:String},amount:{type:Number},levelMin:{type:Number},items:[{item:{type:n.Schema.ObjectId,ref:"LimitedItem"},tickets:{type:Number},tickets1:{type:Number},tickets2:{type:Number}}],categories:[{type:String}],type:{type:String},rewardDuration:{type:String},rewardRanking:{type:Number},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Box",o)},988:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},autoCashout:{type:Number},game:{type:n.Schema.ObjectId,ref:"CrashGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashBet",o)},8109:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"CrashSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"CrashBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("CrashGame",o)},4862:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashSeed",o)},6363:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String},currency:{type:String},amountCurrency:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CreditTransaction",o)},7263:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},address:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoAddress",o)},5102:(e,t,r)=>{var n=r(6037),o=new n.Schema({name:{type:String},price:{type:Number},fee:{type:Number}});e.exports=n.model("CryptoPrice",o)},4823:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},transaction:{type:String},sender:{type:String},receiver:{type:String},currency:{type:String},cryptoAmount:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoTransaction",o)},827:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DepositBonusTransaction",o)},5964:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},roll:{type:Number},game:{type:n.Schema.ObjectId,ref:"DuelsGame"},user:{type:n.Schema.ObjectId,ref:"User"},bot:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DuelsBet",o)},6533:(e,t,r)=>{var n=r(6037),o=new n.Schema({phrase:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("FilterPhrase",o)},4825:(e,t,r)=>{var n=r(6037),o=new n.Schema({code:{type:String},reward:{type:Number},redeemer:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftCode",o)},6930:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{transaction:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftTransaction",o)},8744:(e,t,r)=>{var n=r(6037),o=new n.Schema({winners:[{prize:{type:Number},points:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"}}],duration:{type:Number},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Leaderboard",o)},8875:(e,t,r)=>{var n=r(6037),o=new n.Schema({creators:{type:String},enabled:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("leaderboardCreator",o)},8921:(e,t,r)=>{var n=r(6037),o=new n.Schema({assetId:{type:String},name:{type:String},title:{type:String},image:{type:String},amount:{type:Number},amountFixed:{type:Number},accepted:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedItem",o)},6232:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{tradeId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedTransaction",o)},8702:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},minesCount:{type:Number},deck:[{type:String}],revealed:[{tile:{type:Number},value:{type:String}}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("MinesGame",o)},9221:(e,t,r)=>{var n=r(6037),o=new n.Schema({referrer:{type:n.Schema.ObjectId,ref:"User"},user:{type:n.Schema.ObjectId,ref:"User"},leaderboardpoints:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0},bet:{type:Number,default:0},won:{type:Number,default:0},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}});e.exports=n.model("MultiRedeem",o)},5241:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},rows:{type:Number},risk:{type:String},ticket:{type:Number},fair:{seedOld:{type:n.Schema.ObjectId,ref:"PlinkoSeed"},seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User"},stats:{balanceBefore:{type:Number,default:0}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PlinkoGame",o)},5182:(e,t,r)=>{var n=r(6037),o=new n.Schema({code:{type:String},reward:{type:Number},levelMin:{type:Number},redeemers:[{user:{type:n.Schema.ObjectId,ref:"User"}}],allowLevel:{type:Number},ipRestricktLevel:{type:Number},redeemptionsTotal:{type:Number,default:0},redeemptionsMax:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PromoCode",o)},6112:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},participants:[{user:{type:n.Schema.ObjectId,ref:"User"}}],totalUsers:{type:Number},creator:{type:n.Schema.ObjectId,ref:"User"},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Rain",o)},3304:(e,t,r)=>{var n=r(6037),o=new n.Schema({stats:{total:{user:{type:Number,default:0},unreadUsers:{type:Number,default:0},deposit:{type:Number,default:0},depositsNumber:{type:Number,default:0},unreadDeposits:{type:Number,default:0},withdraw:{type:Number,default:0},withdrawsNumber:{type:Number,default:0},unreadWithdraws:{type:Number,default:0}},limited:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},robux:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},steam:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},crypto:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},gift:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},credit:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}}},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Report",o)},2298:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},amountProcessed:{type:Number,default:0},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxOffer",o)},3844:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{productId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxTransaction",o)},6966:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},game:{type:n.Schema.ObjectId,ref:"RollGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollBet",o)},7067:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"RollSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"RollBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RollGame",o)},9940:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollSeed",o)},8455:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},color:{type:String},game:{type:n.Schema.ObjectId,ref:"RouletteGame"},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RouletteBet",o)},2299:(e,t,r)=>{var n=r(6037),o=new n.Schema({outcome:{type:Number},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockNum:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});o.virtual("bets",{ref:"RouletteBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RouletteGame",o)},8128:(e,t,r)=>{var n=r(6037),o=new n.Schema({general:{maintenance:{enabled:{type:Boolean}},rain:{enabled:{type:Boolean}},leaderboard:{enabled:{type:Boolean}},tip:{enabled:{type:Boolean}},affiliate:{enabled:{type:Boolean}},reward:{multiplier:{type:Number}}},chat:{mode:{type:String},enabled:{type:Boolean},rooms:{en:{enabled:{type:Boolean}},tr:{enabled:{type:Boolean}},de:{enabled:{type:Boolean}},es:{enabled:{type:Boolean}},beg:{enabled:{type:Boolean}},whale:{enabled:{type:Boolean}}}},games:{crash:{enabled:{type:Boolean}},roll:{enabled:{type:Boolean}},blackjack:{enabled:{type:Boolean}},duels:{enabled:{type:Boolean}},mines:{enabled:{type:Boolean}},towers:{enabled:{type:Boolean}},unbox:{enabled:{type:Boolean}},battles:{enabled:{type:Boolean}},upgrader:{enabled:{type:Boolean}},plinko:{enabled:{type:Boolean}},roulette:{enabled:{type:Boolean}},cases:[{value:{type:Number},percent:{type:Number}}],cbattles:{enabled:{type:Boolean}},cmbattles:{enabled:{type:Boolean}},croulette:{enabled:{type:Boolean}},cblackjack:{enabled:{type:Boolean},value:{type:Number}},ctotal:{enabled:{type:Boolean}},mcases:[{value:{type:Number},percent:{type:Number}}],cmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],csmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],ctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],cstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mcmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcsmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],crashees:[{value:{type:Number},percent:{type:Number}}],slides:[{value:{type:Number},percent:{type:Number}}]},robux:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},limited:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},steam:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},crypto:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},gift:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},credit:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},depositbonus:{enabled:{type:Boolean},amount:{type:Number},famount:{type:Number}},rainrestrict:{enabled:{type:Boolean}},redeem:{enabled:{type:Boolean},amount:{type:Number}}});e.exports=n.model("Setting",o)},5958:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("SteamTransaction",o)},5329:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},sender:{user:{type:n.Schema.ObjectId,ref:"User"}},receiver:{user:{type:n.Schema.ObjectId,ref:"User"}},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TipTransaction",o)},4269:(e,t,r)=>{var n=r(6037),o=new n.Schema({token:{type:String},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Token",o)},4946:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},risk:{type:String},deck:[[{type:String}]],revealed:[{tile:{type:Number},row:[{type:String}]}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TowersGame",o)},3702:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcome:{type:Number},box:{type:n.Schema.ObjectId,ref:"Box"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UnboxGame",o)},2974:(e,t,r)=>{var n=r(6037),o=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},mode:{type:String},items:[{assetid:{type:String},name:{type:String},image:{type:String},amount:{type:Number},price:{type:Number},count:{type:Number}}],percentage:{type:Number},outcome:{type:Number},transaction:{type:n.Schema.ObjectId,ref:"SteamTransaction"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},publicSeed:{type:String},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UpgraderGame",o)},2789:(e,t,r)=>{var n=r(6037),o=new n.Schema({local:{email:{type:String},emailVerified:{type:Boolean},password:{type:String},iv:{type:String},creditTicket:{type:String}},roblox:{id:{type:String},cookie:{type:String},createdAt:{type:Date}},google:{id:{type:String},email:{type:String}},discord:{id:{type:String}},username:{type:String},avatar:{type:String},rank:{type:String,default:"user"},fullrank:{type:String,default:"user"},balance:{type:Number,default:0},xp:{type:Number,default:0},vault:{amount:{type:Number,default:0},expireAt:{type:Date}},stats:{bet:{type:Number,default:0},won:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},leaderboard:{points:{type:Number,default:0}},limits:{betToWithdraw:{type:Number,default:0},betToRain:{type:Number,default:0},blockAffiliate:{type:Boolean,default:!1},blockRain:{type:Boolean,default:!1},blockTip:{type:Boolean,default:!1},limitTip:{type:Number,default:0},blockSponsor:{type:Boolean,default:!1},blockLeaderboard:{type:Boolean,default:!1},luck:{type:Boolean,default:!1}},rakeback:{earned:{type:Number,default:0},available:{type:Number,default:0}},affiliates:{code:{type:String},leaderboardpoints:{type:Number,default:0},referred:{type:Number,default:0},bet:{type:Number,default:0},deposit:{type:Number,default:0},earned:{type:Number,default:0},available:{type:Number,default:0},generated:{type:Number,default:0},referrer:{type:n.Schema.ObjectId,ref:"User"},referredAddress:{type:String},referredAt:{type:Date},redeemedCode:{type:String},depobonus:{type:Number,default:0},cashOut:{type:Number,default:0},cashOutAt:{type:Date}},fair:{clientSeed:{type:String}},anonymous:{type:Boolean,default:!1},proxy:{type:String},ips:[{address:{type:String},createdAt:{type:Date,default:Date.now}}],mute:{expire:{type:Date},reason:{type:String}},ban:{expire:{type:Date},reason:{type:String}},verifiedAt:{type:Date},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("User",o)},1545:(e,t,r)=>{var n=r(6037),o=new n.Schema({items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}],user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserInventory",o)},5632:(e,t,r)=>{var n=r(6037),o=new n.Schema({seedClient:{type:String},seedServer:{type:String},hash:{type:String},nonce:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserSeed",o)},4276:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(829);r(2789),e.exports={authorizeUser:function(e){return function(){var t,r=(t=o().mark((function t(r,n,a){var c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof(c=r.header("x-auth-token"))||!1!==e){t.next=6;break}return r.user=null,t.abrupt("return",a());case 6:if("string"==typeof c){t.next=8;break}return t.abrupt("return",n.status(401).json({success:!1,message:"Authorization denied."}));case 8:return t.prev=8,t.next=11,i.verify(c,process.env.TOKEN_SECRET);case 11:r.user=t.sent,a(),t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(8),t.abrupt("return",n.status(401).json({success:!1,error:{type:"error",message:"Authorization denied."}}));case 18:case"end":return t.stop()}}),t,null,[[8,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}()},authorizeAdmin:function(e,t,r){try{if("admin"!==e.user.rank)return t.status(403).json({success:!1,message:"You are not authorized to access this route."});r()}catch(e){return t.status(403).json({success:!1,error:{type:"error",message:"You are not authorized to access this route."}})}}}},5734:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(857).RateLimiterMemory,s=new c({points:120,duration:60}),u=new c({points:8,duration:60}),l=function(){var e=i(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.next=4,s.consume(a);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),f=function(){var e=i(o().mark((function e(t,r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.next=4,u.consume(a);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}();e.exports={rateLimiter:s,rateLimiterStrict:u,rateLimiterMiddleware:l,rateLimiterStrictMiddleware:f}},7348:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(7252),s=r(4729),u=r(6037),l=r(8749),f=c.Router(),d=r(573),h=r(2789),p=r(5632),y=r(4269),m=r(3304),v=r(4276).authorizeUser,g=r(5734).rateLimiterStrictMiddleware,w=r(7587),b=w.captchaCheckData,x=w.captchaGetData,k=r(5165),S=k.emailSend,E=k.getCreditTicket,L=r(84).authGenerateJwtToken,_=r(190),O=_.authCheckPostCredentialsData,A=_.authCheckPostCredentialsUser,j=_.authCheckPostCredentialsRegisterData,P=_.authCheckPostCredentialsRegisterUser,I=_.authCheckPostCredentialsLinkData,T=_.authCheckPostCredentialsLinkUser,N=_.authCheckPostCredentialsRequestData,C=_.authCheckPostCredentialsRequestUser,G=_.authCheckPostCredentialsRequestToken,D=_.authCheckPostCredentialsVerifyData,Y=_.authCheckPostCredentialsVerifyToken,U=_.authCheckPostCredentialsResetData,B=_.authCheckPostCredentialsResetToken,R=_.authCheckPostCredentialsUsernameData,F=_.authCheckPostCredentialsUsernameUser,M=_.authCheckPostCredentialsRegisterUserName,$=_.authCheckPostCredentialsProfileImage;e.exports=function(){return f.post("/",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,c,u,l,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(t.body),e.next=4,x(t.body.captcha);case 4:return n=e.sent,b(n),a=t.body.email.toLowerCase().trim(),i=t.body.password.trim(),e.next=10,E(i);case 10:return c=e.sent,e.next=13,h.findOne({"local.email":a}).select("local ips").lean();case 13:return u=e.sent,e.next=16,s.compare(i,null!==u&&void 0!==u.local?u.local.password:"");case 16:if(l=e.sent,A(u,l),f=t.headers["x-forwarded-for"]||t.socket.remoteAddress,u.ips=u.ips||[],u.ips.unshift({address:f}),u.local.creditTicket){e.next=27;break}return e.next=24,h.findByIdAndUpdate(u._id,{"local.iv":c.iv,"local.creditTicket":c.encryptedData,ips:u.ips.slice(0,25),updatedAt:(new Date).getTime()},{new:!0});case 24:u=e.sent,e.next=30;break;case 27:return e.next=29,h.findByIdAndUpdate(u._id,{ips:u.ips.slice(0,25),updatedAt:(new Date).getTime()},{new:!0});case 29:u=e.sent;case 30:d=L(u._id),r.status(200).json({success:!0,token:d,user:u}),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 37:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/register",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,c,f,d,y,v,g,w,k,S,_,O,A,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(t.body),e.next=4,x(t.body.captcha);case 4:return n=e.sent,b(n),a=t.body.username.trim(),i=t.body.email.toLowerCase().trim(),c=t.body.password.trim(),e.next=11,E(c);case 11:return f=e.sent,e.next=14,h.findOne({"local.email":i}).select("local").lean();case 14:return d=e.sent,P(d),e.next=18,h.findOne({username:a}).select("local").lean();case 18:return y=e.sent,M(y),e.next=22,s.genSalt(10);case 22:return v=e.sent,e.next=25,s.hash(c,v);case 25:return c=e.sent,g=[l.randomBytes(8).toString("hex"),l.randomBytes(8).toString("hex")],w=[l.randomBytes(24).toString("hex"),l.randomBytes(24).toString("hex")],k=[l.createHash("sha256").update(w[0]).digest("hex"),l.createHash("sha256").update(w[1]).digest("hex")],S=t.headers["x-forwarded-for"]||t.socket.remoteAddress,_=new u.Types.ObjectId,O=Math.floor(39*Math.random())+1,e.next=34,Promise.all([h.create({_id:_,username:a,local:{email:t.body.email.toLowerCase(),password:c,iv:f.iv,creditTicket:f.encryptedData},ips:[{address:S}],avatar:"/public/img/avatar/".concat(O,".webp")}),m.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1,"stats.total.unreadUsers":1}},{upsert:!0}),p.create({seedClient:g[0],seedServer:w[0],hash:k[0],nonce:1,user:_,state:"active"}),p.create({seedClient:g[1],seedServer:w[1],hash:k[1],nonce:1,user:_,state:"created"})]);case 34:(A=e.sent)[0]=A[0].toObject(),delete A[0].local.password,I=L(A[0]._id),r.status(200).json({success:!0,token:I,user:A[0]}),e.next=44;break;case 41:e.prev=41,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 44:case"end":return e.stop()}}),e,null,[[0,41]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/username",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(t.body),n=t.body.username.trim(),e.next=5,Promise.all([h.findById(t.user._id).select("local").lean(),h.findOne({username:n})]);case 5:return a=e.sent,F(a),e.next=9,h.findByIdAndUpdate(t.user._id,{username:n},{new:!0}).select("local.email username").lean();case 9:a=e.sent,r.status(200).json({success:!0,user:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/profileimage",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a,c,s,u,l,f,p,y,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.findById(t.user._id).select("local avatar").lean()]);case 3:return n=e.sent,a=t.body.image,$(n),c=n[0].avatar||"",s=c.split("/").pop(),u=Array.from({length:40},(function(e,t){return"".concat(t+1,".webp")})),l=a.match(/^data:image\/([a-zA-Z0-9+]+);base64,/),f=l?l[1]:"png",p=s,u.includes(s)||void 0===p?(y=Date.now(),m=Math.floor(1e6*Math.random()),p="img_".concat(y,"_").concat(m)):((v=p.split(".")).pop(),p=v.join(".")),new Promise(function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d.img(a,"./bin/public/img/avatar/",p,(function(e,r){if(e)throw Error(e.message);t()}))}catch(e){r(e)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.next=16,h.findByIdAndUpdate(t.user._id,{avatar:"/public/img/avatar/"+p+"."+f},{new:!0}).select("local.email username").lean();case 16:n=e.sent,r.status(200).json({success:!0,user:n}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/link",[g,v(!0)],function(){var e=i(o().mark((function e(t,r){var n,a,i,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(t.body),n=t.body.email.trim(),a=t.body.password.trim(),e.next=6,E(a);case 6:return i=e.sent,e.next=9,Promise.all([h.findById(t.user._id).select("local").lean(),h.findOne({"local.email":n}).select("local").lean()]);case 9:return c=e.sent,T(c),e.next=13,s.genSalt(10);case 13:return u=e.sent,e.next=16,s.hash(a,u);case 16:return a=e.sent,e.next=19,h.findByIdAndUpdate(t.user._id,{local:{email:t.body.email,password:a,iv:i.iv,creditTicket:i.encryptedData}},{new:!0}).select("local.email local.emailVerified").lean();case 19:c=e.sent,r.status(200).json({success:!0,user:c}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/request",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(t.body),e.next=4,h.findOne({"local.email":t.body.email}).select("local").lean();case 4:return n=e.sent,C(n,t.body),e.next=8,y.findOne({type:t.body.type,user:n._id}).select("type user updatedAt").lean();case 8:return a=e.sent,G(a),i=l.randomBytes(16).toString("hex"),e.next=13,y.findOneAndUpdate({type:t.body.type,user:n._id},{token:i,updatedAt:new Date},{upsert:!0});case 13:return c="verify"===t.body.type?"Please verify your e-mail address on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/verify?userId=").concat(n._id,"&token=").concat(i):"Please reset your password on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/reset?userId=").concat(n._id,"&token=").concat(i),e.next=16,S(n.local.email,"verify"===t.body.type?"Verify your e-mail address.":"Reset your password.",c);case 16:r.status(200).json({success:!0}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/verify",g,function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(t.body),e.next=4,y.findOne({token:t.body.token,type:"verify",user:t.body.userId}).select("token type user updatedAt").lean();case 4:return n=e.sent,Y(n),e.next=8,Promise.all([y.findByIdAndDelete(n._id),h.findByIdAndUpdate(n.user,{"local.emailVerified":!0},{})]);case 8:r.status(200).json({success:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()),f.post("/reset",g,function(){var e=i(o().mark((function e(t,r){var n,a,i,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(t.body),e.next=4,x(t.body.captcha);case 4:return n=e.sent,b(n),e.next=8,y.findOne({token:t.body.token,type:"reset",user:t.body.userId}).select("token type user updatedAt").lean();case 8:return a=e.sent,B(a),i=t.body.password.trim(),e.next=13,E(i);case 13:return c=e.sent,e.next=16,s.genSalt(10);case 16:return u=e.sent,e.next=19,s.hash(i,u);case 19:return i=e.sent,e.next=22,Promise.all([y.findByIdAndDelete(a._id),h.findByIdAndUpdate(a.user,{"local.password":i,"local.iv":c.iv,"local.creditTicket":c.encryptedData},{})]);case 22:r.status(200).json({success:!0}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r){return e.apply(this,arguments)}}()),f}},9794:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(7252).Router(),s=r(84).authGetDiscordToken;e.exports=function(){return c.get("/",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.redirect("https://discord.com/api/oauth2/authorize?client_id=".concat(process.env.DISCORD_CLIENT_ID,"&redirect_uri=").concat(process.env.SERVER_BACKEND_URL,"/auth/discord/callback&response_type=code&scope=identify%20guilds"))}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c.get("/callback",function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.query.code,e.next=4,s(n);case 4:a=e.sent,r.render("discord",{success:!0,tokenDiscord:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.render("discord",{success:!1,tokenDiscord:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),c}},585:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(7252).Router(),s=r(8278),u=r(1147).Strategy,l=r(829),f=r(2789),d=r(4276).authorizeUser,h=r(5734).rateLimiterMiddleware;s.use(new u({returnURL:"https://wesuccess.biz/api/auth/steam/return",realm:"https://wesuccess.biz/",apiKey:"AC67207852844E3F8C13C929D26B4C78"},function(){var e=i(o().mark((function e(t,r,n){var a,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.id,e.next=4,f.findOne({"steam.id":a});case 4:if(i=e.sent){e.next=9;break}return e.next=8,f.create({steam:{id:a,username:r.displayName,avatar:(null===(c=r.photos)||void 0===c||null===(c=c[2])||void 0===c?void 0:c.value)||""},createdAt:new Date,updatedAt:new Date});case 8:i=e.sent;case 9:return e.abrupt("return",n(null,i));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",n(e.t0,null));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n){return e.apply(this,arguments)}}())),s.serializeUser((function(e,t){return t(null,e._id)})),s.deserializeUser(function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.findById(t);case 2:n=e.sent,r(null,n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.exports=function(){return c.get("/me",[h,d(!0)],function(){var e=i(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.findById(t.user._id).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 3:n=e.sent,r.status(200).json({success:!0,user:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),c.get("/steam",s.authenticate("steam")),c.get("/steam/return",s.authenticate("steam",{failureRedirect:"/"}),function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.user,console.log("user",n),a=l.sign({id:n._id},process.env.JWT_SECRET,{expiresIn:"7d"}),r.redirect("".concat(process.env.SERVER_FRONTEND_URL,"/steam-success?token=").concat(a));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c.use("/credentials",r(7348)()),c.use("/roblox",r(2724)()),c.use("/discord",r(9794)()),c}},2724:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(7906),l=r(7252).Router(),f=r(2789),d=r(4276).authorizeUser,h=r(5734).rateLimiterStrictMiddleware,p=r(9472).requestGetProxy,y=r(84).authGenerateJwtToken,m=r(168),v=m.authCheckPostRobloxData,g=m.authCheckPostRobloxUser,w=m.authCheckPostRobloxTwoStepData,b=m.authCheckPostRobloxTwoStepUser,x=m.authCheckPostRobloxCookieData,k=m.authCheckPostRobloxCookieUser,S=m.authSetUser,E=m.authRobloxGetIntent,L=m.authRobloxGetToken,_=m.authRobloxGetUser,O=m.authRobloxGetUserAge,A=m.authRobloxGetAvatar,j=m.authRobloxGetServerNonce,P=m.authGetRobloxSecurityQuestion,I=m.authGetRobloxGamesData,T=m.authSendRobloxChallengeContinue,N=m.authSendRobloxSecurityAnswer,C=m.authSendRobloxTwoStepVerify,G=m.authSendRobloxLogin,D=m.authSendRobloxTwoStepLogin;m.authRobloxGetUserDefault,e.exports=function(){return l.post("/",[h,d(!1)],function(){var e=s(i().mark((function e(t,r){var n,o,a,c,s,l,d,h,m,w,b,x,k,C,D,Y;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,o=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,o);case 6:return a=e.sent,c="http://".concat(a.username,":").concat(a.password,"@").concat(a.proxy_address,":").concat(a.port),e.next=10,L(c);case 10:if(s=e.sent,l={ctype:"Username",cvalue:t.body.username,password:t.body.password},"captcha"!==t.body.step&&"security"!==t.body.step){e.next=23;break}return l.captchaProvider="PROVIDER_ARKOSE_LABS",l.captchaId=t.body.captchaId,l.captchaToken=t.body.captchaToken,l.challengeId=t.body.challengeId,l.challengeType="captcha",l.challengeMetadata=JSON.stringify({unifiedCaptchaId:l.captchaId,captchaToken:l.captchaToken,actionType:"Login"}),e.next=21,T(c,s,null,l);case 21:e.next=29;break;case 23:return e.next=25,j(c);case 25:return d=e.sent,e.next=28,E(d);case 28:l.secureAuthenticationIntent=e.sent;case 29:if("security"!==t.body.step){e.next=35;break}return e.next=32,N(s,c,{answer:t.body.answer,userId:t.userId,sessionId:t.body.sessionId});case 32:h=e.sent,l.securityQuestionSessionId=t.body.sessionId,l.securityQuestionRedemptionToken=h.securityQuestionRedemptionToken;case 35:return e.next=37,G(t,s,c,l);case 37:if(void 0===(m=e.sent).captchaId){e.next=42;break}r.status(200).json({success:!0,step:"captcha",challengeId:m.challengeId,captchaId:m.captchaId,captchaBlob:m.captchaBlob,secureAuthenticationIntent:m.secureAuthenticationIntent}),e.next=80;break;case 42:if(void 0===m.sessionId){e.next=53;break}return e.next=45,P(s,c,m.userId,m.sessionId);case 45:return w=e.sent,e.next=48,I(s,c,w.answerChoices);case 48:b=(b=e.sent).map((function(e){return{id:e.id,name:e.name,description:e.description}})),r.status(200).json({success:!0,step:"security",challengeId:t.body.challengeId,captchaId:t.body.captchaId,captchaToken:t.body.captchaToken,sessionId:m.sessionId,userId:m.userId,answers:b}),e.next=80;break;case 53:if(void 0===m.twoStepVerificationData){e.next=57;break}r.status(200).json({success:!0,step:"twostep",type:m.twoStepVerificationData.mediaType,ticket:m.twoStepVerificationData.ticket,robloxId:m.user.id}),e.next=80;break;case 57:return console.log("1111"),e.next=60,_(c,m.cookie);case 60:return x=e.sent,e.next=63,Promise.all([O(c,x.id),A(c,x.id)]);case 63:if(k=e.sent,null===t.user){e.next=75;break}return e.next=67,Promise.all([f.findById(t.user._id).select("roblox.id").lean(),f.findOne({"roblox.id":x.id}).select("roblox.id").lean()]);case 67:return C=e.sent,g(C[0],C[1]),e.next=71,f.findByIdAndUpdate(t.user._id,{roblox:{id:x.id,cookie:m.cookie,createdAt:new Date(k[0]).getTime()},username:u.escape(x.name),avatar:k[1],proxy:c,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 71:C=e.sent,r.status(200).json({success:!0,user:C}),e.next=80;break;case 75:return e.next=77,S(c,n,m.cookie,x,k[0],k[1]);case 77:D=e.sent,Y=y(D._id),r.status(200).json({success:!0,token:Y,user:D});case 80:e.next=85;break;case 82:e.prev=82,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 85:case"end":return e.stop()}}),e,null,[[0,82]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/twostep",[h,d(!1)],function(){var e=s(i().mark((function e(t,r){var n,o,a,c,s,l,d,h,m,v,g,x,k;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,o=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,o);case 6:return a=e.sent,c="http://".concat(a.username,":").concat(a.password,"@").concat(a.proxy_address,":").concat(a.port),e.next=10,L(c);case 10:return s=e.sent,l={actionType:"Login",challengeId:t.body.ticket,code:t.body.code},e.next=14,C(c,s,null,t.body.robloxId,t.body.type,l);case 14:return d=e.sent,l={challengeId:l.challengeId,verificationToken:d.verificationToken,rememberDevice:!0},e.next=18,D(s,c,t.body.robloxId,l);case 18:return h=e.sent,e.next=21,_(c,h.cookie);case 21:return m=e.sent,e.next=24,Promise.all([O(c,m.id),A(c,m.id)]);case 24:if(v=e.sent,null===t.user){e.next=36;break}return e.next=28,Promise.all([f.findById(t.user._id).select("roblox.id").lean(),f.findOne({"roblox.id":m.id}).select("roblox.id").lean()]);case 28:return g=e.sent,b(g[0],g[1]),e.next=32,f.findByIdAndUpdate(t.user._id,{roblox:{id:m.id,cookie:h.cookie,createdAt:new Date(v[0]).getTime()},username:u.escape(m.name),avatar:v[1],proxy:c,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 32:g=e.sent,r.status(200).json({success:!0,user:g}),e.next=41;break;case 36:return e.next=38,S(c,n,h.cookie,m,v[0],v[1]);case 38:x=e.sent,k=y(x._id),r.status(200).json({success:!0,token:k,user:x});case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 46:case"end":return e.stop()}}),e,null,[[0,43]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/cookie",[h,d(!1)],function(){var e=s(i().mark((function e(t,r){var n,a,c,s,l,d,h,m,v,g,w,b,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.next=6,p(n,a);case 6:return c=e.sent,console.log("user proxy: ",c),s="http://".concat(c.username,":").concat(c.password,"@").concat(c.proxy_address,":").concat(c.port),l=t.body.cookie.replace(".ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_",""),e.next=12,_(s,l);case 12:return d=e.sent,h=o(d,2),m=h[0],v=h[1],console.log("roblox user: ",m),t.body.cookie=v,e.next=20,Promise.all([O(s,m.id),A(s,m.id)]);case 20:if(g=e.sent,null===t.user){e.next=32;break}return e.next=24,Promise.all([f.findById(t.user._id).select("roblox.id").lean(),f.findOne({"roblox.id":m.id}).select("roblox.id").lean()]);case 24:return w=e.sent,k(w[0],w[1]),e.next=28,f.findByIdAndUpdate(t.user._id,{roblox:{id:m.id,cookie:t.body.cookie,createdAt:new Date(g[0]).getTime()},username:u.escape(m.name),avatar:g[1],proxy:s,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 28:w=e.sent,r.status(200).json({success:!0,user:w}),e.next=37;break;case 32:return e.next=34,S(s,n,t.body.cookie,m,g[0],g[1]);case 34:b=e.sent,E=y(b._id),r.status(200).json({success:!0,token:E,user:b});case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 42:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r){return e.apply(this,arguments)}}()),l}},1160:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(7252),l=(r(8749),u.Router()),f=r(2789),d=r(7263),h=r(4823),p=r(827),y=(r(5958),r(6363),r(3304)),m=r(9221),v=r(5734).rateLimiterMiddleware,g=r(7402),w=(g.callbackCheckPostCoinpaymentsData,g.callbackCheckPostCoinpaymentsHmac,g.callbackCheckPostCoinpaymentsTransaction),b=(g.callbackCheckPostSkinifyData,g.callbackCheckPostSkinifyToken,g.callbackCheckPostSkinifyTransaction,g.callbackCheckPostZebrasmarketData,g.callbackCheckPostZebrasmarketSignature,g.callbackCheckPostZebrasmarketTransaction,g.callbackCoinpaymentsCreateHmac,g.callbackZebrasmarketCreateSignature,g.callbackCheckPostOxapayData),x=g.callbackOxapayCreateHmac,k=g.callbackCheckPostOxapayHmac,S=g.callbackOxapayCreatePayoutHmac,E=r(3818),L=(E.cashierCryptoGenerateAddress,E.cashierCryptoGetStableCurrencyName),_=r(8461).settingGet,O=[],A=[];e.exports=function(e){return l.post("/goon-oxapay",v,function(){var t=s(o().mark((function t(r,n){var i,c,s,u,l,v,g,S,E,A,j,P,I,T,N,C,G,D,Y,U,B,R,F,M,$,q,W,V,z,J,H,X,K,Z,Q,ee,te,re;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("ox-log: ",r.headers,r.body),b(r.headers,r.body),i=x(r.body),console.log(i.toString(),":",r.headers.hmac.toString()),k(i,r.headers),!r.body.txs||!Array.isArray(r.body.txs)){t.next=65;break}return c=r.body.track_id,s=L(r.body.txs[0].currency.toLowerCase(),r.body.txs[0].network.toLowerCase()),w(c,O),console.log("yeah"),t.prev=11,O.push(c.toString()),t.next=15,Promise.all([d.findOne({name:s,address:r.body.txs[0].address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),h.findOne({"data.transaction":r.body.txs[0].tx_hash}).select("amount data type user state").lean()]);case 15:if(u=t.sent,"static_address"!==r.body.type||"Paid"!==r.body.status||null===u[0]||null!==u[1]){t.next=54;break}if(l=[],v=_(),g=1,S=0,E=0,null===u[0]){t.next=32;break}return t.next=25,Promise.all([f.findById(u[0].user._id).select(" username stats affiliates").lean()]);case 25:if(A=t.sent,S=A[0].stats.deposit,void 0===u[0].user.affiliates.referrer){t.next=32;break}return t.next=30,Promise.all([f.findById(u[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 30:j=t.sent,E=j[0].affiliates.depobonus;case 32:if(v.depositbonus.enabled&&(g=E>0?E>v.depositbonus.famount?1+E/100:1+v.depositbonus.famount/100:0===S?1+v.depositbonus.famount/100:1+v.depositbonus.amount/100),console.log("bonuspercent",g),P=Math.floor(1e3*r.body.txs[0].value),I=g*Math.floor(P/process.env.COIN_RATE),T=v.depositbonus.enabled?10*(g-1)*Math.floor(P/process.env.COIN_RATE)+Math.floor(P/process.env.COIN_RATE):I,l=[f.findByIdAndUpdate(u[0].user._id,{$inc:{balance:I,"stats.deposit":Math.floor(P/process.env.COIN_RATE),"limits.betToWithdraw":T},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.create({amount:Math.floor(P/process.env.COIN_RATE),data:{providerId:c,transaction:r.body.txs[0].tx_hash,currency:s,cryptoAmount:r.body.txs[0].received_amount},type:"deposit",user:u[0].user,state:"completed"}),p.create({amount:I-Math.floor(P/process.env.COIN_RATE),type:"depositBonus",user:u[0].user,state:"completed"}),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":P,"stats.total.depositsNumber":1,"stats.total.unreadDeposits":1,"stats.crypto.deposit":P}},{upsert:!0})],void 0===u[0].user.affiliates.referrer){t.next=42;break}return l.push(f.findByIdAndUpdate(u[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":Math.floor(P/process.env.COIN_RATE)},updatedAt:(new Date).getTime()},{})),t.next=42,m.findOneAndUpdate({user:u[0].user._id,referrer:u[0].user.affiliates.referrer},{$inc:{deposit:Math.floor(P/process.env.COIN_RATE)},updatedAt:(new Date).getTime()},{new:!0}).select("deposit updatedAt").lean();case 42:return t.next=44,Promise.all(l);case 44:return(N=t.sent)[1]=N[1].toObject(),C={unreadDeposits:N[3].stats.total.unreadDeposits,depositsNumber:N[3].stats.total.depositsNumber},e.of("/socket/general").to(N[0]._id.toString()).emit("user",{user:N[0]}),e.of("/socket/cashier").to(N[1].user.toString()).emit("cryptoTransaction",{transaction:N[1]}),t.next=51,f.find({rank:"admin",fullrank:"fulladmin"}).lean();case 51:G=t.sent,D=a(G);try{for(D.s();!(Y=D.n()).done;)U=Y.value,e.of("/socket/general").to(U._id.toString()).emit("notifyUnreadStats",{adminUnreadStats:C})}catch(e){D.e(e)}finally{D.f()}case 54:O.splice(O.indexOf(c.toString()),1),n.status(200).json({success:!0}),t.next=63;break;case 58:t.prev=58,t.t0=t.catch(11),console.log(t.t0),O.splice(O.indexOf(c.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t0.message}});case 63:t.next=122;break;case 65:return B=r.body.trackId,R=L(r.body.currency.toLowerCase(),r.body.network.toLowerCase()),w(B,O),console.log("yeah no"),t.prev=69,O.push(B.toString()),t.next=73,Promise.all([d.findOne({name:R,address:r.body.address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),h.findOne({"data.transaction":r.body.txID}).select("amount data type user state").lean()]);case 73:if(F=t.sent,"payment"!==r.body.type||"Paid"!==r.body.status||null===F[0]||null!==F[1]){t.next=113;break}if(M=[],$=_(),q=1,W=0,V=0,null===F[0]){t.next=90;break}return t.next=83,Promise.all([f.findById(F[0].user._id).select(" username stats affiliates").lean()]);case 83:if(z=t.sent,W=z[0].stats.deposit,void 0===F[0].user.affiliates.referrer){t.next=90;break}return t.next=88,Promise.all([f.findById(F[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 88:J=t.sent,V=J[0].affiliates.depobonus;case 90:if($.depositbonus.enabled&&(q=V>0?V>$.depositbonus.famount?1+V/100:1+$.depositbonus.famount/100:0===W?1+$.depositbonus.famount/100:1+$.depositbonus.amount/100),console.log("bonuspercent",q),H=Math.floor(1e3*r.body.price),X=q*Math.floor(H/process.env.COIN_RATE),K=$.depositbonus.enabled?10*(q-1)*Math.floor(H/process.env.COIN_RATE)+Math.floor(H/process.env.COIN_RATE):X,M=[f.findByIdAndUpdate(F[0].user._id,{$inc:{balance:X,"stats.deposit":Math.floor(H/process.env.COIN_RATE),"limits.betToWithdraw":K},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.create({amount:Math.floor(H/process.env.COIN_RATE),data:{providerId:B,transaction:r.body.txID,currency:R,cryptoAmount:r.body.receivedAmount},type:"deposit",user:F[0].user,state:"completed"}),p.create({amount:X-Math.floor(H/process.env.COIN_RATE),type:"depositBonus",user:F[0].user,state:"completed"}),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":H,"stats.total.depositsNumber":1,"stats.total.unreadDeposits":1,"stats.crypto.deposit":H}},{upsert:!0})],void 0===F[0].user.affiliates.referrer){t.next=100;break}return M.push(f.findByIdAndUpdate(F[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":Math.floor(H/process.env.COIN_RATE)},updatedAt:(new Date).getTime()},{})),t.next=100,m.findOneAndUpdate({user:F[0].user._id,referrer:F[0].user.affiliates.referrer},{$inc:{deposit:Math.floor(H/process.env.COIN_RATE)},updatedAt:(new Date).getTime()},{new:!0}).select("deposit updatedAt").lean();case 100:return t.next=102,Promise.all(M);case 102:return(Z=t.sent)[1]=Z[1].toObject(),Z[3].stats.total.depositsNumber,Z[3].stats.total.unreadDeposits,e.of("/socket/general").to(Z[0]._id.toString()).emit("user",{user:Z[0]}),e.of("/socket/cashier").to(Z[1].user.toString()).emit("cryptoTransaction",{transaction:Z[1]}),t.next=110,f.find({rank:"admin",fullrank:"fulladmin"}).lean();case 110:Q=t.sent,ee=a(Q);try{for(ee.s();!(te=ee.n()).done;)re=te.value,e.of("/socket/general").to(re._id.toString()).emit("notifyUnreadStats",{adminUnreadStats})}catch(e){ee.e(e)}finally{ee.f()}case 113:O.splice(O.indexOf(B.toString()),1),n.status(200).json({success:!0}),t.next=122;break;case 117:t.prev=117,t.t1=t.catch(69),console.log(t.t1),O.splice(O.indexOf(B.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t1.message}});case 122:t.next=128;break;case 124:t.prev=124,t.t2=t.catch(0),console.log(t.t2),n.status(500).json({success:!1,error:{type:"error",message:t.t2.message}});case 128:case"end":return t.stop()}}),t,null,[[0,124],[11,58],[69,117]])})));return function(e,r){return t.apply(this,arguments)}}()),l.post("/goon-oxapay-payout",v,function(){var t=s(o().mark((function t(r,n){var a,i,c,s,u,l,d,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("ox-payout-log: ",r.headers,r.body),b(r.headers,r.body),a=S(r.body),console.log(a.toString(),":",r.headers.hmac.toString()),i=r.body.track_id,c="usdt"===r.body.currency.toLowerCase()?L(r.body.currency.toLowerCase(),r.body.network.toLowerCase()):r.body.currency.toLowerCase(),w(i,A),t.prev=8,A.push(i.toString()),t.next=12,Promise.all([h.findOne({type:"withdraw","data.receiver":r.body.address,"data.currency":c,state:"pending"}).select("amount data type user state").lean()]);case 12:if(s=t.sent,console.log("find withdraw db: ",s[0]),"payout"!==r.body.type||"Confirmed"!==r.body.status||null===s[0]){t.next=29;break}return u=[h.findByIdAndUpdate(s[0]._id,{"data.transaction":r.body.tx_hash,state:"completed"},{new:!0}).select("user state type data").populate({path:"data",select:"currency"}).lean()],l=Math.floor(1e3*r.body.value),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":l,"stats.total.withdrawsNumber":1,"stats.crypto.withdraw":l}},{upsert:!0}).then().catch(),t.next=20,Promise.all(u);case 20:return d=t.sent,t.next=23,f.findById(d[0].user).select("affiliates").lean();case 23:if(!(p=t.sent).affiliates.referrer){t.next=27;break}return t.next=27,m.findOneAndUpdate({user:d[0].user._id,referrer:p.affiliates.referrer},{$inc:{withdraw:l},updatedAt:(new Date).getTime()},{new:!0}).select("withdraw updatedAt").lean();case 27:console.log("update user withdraw trx",d[0]),e.of("/socket/cashier").to(d[0].user.toString()).emit("cryptoTransaction",{transaction:d[0]});case 29:A.splice(A.indexOf(i.toString()),1),n.status(200).json({success:!0}),t.next=38;break;case 33:t.prev=33,t.t0=t.catch(8),console.log(t.t0),A.splice(A.indexOf(i.toString()),1),n.status(500).json({success:!1,error:{type:"error",message:t.t0.message}});case 38:t.next=44;break;case 40:t.prev=40,t.t1=t.catch(0),console.log(t.t1),n.status(500).json({success:!1,error:{type:"error",message:t.t1.message}});case 44:case"end":return t.stop()}}),t,null,[[0,40],[8,33]])})));return function(e,r){return t.apply(this,arguments)}}()),l}},1703:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(7252).Router(),s=r(5734).rateLimiterStrictMiddleware,u=r(9472).requestGetProxy,l=r(7587).captchaGetDataRoblox;e.exports=function(){return c.get("/iframe",function(){var e=i(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.render("captcha",{frontendUrl:process.env.SERVER_FRONTEND_URL.split(",")[0]})}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c.post("/api/arkose/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",s,function(){var e=i(o().mark((function e(t,r){var n,a,i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.next=5,u(n,a);case 5:return i=e.sent,c="http://".concat(i.username,":").concat(i.password,"@").concat(i.proxy_address,":").concat(i.port),t.body.data.blob=t.body.data.blob.replaceAll(" ","+"),t.body.site="https://www.roblox.com",e.next=11,l(c,t,t.body);case 11:s=e.sent,r.send(s),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r.status(500).json({success:!1,error:{type:"error",message:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()),c}},2622:(e,t,r)=>{var n=r(7252).Router();e.exports=function(e){return n.get("/",(function(e,t){t.status(200).json({success:!0})})),n.use("/captcha",r(1703)()),n.use("/auth",r(585)()),n.use("/leaderboard",r(7558)()),n.use("/callback",r(1160)(e)),n}},7558:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(7252),c=(r(8749),i.Router()),s=(r(2789),r(9221)),u=(r(3304),r(5734).rateLimiterMiddleware),l=r(7402),f=(l.callbackCheckPostCoinpaymentsData,l.callbackCheckPostCoinpaymentsHmac,l.callbackCheckPostCoinpaymentsTransaction,l.callbackCheckPostSkinifyData,l.callbackCheckPostSkinifyToken,l.callbackCheckPostSkinifyTransaction,l.callbackCheckPostZebrasmarketData,l.callbackCheckPostZebrasmarketSignature,l.callbackCheckPostZebrasmarketTransaction,l.callbackCoinpaymentsCreateHmac,l.callbackZebrasmarketCreateSignature,l.callbackCheckPostOxapayData,l.callbackOxapayCreateHmac,l.callbackCheckPostOxapayHmac,l.callbackOxapayCreatePayoutHmac,r(3818));f.cashierCryptoGenerateAddress,f.cashierCryptoGetStableCurrencyName,r(8461).settingGet,e.exports=function(e){var t=r(6037);return c.get("/getrank",u,function(){var e,r=(e=o().mark((function e(r,n){var a,i,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.query.affiliate,console.log("qq"),a){e.next=4;break}return e.abrupt("return",n.status(400).json({error:"Missing affiliate parameter"}));case 4:if(t.Types.ObjectId.isValid(a)){e.next=7;break}return e.abrupt("return",n.status(400).json({error:"Invalid affiliate ID format"}));case 7:return e.prev=7,e.next=10,s.find({referrer:a}).sort({leaderboardpoints:-1}).populate({path:"user",select:"avatar username rank xp balance affiliates"});case 10:return i=e.sent,c=i.filter((function(e){return"user"===e.user.rank})),u=c.map((function(e){return{username:e.user.username,avatar:e.user.avatar?"https://wesuccess.biz/api".concat(e.user.avatar):null,wagered:Math.floor((e.leaderboardpoints||0)/1e3),createdAt:e.createdAt}})),e.abrupt("return",n.status(200).json({data:u,message:"affiliate data retrieved successfully"}));case 16:return e.prev=16,e.t0=e.catch(7),console.error("Error fetching rank:",e.t0),e.abrupt("return",n.status(500).json({error:"Internal server error"}));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),c}},2566:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),h=u.socketRemoveAntiSpam,p=r(6245),y=p.adminGetAffiliateListSocket,m=p.adminSendAffiliateBlockSocket,v=p.adminSendAffiliateClearSocket,g=p.adminSendAffiliateCodeSocket,w=p.adminSendAffiliateAvailableSocket,b=p.adminGetAffiliateItemSocket,x=p.adminSendAffiliateCashSocket;e.exports=function(e,t){t.on("getAffiliateList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getAffiliateItem",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),b(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBlock",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClear",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateAvailable",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCash",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),x(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},6040:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),h=u.socketRemoveAntiSpam,p=r(8475),y=p.adminGetBoxListSocket,m=p.adminSendBoxCreateSocket,v=p.adminSendBoxRemoveSocket,g=p.adminSendBoxNameSocket,w=p.adminSendBoxAmountSocket,b=p.adminSendBoxStateSocket,x=p.adminSendBoxTypeSocket,k=p.adminSendBoxCategorySocket,S=p.adminSendBoxImageSocket,E=p.adminSendBoxItemsSocket;e.exports=function(e,t){t.on("getBoxList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=26;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.prev=7,r.next=10,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 10:u=r.sent,l(u,!0),f(u,["admin"]),m(e,t,u,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(7),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:r.next=27;break;case 26:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 27:case"end":return r.stop()}}),r,null,[[3,21],[7,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxRemove",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxName",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxAmount",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxState",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),b(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxType",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),x(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCategory",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),k(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxImage",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),S(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxItems",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),E(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},9420:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(3304),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=(l.socketCheckUserRank,l.socketCheckUserFullRank),h=l.socketCheckAntiSpam,p=l.socketRemoveAntiSpam,y=(r(9716).generalGetUnreadStats,r(3239)),m=y.adminGetCashierListSocket,v=(y.adminSendCashierCryptoActionSocket,y.adminSendCashierRobuxCancelSocket),g=y.adminSendCashierCreateSocket,w=y.adminAproveWithdrawCryptoByOxapay;e.exports=function(e,t){t.on("getCashierList",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:s=r.sent;case 12:f(s,!0),d(s,["fulladmin"]),m(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCryptoAction",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank fullrank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["fulladmin"]),w(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierRobuxCancel",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["fulladmin"]),v(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCreate",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,h(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["fulladmin"]),g(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),p(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("checkNewDeposits",function(){var e=i(o().mark((function e(r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&"function"==typeof n){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){e.next=19;break}return e.prev=3,e.next=6,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 6:return a=e.sent,f(a,!0),d(a,["fulladmin"]),e.next=11,s.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$set:{"stats.total.unreadDeposits":0}},{upsert:!0});case 11:n({success:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),n({success:!1,error:{type:"error",message:e.t0.message}});case 17:e.next=20;break;case 19:n({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,r){return e.apply(this,arguments)}}()),t.on("checkNewWithdraws",function(){var e=i(o().mark((function e(r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&"function"==typeof n){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){e.next=19;break}return e.prev=3,e.next=6,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 6:return a=e.sent,f(a,!0),d(a,["fulladmin"]),e.next=11,s.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$set:{"stats.total.unreadWithdraws":0}},{upsert:!0});case 11:n({success:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),n({success:!1,error:{type:"error",message:e.t0.message}});case 17:e.next=20;break;case 19:n({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,r){return e.apply(this,arguments)}}())}},3425:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckUserFullRank),d=u.socketCheckAntiSpam,h=u.socketRemoveAntiSpam,p=r(1204),y=p.adminGetFilterListSocket,m=p.adminSendFilterCreateSocket,v=p.adminSendFilterRemoveSocket;e.exports=function(e,t){t.on("getFilterList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["fulladmin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterRemove",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2934:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=(r(2789),r(5734)),u=(s.rateLimiter,s.rateLimiterStrict,r(7908)),l=u.socketCheckConnectionLimit,f=u.socketAddConnectionLimit,d=u.socketRemoveConnectionLimit;r(8461).settingGet,e.exports=function(e){e.of("/socket/admin").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("admin",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("You need to sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/admin").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;f("admin",n),r(8629)(e,t),r(3260)(e,t),r(2566)(e,t),r(7078)(e,t),r(3425)(e,t),r(9420)(e,t),r(6040)(e,t),r(9544)(e,t),r(8725)(e,t),r(1950)(e,t),r(7526)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,d("admin",r);case 2:case"end":return e.stop()}}),e)}))))}))}},9544:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),h=u.socketRemoveAntiSpam,p=r(481),y=p.adminGetItemListSocket,m=p.adminSendItemCreateSocket,v=p.adminSendBoxRemoveSocket,g=p.adminSendItemNameSocket,w=p.adminSendItemTitleSocket,b=p.adminSendItemAmountSocket,x=p.adminSendItemImageSocket;e.exports=function(e,t){t.on("getItemList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=26;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.prev=7,r.next=10,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 10:u=r.sent,l(u,!0),f(u,["admin"]),m(e,t,u,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(7),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:r.next=27;break;case 26:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 27:case"end":return r.stop()}}),r,null,[[3,21],[7,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemRemove",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemName",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemTitle",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemAmount",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),b(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemImage",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),x(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},1950:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckUserFullRank),d=u.socketCheckAntiSpam,h=u.socketRemoveAntiSpam,p=r(2997),y=p.adminGetLeaderboardListSocket,m=p.adminSendLeaderboardCreateSocket,v=p.adminSendLeaderboardStopSocket;e.exports=function(e,t){t.on("getLeaderboardList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["fulladmin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardStop",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},7078:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),h=u.socketRemoveAntiSpam,p=r(7929),y=p.adminGetPromoListSocket,m=p.adminSendPromoCreateSocket,v=p.adminSendPromoRemoveSocket;e.exports=function(e,t){t.on("getPromoList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),y(e,t,u,n,a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 19:r.next=24;break;case 21:r.prev=21,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 24:case"end":return r.stop()}}),r,null,[[2,21],[6,16]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoRemove",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8725:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckUserFullRank),d=u.socketCheckAntiSpam,h=u.socketRemoveAntiSpam,p=r(6088),y=p.adminGetRainListSocket,m=p.adminSendRainAmountSocket;e.exports=function(e,t){t.on("getRainList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["fulladmin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainAmount",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8629:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckUserFullRank),d=u.socketCheckAntiSpam,h=u.socketRemoveAntiSpam,p=r(538),y=p.adminSendSettingValueSocket,m=p.adminSendALeaderboardValueSocket,v=p.adminGetLeaderboardCreatorsSocket,g=p.adminSendDLeaderboardValueSocket,w=p.adminSendSLeaderboardValueSocket;e.exports=function(e,t){t.on("sendSettingValue",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),y(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendStopLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendDeleteLeaderboardAffiliators",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getLeaderboardCreators",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["fulladmin"]),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},7526:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=u.socketCheckUserFullRank,h=(u.socketCheckAntiSpam,u.socketRemoveAntiSpam,r(4569)),p=h.adminGetStatsDataSocket,y=h.adminGetStatsListSocket,m=h.adminGetCryptoTransactionListSocket;e.exports=function(e,t){t.on("getStatsData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),d(u,["fulladmin"]),p(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getStatsList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getCryptoTransactionList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),d(u,["fulladmin"]),m(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}())}},3260:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(3304),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckUserRank,h=l.socketCheckUserFullRank,p=l.socketCheckAntiSpam,y=l.socketRemoveAntiSpam,m=(r(9716).generalGetUnreadStats,r(2541)),v=m.adminGetUserListSocket,g=m.adminGetUserDataSocket,w=m.adminGetUserTransactionListSocket,b=m.adminGetUserGameListSocket,x=m.adminSendUserValueSocket,k=m.adminSendUserBalanceSocket,S=m.adminSendAffiliateBonusSocket,E=m.adminSendUserMuteSocket,L=m.adminSendUserBanSocket;e.exports=function(e,t){t.on("getUserList",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 11:s=r.sent;case 12:f(s,!0),d(s,["admin"]),v(e,t,s,n,a),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(6),console.log(r.t0),a({success:!1,error:{type:"error",message:r.t0.message}});case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:case"end":return r.stop()}}),r,null,[[2,23],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserData",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:f(s,!0),d(s,["admin"]),g(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactionList",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:f(s,!0),d(s,["admin"]),w(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserGameList",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,s=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:s=r.sent;case 12:f(s,!0),d(s,["admin"]),b(e,t,s,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserValue",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,p(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:s=r.sent,f(s,!0),"limits.limitTip"===n.setting||"limits.blockTip"===n.setting?d(s,["admin"]):h(s,["fulladmin"]),x(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalance",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,p(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["admin"]),k(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBonus",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,p(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["admin"]),S(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserMute",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,p(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:s=r.sent,f(s,!0),d(s,["admin","mod"]),E(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBan",function(){var r=i(o().mark((function r(n,a){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,p(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 12:s=r.sent,f(s,!0),h(s,["fulladmin"]),L(e,t,s,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),y(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("checkNewUsers",function(){var e=i(o().mark((function e(r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&"function"==typeof n){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){e.next=19;break}return e.prev=3,e.next=6,c.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 6:return a=e.sent,f(a,!0),h(a,["fulladmin"]),e.next=11,s.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$set:{"stats.total.unreadUsers":0}},{upsert:!0});case 11:n({success:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),n({success:!1,error:{type:"error",message:e.t0.message}});case 17:e.next=20;break;case 19:n({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,r){return e.apply(this,arguments)}}())}},1418:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,m=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(1169),w=g.battlesGetData,b=g.battlesGetGameDataSocket,x=g.battlesSendCreateSocket,k=g.battlesSendBotSocket,S=g.battlesSendJoinSocket,E=g.battlesSendCancelSocket,L=g.battlesInit;e.exports=function(e){e.of("/socket/battles").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,d("battles",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w(t.decoded);case 18:i=e.sent,t.emit("init",{boxes:i.boxes,games:i.games,history:i.history}),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/battles").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("battles",r),t.on("getGameData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:f(c,!1),v(c),b(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.battles.enabled"),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBot",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.battles.enabled"),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendJoin",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.battles.enabled"),S(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCancel",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank limits anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.battles.enabled"),E(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("battles",r);case 2:case"end":return e.stop()}}),e)}))))})),L(e)}},1388:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(5734).rateLimiter,s=r(7908),u=s.socketCheckUserData,l=s.socketCheckAntiSpam,f=s.socketRemoveAntiSpam,d=r(8461).settingCheck,h=r(1889).cashierSendCreditDepositSocket;e.exports=function(e,t){t.on("sendCreditDeposit",function(){var r,n=(r=o().mark((function r(n,a){var s,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,s=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(s);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:p=r.sent,u(p,!0),d(p,"credit.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},6888:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(485),y=(p.cashierGetCryptoDataSocket,p.cashierSendCryptoWithdrawSocket),m=p.cashierGetCryptoDataSocketByOxapay;e.exports=function(e,t){t.on("getCryptoData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),h(u),m(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCryptoWithdraw",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance limits mute ban stats").lean();case 12:u=r.sent,l(u,!0),h(u,"crypto.withdraw.enabled"),y(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},1275:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(5734).rateLimiter,s=r(7908),u=s.socketCheckUserData,l=s.socketCheckAntiSpam,f=s.socketRemoveAntiSpam,d=r(8461).settingCheck,h=r(6998).cashierSendGiftRedeemSocket;e.exports=function(e,t){t.on("sendGiftRedeem",function(){var r,n=(r=o().mark((function r(n,a){var s,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,s=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(s);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 12:p=r.sent,u(p,!0),d(p,"gift.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},2848:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(5734),u=(s.rateLimiter,s.rateLimiterStrict,r(7908)),l=u.socketCheckConnectionLimit,f=u.socketAddConnectionLimit,d=u.socketRemoveConnectionLimit,h=r(9974).cashierRobuxInit,p=(r(4330).cashierLimitedInit,r(485).cashierCryptoInit);e.exports=function(e){e.of("/socket/cashier").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("cashier",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=22;break;case 19:return e.prev=19,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 22:case"end":return e.stop()}}),e,null,[[0,19],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/cashier").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;f("cashier",n),r(2577)(e,t),r(9109)(e,t),r(7711)(e,t),r(6888)(e,t),r(1275)(e,t),r(1388)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,d("cashier",r);case 2:case"end":return e.stop()}}),e)}))))})),h(e),p(e)}},9109:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(4330),y=p.cashierGetLimitedDataSocket,m=p.cashierSendLimitedEnableSocket,v=p.cashierSendLimitedVerifySocket,g=p.cashierSendLimitedDepositSocket,w=p.cashierSendLimitedWithdrawSocket;e.exports=function(e,t){t.on("getLimitedData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 11:u=r.sent;case 12:l(u,!0),h(u),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedEnable",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedVerify",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedDeposit",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban verifiedAt").lean();case 12:u=r.sent,l(u,!0),h(u,"limited.deposit.enabled"),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedWithdraw",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban verifiedAt").lean();case 12:u=r.sent,l(u,!0),h(u,"limited.withdraw.enabled"),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2577:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckAntiSpam),d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(9974),y=p.cashierGetRobuxDataSocket,m=p.cashierSendRobuxDepositSocket,v=p.cashierSendRobuxWithdrawSocket,g=p.cashierSendRobuxCancelSocket;e.exports=function(e,t){t.on("getRobuxData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 11:u=r.sent;case 12:l(u,!0),h(u),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxDeposit",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban stats").lean();case 12:u=r.sent,l(u,!0),h(u,"robux.deposit.enabled"),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxWithdraw",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban stats").lean();case 12:u=r.sent,l(u,!0),h(u,"robux.withdraw.enabled"),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxCancel",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},7711:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(5734).rateLimiter,s=r(7908),u=s.socketCheckUserData,l=s.socketCheckAntiSpam,f=s.socketRemoveAntiSpam,d=r(8461).settingCheck,h=r(8796).cashierSendSteamDepositSocket;e.exports=function(e,t){t.on("sendSteamDeposit",function(){var r,n=(r=o().mark((function r(n,a){var s,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,s=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(s);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:p=r.sent,u(p,!0),d(p,"steam.deposit.enabled"),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},6466:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734),l=u.rateLimiter,f=(u.rateLimiterStrict,r(7908)),d=f.socketCheckUserData,h=f.socketCheckConnectionLimit,p=f.socketAddConnectionLimit,y=f.socketRemoveConnectionLimit,m=f.socketCheckAntiSpam,v=f.socketRemoveAntiSpam,g=r(8461).settingCheck,w=r(7165),b=w.crashGetData,x=w.crashSendBetSocket,k=w.crashSendCashoutSocket,S=w.crashInit;e.exports=function(e){e.of("/socket/crash").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,h("crash",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=b(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/crash").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("crash",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,d(c,!0),g(c,"games.crash.enabled"),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:c=r.sent,d(c,!0),g(c),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,y("crash",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},2773:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckAntiSpam),d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(7046),y=p.generalGetAffiliateDataSocket,m=p.generalSendAffiliateCodeSocket,v=p.generalSendAffiliateClaimCodeSocket,g=p.generalSendAffiliateClaimEarningsSocket;e.exports=function(e,t){t.on("getAffiliateData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank affiliates agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!0),h(u),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimCode",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox username avatar rank affiliates mute ban").lean();case 12:u=r.sent,l(u,!0),h(u,"general.affiliate.enabled"),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimEarnings",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),g(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},4386:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(5734).rateLimiter,s=r(7908).socketCheckUserData,u=r(8461).settingCheck,l=r(5507).generalGetBetsDataSocket;e.exports=function(e,t){t.on("getBetsData",function(){var r,n=(r=o().mark((function r(n,a){var f,d;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,f=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,c.consume(f);case 6:if(r.prev=6,d=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:d=r.sent;case 12:s(d,!1),u(d),l(e,t,d,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},1164:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=u.socketCheckAntiSpam,h=u.socketRemoveAntiSpam,p=r(8461).settingCheck,y=r(7089),m=y.generalGetChatMessagesSocket,v=y.generalSendChatMessageSocket,g=y.generalSendChatRemoveSocket,w=y.generalSendChatClearSocket,b=y.generalSendChatLockSocket;e.exports=function(e,t){t.on("getChatMessages",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!1),p(u),m(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatMessage",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("roblox.id username avatar rank xp stats anonymous mute ban createdAt").lean();case 12:u=r.sent,l(u,!0),p(u,"chat.enabled"),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatRemove",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin","mod"]),p(u),g(e,t,u,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatClear",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin","mod"]),p(u),w(e,t,u,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatLock",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=30;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin","mod"]),p(u),b(e,t,u,n,a),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 28:r.next=31;break;case 30:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 31:case"end":return r.stop()}}),r,null,[[3,25],[9,19]])})));return function(e,t){return r.apply(this,arguments)}}())}},1049:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(829),l=r(2789),f=r(5734),d=(f.rateLimiter,f.rateLimiterStrict,r(7908)),h=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,y=d.socketRemoveConnectionLimit,m=r(8461).settingGet,v=r(1454).generalGetChatOnlineCount,g=r(9716).generalGetUnreadStats,w=r(9472).requestRemoveProxy,b=r(5507).generalBetsInit,x=r(7089).generalChatInit,k=r(9381),S=k.generalGetRains,E=k.generalRainInit;e.exports=function(e){e.of("/socket/general").use(function(){var t=s(o().mark((function t(r,n){var i,c,s,f,d,p,y,w;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,t.next=4,h("general",i);case 4:if(void 0===r.handshake.auth||void 0===r.handshake.auth.token){t.next=16;break}return t.prev=5,t.next=8,u.verify(r.handshake.auth.token,process.env.TOKEN_SECRET);case 8:c=t.sent,r.decoded=c,void 0!==r.decoded&&null!==r.decoded&&void 0!==r.decoded._id&&r.join(r.decoded._id.toString()),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n(new Error("You need to sign in to perform this action.")));case 16:return t.next=18,Promise.all([v(e),S()]);case 18:return s=t.sent,r.emit("init",{settings:m(),online:s[0],rains:s[1],time:(new Date).getTime()}),t.next=22,g();case 22:return f=t.sent,t.next=25,l.find({rank:"admin",fullrank:"fulladmin"}).lean();case 25:d=t.sent,p=a(d);try{for(p.s();!(y=p.n()).done;)w=y.value,e.of("/socket/general").to(w._id.toString()).emit("notifyUnreadStats",{adminUnreadStats:f})}catch(e){p.e(e)}finally{p.f()}n(),t.next=34;break;case 31:return t.prev=31,t.t1=t.catch(0),t.abrupt("return",n({success:!1,error:{type:"error",message:t.t1.message}}));case 34:case"end":return t.stop()}}),t,null,[[0,31],[5,13]])})));return function(e,r){return t.apply(this,arguments)}}()),e.of("/socket/general").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("general",n),r(4386)(e,t),r(1164)(e,t),r(8781)(e,t),r(2226)(e,t),r(2773)(e,t),r(4680)(e,t),r(4585)(e,t),r(2328)(e,t),r(7157)(e,t),t.on("disconnect",s(o().mark((function r(){var n,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,y("general",n),w(n),r.next=5,v(e);case 5:a=r.sent,e.of("/socket/general").emit("chatOnline",{online:a});case 7:case"end":return r.stop()}}),r)}))))})),setTimeout((function(){x(e)}),3e3),b(),E(e)}},7157:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,r(8461).settingCheck),d=r(8078),h=d.generalGetLeaderboardDataSocket,p=(d.generalLeaderboardInit,!1);e.exports=function(e,t){t.on("getLeaderboardData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:u=r.sent;case 12:l(u,!1),f(u),h(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}());var n=function(){var t=i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.t.bind(r,8078,23));case 2:(0,t.sent.generalLeaderboardInit)(e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();p||(n(),p=!0)}},4585:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(2789),c=r(5734).rateLimiter,s=r(7908),u=s.socketCheckUserData,l=(s.socketCheckUserRank,s.socketCheckAntiSpam),f=s.socketRemoveAntiSpam,d=r(8461).settingCheck,h=r(1814).generalSendPromoClaimSocket;e.exports=function(e,t){t.on("sendPromoClaim",function(){var r,n=(r=o().mark((function r(n,a){var s,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,s=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,c.consume(s);case 7:return r.next=9,l(t.decoded._id);case 9:return r.prev=9,r.next=12,i.findById(t.decoded._id).select("username avatar ips rank xp stats limits mute ban").lean();case 12:p=r.sent,u(p,!0),d(p),h(e,t,p,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),f(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},2328:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckAntiSpam),d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(9381),y=p.generalSendRainCreateSocket,m=p.generalSendRainTipSocket,v=p.generalSendRainJoinSocket;p.generalRainInit,e.exports=function(e,t){t.on("sendRainCreate",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),y(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainTip",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainJoin",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank xp stats limits mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},4680:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(8361),y=p.generalGetRakebackDataSocket,m=p.generalSendRakebackClaimSocket;e.exports=function(e,t){t.on("getRakebackData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 11:u=r.sent;case 12:l(u,!1),h(u),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRakebackClaim",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank limits rakeback mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8781:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=(u.socketCheckUserRank,u.socketCheckAntiSpam),d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(2396),y=p.generalGetUserInfoSocket,m=p.generalGetUserBetsSocket,v=p.generalGetUserTransactionsSocket,g=p.generalGetUserSeedSocket,w=p.generalSendUserAnonymousSocket,b=p.generalSendUserDiscordSocket,x=p.generalSendUserClientSeedSocket,k=p.generalSendUserServerSeedSocket,S=p.generalSendUserTipSocket;e.exports=function(e,t){t.on("getUserInfo",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!0),h(u),y(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserBets",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!0),h(u),m(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactions",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!0),h(u),v(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserSeed",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 11:u=r.sent;case 12:l(u,!0),h(u),g(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserAnonymous",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserDiscord",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("discordId username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),b(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserClientSeed",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),x(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserServerSeed",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),k(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserTip",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance stats limits mute ban").lean();case 12:u=r.sent,l(u,!0),h(u,"general.tip.enabled"),S(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},2226:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckAntiSpam,d=u.socketRemoveAntiSpam,h=r(8461).settingCheck,p=r(2681),y=p.generalSendVaultDepositSocket,m=p.generalSendVaultWithdrawSocket,v=p.generalSendVaultLockSocket;e.exports=function(e,t){t.on("sendVaultDeposit",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),y(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultWithdraw",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),m(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultLock",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,f(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 12:u=r.sent,l(u,!0),h(u),v(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),d(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},4906:(e,t,r)=>{e.exports=function(e){r(1049)(e),r(6466)(e),r(3932)(e),r(7097)(e),r(8481)(e),r(4917)(e),r(1418)(e),r(8858)(e),r(7523)(e),r(2848)(e),r(2934)(e),r(2973)(e)}},7097:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,m=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(3298),w=g.minesGetGame,b=g.minesSendBetSocket,x=g.minesSendRevealSocket,k=g.minesSendCashoutSocket,S=g.minesInit;e.exports=function(e){e.of("/socket/mines").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,d("mines",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=20;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:t.emit("init",{game:w(t.decoded)}),r(),e.next=21;break;case 20:r(new Error("You need to sign in to perform this action."));case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/mines").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("mines",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.mines.enabled"),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits rakeback affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("mines",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},8858:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)}))}}var l=r(829),f=r(8749),d=r(1024),h=r(2789),p=r(5632),y=r(5241),m=r(3304),v=r(8744),g=r(8875),w=r(5734).rateLimiter,b=r(7908),x=b.socketCheckUserData,k=b.socketCheckConnectionLimit,S=b.socketAddConnectionLimit,E=b.socketRemoveConnectionLimit,L=b.socketCheckAntiSpam,_=b.socketRemoveAntiSpam,O=r(8461).settingCheck,A=r(9580),j=A.plinkoCheckSendCreateData,P=A.plinkoCheckSendCreateUser,I=A.plinkoCheckSendCreateSeed,T=A.plinkoGenerateDeck,N=A.plinkoGetPayoutAmount,C=r(836),G=C.generalUserGetRakeback,D=C.generalUserGetFormated,Y=r(5507).generalAddBetsList;e.exports=function(e){e.of("/socket/plinko").use(function(){var e=u(c().mark((function e(t,r){var n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,k("plinko",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,l.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:o=e.sent,t.decoded=o,t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("Please sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("Please sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r(new Error("Something went wrong! Please try again in a few seconds.")));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/plinko").on("connection",(function(e){var r=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;S("plinko",r),e.on("sendCreate",function(){var r=u(c().mark((function r(n,o){var a,i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==o&&"function"==typeof o){r.next=2;break}return r.abrupt("return");case 2:if(void 0===e.decoded||null===e.decoded){r.next=29;break}return r.prev=3,a=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress,r.next=7,w.consume(a);case 7:return r.next=9,L(e.decoded._id);case 9:return r.prev=9,r.next=12,h.findById(e.decoded._id).select("rank balance stats limits fair agreed affiliates mute ban").lean();case 12:i=r.sent,x(i,!0,!0),O(i,"games.plinko.enabled"),t(e,i,n,o),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),_(e.decoded._id),o({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),o({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"Please slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:o({success:!1,error:{type:"error",message:"Please sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),e.on("disconnect",(function(){var t=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;E("plinko",t)}))}));var t=function(){var t=u(c().mark((function t(r,n,o,i){var s,u,l,w,b,x,k,S,E,L,O,A,C,U,B,R,F;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(o),P(o,n),t.next=5,p.findOne({user:n._id,state:"created"}).select("seedClient seedServer nonce user state");case 5:return s=t.sent,I(s),u=Math.floor(o.amount),l=Math.floor(o.rows),w=G(n),b=!0!==n.limits.blockSponsor?Math.floor(u*w.percentage):0,x=T(l+1),k="".concat(s.seedServer,"-").concat(s.nonce,"-").concat(s.seedClient),S=f.createHash("sha256").update(k).digest("hex"),E=new d(S),L=E.integer({min:1,max:x.reduce((function(e,t){return e+t}),0)}),O=N(u,x,o.risk,L),A=Math.floor(Math.floor(O)/u*100),C=[],t.next=21,v.findOne({state:"running"}).select("state").lean();case 21:return U=t.sent,t.next=24,g.find({enabled:"true"}).select("creators").lean();case 24:return B=t.sent,R=B.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),C=[h.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(O-u),xp:!0!==n.limits.blockSponsor?u*process.env.XP_RATE*.5:0,"stats.bet":.5*u,"stats.won":O,"leaderboard.points":null!==U&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*u:0,"affiliates.leaderboardpoints":R&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*u:0,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-u)<=0?-n.limits.betToWithdraw:-u,"limits.betToRain":Math.floor(n.limits.betToRain-u)<=0?-n.limits.betToRain:-u,"rakeback.earned":b,"rakeback.available":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban updatedAt").lean(),p.findByIdAndUpdate(s._id,{$inc:{nonce:1}},{}),y.create({amount:u,payout:O,multiplier:A,rows:l,risk:o.risk,ticket:L,fair:{seed:s._id,nonce:s.nonce,clientSeed:s.seedClient},user:n._id,stats:{balanceBefore:n.balance},state:"completed"})],"admin"!==n.rank&&C.push(m.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":u,"stats.total.won":O,"stats.plinko.bet":u,"stats.plinko.won":O}},{upsert:!0})),t.next=30,Promise.all(C);case 30:return F=t.sent,t.next=33,F[2].populate({path:"user",select:"username xp stats avatar rank anonymous"});case 33:F[2]=t.sent,F[2]=F[2].toObject(),F[2].method="plinko",F[2].fair=void 0,setTimeout((function(){e.of("/socket/general").to(n._id.toString()).emit("user",{user:F[0]}),e.of("/socket/general").emit("bet",{bet:a(a({},F[2]),{},{user:D(F[2].user)})}),Y(e,a(a({},F[2]),{},{user:D(F[2].user),method:"plinko"}))}),500*F[2].rows),i({success:!0,game:F[2]}),_(n._id),t.next=46;break;case 42:t.prev=42,t.t0=t.catch(0),_(n._id),i({success:!1,error:{type:"error",message:t.t0.message}});case 46:case"end":return t.stop()}}),t,null,[[0,42]])})));return function(e,r,n,o){return t.apply(this,arguments)}}()}},3932:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734),l=u.rateLimiter,f=(u.rateLimiterStrict,r(7908)),d=f.socketCheckUserData,h=f.socketCheckConnectionLimit,p=f.socketAddConnectionLimit,y=f.socketRemoveConnectionLimit,m=f.socketCheckAntiSpam,v=f.socketRemoveAntiSpam,g=r(8461).settingCheck,w=r(8117),b=w.rollGetData,x=w.rollSendBetSocket,k=w.rollInit;e.exports=function(e){e.of("/socket/roll").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,h("roll",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:i=b(),t.emit("init",i),r(),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 24:case"end":return e.stop()}}),e,null,[[0,21],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roll").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("roll",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,l.consume(i);case 7:return r.next=9,m(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,d(c,!0),g(c,"games.roll.enabled"),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),v(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,y("roll",r);case 2:case"end":return e.stop()}}),e)}))))})),k(e)}},7523:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,m=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(6734),w=g.rouletteGetDataSocket,b=g.rouletteSendBetSocket,x=g.rouletteInit;e.exports=function(e){e.of("/socket/roulette").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,d("roulette",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w();case 18:i=e.sent,t.emit("init",i),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roulette").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("roulette",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.roulette.enabled"),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("roulette",r);case 2:case"end":return e.stop()}}),e)}))))})),x(e)}},2973:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=(r(2789),r(5734)),u=(s.rateLimiter,s.rateLimiterStrict,r(7908)),l=u.socketCheckConnectionLimit,f=u.socketAddConnectionLimit,d=u.socketRemoveConnectionLimit;r(8461).settingGet,e.exports=function(e){e.of("/socket/streammer").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,l("streammer",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=19;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:r(),e.next=20;break;case 19:r(new Error("You need to sign in to perform this action."));case 20:e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 25:case"end":return e.stop()}}),e,null,[[0,22],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/streammer").on("connection",(function(t){var n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;f("streammer",n),r(305)(e,t),r(469)(e,t),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,d("streammer",r);case 2:case"end":return e.stop()}}),e)}))))}))}},469:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam,u.socketRemoveAntiSpam,r(2050)),h=d.adminGetStatsDataSocket,p=d.adminGetStatsListSocket;e.exports=function(e,t){t.on("getStatsData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban affiliates");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin","mod","partner"]),h(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getStatsList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin","mod","partner"]),p(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}())}},305:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(2789),s=r(5734).rateLimiter,u=r(7908),l=u.socketCheckUserData,f=u.socketCheckUserRank,d=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),h=u.socketRemoveAntiSpam,p=r(3232),y=p.adminGetUserListSocket,m=p.adminGetUserDataSocket,v=p.adminGetUserTransactionListSocket,g=p.adminGetUserGameListSocket,w=p.adminSendUserValueSocket,b=(p.adminSendUserBalanceSocket,p.adminSendUserMuteSocket),x=p.adminSendUserBanSocket;e.exports=function(e,t){t.on("getUserList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin","mod","partner"]),y(e,t,u,n,a),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(6),console.log(r.t0),a({success:!1,error:{type:"error",message:r.t0.message}});case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:case"end":return r.stop()}}),r,null,[[2,23],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserData",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),m(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactionList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),v(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserGameList",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,s.consume(i);case 6:if(r.prev=6,u=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,c.findById(t.decoded._id).select("username avatar rank mute ban");case 11:u=r.sent;case 12:l(u,!0),f(u,["admin"]),g(e,t,u,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserValue",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),w(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalance",function(){var e=i(o().mark((function e(r,n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&"function"==typeof n){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){e.next=28;break}return e.prev=3,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=7,s.consume(a);case 7:return e.next=9,d(t.decoded._id);case 9:return e.prev=9,e.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:i=e.sent,l(i,!0),f(i,["admin"]),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),h(t.decoded._id),n({success:!1,error:{type:"error",message:e.t0.message}});case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(3),n({success:!1,error:{type:"error",message:void 0!==e.t1.message?e.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 26:e.next=29;break;case 28:n({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 29:case"end":return e.stop()}}),e,null,[[3,23],[9,17]])})));return function(t,r){return e.apply(this,arguments)}}()),t.on("sendUserMute",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin","mod"]),b(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBan",function(){var r=i(o().mark((function r(n,a){var i,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,s.consume(i);case 7:return r.next=9,d(t.decoded._id);case 9:return r.prev=9,r.next=12,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 12:u=r.sent,l(u,!0),f(u,["admin"]),x(e,t,u,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),h(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}())}},8481:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,m=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(4332),w=g.towersGetGame,b=g.towersSendBetSocket,x=g.towersSendRevealSocket,k=g.towersSendCashoutSocket,S=g.towersInit;e.exports=function(e){e.of("/socket/towers").use(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,d("towers",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=20;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:t.emit("init",{game:w(t.decoded)}),r(),e.next=21;break;case 20:r(new Error("You need to sign in to perform this action."));case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/towers").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("towers",r),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.towers.enabled"),b(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c),k(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("towers",r);case 2:case"end":return e.stop()}}),e)}))))})),S(e)}},4917:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(829),s=r(2789),u=r(5734).rateLimiter,l=r(7908),f=l.socketCheckUserData,d=l.socketCheckConnectionLimit,h=l.socketAddConnectionLimit,p=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,m=l.socketRemoveAntiSpam,v=r(8461).settingCheck,g=r(6338),w=g.unboxGetData,b=g.unboxGetBoxDataSocket,x=g.unboxSendBetSocket;e.exports=function(e){e.of("/socket/unbox").use(function(){var e=i(o().mark((function e(t,r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.next=4,d("unbox",n);case 4:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.next=16;break}return e.prev=5,e.next=8,c.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 8:a=e.sent,t.decoded=a,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",r(new Error("You need to sign in to perform this action.")));case 16:return e.next=18,w();case 18:i=e.sent,t.emit("init",{boxes:i.boxes}),r(),e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",r({success:!1,error:{type:"error",message:e.t1.message}}));case 26:case"end":return e.stop()}}),e,null,[[0,23],[5,13]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/unbox").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;h("unbox",r),t.on("getBoxData",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=6,u.consume(i);case 6:if(r.prev=6,c=null,void 0===t.decoded||null===t.decoded){r.next=12;break}return r.next=11,s.findById(t.decoded._id).select("username avatar rank mute ban");case 11:c=r.sent;case 12:f(c,!1),v(c),b(e,t,c,n,a),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),a({success:!1,error:{type:"error",message:r.t0.message}});case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(2),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 25:case"end":return r.stop()}}),r,null,[[2,22],[6,17]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBet",function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==a&&"function"==typeof a){r.next=2;break}return r.abrupt("return");case 2:if(void 0===t.decoded||null===t.decoded){r.next=29;break}return r.prev=3,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.next=7,u.consume(i);case 7:return r.next=9,y(t.decoded._id);case 9:return r.prev=9,r.next=12,s.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits affiliates anonymous mute ban createdAt").lean();case 12:c=r.sent,f(c,!0),v(c,"games.unbox.enabled"),x(e,t,c,n,a),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(9),m(t.decoded._id),a({success:!1,error:{type:"error",message:r.t0.message}});case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a({success:!1,error:{type:"error",message:void 0!==r.t1.message?r.t1.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 27:r.next=30;break;case 29:a({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 30:case"end":return r.stop()}}),r,null,[[3,24],[9,18]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,p("unbox",r);case 2:case"end":return e.stop()}}),e)}))))}))}},6042:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetAffiliateListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckSendAffiliateBlockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.block||null===e.block||"boolean"!=typeof e.block)throw new Error("Your entered affiliate block value is invalid.")},adminCheckSendAffiliateClearData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.code||null!==e.code&&("string"!=typeof e.code||""===e.code.trim()||e.code.length<=3||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"})))throw new Error("Your entered affiliate code is invalid.")},adminCheckSendAffiliateCodeCode:function(e){if(null!==e)throw new Error("Your entered affiliate code is already used by a other user.")},adminCheckSendAffiliateAvailableData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<0)throw new Error("Your entered available amount is invalid.")},adminFormatAffiliateSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:1}:"rank"===e&&(t={rank:1}),t},adminCheckGetAffiliateItemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.referrer_id||null===e.referrer_id)throw new Error("Your entered referrer is invalid.")}}},4040:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=r(7906),u=r(573);e.exports={adminCheckGetBoxListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendBoxCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.");if(void 0===e.items||null===e.items||!0!==Array.isArray(e.items)||e.items.length<=0)throw new Error("Your entered items are invalid.")},adminCheckSendBoxCreateItems:function(e,t){var r,n=i(e.items);try{var o=function(){var e=r.value;if(void 0===e.item||null===e.item||"string"!=typeof e.item||!0!==s.isMongoId(e.item))throw new Error("Your entered item id is invalid.");if(void 0===e.tickets||null===e.tickets||!0===isNaN(e.tickets))throw new Error("Your entered item tickets is invalid.");if(void 0===e.tickets1||null===e.tickets1||!0===isNaN(e.tickets1))throw new Error("Your entered item tickets1 is invalid.");if(void 0===e.tickets2||null===e.tickets2||!0===isNaN(e.tickets2))throw new Error("Your entered item tickets2 is invalid.");if(!0!==t.some((function(t){return t._id.toString()===e.item.toString()})))throw new Error("Your entered item is invalid.")};for(n.s();!(r=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}},adminCheckSendBoxRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.")},adminCheckSendBoxRemoveBox:function(e){if(null===e)throw new Error("Your entered box was not found.");if("created"!==e.state)throw new Error("Your entered box is still active.")},adminSaveImage:function(e,t){return new Promise(function(){var r,n=(r=o().mark((function r(n,a){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{u.img(e,"./bin/public/img",t,(function(e,t){if(e)throw Error(e.message);n()}))}catch(e){a(e)}case 1:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},adminGetAmountBox:function(e,t){var r,n=0,o=i(e.items);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t._id.toString()===e.item.toString()}));-1!==o&&(n+=Math.floor(t[o].amountFixed*(e.tickets/1e5)*1.11))};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},adminCheckSendItemCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount))throw new Error("Your entered amount are invalid.")},adminFormatItemSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"name"===e?t={name:1}:"amountdec"===e?t={amount:-1}:"amountasc"===e&&(t={amount:1}),t},adminCheckSendItemNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendItemName:function(e){if(null===e)throw new Error("Your entered item is not available.")},adminCheckSendItemAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.amount||null===e.amount||isNaN(e.amount)||e.amount<0)throw new Error("Your entered Name is invalid.")},adminCheckSendItemTitleData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.title||null===e.title||""===e.title)throw new Error("Your entered Title is invalid.")},adminCheckSendBoxNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendBoxName:function(e){if(null===e)throw new Error("Your entered box is not available.")},adminCheckSendBoxStateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.state||null===e.state||""===e.state||"active"!==e.state&&"inactive"!==e.state)throw new Error("Your entered state is invalid.")},adminCheckSendBoxCategoriesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.")},adminCheckSendBoxImageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.image||null===e.image||""===e.state)throw new Error("Your entered box image is invalid.")},adminCheckSendBoxItemsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.items||null===e.items)throw new Error("Your entered box items is invalid.")},adminCheckSendBoxTypeData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==s.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.type||null===e.type||!0!==Array.isArray(e.type)||!0===e.type.some((function(e){return!0!==["reward","daily","weekly","monthly","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"].includes(e)})))throw new Error("Your entered type are invalid.")}}},9716:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(7906),c=r(3304);e.exports={adminCheckGetCashierListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendCashierCryptoActionData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==i.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.");if("approve"===e.action&&(void 0===e.transactionHash||null===e.transactionHash||"string"!=typeof e.transactionHash))throw new Error("Your provided transaction hash is invalid.")},adminCheckSendCashierCryptoActionTransaction:function(e,t){if(null===e||"pending"!==e.state||!0===t.includes(e._id.toString()))throw new Error("Your provided transaction is not available.")},adminCheckSendCashierRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==i.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},adminCheckSendCashierRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if(!0===t.includes(e._id.toString()))return!0},adminCheckSendCashierCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.reward||!0===isNaN(e.reward))throw new Error("Your entered reward amount is invalid.");if(void 0===e.count||!0===isNaN(e.count)||Math.floor(e.count)<=0)throw new Error("Your entered card count is invalid.")},adminCheckSendCashierCryptoActionDataByOxapay:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==i.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")},generalGetUnreadStats:function(){return new Promise(function(){var e,t=(e=o().mark((function e(t,r){var n,a,i,s,u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.findOne({createdAt:(new Date).toISOString().slice(0,10)}).select("stats.total").lean();case 3:n=e.sent,a=n.stats.total.user,i=n.stats.total.unreadUsers,s=n.stats.total.depositsNumber,u=n.stats.total.unreadDeposits,l=n.stats.total.withdrawsNumber,f=n.stats.total.unreadWithdraws,t({usersNumber:a,unreadUsers:i,depositsNumber:s,unreadDeposits:u,withdrawsNumber:l,unreadWithdraws:f}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),t([0,0,0,0,0,0]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())}}},1567:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetFilterListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendFilterCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.phrase||null===e.phrase||"string"!=typeof e.phrase||""===e.phrase.trim())throw new Error("Your entered filter phrase is invalid.")},adminCheckSendFilterCreateFilter:function(e){if(null!==e)throw new Error("Your entered filter prase is already existing.")},adminCheckSendFilterRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.filterId||null===e.filterId||"string"!=typeof e.filterId||!0!==n.isMongoId(e.filterId))throw new Error("Your entered filter id is invalid.")},adminCheckSendFilterRemoveFilter:function(e){if(null===e)throw new Error("Your entered filter id is not available.")}}},8610:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetLeaderboardListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendLeaderboardCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||""===e.type.trim()||!0!==["wager","deposit","balance"].includes(e.type))throw new Error("Your entered type is invalid.");if(void 0===e.duration||null===e.duration||!0===isNaN(e.duration)||Math.floor(e.duration)<=0||Math.floor(e.duration)>30)throw new Error("Your entered duration is invalid.");if(void 0===e.prizes||!0!==Array.isArray(e.prizes)||e.prizes.length<=0)throw new Error("Your entered prizes are invalid.")},adminCheckSendLeaderboardStopData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.leaderboardId||null===e.leaderboardId||"string"!=typeof e.leaderboardId||!0!==n.isMongoId(e.leaderboardId))throw new Error("Your entered leaderboard id is invalid.")},adminCheckSendLeaderboardStopLeaderboard:function(e){if(null===e)throw new Error("Your entered leaderboard was not found.");if("canceled"===e.state||"completed"===e.state)throw new Error("Your entered leaderboard is already canceled or completed.")}}},1550:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetPromoListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendPromoCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered code is invalid.");if(void 0===e.reward||null===e.reward||!0===isNaN(e.reward)||Math.floor(e.reward)<10)throw new Error("Your entered code reward is invalid.");if(void 0===e.redeemptions||null===e.redeemptions||!0===isNaN(e.redeemptions)||Math.floor(e.redeemptions)<=0)throw new Error("Your entered code redeemptions is invalid.");if(void 0===e.level||null===e.level||!0===isNaN(e.level)||Math.floor(e.level)<0||Math.floor(e.level)>100)throw new Error("Your entered min level is invalid.");if(void 0===e.allowlevel||null===e.allowlevel||!0===isNaN(e.allowlevel)||Math.floor(e.allowlevel)<0&&Math.floor(e.allowlevel)>100)throw new Error("Your entered allow level level is invalid.");if(void 0===e.ipallow||null===e.ipallow||!0===isNaN(e.ipallow)||0!=Math.floor(e.ipallow)&&1!=Math.floor(e.ipallow))throw new Error("Your entered allow level level is invalid.")},adminCheckSendPromoCreateCode:function(e){if(null!==e)throw new Error("Your entered code is already existing.")},adminCheckSendPromoRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.promoId||null===e.promoId||"string"!=typeof e.promoId||!0!==n.isMongoId(e.promoId))throw new Error("Your entered promo id is invalid.")},adminCheckSendPromoRemoveCode:function(e){if(null===e)throw new Error("Your entered code is not existing.")}}},5515:e=>{e.exports={adminCheckGetRainListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendRainAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||e.amount<0)throw new Error("Your entered rain amount value is invalid.")},adminCheckSendRainAmountRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")}}},9845:(e,t,r)=>{var n=r(7906);e.exports={adminCheckSendSettingValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.setting||null===e.setting||"string"!=typeof e.setting||e.setting.length>=100||!0!==n.isAlphanumeric(e.setting,"en-US",{ignore:"."}))throw new Error("Your entered setting is invalid.");if(void 0===e.value||null===e.value||!0!==["chat.mode","general.reward.multiplier","depositbonus.amount","depositbonus.famount","redeem.amount","games.cases","games.mcases","games.cmines","games.ctowers","games.csmines","games.cstowers","games.mcmines","games.mctowers","games.mcsmines","games.mcstowers","games.crashees","games.slides","games.cblackjack.value"].includes(e.setting)&&"boolean"!=typeof e.value||"general.reward.multiplier"===e.setting&&"string"!=typeof e.value||"chat.mode"===e.setting&&"string"!=typeof e.value)throw new Error("Your entered value is invalid.")}}},1590:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={adminCheckGetStatsListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminFormatStats:function(e){var r,n={daily:{start:new Date,profit:0},weekly:{start:new Date((new Date).getTime()-6048e5),end:new Date,profit:0},monthly:{start:new Date((new Date).getTime()-2592e6),end:new Date,profit:0},total:{start:e.length>0?new Date(e[e.length-1].createdAt):new Date,end:new Date,profit:0}},o=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.total.profit=n.total.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-2592e6&&(n.monthly.profit=n.monthly.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-6048e5&&(n.weekly.profit=n.weekly.profit+Math.floor(a.stats.total.deposit-a.stats.total.withdraw),new Date(a.createdAt).toISOString().slice(0,10)===(new Date).toISOString().slice(0,10)&&(n.daily.profit=Math.floor(a.stats.total.deposit-a.stats.total.withdraw))))}}catch(e){o.e(e)}finally{o.f()}return n}}},7986:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetUserListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank","deposit","withdraw","rank","wagered","xp"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckGetUserDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckGetUserDataUser:function(e){if(null===e)throw new Error("Your entered user id is not available.")},adminCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckGetUserGamesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckSendUserValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.setting||"string"!=typeof e.setting||!0!==["rank","flags","stats.deposit","vault.amount","stats.withdraw","limits.blockRain","limits.luck","limits.blockTip","limits.limitTip","limits.blockSponsor","limits.blockLeaderboard","leaderboard.points"].includes(e.setting))throw new Error("Your entered setting is invalid.");if(void 0===e.value)throw new Error("Your entered value is invalid.")},adminCheckSendUserBalanceData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.balance||null===e.balance||!0===isNaN(e.balance)||e.balance<0)throw new Error("Your entered balance value is invalid.")},adminCheckSendUserBalanceUser:function(e){if(null===e)throw new Error("Your entered user is not available.")},adminCheckSendUserMuteData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered mute time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["insulting","racism","begging","self promotion","other"].includes(e.reason))throw new Error("Your entered mute reason is invalid.")},adminCheckSendUserBanData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered ban time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["cheating","scamming","self request","other"].includes(e.reason))throw new Error("Your entered ban reason is invalid.")},adminFormatUserSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:-1}:"rank"===e?t={rank:1}:"deposit"===e?t={"stats.deposit":-1}:"withdraw"===e?t={"stats.withdraw":-1}:"wagered"===e?t={"stats.bet":-1}:"xp"===e&&(t={xp:-1}),t}}},5657:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){"use strict";i=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(8938);function l(e,t){return f.apply(this,arguments)}function f(){return(f=s(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{Cookie:".ROBLOSECURITY=".concat(t)}});case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(null===(n=e.t0.response)||void 0===n?void 0:n.headers["x-csrf-token"])||null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function d(e,t){return h.apply(this,arguments)}function h(){return(h=s(i().mark((function e(t,r){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(t,r);case 3:return n=e.sent,e.next=6,u.post("https://auth.roblox.com/v1/authentication-ticket",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 6:return o=e.sent,e.abrupt("return",[o.headers["rbx-authentication-ticket"],n]);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","Failed to fetch auth ticket");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function p(e,t){return y.apply(this,arguments)}function y(){return(y=s(i().mark((function e(t,r){var n,o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.post("https://auth.roblox.com/v1/authentication-ticket/redeem",{authenticationTicket:t},{proxy:!1,httpsAgent:r,headers:{RBXAuthenticationNegotiation:"1"}});case 3:return a=e.sent,c=(null===(n=a.headers["set-cookie"])||void 0===n?void 0:n.toString())||"",s=null===(o=c.match(/(_\|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.\|_[A-Za-z0-9]+)/g))||void 0===o?void 0:o.toString(),e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return","fail");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function m(e,t,r){return v.apply(this,arguments)}function v(){return(v=s(i().mark((function e(t,r,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(null===(o=e.t0.response)||void 0===o?void 0:o.headers["x-csrf-token"])||null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(){return(g=s(i().mark((function e(t,r){var n,a,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t,r);case 3:return n=e.sent,a=o(n,2),c=a[0],s=a[1],console.log("authTicket: ",c,s),e.next=10,p(c,r);case 10:return u=e.sent,console.log("redemptionResult: ",u),m(t,r,s),e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return","fail");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}r(168).authRobloxGetToken,e.exports={generateAuthTicket:d,redeemAuthTicket:p,refresh_cookie:function(e,t){return g.apply(this,arguments)}}},190:(e,t,r)=>{var n=r(7906);e.exports={authCheckPostCredentialsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsUser:function(e,t){if(null===e||!0!==t)throw new Error("Your provided credentials are invalid.")},authCheckPostCredentialsRegisterData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided name is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsRegisterUser:function(e){if(null!==e)throw new Error("Your provided email is already used.")},authCheckPostCredentialsLinkData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsLinkUser:function(e){if(void 0!==e[0].local)throw new Error("Your account has already linked an email.");if(null!==e[1])throw new Error("Your provided email is already used.")},authCheckPostCredentialsRequestData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||"string"!=typeof e.type||!0!==["verify","reset"].includes(e.type))throw new Error("Your provided type is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.")},authCheckPostCredentialsRequestUser:function(e,t){if(null===e)throw new Error("Your provided email is invalid.");if("verify"===t.type&&!0===e.local.emailVerified)throw new Error("Your provided user is already verified.")},authCheckPostCredentialsRequestToken:function(e){if(null!==e&&(new Date).getTime()-new Date(e.updatedAt).getTime()<3e5)throw new Error("You need to wait at least 5 minutes before you can request a new email.")},authCheckPostCredentialsVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.")},authCheckPostCredentialsVerifyToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsResetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsResetToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsUsernameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(e.username.length<3)throw new Error("You username is too short.");if(e.username.length>20)throw new Error("You username is too long.")},authCheckPostCredentialsUsernameUser:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.");if(null!==e[1])throw new Error("Your provided username is already used.")},authCheckPostCredentialsRegisterUserName:function(e){if(null!==e)throw new Error("Your provided Username is already used.")},authCheckPostCredentialsProfileImage:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.")}}},84:(e,t,r)=>{var n=r(829);e.exports={authGenerateJwtToken:function(e){return n.sign({_id:e},process.env.TOKEN_SECRET,{expiresIn:process.env.TOKEN_EXPIRE})}}},168:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(6037),s=r(8749),u=r(4217),l=r(4229),f=(r(8938),r(7906)),d=r(3688),h=r(2789),p=r(5632),y=r(3304),m=r(5657).refresh_cookie,v=(r(9472).SERVICE_PROXY_TIME,function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}),g=function(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)};e.exports={authCheckPostRobloxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(void 0===e.password||"string"!=typeof e.password)throw new Error("Your provided password is invalid.")},authCheckPostRobloxUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxTwoStepData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.ticket||"string"!=typeof e.ticket)throw new Error("Your provided ticket is invalid.");if(void 0===e.code||"string"!=typeof e.code)throw new Error("Your provided code is invalid.")},authCheckPostRobloxTwoStepUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxCookieData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.cookie||null===e.cookie||"string"!=typeof e.cookie||!1===e.cookie.startsWith("_|WARNING:"))throw new Error("Your provided .ROBLOSECURITY cookie is invalid.")},authCheckPostRobloxCookieUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authSetUser:function(e,t,r,n,a,u){return new Promise(function(){var l=i(o().mark((function i(l,d){var m,v,g,w,b,x;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,h.findOne({"roblox.id":n.id}).select("roblox ips").lean();case 3:if(null!==(m=o.sent)){o.next=15;break}return v=[s.randomBytes(8).toString("hex"),s.randomBytes(8).toString("hex")],g=[s.randomBytes(24).toString("hex"),s.randomBytes(24).toString("hex")],w=[s.createHash("sha256").update(g[0]).digest("hex"),s.createHash("sha256").update(g[1]).digest("hex")],b=new c.Types.ObjectId,o.next=11,Promise.all([h.create({_id:b,roblox:{id:n.id,cookie:r,createdAt:new Date(a).getTime()},username:f.escape(n.name),avatar:u,proxy:e,ips:[{address:t}]}),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),p.create({seedClient:v[0],seedServer:g[0],hash:w[0],nonce:1,user:b,state:"active"}),p.create({seedClient:v[1],seedServer:g[1],hash:w[1],nonce:1,user:b,state:"created"})]);case 11:x=o.sent,m=x[0].toObject(),o.next=20;break;case 15:return m.ips=m.ips||[],m.ips.unshift({address:t}),o.next=19,h.findOneAndUpdate({"roblox.id":n.id},{"roblox.cookie":r,"roblox.createdAt":new Date(a).getTime(),username:f.escape(n.name),avatar:u,proxy:e,ips:m.ips.slice(0,25),updatedAt:(new Date).getTime()},{new:!0}).select("local roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 19:m=o.sent;case 20:m={_id:m._id,local:m.local,roblox:{id:m.roblox.id},discord:m.discord,username:m.username,avatar:m.avatar,rank:m.rank,balance:m.balance,xp:m.xp,vault:m.vault,stats:m.stats,rakeback:m.rakeback,fair:m.fair,anonymous:m.anonymous,mute:m.mute,ban:m.ban,updatedAt:m.updatedAt,createdAt:m.createdAt},l(m),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),d(new Error("Something went wrong. Please try again in a few seconds."));case 27:case"end":return o.stop()}}),i,null,[[0,24]])})));return function(e,t){return l.apply(this,arguments)}}())},authRobloxGetIntent:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"]);case 3:return a=t.sent,i=Math.floor((new Date).getTime()/1e3),t.t0=g,t.t1=s.subtle,t.t2={name:"ECDSA",hash:{name:"SHA-256"}},t.t3=a.privateKey,t.t4=v,t.t5=g,t.next=13,s.subtle.exportKey("spki",a.publicKey);case 13:return t.t6=t.sent,t.t7=(0,t.t5)(t.t6),t.t8=i,t.t9=e,t.t10=[t.t7,t.t8,t.t9].join("|"),t.t11=(0,t.t4)(t.t10),t.next=21,t.t1.sign.call(t.t1,t.t2,t.t3,t.t11);case 21:return t.t12=t.sent,c=(0,t.t0)(t.t12),t.t13=r,t.t14=i,t.t15=g,t.next=28,s.subtle.exportKey("spki",a.publicKey);case 28:t.t16=t.sent,t.t17=(0,t.t15)(t.t16),t.t18=c,t.t19=e,t.t20={clientEpochTimestamp:t.t14,clientPublicKey:t.t17,saiSignature:t.t18,serverNonce:t.t19},(0,t.t13)(t.t20),t.next=39;break;case 36:t.prev=36,t.t21=t.catch(0),n(new Error("Something went wrong. Please try again in a few seconds."));case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(e,r){return t.apply(this,arguments)}}())},authRobloxGetToken:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,c,s,f;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new d(e),c={cookie:".ROBLOSECURITY=".concat(t)},r.next=5,l("https://roblox.com",{agent:i,headers:c});case 5:if(!(s=r.sent).ok){r.next=14;break}return r.next=9,s.text();case 9:s=r.sent,f=u.load(s),n(f('meta[name="csrf-token"]').attr("data-token")),r.next=15;break;case 14:a(new Error(s.statusText));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),a(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUser:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,c,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("cookie: ",t),i=new d(e),r.next=5,m(t,i);case 5:return c=r.sent,console.log("refreshCookie: ",c),s={cookie:".ROBLOSECURITY=".concat(c)},r.next=10,l("https://users.roblox.com/v1/users/authenticated",{agent:i,headers:s});case 10:if(response=r.sent,!response.ok){r.next=18;break}return r.next=14,response.json();case 14:response=r.sent,n([response,c]),r.next=19;break;case 18:a(new Error(response.statusText));case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(0),a(r.t0);case 24:case"end":return r.stop()}}),r,null,[[0,21]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserDefault:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,c,s,u,f,h,p,y,v,g;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(s in r.prev=0,c=[],i={cookie:t,path:"/"})u=encodeURIComponent(s),f=encodeURIComponent(i[s]),c.push(u+"="+f);return c=c.join("&"),h=new d(e),p=new URLSearchParams({cookie:t}),console.log("auth cookie: ",p.toString()),r.next=10,l("https://rblxfresh.net/refresh",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:p.toString()});case 10:return y=r.sent,r.next=13,y.text();case 13:return v=r.sent,console.log("newcookie: ",v),r.next=17,m(v,h);case 17:return v=r.sent,console.log("refreshCookie: ",v),g={cookie:".ROBLOSECURITY=".concat(v||t)},r.next=22,l("https://users.roblox.com/v1/users/authenticated",{agent:h,headers:g});case 22:if(!(y=r.sent).ok){r.next=30;break}return r.next=26,y.json();case 26:y=r.sent,n([y,v]),r.next=31;break;case 30:a(new Error(y.statusText));case 31:r.next=36;break;case 33:r.prev=33,r.t0=r.catch(0),a(r.t0);case 36:case"end":return r.stop()}}),r,null,[[0,33]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserAge:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new d(e),r.next=4,l("https://users.roblox.com/v1/users/".concat(t),{agent:i});case 4:if(!(c=r.sent).ok){r.next=12;break}return r.next=8,c.json();case 8:c=r.sent,n(c.created),r.next=13;break;case 12:a(new Error(c.statusText));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetAvatar:function(e,t){return new Promise(function(){var r=i(o().mark((function r(n,a){var i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new d(e),r.next=4,l("https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=".concat(t,"&size=100x100&format=Png&isCircular=false"),{agent:i});case 4:if(!(c=r.sent).ok){r.next=12;break}return r.next=8,c.json();case 8:c=r.sent,n(c.data[0].imageUrl),r.next=13;break;case 12:a(new Error(c.statusText));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),a(r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetServerNonce:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new d(e),t.next=4,l("https://apis.roblox.com/hba-service/v1/getServerNonce",{agent:a});case 4:if(!(i=t.sent).ok){t.next=12;break}return t.next=8,i.text();case 8:i=t.sent,r(i.replaceAll('"',"")),t.next=13;break;case 12:n(new Error(i.statusText));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}())},authGetRobloxSecurityQuestion:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,c){var s,u,f;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new d(t),u={"x-csrf-token":e},o.next=5,l("https://apis.roblox.com/account-security-service/v1/security-question?userId=".concat(r,"&sessionId=").concat(n),{agent:s,headers:u});case 5:if(!(f=o.sent).ok){o.next=13;break}return o.next=9,f.json();case 9:f=o.sent,i(f),o.next=14;break;case 13:c(new Error(f.statusText));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),c(o.t0);case 19:case"end":return o.stop()}}),a,null,[[0,16]])})));return function(e,t){return a.apply(this,arguments)}}())},authGetRobloxGamesData:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var c,s,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new d(t),s={"x-csrf-token":e},n.next=5,l("https://games.roblox.com/v1/games?universeIds=".concat(r.join(",")),{agent:c,headers:s});case 5:if(!(u=n.sent).ok){n.next=13;break}return n.next=9,u.json();case 9:u=n.sent,a(u),n.next=14;break;case 13:i(new Error(u.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},authGetRobloxTwoStepType:function(e,t,r,n,a){return new Promise(function(){var c=i(o().mark((function i(c,s){var u,f,h;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new d(t),f={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration?challengeId=").concat(a),{agent:u,headers:f});case 5:if(!(h=o.sent).ok){o.next=13;break}return o.next=9,h.json();case 9:h=o.sent,c(h.primaryMediaType),o.next=14;break;case 13:s(new Error(h.statusText));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),s(o.t0);case 19:case"end":return o.stop()}}),i,null,[[0,16]])})));return function(e,t){return c.apply(this,arguments)}}())},authSendRobloxChallengeContinue:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,c){var s,u,f;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new d(e),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(u.cookie=r),o.next=6,l("https://apis.roblox.com/challenge/v1/continue",{method:"POST",agent:s,headers:u,body:JSON.stringify(n)});case 6:if(!(f=o.sent).ok){o.next=14;break}return o.next=10,f.json();case 10:f=o.sent,i(f),o.next=15;break;case 14:c(new Error(f.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),c(o.t0);case 20:case"end":return o.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}())},authSendRobloxSecurityAnswer:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var c,s,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new d(t),s={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},n.next=5,l("https://apis.roblox.com/account-security-service/v1/security-question",{method:"POST",agent:c,headers:s,body:JSON.stringify(r)});case 5:if(!(u=n.sent).ok){n.next=13;break}return n.next=9,u.json();case 9:u=n.sent,a({securityQuestionRedemptionToken:u.securityQuestionRedemptionToken}),n.next=14;break;case 13:i(new Error(u.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},authSendRobloxTwoStepVerify:function(e,t,r,n,a,c){return new Promise(function(){var s=i(o().mark((function i(s,u){var f,h,p,y;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f=new d(e),h="https://twostepverification.roblox.com/v1/users/".concat(n,"Authenticator"===a?"/challenges/authenticator/verify":"/challenges/email/verify"),p={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(p.cookie=r),o.next=7,l(h,{method:"POST",agent:f,headers:p,body:JSON.stringify(c)});case 7:if(!(y=o.sent).ok){o.next=15;break}return o.next=11,y.json();case 11:y=o.sent,s({verificationToken:y.verificationToken}),o.next=16;break;case 15:u(new Error(y.statusText));case 16:o.next=21;break;case 18:o.prev=18,o.t0=o.catch(0),u(o.t0);case 21:case"end":return o.stop()}}),i,null,[[0,18]])})));return function(e,t){return s.apply(this,arguments)}}())},authSendRobloxLogin:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,c){var s,u,f,h,p;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new d(r),u={"Content-Type":"application/json;charset=UTF-8",Accept:"application/json, text/plain, */*","Sec-Fetch-Site":"same-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Accept-Encoding":"gzip, deflate, br","x-csrf-token":t,"Sec-Ch-Ua":e.headers["sec-ch-ua"]||'"Not?A_Brand";v="8", "Chromium";v="108"',"Sec-Ch-Ua-Mobile":e.headers["sec-ch-ua-mobile"]||"?0","Sec-Ch-Ua-Platform":e.headers["sec-ch-ua-platform"]||'"Windows"',"User-Agent":e.headers["user-agent"],Origin:e.headers.origin,Referer:e.headers.referer,"Accept-Language":e.headers["accept-language"]},void 0!==n.challengeId&&(u["Rblx-Challenge-Id"]=n.challengeId,u["Rblx-Challenge-Metadata"]=btoa(JSON.stringify({unifiedCaptchaId:n.captchaId,captchaToken:n.captchaToken,actionType:"Login"})),u["Rblx-Challenge-Type"]="captcha"),o.next=6,l("https://auth.roblox.com/v2/login",{method:"POST",agent:s,headers:u,body:JSON.stringify(n)});case 6:if(null===(f=o.sent).headers.get("set-cookie")||!0!==f.headers.get("set-cookie").includes(".ROBLOSECURITY=")){o.next=13;break}h=(h=f.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:h}),o.next=22;break;case 13:if(null===f.headers.get("rblx-challenge-metadata")){o.next=18;break}p=JSON.parse(atob(f.headers.get("rblx-challenge-metadata"))),i({challengeId:f.headers.get("rblx-challenge-id"),captchaId:p.unifiedCaptchaId,captchaBlob:p.dataExchangeBlob,secureAuthenticationIntent:n.secureAuthenticationIntent}),o.next=22;break;case 18:return o.next=20,f.json();case 20:void 0!==(f=o.sent).twoStepVerificationData?i(f):void 0!==f.errors&&18===f.errors[0].code?c(new Error("Something went wrong. Please try to login with your roblox cookie.")):void 0!==f.errors?c(new Error(f.errors[0].message)):c(new Error("Something went wrong. Please try again in a few seconds."));case 22:o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),c(o.t0);case 27:case"end":return o.stop()}}),a,null,[[0,24]])})));return function(e,t){return a.apply(this,arguments)}}())},authSendRobloxTwoStepLogin:function(e,t,r,n){return new Promise(function(){var a=i(o().mark((function a(i,c){var s,u,f,h;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new d(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},o.next=5,l("https://auth.roblox.com/v3/users/".concat(r,"/two-step-verification/login"),{method:"POST",agent:s,headers:u,body:JSON.stringify(n)});case 5:(f=o.sent).ok?(h=(h=f.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:h})):c(new Error(f.statusText)),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),c(o.t0);case 12:case"end":return o.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}())},authRobloxSendSecurityEnable:function(e,t,r,n,a){return new Promise(function(){var c=i(o().mark((function i(c,s){var u,f,h,p;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=new d(e),f={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==a.challengeId&&(f["rblx-challenge-id"]=a.challengeId,f["rblx-challenge-metadata"]=btoa(JSON.stringify({actionType:"Generic",challengeId:a.twoStepId,verificationToken:a.verificationToken,rememberDevice:!1})),f["rblx-challenge-type"]="twostepverification"),o.next=6,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration/security-key/enable"),{method:"POST",agent:u,headers:f});case 6:if(!(h=o.sent).ok){o.next=14;break}return o.next=10,h.json();case 10:h=o.sent,c(h),o.next=15;break;case 14:403===h.status&&null!==h.headers.get("rblx-challenge-metadata")?(p=JSON.parse(atob(h.headers.get("rblx-challenge-metadata"))),c({challengeId:h.headers.get("rblx-challenge-id"),twoStepId:p.challengeId})):401===h.status?s({relogin:!0}):s(new Error(h.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),s(o.t0);case 20:case"end":return o.stop()}}),i,null,[[0,17]])})));return function(e,t){return c.apply(this,arguments)}}())},authRobloxSendSecurityEnableVerify:function(e,t,r,n,a,c){return new Promise(function(){var s=i(o().mark((function i(s,u){var f,h,p,y;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f=new d(e),h={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==a&&(h["rblx-challenge-id"]=a,h["rblx-challenge-metadata"]=btoa(JSON.stringify({challengeId:a,verificationToken:c,rememberDevice:!1,actionType:"Generic"})),h["rblx-challenge-type"]="twostepverification"),o.next=6,l("https://twostepverification.roblox.com/v1/users/".concat(n,"/configuration/security-key/enable"),{method:"POST",agent:f,headers:h});case 6:if(!(p=o.sent).ok){o.next=14;break}return o.next=10,p.json();case 10:p=o.sent,s(p),o.next=15;break;case 14:403===p.status&&null!==p.headers.get("rblx-challenge-metadata")?(y=JSON.parse(atob(p.headers.get("rblx-challenge-metadata"))),s({challengeId:y.challengeId})):401===p.status?u({relogin:!0}):u(new Error(p.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),u(o.t0);case 20:case"end":return o.stop()}}),i,null,[[0,17]])})));return function(e,t){return s.apply(this,arguments)}}())}}},7950:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){"use strict";u=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=r(7906),y=r(8749),m=r(8461).settingGet,v=r(5729),g=(r(9472).SERVICE_PROXY_TIME,function(e){var t,r=[],n=f(e);try{for(n.s();!(t=n.n()).done;)for(var o=t.value,a=0;a<o.count;a++)r.push({box:o.box})}catch(e){n.e(e)}finally{n.f()}return r}),w=function(e,t,r,n){var o=0,a=null;if(r){var i,c=f(e);try{for(c.s();!(i=c.n()).done;){var s=i.value;if(t<=(o+=s.tickets1)){a=s.item;break}}}catch(e){c.e(e)}finally{c.f()}return a}if(n){var u,l=f(e);try{for(l.s();!(u=l.n()).done;){var d=u.value;if(t<=(o+=d.tickets2)){a=d.item;break}}}catch(e){l.e(e)}finally{l.f()}return a}var h,p=f(e);try{for(p.s();!(h=p.n()).done;){var y=h.value;if(t<=(o+=y.tickets)){a=y.item;break}}}catch(e){p.e(e)}finally{p.f()}return a};e.exports={battlesCheckGetGameDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckGetGameDataGame:function(e){if(null===e)throw new Error("Your entered game id is not available.")},battlesCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.playerCount||null===e.playerCount||!0===isNaN(e.playerCount)||Math.floor(e.playerCount)<2||Math.floor(e.playerCount)>6)throw new Error("Your entered mode is invalid.");if(void 0===e.mode||null===e.mode||"string"!=typeof e.mode||!0!==["standard","team","group"].includes(e.mode))throw new Error("Your entered mode is invalid.");if(void 0===e.boxes||null===e.boxes||!0!==Array.isArray(e.boxes)||e.boxes.length<=0)throw new Error("Your entered boxes are invalid.");if(void 0===e.levelMin||null===e.levelMin||!0===isNaN(e.levelMin)||e.levelMin<0||e.levelMin>100)throw new Error("Your entered min level is invalid.");if(void 0===e.funding||null===e.funding||!0===isNaN(e.funding)||e.funding<0||e.funding>100)throw new Error("Your entered funding value is invalid.");if(void 0===e.private||null===e.private||"boolean"!=typeof e.private)throw new Error("Your entered private value is invalid.");if(void 0===e.affiliateOnly||null===e.affiliateOnly||"boolean"!=typeof e.affiliateOnly)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.cursed||null===e.cursed||"boolean"!=typeof e.cursed)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.terminal||null===e.terminal||"boolean"!=typeof e.terminal)throw new Error("Your entered affiliate value is invalid.")},battlesCheckSendCreateBoxes:function(e){var t,r=0,n=f(e.boxes);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(void 0===o._id||"string"!=typeof o._id||!0!==p.isMongoId(o._id))throw new Error("Your entered box id is invalid.");if(void 0===o.count||!0===isNaN(o.count)||Math.floor(o.count)<=0)throw new Error("Your entered box count is invalid.");r+=o.count}}catch(e){n.e(e)}finally{n.f()}if(r>50)throw new Error("Your are not allowed to select more then 50 boxes.")},battlesCheckSendCreateUser:function(e,t,r){if(e.balance<r)throw new Error("You don’t have enough balance for this action.");if(!0===e.limits.blockSponsor&&t.funding>0)throw new Error("You are not allowed to add funding to your battles.")},battlesCheckSendBotData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.")},battlesCheckSendBotGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to call bots for this game.")},battlesCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.");if(void 0===e.slot||null===e.slot||!0===isNaN(e.slot)||Math.floor(e.slot)<1||Math.floor(e.slot)>5)throw new Error("You’ve entered an invalid slot.")},battlesCheckSendJoinGame:function(e,t,r,n,o){if(null==r||"created"!==r.state||!0===o.includes(r._id.toString())||r.playerCount<=Math.floor(r.bets.length+n.filter((function(e){return e.toString()===r._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(r.playerCount<=Math.floor(e.slot))throw new Error("Your requested slot is not available.");if(!0===r.bets.some((function(t){return t.slot===Math.floor(e.slot)})))throw new Error("Your requested slot is already occupied.");if(!0===r.bets.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You aren't allowed to join more then one time per battles game.");if(r.options.levelMin>Math.floor(Math.pow(t.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of ".concat(r.options.levelMin," to join this battles game."));if(!0===r.options.affiliateOnly&&(void 0===t.affiliates.referrer||t.affiliates.referrer.toString()!==r.bets[0].user._id.toString()))throw new Error("You need to be an creators affiliate to join this battles game.")},battlesCheckSendJoinUser:function(e,t){if(e.balance<t.amount-Math.floor(t.amount*t.options.funding/100))throw new Error("You don’t have enough balance for this action.")},battlesCheckSendCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==p.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckSendCancelGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.some((function(e){return e.toString()===t._id.toString()}))||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to cancel this game.")},battlesGenerateGame:function(e,t,r){return new Promise(function(){var n,o=(n=u().mark((function n(o,a){var i,c,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=y.randomBytes(24).toString("hex"),c=y.createHash("sha256").update(i).digest("hex"),n.next=5,v.create({amount:t,playerCount:Math.floor(e.playerCount),mode:e.mode,boxes:r,options:{levelMin:Math.floor(e.levelMin),funding:Math.floor(e.funding),cursed:e.cursed,terminal:e.terminal,private:e.private,affiliateOnly:e.affiliateOnly,trust:m().games.cbattles.enabled,trust1:m().games.cmbattles.enabled},fair:{seedServer:i,hash:c},state:"created"});case 5:return s=n.sent,n.next=8,s.populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}});case 8:s=(s=n.sent).toObject(),o(s),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),a(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){l(a,r,o,i,c,"next",e)}function c(e){l(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return o.apply(this,arguments)}}())},battlesFormatBoxes:function(e,t){var r,n=[],o=f(e.boxes);try{var a=function(){var e=r.value,o=t.find((function(t){return t._id.toString()===e._id.toString()}));if(void 0===o)throw new Error("Your entered boxes are invalid.");var a=n.findIndex((function(e){return e.box._id.toString()===o.toString()}));-1!==a?n[a].count=n[a].count+Math.floor(e.count):n.push({box:o,count:Math.floor(e.count)})};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},battlesGetGameIndex:function(e,t){return e.findIndex((function(e){return e._id.toString()===t.toString()}))},battlesGetAmountGame:function(e){var t,r=0,n=f(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r+=Math.floor(o.box.amount*o.count)}}catch(e){n.e(e)}finally{n.f()}return r},battlesGetAmountWin:function(e){var t,r,n,o,a,i=g(e.boxes),c=0,u=e.mode,l=null===(t=e.options)||void 0===t?void 0:t.cursed,d=null===(r=e.options)||void 0===r?void 0:r.trust,h=null===(n=e.options)||void 0===n?void 0:n.trust1,p=e.playerCount,y=null===(o=e.options)||void 0===o?void 0:o.funding,m=f(e.bets);try{for(m.s();!(a=m.n()).done;){var v=a.value,b=!0,x=v.bot,k=v.luck&&!l;"standard"===u?b=l||!x:"team"===u&&(y>0?(b=l||2===v.slot||3===v.slot||!x,6===p&&(b=l||3===v.slot||4===v.slot||5===v.slot||!x)):(b=l||0===v.slot||1===v.slot||!x,6===p&&(b=l||0===v.slot||1===v.slot||2===v.slot||!x)));var S,E=f(v.outcomes.entries());try{for(E.s();!(S=E.n()).done;){var L=s(S.value,2),_=L[0],O=L[1];c=Math.floor(c+w(i[_].box.items,O,b&&d&&!k,b&&h&&!k).amountFixed)}}catch(e){E.e(e)}finally{E.f()}}}catch(e){m.e(e)}finally{m.f()}return c},battlesGetCountUser:function(e){var t=2;return"1v1v1"===e?t=3:"1v1v1v1"!==e&&"2v2"!==e||(t=4),t},battlesGetRounds:g,battlesGetOutcomeItem:w,battlesGetWinnerBets:function(e){var t,r,n,a,c=g(e.boxes),u=e.mode,l=null===(t=e.options)||void 0===t?void 0:t.cursed,d=null===(r=e.options)||void 0===r?void 0:r.trust,h=null===(n=e.options)||void 0===n?void 0:n.trust1,p=e.playerCount,y=null===(a=e.options)||void 0===a?void 0:a.funding,m=e.bets.map((function(e){var t,r=e.bot,n=e.luck&&!l,o=e.slot;if("standard"===u)t=l||!r;else if("team"===u){var a=4===p?[0,1]:6===p?[0,1,2]:[];y>0&&(a=4===p?[2,3]:6===p?[3,4,5]:[]),t=l||a.includes(o)||!r}else t=!0;var s=e.outcomes.map((function(e,r){return w(c[r].box.items,e,t&&d&&!n,t&&h&&!n).amountFixed}));return i(i({},e),{},{outcomes:s})})),v=[];if("group"===e.mode)v=e.bets;else if("team"===e.mode){if(4===e.playerCount){var b=!1===e.options.terminal?[].concat(o(m[0].outcomes),o(m[1].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(m[0].outcomes[m[0].outcomes.length-1]+m[1].outcomes[m[1].outcomes.length-1]),x=!1===e.options.terminal?[].concat(o(m[2].outcomes),o(m[3].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(m[2].outcomes[m[2].outcomes.length-1]+m[3].outcomes[m[3].outcomes.length-1]);v=b===x?e.bets:!1===e.options.cursed&&b>x||!0===e.options.cursed&&b<x?[e.bets[0],e.bets[1]]:[e.bets[2],e.bets[3]]}if(6===e.playerCount){var k=!1===e.options.terminal?[].concat(o(m[0].outcomes),o(m[1].outcomes),o(m[2].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(m[0].outcomes[m[0].outcomes.length-1]+m[1].outcomes[m[1].outcomes.length-1]+m[2].outcomes[m[2].outcomes.length-1]),S=!1===e.options.terminal?[].concat(o(m[3].outcomes),o(m[4].outcomes),o(m[5].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(m[3].outcomes[m[3].outcomes.length-1]+m[4].outcomes[m[4].outcomes.length-1]+m[5].outcomes[m[5].outcomes.length-1]);v=k===S?e.bets:!1===e.options.cursed&&k>S||!0===e.options.cursed&&k<S?[e.bets[0],e.bets[1],e.bets[2]]:[e.bets[3],e.bets[4],e.bets[5]]}}else{var E,L=m.map((function(t){return!1===e.options.terminal?t.outcomes.reduce((function(e,t){return e+t}),0):t.outcomes[t.outcomes.length-1]})),_=!1===e.options.cursed?Math.max.apply(Math,o(L)):Math.min.apply(Math,o(L)),O=f(m.entries());try{for(O.s();!(E=O.n()).done;){var A=s(E.value,2),j=A[0],P=A[1];_===(!1===e.options.terminal?P.outcomes.reduce((function(e,t){return e+t}),0):P.outcomes[P.outcomes.length-1])&&v.push(e.bets[j])}}catch(e){O.e(e)}finally{O.f()}}return v},battlesSanitizeGames:function(e){var t,r=[],n=f(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!1===o.options.private){"completed"!==(o=JSON.parse(JSON.stringify(o))).state&&(o.fair={hash:o.fair.hash});var a,i=f(o.boxes);try{for(i.s();!(a=i.n()).done;)a.value.box.items=[]}catch(e){i.e(e)}finally{i.f()}var c,s=f(o.bets);try{for(s.s();!(c=s.n()).done;){var u=c.value;u.user=!0===u.bot?{}:{_id:u.user._id,roblox:u.user.roblox,username:u.user.username,avatar:u.user.avatar,rank:u.user.rank,level:u.user.level,rakeback:u.user.rakeback.name,stats:u.user.stats,createdAt:u.user.createdAt}}}catch(e){s.e(e)}finally{s.f()}r.push(o)}}}catch(e){n.e(e)}finally{n.f()}return r},battlesSanitizeGame:function(e,t){var r=JSON.parse(JSON.stringify(e));if("completed"!==r.state&&(r.fair={hash:r.fair.hash,blockNum:r.fair.blockNum}),!0!==t){var n,o=f(r.boxes);try{for(o.s();!(n=o.n()).done;)n.value.box.items=[]}catch(e){o.e(e)}finally{o.f()}}var a,i=f(r.bets);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.user=!0===c.bot?{}:{_id:c.user._id,roblox:c.user.roblox,username:c.user.username,avatar:c.user.avatar,rank:c.user.rank,level:c.user.level,rakeback:c.user.rakeback.name,stats:c.user.stats,createdAt:c.user.createdAt}}}catch(e){i.e(e)}finally{i.f()}return r}}},7402:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=r(8340),i=r(8749);e.exports={callbackCheckPostOxapayData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.")},callbackOxapayCreateHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.OXAPAY_MERCHANT_API_KEY).update(t).digest("hex")},callbackOxapayCreatePayoutHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.PAYOUT_API_KEY).update(t).digest("hex")},callbackCheckPostOxapayHmac:function(e,t){if(e.toString()!==t.hmac.toString())throw new Error("Your provided hmac is invalid.")},callbackCheckPostCoinpaymentsData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.");if(void 0===t.merchant||null===t.merchant||"string"!=typeof t.merchant||t.merchant.toString()!==process.env.COINPAYMENTS_MERCHANT.toString())throw new Error("Your provided merchant is invalid.")},callbackCheckPostCoinpaymentsHmac:function(e,t){if("CoinPayments.net IPN Generator"!==t["user-agent"])throw new Error("Your Payment Origin is Coinpayment.")},callbackCheckPostCoinpaymentsTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided transaction id is currently processed.")},callbackCheckPostSkinifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transaction_id||!0===isNaN(e.transaction_id))throw new Error("Your provided transaction id is invalid.");if(void 0===e.token_md5||"string"!=typeof e.token_md5)throw new Error("Your provided token is invalid.");if(void 0===e.status||"string"!=typeof e.status)throw new Error("Your provided status is invalid.")},callbackCheckPostSkinifyToken:function(e,t){if(e.toString()!==t.token_md5.toString())throw new Error("Your provided token is invalid.")},callbackCheckPostSkinifyTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCheckPostZebrasmarketData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.orderId)throw new Error("Your provided order id is invalid.")},callbackCheckPostZebrasmarketSignature:function(e,t){if(e.toString()!==t.signature.toString())throw new Error("Your provided signature is invalid.")},callbackCheckPostZebrasmarketTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCoinpaymentsCreateHmac:function(e){var t=a.stringify(e).replace(/%20/g,"+");return i.createHmac("sha512",process.env.COINPAYMENTS_SECRET).update(t).digest("hex")},callbackZebrasmarketCreateSignature:function(e){var t,r="",a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}(Object.keys(e).sort());try{for(a.s();!(t=a.n()).done;){var c=t.value;"signature"!==c&&"object"!==n(e[c])&&(r+=e[c])}}catch(e){a.e(e)}finally{a.f()}return i.createHash("sha256").update("".concat(r+process.env.ZEBRASMARKET_API_KEY)).digest("hex")}}},7587:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(4229),s=r(8340),u=r(3688);e.exports={captchaCheckData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(!0!==e.success)throw new Error("Your provided captcha token is invalid.")},captchaGetData:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("https://hcaptcha.com/siteverify?secret=".concat(process.env.CAPTCHA_SECRET,"&response=").concat(e),{method:"POST"});case 3:if(void 0===(a=t.sent)||200!==a.status){t.next=11;break}return t.next=7,a.json();case 7:i=t.sent,r(i),t.next=12;break;case 11:r({success:!1});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),r({success:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}())},captchaGetDataRoblox:function(e,t,r){return new Promise(function(){var n=i(o().mark((function n(a,i){var l,f,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l=new u(e),f={"Sec-Ch-Ua":t.headers["sec-ch-ua"],"Sec-Ch-Ua-Mobile":t.headers["sec-ch-ua-mobile"],"Sec-Ch-Ua-Platform":t.headers["sec-ch-ua-platform"],"User-Agent":t.headers["user-agent"],Accept:"*/*",Origin:"https://www.roblox.com","Sec-Fetch-Site":"cross-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty",Referer:"https://www.roblox.com/","Accept-Encoding":"gzip, deflate","Accept-Language":t.headers["accept-language"],"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.next=5,c("https://client-api.arkoselabs.com/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",{method:"POST",agent:l,headers:f,body:s.stringify(r)});case 5:if(!(d=n.sent).ok){n.next=13;break}return n.next=9,d.json();case 9:d=n.sent,a(d),n.next=14;break;case 13:i(new Error(d.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())}}},3534:(e,t,r)=>{function n(){"use strict";n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(n,a,c,s){var u=h(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==i(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var n;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,n){r(e,o,t,n)}))}return n=n?n.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function o(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function c(e){o(i,n,a,c,s,"next",e)}function s(e){o(i,n,a,c,s,"throw",e)}c(void 0)}))}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=r(8749),u=r(4229),l=r(758);e.exports={cashierCheckSendCreditDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<10)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CREDIT_MIN_AMOUNT))throw new Error("You can only deposit a min amount of ".concat(parseFloat(process.env.CREDIT_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux."))},cashierCreditCreateSignature:function(e){var t,r="",n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var o=t.value;"signature"!==o&&"object"!==i(e[o])&&(r+=e[o])}}catch(e){n.e(e)}finally{n.f()}return s.createHash("sha256").update("".concat(r).concat(process.env.ZEBRASMARKET_API_KEY)).digest("hex")},cashierCreditCreateTransaction:function(e){return new Promise(function(){var t=a(n().mark((function t(r,o){var a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={"content-type":"application/json;charset=UTF-8"},t.next=4,u("https://api.zebrasmarket.com/partner/".concat(process.env.ZEBRASMARKET_PARTNER,"/trade_url"),{method:"POST",headers:a,body:JSON.stringify(e)});case 4:if(200!==(i=t.sent).status){t.next=12;break}return t.next=8,i.json();case 8:i=t.sent,r(i.data),t.next=13;break;case 12:o(new Error("ERROR: ".concat(i.statusText)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),o(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCreditCreateUrl:function(e,t){return new Promise(function(){var r=a(n().mark((function r(o,i){var c,s,u;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.launch({headless:"new"});case 2:return c=r.sent,r.next=5,c.newPage();case 5:return s=r.sent,r.prev=6,r.next=9,s.goto(e,{waitUntil:"networkidle0"});case 9:return r.next=11,s.click('input[type="number"]',{clickCount:3});case 11:return r.next=13,s.keyboard.press("Backspace");case 13:return r.next=15,s.type('input[type="number"]',t);case 15:return r.next=17,s.click("div.bg-pink-e6.hover");case 17:return c.on("targetcreated",function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("page"!==t.type()){e.next=4;break}return e.next=3,c.close();case 3:o(t.url());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=new Promise((function(t,r){setTimeout((function(){o(e)}),1e4)})),r.next=21,Promise.race([u,new Promise((function(){}))]);case 21:r.next=28;break;case 23:return r.prev=23,r.t0=r.catch(6),r.next=27,c.close();case 27:i(r.t0);case 28:case"end":return r.stop()}}),r,null,[[6,23]])})));return function(e,t){return r.apply(this,arguments)}}())}}},3818:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}var u=r(7906),l=r(4229),f=r(8749);r(8938),e.exports={cashierCheckSendCryptoWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.currency||"string"!=typeof e.currency||!0!==["btc","eth","ltc","doge","trx","usdt","usdt_erc20","usdt_trc20","sol"].includes(e.currency))throw new Error("You’ve entered an invalid withdraw currency.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.");if(Math.floor(e.amount)<Math.floor(process.env.MIN_WITHDRAWAL_AMOUNT/process.env.COIN_RATE*1e3))throw new Error("Please try a minimum withdrawal of $5.");if(void 0===e.address||"string"!=typeof e.address||"btc"===e.currency&&!0!==u.isBtcAddress(e.address)||"eth"===e.currency&&!0!==u.isEthereumAddress(e.address)||"ltc"===e.currency&&!0!==/^([LM3]{1}[a-km-zA-HJ-NP-Z1-9]{26,33}||ltc1[a-z0-9]{39,59})$/.test(e.address))throw new Error("You’ve entered an invalid ".concat(e.currency," withdraw address."))},cashierCheckSendCryptoWithdrawUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(t.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(t.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===t.limits.blockSponsor)throw new Error("You aren`t allowed to withdraw at the moment. Please contact the support for more information.");if(t.stats.deposit<5e3)throw new Error("You need to deposit 5 coin to request withdraw.")},cashierCheckSendCryptoWithdrawTransactions:function(e){if(e.length>=2)throw new Error("You aren`t allowed to have more then 2 pending crypto withdraws.")},cashierCryptoGetPrices:function(){return new Promise(function(){var e=s(o().mark((function e(t,r){var n,i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={cmd:"rates",short:1,accepted:2,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},i=Object.entries(n).map((function(e){var t=a(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),c={"content-type":"application/x-www-form-urlencoded",hmac:f.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(i).digest("hex")},e.next=6,l("https://www.coinpayments.net/api.php",{method:"POST",headers:c,body:new URLSearchParams(n)});case 6:if(!(s=e.sent).ok){e.next=14;break}return e.next=10,s.json();case 10:s=e.sent,t(s.result),e.next=15;break;case 14:r(new Error(s.statusText));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddress:function(e){return new Promise(function(){var t=s(o().mark((function t(r,n){var i,c,s,u,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={cmd:"get_callback_address",currency:e,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},c=Object.entries(i).map((function(e){var t=a(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),s={"content-type":"application/x-www-form-urlencoded",hmac:f.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(c).digest("hex")},u=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.next=8,l("https://www.coinpayments.net/api.php",{method:"POST",headers:s,body:new URLSearchParams(i)});case 8:return d=t.sent,t.next=11,Promise.race([d,u]);case 11:if(!(h=t.sent).ok){t.next=19;break}return t.next=15,h.json();case 15:"ok"===(h=t.sent).error&&h.result?r(h.result):(console.log("unkonw coinpay error: ",h.error),n(new Error("The network is busy while creating the coin account."))),t.next=20;break;case 19:n(new Error(h.statusText));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),n(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetPricesByOxapay:function(){return new Promise(function(){var e=s(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,l("https://api.oxapay.com/v1/common/prices",{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:200===(n=e.sent).status?t(n.data):r(new Error(n.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddressByOxapay:function(e){return new Promise(function(){var t=s(o().mark((function t(r,n){var a,i,c,s,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={network:e,auto_withdrawal:!1,email:"expertleeyang@gmail.com",callback_url:"https://wesuccess.biz/api/callback/goon-oxapay"},i={merchant_api_key:process.env.OXAPAY_MERCHANT_API_KEY,"content-type":"application/json"},c=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.next=7,l("https://api.oxapay.com/v1/payment/static-address",{method:"POST",headers:i,body:JSON.stringify(a)});case 7:return s=t.sent,t.next=10,Promise.race([s,c]);case 10:if(!(u=t.sent).ok){t.next=18;break}return t.next=14,u.json();case 14:200===(u=t.sent).status&&u.data.address?r(u.data):n(new Error("The network is busy while creating the coin account.")),t.next=19;break;case 18:n(new Error(u.statusText));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),n(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetStableCurrencyName:function(e,t){var r=e;return"usdc"===r&&"ethereum network"===t?r="usdc_erc20":"usdt"===r&&"ethereum network"===t?r="usdt_erc20":"usdt"===r&&"tron network"===t&&(r="usdt_trc20"),r}}},2745:(e,t,r)=>{var n=r(7906);e.exports={cashierCheckSendGiftRedeemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US"))throw new Error("Your provided gift code is invalid.")},cashierCheckSendGiftRedeemCode:function(e,t){if(null===e||void 0!==e.redeemer||!0===t.includes(e._id.toString()))throw new Error("Your provided gift code is not available.")}}},901:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=r(7906),d=r(4229),h=r(3688),p=function(){var e=c(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(a().mark((function e(n,o){var i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=new h(t),e.next=4,d("https://inventory.roblox.com/v1/users/".concat(r,"/assets/collectibles"),{agent:i});case 4:if(!(c=e.sent).ok){e.next=12;break}return e.next=8,c.json();case 8:c=e.sent,n(c.data),e.next=13;break;case 12:o(new Error(c.statusText));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),o(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(a().mark((function e(r,n){var i,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=[],c=0;case 3:if(!(c<=Math.floor(t.length/100))){e.next=20;break}return e.next=6,d("https://thumbnails.roblox.com/v1/assets?assetIds=".concat(t.slice(100*c,100*(c+1)).join(","),"&size=110x110&format=png"));case 6:if(!(s=e.sent).ok){e.next=14;break}return e.next=10,s.json();case 10:s=e.sent,i=[].concat(o(i),o(s.data)),e.next=15;break;case 14:n(new Error(s.statusText));case 15:return e.next=17,new Promise((function(e){return setTimeout(e,1e3)}));case 17:c++,e.next=3;break;case 20:r(i),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),n(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierCheckSendLimitedEnableRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedGenerateType:function(e){if(null===e)throw new Error("You need to change your 2fa method to emails or the authenticator app.")},cashierCheckSendLimitedVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.challengeId||"string"!=typeof e.challengeId||e.challengeId.length>36)throw new Error("Your provided two challenge id is invalid.");if(void 0===e.twoStepCode||"string"!=typeof e.twoStepCode||!0!==f.isAlphanumeric(e.twoStepCode))throw new Error("Your provided two step code is invalid.")},cashierCheckSendLimitedVerifyRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.items||!0!==Array.isArray(e.items)||e.items.length<=0||e.items.length>4)throw new Error("Your provided items are invalid.")},cashierCheckSendLimitedDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositItems:function(e,t,r){var n,o=[],a=s(e.items);try{var i=function(){var e=n.value;if(null===e||void 0===e.uniqueId||!0===o.includes(e.uniqueId)||!0!==t.some((function(t){return t.uniqueId===e.uniqueId})))throw new Error("Your provided items are invalid.");if(!0===r.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))})))throw new Error("Your provided items are already used in a different transaction.");o.push(e.uniqueId)};for(a.s();!(n=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}},cashierCheckSendLimitedDepositUser:function(e,t,r,n){if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds.");if(t.length>=12)throw new Error("You can only have 12 active limited listings per time.");if(r>=8)throw new Error("You got to many canceled limited listings in the last hour.");if(!0!==n.canTrade&&"SenderCannotTrade"===n.status)throw new Error("You aren't able to trade. Please check your roblox account.")},cashierCheckSendLimitedWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==f.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")},cashierCheckSendLimitedWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedWithdrawTransaction:function(e,t,r){if(null===t||"created"!==t.state||!0===r.includes(t._id.toString()))throw new Error("Your provided limited listing id is not available.");if(e._id.toString()===t.deposit.user._id.toString())throw new Error("You aren't allowed withdraw your own limited listing.")},cashierCheckSendLimitedWithdrawUser:function(e,t,r){if(e.balance<t)throw new Error("You don’t have enough balance for this action.");if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds. Please verify again.");if(!0!==r.canTrade&&"SenderCannotTrade"===r.status)throw new Error("You aren't able to trade. Please check your roblox account.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierLimitedGetDummyItem:function(e,t){var r,n=null,o=s(e.sort((function(e,t){return e.price-t.price})));try{var a=function(){var e=r.value;e.amount<=1e3*process.env.LIMITED_MAX_AMOUNT_DUMMY&&!1===t.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))}))&&(n=e)};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}if(null!==n)return n;throw new Error("You dont have a valid dummy item in your inventory.")},cashierLimitedGetInventory:p,cashierLimitedGetItems:function(){return new Promise(function(){var e=c(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("https://www.rolimons.com/itemapi/itemdetails");case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:n=e.sent,t(n.items),e.next=12;break;case 11:r(new Error(n.statusText));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierLimitedGetItemImages:y,cashierGetUserCanTrade:function(e,t,r){return new Promise(function(){var n=c(a().mark((function n(o,i){var c,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new h(e),s={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,d("https://trades.roblox.com/v1/users/".concat(r,"/can-trade-with"),{agent:c,headers:s});case 5:if(!(u=n.sent).ok){n.next=13;break}return n.next=9,u.json();case 9:u=n.sent,o(u),n.next=14;break;case 13:401===u.status?i({relogin:!0}):i(new Error(u.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierLimitedGetTransaction:function(e,t,r){return new Promise(function(){var n=c(a().mark((function n(o,i){var c,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new h(e),s={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,d("https://trades.roblox.com/v1/trades/".concat(r),{agent:c,headers:s});case 5:if(!(u=n.sent).ok){n.next=13;break}return n.next=9,u.json();case 9:u=n.sent,o(u),n.next=14;break;case 13:i(new Error(u.statusText));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierSendLimitedTwoStepRedeem:function(e,t,r,n){return new Promise(function(){var o=c(a().mark((function o(i,c){var s,u,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new h(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,d("https://trades.roblox.com/v1/trade-friction/two-step-verification/redeem",{method:"POST",agent:s,headers:u,body:JSON.stringify(n)});case 5:if(!(l=o.sent).ok){o.next=14;break}return o.next=9,l.json();case 9:l=o.sent,console.log(l),i(),o.next=15;break;case 14:401===l.status?c({relogin:!0}):c(new Error(l.statusText));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),c(o.t0);case 20:case"end":return o.stop()}}),o,null,[[0,17]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTrade:function(e,t,r,n){return new Promise(function(){var o=c(a().mark((function o(i,c){var s,u,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new h(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,d("https://trades.roblox.com/v1/trades/send",{method:"POST",agent:s,headers:u,body:JSON.stringify(n)});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:l.id}),o.next=14;break;case 13:i({success:!1});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeAccept:function(e,t,r,n){return new Promise(function(){var o=c(a().mark((function o(i,c){var s,u,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new h(t),u={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,d("https://trades.roblox.com/v1/trades/".concat(n,"/accept"),{method:"POST",agent:s,headers:u});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:n}),o.next=14;break;case 13:i({success:!1,tradeId:n});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1,tradeId:n});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeDecline:function(e,t,r,n){return new Promise(function(){var o=c(a().mark((function o(i,c){var s,u,l;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=new h(t),u={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},o.next=5,d("https://trades.roblox.com/v1/trades/".concat(n,"/decline"),{method:"POST",agent:s,headers:u});case 5:if(!(l=o.sent).ok){o.next=13;break}return o.next=9,l.json();case 9:l=o.sent,i({success:!0,tradeId:n}),o.next=14;break;case 13:i({success:!1,tradeId:n});case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),i({success:!1,tradeId:n});case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedFormatItems:function(e,t){var r,n=[],o=s(e);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t.assetId.toString()===e.assetId.toString()}));-1!==o&&n.push({uniqueId:e.userAssetId,assetId:e.assetId,name:e.name,image:t[o].image,amount:t[o].amount})};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},cashierLimitedFormatDepositItems:function(e,t){var r,n=[],o=s(e.items);try{var a=function(){var e=r.value,o=t.findIndex((function(t){return t.uniqueId===e.uniqueId}));-1!==o&&n.push(t[o])};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return n},cashierLimitedFormatTransactions:function(e){var t,r=[],n=s(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push({_id:o._id,amount:o.amount,items:o.deposit.items,user:o.deposit.user._id||o.deposit.user,state:o.state})}}catch(e){n.e(e)}finally{n.f()}return r},cashierLimitedFormatTransaction:function(e){return{_id:e._id,amount:e.amount,items:e.deposit.items,user:e.deposit.user._id||e.deposit.user,state:e.state}}}},8521:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(7906),f=r(4229),d=r(3688),h=[];e.exports={cashierCheckGetRobuxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||!0!==["deposit","withdraw"].includes(e.type))throw new Error("Your entered type is invalid.")},cashierCheckGetRobuxDataRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only deposit a minmum amount of DL".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositUser:function(e,t,r){if(e.amount+t>Math.floor(1e3*r))throw new Error("You don’t have enough robux for this action.")},cashierCheckSendRobuxWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided withdraw amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only withdraw a minmum amount of R$".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxWithdrawUser:function(e,t){if(e.balance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierCheckSendRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==l.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},cashierCheckSendRobuxCancelRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if("created"!==e.state||!0===t.includes(e._id.toString()))throw new Error("You aren't allowed to cancel this offer at the moment.")},cashierRobuxGetBlockOffer:function(){return h},cashierRobuxAddBlockOffer:function(e){h.push(e)},cashierRobuxRemoveBlockOffer:function(e){h.splice(h.indexOf(e),1)},cashierRobuxSortOffers:function(e){var t,r={},n=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=new Date(o.createdAt),i="".concat(a.getFullYear(),"-").concat(a.getMonth(),"-").concat(a.getDate(),"-").concat(a.getHours());void 0===r[i]?r[i]=[o]:r[i].push(o)}}catch(e){n.e(e)}finally{n.f()}for(var c in r)r[c].sort((function(e,t){return t.amount-e.amount}));return Object.values(r).flat()},cashierGetUserRobux:function(e,t){return new Promise(function(){var r=c(a().mark((function r(n,o){var i,c,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=new d(e),c={cookie:".ROBLOSECURITY=".concat(t)},r.next=5,f("https://economy.roblox.com/v1/user/currency",{agent:i,headers:c});case 5:if(200!==(s=r.sent).status){r.next=13;break}return r.next=9,s.json();case 9:s=r.sent,n(s.robux),r.next=14;break;case 13:401===s.status?o({relogin:!0}):o(new Error("ERROR: ".concat(s.statusText)));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),o(r.t0);case 19:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(e,t){return r.apply(this,arguments)}}())},cashierRobuxGetGameId:function(e,t,r){return new Promise(function(){var n=c(a().mark((function n(o,i){var c,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new d(e),s={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,f("https://apis.roblox.com/universes/v1/search?CreatorType=User&CreatorTargetId=".concat(r,"&IsArchived=false&PageSize=10&SortParam=GameCreated&SortOrder=Desc"),{agent:c,headers:s});case 5:if(200!==(u=n.sent).status){n.next=13;break}return n.next=9,u.json();case 9:u=n.sent,o(u.data[0].id),n.next=14;break;case 13:401===u.status?i({relogin:!0}):i(new Error("ERROR: ".concat(u.statusText)));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),i(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxGetProducts:function(e,t,r){return new Promise(function(){var n=c(a().mark((function n(i,c){var s,u,l,h,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,s=new d(e),u={cookie:".ROBLOSECURITY=".concat(t)},l=[],h=1;case 5:return n.next=8,f("https://apis.roblox.com/developer-products/v1/universes/".concat(r,"/developerproducts?pageNumber=").concat(h,"&pageSize=250"),{agent:s,headers:u});case 8:if(200!==(p=n.sent).status){n.next=21;break}return n.next=12,p.json();case 12:if(p=n.sent,l=[].concat(o(l),o(p)),!(p.length>=250)){n.next=18;break}h+=1,n.next=19;break;case 18:return n.abrupt("break",30);case 19:n.next=28;break;case 21:if(401!==p.status){n.next=26;break}return c({relogin:!0}),n.abrupt("break",30);case 26:return c(new Error("ERROR: ".concat(p.statusText))),n.abrupt("break",30);case 28:n.next=5;break;case 30:i(l),n.next=36;break;case 33:n.prev=33,n.t0=n.catch(0),c(n.t0);case 36:case"end":return n.stop()}}),n,null,[[0,33]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxGetProduct:function(e,t,r){return new Promise(function(){var n=c(a().mark((function n(o,i){var c,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=new d(e),s={cookie:".ROBLOSECURITY=".concat(t)},n.next=5,f("https://apis.roblox.com/developer-products/v1/developer-products/".concat(r),{agent:c,headers:s});case 5:if(200!==(u=n.sent).status){n.next=14;break}return n.next=9,u.json();case 9:u=n.sent,console.log("Scond Get prodct: ",u),o(u),n.next=15;break;case 14:401===u.status?i({relogin:!0}):i(new Error("ERROR: ".concat(u.statusText)));case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),i(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxCreateProduct:function(e,t,r,n,o,i){return new Promise(function(){var s=c(a().mark((function c(s,u){var l,h,p;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=new d(t),h={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.next=5,f("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts?name=").concat(o,"&description=&priceInRobux=").concat(i),{method:"POST",agent:l,headers:h});case 5:if(200!==(p=a.sent).status){a.next=13;break}return a.next=9,p.json();case 9:p=a.sent,s(p),a.next=14;break;case 13:401===p.status?u({relogin:!0}):u(new Error("ERROR: ".concat(p.statusText)));case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),u(a.t0);case 19:case"end":return a.stop()}}),c,null,[[0,16]])})));return function(e,t){return s.apply(this,arguments)}}())},cashierRobuxUpdateProduct:function(e,t,r,n,o,i,s){return new Promise(function(){var u=c(a().mark((function c(u,l){var h,p,y,m;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,h=new d(t),p={"content-type":"application/json-patch+json","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},y={Name:i,PriceInRobux:s},a.next=6,f("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts/").concat(o,"/update"),{method:"POST",agent:h,headers:p,body:JSON.stringify(y)});case 6:if(200!==(m=a.sent).status){a.next=14;break}return a.next=10,m.json();case 10:m=a.sent,u(m),a.next=15;break;case 14:l(new Error(m.statusText));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),l(a.t0);case 20:case"end":return a.stop()}}),c,null,[[0,17]])})));return function(e,t){return u.apply(this,arguments)}}())},cashierRobuxPurchaseProduct:function(e,t,r,n,o,i){return new Promise(function(){var s=c(a().mark((function c(s,u){var l,h,p,y;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=new d(t),h={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},p={expectedCurrency:1,expectedPrice:o,expectedSellerId:i},a.next=6,f("https://economy.roblox.com/v1/purchases/products/".concat(n),{method:"POST",agent:l,headers:h,body:JSON.stringify(p)});case 6:if(!(y=a.sent).ok){a.next=14;break}return a.next=10,y.json();case 10:!0===(y=a.sent).purchased?s():u(new Error("".concat(y.title,": ").concat(y.errorMsg))),a.next=15;break;case 14:u(new Error(y.statusText));case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),u(a.t0);case 21:case"end":return a.stop()}}),c,null,[[0,17]])})));return function(e,t){return s.apply(this,arguments)}}())}}},6919:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(4229);e.exports={cashierCheckSendSteamDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.game||"string"!=typeof e.game||!0!==["csgo","dota2"].includes(e.game))throw new Error("Your provided game is invalid.")},cashierSteamCreateTransaction:function(e){return new Promise(function(){var t,r=(t=o().mark((function t(r,n){var a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={Token:process.env.SKINIFY_API_KEY},t.next=4,i("https://skinify.io/api/create-deposit",{method:"POST",headers:a,body:JSON.stringify(e)});case 4:if(200!==(c=t.sent).status){t.next=12;break}return t.next=8,c.json();case 8:c=t.sent,r(c),t.next=13;break;case 12:n(new Error("ERROR: ".concat(c.statusText)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())}}},6234:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var l=r(8749),f=r(8109),d=r(4862),h=(r(9472).SERVICE_PROXY_TIME,function(e,t){for(var r=0,n=e.length%4,o=n>0?n-4:0;o<e.length;o+=4)r=((r<<16)+parseInt(e.substring(o,o+4),16))%t;return 0===r});e.exports={crashCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.autoCashout||null===e.autoCashout||!0===isNaN(e.autoCashout)||Math.floor(e.autoCashout)<0)throw new Error("Your entered auto cashout is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CRASH_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.CRASH_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.CRASH_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.CRASH_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},crashCheckSendBetUser:function(e,t,r){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===r.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You can only bet one time per round.")},crashCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},crashCheckSendCashoutGame:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("rolling"!==e.state||t<=100)throw new Error("You need to wait for the start of the round before you can cashout.")},crashCheckSendCashoutBet:function(e,t,r){if(void 0===e||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(null===r||void 0!==r.multiplier||r.autoCashout>=101&&r.autoCashout<=t)throw new Error("Your bet is not available or was already cashed out.");if(e.outcome<t)throw new Error("Your are not allowed to cashout your bet because the game already completed.")},crashGetGameMultiplier:function(e){return Math.floor(100*Math.pow(Math.E,6e-5*e))},crashGenerateGame:function(){return new Promise(function(){var e,t=(e=s().mark((function e(t,r){var n,o,a,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l.randomBytes(8).toString("hex"),o=l.randomBytes(24).toString("hex"),a=l.createHash("sha256").update(o).digest("hex"),e.next=6,d.findOne({state:"created"}).sort({_id:-1}).lean();case 6:if(i=e.sent){e.next=11;break}return i=new d({seedServer:n,hash:a,seedPublic:o,state:"created"}),e.next=11,i.save();case 11:return e.next=13,Promise.all([f.create({fair:{seed:i._id},state:"created"}),d.findByIdAndUpdate(i._id,{state:"completed"},{}),d.create({seedPublic:n,seedServer:o,hash:a,state:"created"})]);case 13:return c=e.sent,e.next=16,c[0].populate({path:"fair.seed",select:"seedServer hash"});case 16:c[0]=e.sent,c[0]=c[0].toObject(),t(c[0]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),r(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},crashGetOutcome:function(e){var t=parseInt(20);if(!0===h(e,t))return 100;var r=parseInt(e.slice(0,13),16),n=Math.pow(2,52);return Math.floor((100*n-r)/(n-r))},crashSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.outcome,delete t.fair),t},crashSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback,stats:o.user.stats,createdAt:o.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},crashSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback,stats:t.user.stats,createdAt:t.user.createdAt},t}}},5165:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var i=r(1572),c=r(8749),s=r(523).Resend,u=(i.createTransport({host:process.env.EMAIL_SMTP_HOST,port:process.env.EMAIL_SMTP_PORT,secure:!1,auth:{user:process.env.EMAIL_SMTP_USER,pass:process.env.EMAIL_SMTP_PASSWORD}}),new s(process.env.RESEND_API_KEY)),l=function(){var e,t=(e=o().mark((function e(t,r,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.emails.send({from:"".concat(process.env.EMAIL_FROM_NAME," <").concat(process.env.EMAIL_FROM,">"),to:t,subject:r,text:n});case 3:console.log("Email sent successfully"),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.error("Failed to send email:",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}();e.exports={emailSend:l,getCreditTicket:function(e){return new Promise((function(t,r){try{var n=process.env.CREDITVALUE,o=c.randomBytes(16),a=c.scryptSync(n,"salt",32),i=c.createCipheriv("aes-256-cbc",a,o),s=i.update(e,"utf8","hex");s+=i.final("hex"),t({iv:o.toString("hex"),encryptedData:s})}catch(e){r(e)}}))}}},2507:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=r(4229);e.exports={fairGetData:function(){return new Promise(function(){var e=i(o().mark((function e(t,r){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("https://eos.greymass.com/",{headers:{"Content-Type":"application/json"}});case 3:if(void 0===(n=e.sent)||200!==n.status){e.next=11;break}return e.next=7,n.json();case 7:a=e.sent,t({success:!0,data:a}),e.next=12;break;case 11:r();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())},fairGetBlockData:function(e){return new Promise(function(){var t=i(o().mark((function t(r,n){var a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("https://eos.greymass.com/v1/chain/get_block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({block_num_or_id:e})});case 3:if(void 0===(a=t.sent)||200!==a.status){t.next=11;break}return t.next=7,a.json();case 7:i=t.sent,r({success:!0,data:i}),t.next=12;break;case 11:n(new Error("Failed to fetch block data"));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}())}}},5297:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateCodeCode:function(e){if(null!=e)throw new Error("You’ve entered an affiliate code that is already used by another user.")},generalCheckSendAffiliateClaimCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateClaimCodeUser:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0!==e.affiliates.referredAddress)throw new Error("You have already redeemed a affiliate code.")},generalCheckSendAffiliateClaimCodeCode:function(e,t){if(null===t)throw new Error("Your provided affiliate code is invalid.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to redeem your own affiliate code.")},generalCheckSendAffiliateClaimEarningsUser:function(e){if(void 0===e)throw new Error("Something went wrong. Please try again in a few seconds.");if(e.affiliates.available<Math.floor(1e3*process.env.AFFILIATE_MIN_CLAIM))throw new Error("You’ll need a minimum of ".concat(process.env.AFFILIATE_MIN_CLAIM," coin in earnings to claim."))},generalCheckAffiliateClaim:function(e,t,r){if(void 0===t||null==t)throw new Error("Your provided affiliate code is invalid.");if(r&&t._id.toString()===e.affiliates.referrer.toString())throw console.log(t._id.toString(),r.referrer.toString()),new Error("You have already redeemed this affiliate code.")},generalCheckAffiliateClaimForPreventSameCode:function(e,t){if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to redeem your own affiliate code.")}}},1454:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var c=r(7906),s=function(e){var t=Math.floor((new Date(e).getTime()-(new Date).getTime())/1e3);return t>60?"".concat(Math.floor(t/60)," minutes"):"".concat(t," seconds")};e.exports={generalCheckGetChatMessagesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.room||null===e.room||"string"!=typeof e.room||!1===["en","tr","de","es","beg","whale"].includes(e.room))throw new Error("Your entered chat room is invalid.")},generalCheckSendChatMessageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.message||null===e.message||"string"!=typeof e.message||""===e.message.trim())throw new Error("Your entered chat message is invalid.");if(e.message.length>300)throw new Error("Your entered chat message is to long.")},generalCheckSendChatMessageRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(!1===["admin","mod"].includes(e.rank)&&!0!==t.chat.rooms[r].enabled)throw new Error("Your entered chat room is currently locked.");if("whale"===r&&e.stats.bet<1e9)throw new Error("Your need to have a minimum wager of 1,000,000 to use the whale chat.")},generalCheckSendChatMessageUser:function(e,t,r){if(void 0===e||void 0===t||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(0>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 1 to use the chat.");if(void 0!==e.mute&&void 0!==e.mute.expire&&new Date(e.mute.expire).getTime()>Date.now())throw new Error("You are still muted for another ".concat(s(e.mute.expire),"."));if("normal"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-3e3))throw new Error("You can only send 1 message every 3 seconds.");if("slow"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-6e3))throw new Error("You can only send 1 message every 6 seconds because the chat is in slow mode.")},generalCheckSendChatRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.messageId||null===e.messageId||"string"!=typeof e.messageId||!0!==c.isMongoId(e.messageId))throw new Error("Your entered chat message is invalid.")},generalCheckSendChatRemoveRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatRemoveMessage:function(e,t){if(!0!==t.some((function(t){return t._id.toString()===e.messageId.toString()})))throw new Error("Your entered chat message is not available.")},generalCheckSendChatClearRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatLockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.value||null===e.value||"boolean"!=typeof e.value)throw new Error("Your entered chat lock value is invalid.")},generalCheckSendChatLockRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(e.value===t.chat.rooms[r].enabled)throw new Error("Your entered chat room is already ".concat(!0===e.value?"unlocked":"locked","."))},generalGetChatOnlineCount:function(e){return new Promise(function(){var t,r=(t=a().mark((function t(r,n){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.of("/socket/general").in("en").allSockets(),e.of("/socket/general").in("tr").allSockets(),e.of("/socket/general").in("de").allSockets(),e.of("/socket/general").in("es").allSockets(),e.of("/socket/general").in("beg").allSockets(),e.of("/socket/general").in("whale").allSockets()]);case 3:o=t.sent,r({en:Math.floor(1.6*o[0].size),tr:Math.floor(1.6*o[1].size),de:Math.floor(1.6*o[2].size),es:Math.floor(1.6*o[3].size),beg:Math.floor(1.6*o[4].size),whale:Math.floor(1.6*o[5].size)}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r({en:0,tr:0,de:0,es:0,beg:0,whale:0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalChatGetMuteTime:s,generalFilterMessage:function(e,t){var r,n=c.escape(e),a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}(t);try{for(a.s();!(r=a.n()).done;)for(var i=r.value,s=n.toLowerCase();!0===s.includes(i);){var u=s.indexOf(i);s=s.substring(0,u)+"*".repeat(i.length)+s.substring(u+i.length),n=n.substring(0,u)+"*".repeat(i.length)+n.substring(u+i.length)}}catch(e){a.e(e)}finally{a.f()}return n}}},593:e=>{e.exports={generalGetLeaderboardTimeLeft:function(e){return new Date(e.updatedAt).getTime()+864e5*Number(e.duration)-(new Date).getTime()}}},1681:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendPromoClaimData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your entered captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered promo code is invalid.")},generalCheckSendPromoClaimCode:function(e,t,r){if(null===t)throw new Error("Your entered promo code is not available.");if(t.redeemptionsTotal>=t.redeemptionsMax||r.filter((function(e){return e===t._id.toString()}))>=t.redeemptionsMax-t.redeemptionsTotal)throw new Error("Your entered promo code is not available.");if(!0===t.redeemers.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("Your have already claimed this promo code.");if(t.levelMin>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your need to have a minimum level of ".concat(t.levelMin," to use this promo code."));if(!(Math.floor(Math.pow(e.xp/1e3/100,1/3))>=t.levelMin))throw new Error("Something went wrong.");if(t.allowLevel<Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your current level is too high, please try more higher promo code.")}}},3602:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={generalCheckSendRainCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered rain amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_HOST_AMOUNT))throw new Error("You can only host a rain with a minmum amount of $".concat(parseFloat(process.env.RAIN_MIN_HOST_AMOUNT).toFixed(2),"."))},generalCheckSendRainCreateRain:function(e,t){if(null!==e)throw new Error("You need to wait for the current hosted rain to complete.");if(0!==t.length)throw new Error("You need to wait for the current hosted rain to complete.")},generalCheckSendRainCreateUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to create a rain at the moment.");if(Math.floor(e.amount)<25e4)throw new Error("Minimum rain host is 250R$.")},generalCheckSendRainTipData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered tip amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_TIP_AMOUNT))throw new Error("You can only tip a minmum amount of ".concat(parseFloat(process.env.RAIN_MIN_TIP_AMOUNT).toFixed(2)," CheerBux to the rain."))},generalCheckSendRainTipRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")},generalCheckSendRainTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to tip the rain at the moment.")},generalCheckSendRainJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.")},generalCheckSendRainJoinRain:function(e,t,r){if(null===t)throw new Error("Your entered rain is not available.");if(new Date(t.updatedAt).getTime()+12e4<=(new Date).getTime())throw new Error("Your entered rain is already completed");if(!0===t.participants.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("You can only join the rain once.");if("site"===t.type&&!0!==r.general.rain.enabled)throw new Error("The rain is currently unavailable at this time.")},generalCheckSendRainJoinUser:function(e,t,r){if(!0===e.limits.blockRain)throw new Error("You aren't allowed to join the rain at the moment.");if("site"===t.type&&3>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 3 to join the rain.");if("site"===t.type&&r.filter((function(e){return"site"===e.type})).length>=10)throw new Error("You aren't allowed to join the rain more then 10 times per 24 hours.")},generalCheckSendRainJoinTransactions:function(e){var r,n=0,o=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n=Math.floor(n+a.amount)}}catch(e){o.e(e)}finally{o.f()}if(n<5e3)throw new Error("You need to have aleast 5 coin deposited in the past one week.")}}},4214:e=>{e.exports={generalCheckSendRakebackClaimUser:function(e){if(e.rakeback.available<.1)throw new Error("You’ll need a minimum of 0.1 coin in rakeback earnings to claim.")}}},836:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var l=r(7906),f=r(4229),d=function(e){var t=Math.floor(Math.pow(e.xp/1e3/100,1/3));return t>=100?100:t},h=function(e){var t=e.xp/1e3,r={name:null,percentage:0};return t>=1e5&&t<25e4?r={name:"bronze",percentage:5e-4}:t>=25e4&&t<5e5?r={name:"silver",percentage:.001}:t>=5e5&&t<1e6?r={name:"gold",percentage:.0015}:t>=1e6&&t<2e6?r={name:"diamond",percentage:.002}:t>=2e6&&(r={name:"platinum",percentage:.0025}),r};e.exports={generalCheckGetUserInfoData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==l.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},generalCheckGetUserInfoUser:function(e){if(null===e)throw new Error("Your requested user was not found.")},generalCheckGetUserBetsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckSendUserAnonymousData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.anonymous||"boolean"!=typeof e.anonymous)throw new Error("Your entered anonymous value is invalid.")},generalCheckSendUserDiscordData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.method||"string"!=typeof e.method||!1===["link","unlink"].includes(e.method))throw new Error("Your entered method value is invalid.");if("link"===e.method&&(void 0===e.tokenDiscord||null===e.tokenDiscord||"string"!=typeof e.tokenDiscord))throw new Error("Your entered discord token is invalid.")},generalCheckSendUserDiscordUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong! Please try again in a few seconds.");if("link"===e.method&&void 0!==t.discordId)throw new Error("You have already linked a discord account.");if("unlink"===e.method&&void 0===t.discordId)throw new Error("You dont have a linked discord account at the moment.")},generalCheckSendUserSeedData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.seedClient||"string"!=typeof e.seedClient||e.seedClient.trim().length<=0||e.seedClient.trim().length>64)throw new Error("Your entered client seed is invalid.")},generalCheckSendUserSeedGames:function(e){if(e.length>=1)throw new Error("You’ve to complete all your open games first.")},generalCheckSendUserTipData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.receiverId||"string"!=typeof e.receiverId||!0!==l.isMongoId(e.receiverId))throw new Error("Your entered receiver id is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<.1)throw new Error("Your entered tip amount is invalid.")},generalCheckSendUserTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You have not enough balance for this action.");if(t.stats.deposit<5e3)throw new Error("You need to have a total of 5 coin deposited.");if(!0===t.limits.blockTip&&0===t.limits.limitTip)throw new Error("You are not allowed to tip users.");if(!0===t.limits.blockTip&&t.limits.limitTip<Math.floor(e.amount))throw new Error("You are not allowed to tip users more then ".concat((Math.floor(t.limits.limitTip/10)/100).toFixed(2),"."))},generalCheckSendUserTipReceiver:function(e,t){if(null===t)throw new Error("Your entered receiver id is not available.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to tip yourself.")},generalUserGetLevel:d,generalUserGetRakeback:h,userGetDiscordUserData:function(e){return new Promise(function(){var t,r=(t=s().mark((function t(r,n){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("https://discord.com/api/v9/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:if(null==(o=t.sent)||200!==o.status){t.next=11;break}return t.next=7,o.json();case 7:o=t.sent,r(o),t.next=12;break;case 11:n(new Error("We are not able to fetch your discord user data at the moment. Please try again later."));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(new Error("Something went wrong. Please try again in a few seconds."));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalUserGetFormated:function(e){var t=d(e),r=h(e);return!0===e.anonymous?null:{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,rakeback:r.name,createdAt:e.createdAt}},generalSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;!0===["mines","towers","unbox","plinko"].includes(o.method)?o.fair.seed=a({seedClient:o.fair.seed.seedClient,hash:o.fair.seed.hash},"completed"===o.fair.seed.state?{seedServer:o.fair.seed.seedServer}:{}):!0===["crash","roll"].includes(o.method)&&(o.game.fair.seed=a(a({},o.game.fair.seed),{},{seedServer:"completed"===o.game.state?o.game.fair.seed.seedServer:void 0})),r.push(o)}}catch(e){n.e(e)}finally{n.f()}return r},generalSanitizeUserSeed:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t._id,delete t.seedServer,delete t.user,delete t.state),t},generalUserGetFormatedWithBalance:function(e){var t=d(e),r=h(e);return{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,balance:e.balance,rakeback:r.name,createdAt:e.createdAt}}}},2054:e=>{e.exports={generalCheckSendVaultDepositData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid deposit amount.")},generalCheckSendVaultDepositUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t deposit because your vault is locked.")},generalCheckSendVaultWithdrawData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.")},generalCheckSendVaultWithdrawUser:function(e,t){if(t.vault.amount<Math.floor(e.amount))throw new Error("You don’t have enough balance in the vault for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t withdraw because your vault is locked.")},generalCheckSendVaultLockData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<=0)throw new Error("You’ve entered an invalid lock time.")},generalCheckSendVaultLockUser:function(e){if(new Date(e.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t lock because your vault is already locked.")}}},9949:(e,t,r)=>{var n=r(1024),o=function(e){for(var t=e,r=e;r>1;r--)t*=r-1;return t};e.exports={minesCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.minesCount||!0===isNaN(e.minesCount)||Math.floor(e.minesCount)<=0||Math.floor(e.minesCount)>24)throw new Error("You’ve entered an invalid mines count.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.MINES_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.MINES_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.MINES_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.MINES_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},minesCheckSendBetUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},minesCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running mines game first.")},minesCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},minesCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>24)throw new Error("Your entered tile is invalid.")},minesCheckSendRevealGame:function(e,t){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(!0===e.revealed.some((function(e){return e.tile===Math.floor(t.tile)})))throw new Error("Your entered tile is already revealed.")},minesCheckSendCashoutGame:function(e){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(0===e.revealed.length)throw new Error("You need to reveal at least one tile.")},minesGetGamePayout:function(e){var t=0;return e.revealed.length>=1&&(t=(t=(25===e.revealed.length?1:o(25)/(o(e.revealed.length)*o(25-e.revealed.length)))/(25-e.minesCount===e.revealed.length?1:o(25-e.minesCount)/(o(e.revealed.length)*o(25-e.minesCount-e.revealed.length)))*.95)<1?1.01:t,t=Math.round(100*t)/100),Math.floor(e.amount*t)},minesGetGameDeck:function(e,t){for(var r=new n(t),o=[],a=0;a<25;a++)a<e?o.push("mine"):o.push("coin");return r.shuffle(o)},minesSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},9580:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o={8:{easy:[6,2.1,1.1,.93,.46,.93,1.1,2.1,6],medium:[13,3,1.3,.63,.37,.63,1.3,3,13],hard:[29,4,1.5,.23,.16,.23,1.5,4,29]},9:{easy:[7,2,1.6,.94,.65,.65,.94,1.6,2,7],medium:[18,4,1.7,.83,.46,.46,.83,1.7,4,18],hard:[44,7,2,.51,.17,.17,.51,2,7,44]},10:{easy:[9,3,1.4,1.1,.92,.47,.92,1.1,1.4,3,9],medium:[23,5,2,1.4,.53,.35,.53,1.4,2,5,23],hard:[77,10,3,.9,.22,.16,.22,.9,3,10,77]},11:{easy:[9,3,1.9,1.3,.93,.66,.66,.93,1.3,1.9,3,9],medium:[25,6,3,1.8,.63,.46,.46,.63,1.8,3,6,25],hard:[123,14,5.2,1.4,.32,.16,.16,.32,1.4,5.2,14,123]},12:{easy:[11,3,1.6,1.4,1.1,.92,.46,.92,1.1,1.4,1.6,3,11],medium:[34,11,4,2,1.1,.52,.26,.52,1.1,2,4,11,34],hard:[174,24,8.1,2,.7,.13,.13,.13,.7,2,8.1,24,174]},13:{easy:[22,4,3,1.9,1.2,.83,.65,.65,.83,1.2,1.9,3,4,22],medium:[53,13,6,3,1.3,.62,.36,.36,.62,1.3,3,6,13,53],hard:[274,37,11,4,1,.14,.14,.14,.14,1,4,11,37,274]},14:{easy:[22,4,1.9,1.4,1.3,1.1,.91,.46,.91,1.1,1.3,1.4,1.9,4,22],medium:[73,15,7,4,1.9,1,.41,.16,.41,1,1.9,4,7,15,73],hard:[429,56,18,5,1.9,.3,.13,.13,.13,.3,1.9,5,18,56,429]},15:{easy:[38,8,3,2,1.5,1.1,.93,.65,.65,.93,1.1,1.5,2,3,8,38],medium:[96,18,11,5,3,1.3,.42,.26,.26,.42,1.3,3,5,11,18,96],hard:[643,83,27,8,3,.5,.14,.14,.14,.14,.5,3,8,27,83,643]},16:{easy:[71,9,2,1.4,1.4,1.2,1.1,.91,.45,.91,1.1,1.2,1.4,1.4,2,9,71],medium:[170,41,10,5,3,1.5,1,.41,.25,.41,1,1.5,3,5,10,41,170],hard:[1030,130,26,9,4,2,.2,.12,.14,.12,.2,2,4,9,26,130,1030]}};e.exports={plinkoCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered bet amount is invalid.");if(void 0===e.rows||null===e.rows||!0===isNaN(e.rows)||Math.floor(e.rows)<8||Math.floor(e.rows)>16)throw new Error("Your entered rows amount is invalid.");if(void 0===e.risk||null===e.risk||"string"!=typeof e.risk||!1===["easy","medium","hard"].includes(e.risk))throw new Error("Your entered risk is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.PLINKO_MIN_AMOUNT))throw new Error("You can only bet a minmum amount of $".concat(parseFloat(process.env.PLINKO_MIN_AMOUNT).toFixed(2)," per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.PLINKO_MAX_AMOUNT))throw new Error("You can only bet a maximum amount of $".concat(parseFloat(process.env.PLINKO_MAX_AMOUNT).toFixed(2)," per game."))},plinkoCheckSendCreateUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(t.balance<Math.floor(e.amount))throw new Error("You have not enough balance for this action.")},plinkoCheckSendCreateSeed:function(e){if(null==e)throw new Error("You need to generate a personal server seed first at the provably fair page.")},plinkoGenerateDeck:function(e){for(var t=[[1],[1,1]],r=2;r<e;r++){for(var n=t[r-1],o=[1],a=0;a<n.length-1;a++)o.push(n[a]+n[a+1]);o.push(1),t.push(o)}return t[t.length-1]},plinkoGetPayoutAmount:function(e,n,a,i){var c,s=n.length-1,u=0,l=0,f=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=r(e))){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw a}}}}(n.entries());try{for(f.s();!(c=f.n()).done;){var d=t(c.value,2),h=d[0];if((u+=d[1])>=i){l=Math.floor(o[s][a][h]*e);break}}}catch(e){f.e(e)}finally{f.f()}return l}}},9472:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){"use strict";o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}r(4229);var i=[],c=[],s=new Date("2024-08-13T00:00:00Z");e.exports={requestGetProxy:function(e,t){return new Promise(function(){var r,n=(r=o().mark((function r(n,a){var s,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=c.findIndex((function(t){return t.userIp===e})),console.log("usedProxies: ",c.length," : ",c),console.log("used proxy exist? ",s," : ",e,t),-1===s){r.next=8;break}n(c[s].proxy),r.next=21;break;case 8:if(!(i.length>0)){r.next=20;break}s=!1===["XX","T1"].includes(t)?i.findIndex((function(e){return e.country_code.toLowerCase()===t.toLowerCase()})):-1,u={userIp:e},console.log("availableProxies: ",i.length),console.log("available proxy exist? ",s),u.proxy=-1!==s?i.splice(s,1)[0]:i.shift(),c.push(u),console.log("addedUsedProxies: ",c.length),console.log("reducedProxies: ",i.length),n(u.proxy),r.next=21;break;case 20:throw new Error("We can`t currently process your request. Please try again in a few seconds.");case 21:r.next=26;break;case 23:r.prev=23,r.t0=r.catch(0),a(r.t0);case 26:case"end":return r.stop()}}),r,null,[[0,23]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},requestRemoveProxy:function(e){try{var t=c.findIndex((function(t){return t.userIp===e}));-1!==t&&(-1===i.findIndex((function(e){return e.proxy_address===c[t].proxy.proxy_address}))&&(i.push(c[t].proxy),console.log("remove - add used proxy")),c.splice(t,1),console.log("remove used proxy: ",e))}catch(e){console.log(e)}},SERVICE_PROXY_TIME:s}},4162:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){"use strict";c=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=r(8749),d=r(7067),h=r(9940);e.exports={rollCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.multiplier||null===e.multiplier||!0===isNaN(e.multiplier)||Math.floor(e.multiplier)<=100)throw new Error("Your entered bet multiplier is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROLL_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.ROLL_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},rollCheckSendBetUser:function(e,t,r){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(Math.floor(e.amount+r.bet)>Math.floor(1e3*process.env.ROLL_MAX_AMOUNT))throw new Error("You can only bet a total max amount of ".concat(parseFloat(process.env.ROLL_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount*(e.multiplier/100)+r.winnings)>Math.floor(1e3*process.env.ROLL_MAX_PROFIT))throw new Error("You can only have a total max win amount of ".concat(parseFloat(process.env.ROLL_MAX_PROFIT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},rollCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},rollGetUserGameStats:function(e,t){var r,n={bet:0,winnings:0},o=u(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.user._id.toString()===e._id.toString()&&(n.bet=Math.floor(n.bet+a.amount),n.winnings=Math.floor(n.winnings+a.amount*(a.multiplier/100)))}}catch(e){o.e(e)}finally{o.f()}return n},rollGenerateGame:function(){return new Promise(function(){var e,t=(e=c().mark((function e(t,r){var n,o,a,i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=f.randomBytes(8).toString("hex"),o=f.randomBytes(24).toString("hex"),a=f.createHash("sha256").update(o).digest("hex"),e.next=6,h.findOne({state:"created"}).sort({_id:-1}).lean();case 6:if(i=e.sent){e.next=11;break}return i=new h({seedServer:n,hash:a,seedPublic:o,state:"created"}),e.next=11,i.save();case 11:return e.next=13,Promise.all([d.create({fair:{seed:i._id},state:"created"}),h.findByIdAndUpdate(i._id,{state:"completed"},{}),h.create({seedPublic:n,seedServer:o,hash:a,state:"created"})]);case 13:return s=e.sent,e.next=16,s[0].populate({path:"fair.seed",select:"seedServer hash"});case 16:s[0]=e.sent,s[0]=s[0].toObject(),t(s[0]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),r(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rollGetOutcome:function(e){if(!0===function(e,t){for(var r=0,n=e.length%4,o=n>0?n-4:0;o<e.length;o+=4)r=((r<<16)+parseInt(e.substring(o,o+4),16))%t;return 0===r}(e,parseInt(20)))return 100;var t=parseInt(e.slice(0,13),16),r=Math.pow(2,52);return Math.floor((100*r-t)/(r-t))},rollSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"rolling"!==t.state&&"completed"!==t.state&&(delete t.outcome,delete t.fair),t},rollSanitizeBets:function(e){var t,r=[],n=u(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback.name,stats:o.user.stats,createdAt:o.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},rollSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback.name,stats:t.user.stats,createdAt:t.user.createdAt},t}}},4145:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){"use strict";s=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:A(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,c)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,c,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var l=r(8749),f=r(2299);r(9472).SERVICE_PROXY_TIME,e.exports={rouletteCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.color||"string"!=typeof e.color||!1===["red","black","green","bait"].includes(e.color))throw new Error("Your provided bet color is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided bet amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROULETTE_MIN_AMOUNT))throw new Error("You can only bet a min amount of $".concat(parseFloat(process.env.ROULETTE_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," per bet."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.ROULETTE_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.ROULETTE_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per bet."))},rouletteCheckSendBetUser:function(e,t,r){if(Math.floor(e.amount)>t.balance)throw new Error("You don’t have enough balance for this action.");if(r.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=process.env.ROULETTE_MAX_COUNT)throw new Error("You can only bet ".concat(process.env.ROULETTE_MAX_COUNT," times per game."));if("black"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"red"===e.color}))||"red"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"black"===e.color})))throw new Error("You can’t bet on red and black in the same game.")},rouletteCheckSendBetGame:function(e){if("created"!==e.state||(new Date).getTime()-13e3>=new Date(e.createdAt).getTime())throw new Error("You need to wait for the next round before you can bet.")},rouletteGetOutcome:function(e){var t="".concat(e._id,"-").concat(e.fair.seedServer,"-").concat(e.fair.seedPublic),r=l.createHash("sha256").update(t).digest("hex");return Math.abs(parseInt(r.substr(0,8),16))%15},rouletteGenerateGame:function(){return new Promise(function(){var e,t=(e=s().mark((function e(t,r){var n,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.randomBytes(24).toString("hex"),o=l.createHash("sha256").update(n).digest("hex"),e.next=4,f.create({fair:{seedServer:n,hash:o},state:"created"});case 4:a=(a=e.sent).toObject(),t(a);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rouletteSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return!1===["fairness","rolling","completed"].includes(t.state)&&(t.fair={hash:t.fair.hash}),t},rouletteSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(a(a({},o),{},{user:{_id:o.user._id,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank}}))}}catch(e){n.e(e)}finally{n.f()}return r},rouletteSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank},t}}},8461:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==r&&o.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(a,i,c,s){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}var s=r(8128),u=null,l=function(){var e=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.findOne({}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 3:if(null!=(u=e.sent)){e.next=9;break}return e.next=7,s.create({general:{"maintenance.enabled":!1,"rain.enabled":!1,"leaderboard.enabled":!1,"tip.enabled":!0,"affiliate.enabled":!0,"reward.multiplier":1},chat:{mode:"normal",enabled:!0,rooms:{"en.enabled":!0,"tr.enabled":!0,"de.enabled":!0,"es.enabled":!0,"beg.enabled":!0,"whale.enabled":!0}},games:{"crash.enabled":!0,"roll.enabled":!0,"blackjack.enabled":!0,"duels.enabled":!0,"mines.enabled":!0,"towers.enabled":!0,"unbox.enabled":!0,"battles.enabled":!0,"upgrader.enabled":!0,"plinko.enabled":!0,"roulette.enabled":!0,cases:[],"cbattles.enabled":!0,"cmbattles.enabled":!0,"ctotal.enabled":!0,"croulette.enabled":!0,"cblackjack.enabled":!0,"cblackjack.value":3,mcases:[],cmines:[],csmines:[],ctowers:[],mcmines:[],mctowers:[],crashees:[],slides:[]},robux:{"deposit.enabled":!1,"withdraw.enabled":!1},limited:{"deposit.enabled":!1,"withdraw.enabled":!1},steam:{"deposit.enabled":!1,"withdraw.enabled":!1},crypto:{"deposit.enabled":!0,"withdraw.enabled":!0},gift:{"deposit.enabled":!1,"withdraw.enabled":!1},credit:{"deposit.enabled":!1,"withdraw.enabled":!1},depositbonus:{enabled:!1,amount:0,famount:0},rainrestrict:{enabled:!1},redeem:{enabled:!1,amount:0}});case 7:u=(u=e.sent).toObject();case 9:delete u._id,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error: ".concat(e.t0.message)),process.exit(1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e.exports={settingInitDatabase:l,settingCheck:function(e,t){if(!0===u.general.maintenance.enabled&&(null===e||"admin"!==e.rank))throw new Error("Site is in maintenance! Please try again later.");if(void 0!==t&&!1===t.split(".").reduce((function(e,t){return e[t]}),u)&&(null===e||"admin"!==e.rank))throw new Error("The action you’ve requested is currently unavailable.")},settingGet:function(){return u},settingSetValue:function(e,t){return new Promise(function(){var r=c(a().mark((function r(n,i){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.findOneAndUpdate({},o({},e,t),{new:!0}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 2:delete(u=r.sent)._id,n(u);case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getMinimumValue:function(e){switch(e){case 5:return 47;case 10:return 44;case 15:return 41;case 20:return 39;case 25:return 37;case 30:return 34;case 35:return 32;case 40:return 29;case 45:return 26;case 50:return 24;case 55:return 21;case 60:return 19;case 65:return 16;case 70:return 13;case 75:return 11;case 80:return 9;case 85:return 7;case 90:return 4;case 95:return 3}},getMaximumValue:function(e){switch(e){case 5:return 53;case 10:return 55;case 15:return 57;case 20:return 60;case 25:return 63;case 30:return 65;case 35:return 68;case 40:return 70;case 45:return 72;case 50:return 75;case 55:return 77;case 60:return 80;case 65:return 82;case 70:return 84;case 75:return 87;case 80:return 90;case 85:return 93;case 90:return 95;case 95:return 98}},findPercent:function(e,t,r){for(var n=0,o=0;o<r.length;o++)e>=1e3*r[o].value&&t<1e3*r[o].remain&&(n=r[o].percent);return n},findCountPercent:function(e,t,r,n){for(var o=0,a=0;a<n.length;a++)e>=1e3*n[a].value&&t>=n[a].count&&r>=n[a].step&&(o=n[a].percent);return o},findTCountPercent:function(e,t,r,n){var o=0,a=0;"medium"===t&&(o=1),"hard"===t&&(o=2);for(var i=0;i<n.length;i++)e>=1e3*n[i].value&&o===n[i].count&&r>=n[i].step&&(a=n[i].percent);return a}}},7908:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(){"use strict";r=function(){return n};var e,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function w(){}function b(){}function x(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(N([])));E&&E!==o&&a.call(E,s)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,r){function n(o,i,c,s){var u=h(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):r.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(r){if(r||""===r){var n=r[s];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function t(){for(;++o<r.length;)if(a.call(r,o))return t.value=r[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(r)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},n.awrap=function(e){return{__await:e}},_(O.prototype),f(O.prototype,u,(function(){return this})),n.AsyncIterator=O,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new O(d(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(L),f(L,l,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},n}function n(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,s,"next",e)}function s(e){n(i,o,a,c,s,"throw",e)}c(void 0)}))}}var a={general:[],crash:[],roll:[],blackjack:[],duels:[],mines:[],towers:[],unbox:[],battles:[],upgrader:[],plinko:[],roulette:[],cashier:[],admin:[],streammer:[]},i=[];e.exports={socketCheckUserData:function(e,t){if(!0===t&&null===e)throw new Error("You need to sign in to perform this action.");if(!0===t&&void 0!==e.ban&&new Date(e.ban.expire).getTime()>(new Date).getTime())throw new Error("You got banned for ".concat(e.ban.type," because of the reason: ").concat(e.ban.reason,"."))},socketCheckUserRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.rank||!0!==t.includes(e.rank))throw new Error("You are not authorized to perform the requested action.")},socketCheckConnectionLimit:function(e,t){return new Promise(function(){var n=o(r().mark((function n(o,i){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!(a[e].filter((function(e){return e===t.toString()})).length>=5)){r.next=6;break}throw new Error("Too many active socket connections.");case 6:o();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),i(r.t0);case 12:case"end":return r.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}())},socketAddConnectionLimit:function(e,t){a[e].push(t.toString())},socketRemoveConnectionLimit:function(e,t){var r=a[e].findIndex((function(e){return e===t.toString()}));-1!==r&&a[e].splice(r,1)},socketCheckAntiSpam:function(e){return new Promise(function(){var t=o(r().mark((function t(n,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==i.includes(e.toString())){t.next=5;break}throw new Error("You need to slow down, we still processing your last request.");case 5:i.push(e.toString()),n();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),o(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}())},socketRemoveAntiSpam:function(e){var t=i.indexOf(e.toString());-1!==t&&i.splice(t,1)},socketCheckUserFullRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.fullrank||!0!==t.includes(e.fullrank))throw new Error("You are not authorized to perform the requested action.")}}},4599:(e,t,r)=>{var n=r(8749),o=r(1024);e.exports={towersCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.risk||"string"!=typeof e.risk||!0!==["easy","medium","hard"].includes(e.risk))throw new Error("You’ve entered an invalid risk.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.TOWERS_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.TOWERS_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.TOWERS_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.TOWERS_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," CheerBux per game."))},towersCheckSendBetUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},towersCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running towers game first.")},towersCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},towersCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||null===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>2)throw new Error("You’ve entered an invalid tile.")},towersCheckSendRevealGame:function(e){if(void 0===e)throw new Error("You’ve no running towers game at the moment.")},towersCheckSendCashoutGame:function(e){if(null===e)throw new Error("You’ve no running towers game at the moment.");if(0===e.revealed.length)throw new Error("You’ve to reveal at least one row.")},towersGetGamePayout:function(e){var t="easy"===e.risk?1.425:"medium"===e.risk?1.9:2.85;return Math.floor(e.amount*Math.pow(t,e.revealed.length))},towersGenerateDeck:function(e){for(var t=[],r=0;r<8;r++){var n="medium"===e?2:3,o="hard"===e?2:1;t[r]=[];for(var a=0;a<n;a++)a<o?t[r].push("lose"):t[r].push("coin")}return t},towersShuffleDeck:function(e,t){for(var r=[],a=0;a<8;a++){var i=n.createHash("sha256").update("".concat(t,"-").concat(a)).digest("hex"),c=new o(i).shuffle(e[a]);r.push(c)}return r},towersSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},1181:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=r(7906);r(9472).SERVICE_PROXY_TIME,e.exports={unboxCheckGetBoxDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==a.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.")},unboxCheckGetBoxDataBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your entered box is not available.")},unboxCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==a.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.");if(void 0===e.unboxCount||null===e.unboxCount||!0===isNaN(e.unboxCount)||Math.floor(e.unboxCount)<1||Math.floor(e.unboxCount)>4)throw new Error("You’ve entered an invalid unbox count.")},unboxCheckSendBetBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your requested box is not available.")},unboxCheckSendBetUser:function(e,t){if(e.balance<t)throw new Error("You don’t have enough balance for this action.")},unboxCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},unboxGetOutcomeItem:function(e,t){var r,o=0,a=null,i=n(e.items);try{for(i.s();!(r=i.n()).done;){var c=r.value;if(t<=(o+=c.tickets)){a=c.item;break}}}catch(e){i.e(e)}finally{i.f()}return a},unboxSetOutcomeItem:function(e,t){var r,o=null,a=n(e);try{for(a.s();!(r=a.n()).done;){o=r.value;break}}catch(e){a.e(e)}finally{a.f()}return o?o.item:null},findPercent:function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r}}},8938:e=>{"use strict";e.exports=require("axios")},573:e=>{"use strict";e.exports=require("base64-img")},4729:e=>{"use strict";e.exports=require("bcryptjs")},1024:e=>{"use strict";e.exports=require("chance")},4217:e=>{"use strict";e.exports=require("cheerio")},8577:e=>{"use strict";e.exports=require("cors")},8749:e=>{"use strict";e.exports=require("crypto")},818:e=>{"use strict";e.exports=require("dotenv")},7252:e=>{"use strict";e.exports=require("express")},4383:e=>{"use strict";e.exports=require("fs")},8900:e=>{"use strict";e.exports=require("hpp")},9856:e=>{"use strict";e.exports=require("http")},2057:e=>{"use strict";e.exports=require("https")},3688:e=>{"use strict";e.exports=require("https-proxy-agent")},829:e=>{"use strict";e.exports=require("jsonwebtoken")},6037:e=>{"use strict";e.exports=require("mongoose")},4229:e=>{"use strict";e.exports=require("node-fetch")},1572:e=>{"use strict";e.exports=require("nodemailer")},8278:e=>{"use strict";e.exports=require("passport")},1147:e=>{"use strict";e.exports=require("passport-steam")},2003:e=>{"use strict";e.exports=require("path")},758:e=>{"use strict";e.exports=require("puppeteer")},8340:e=>{"use strict";e.exports=require("qs")},857:e=>{"use strict";e.exports=require("rate-limiter-flexible")},523:e=>{"use strict";e.exports=require("resend")},9591:e=>{"use strict";e.exports=require("slugify")},4437:e=>{"use strict";e.exports=require("socket.io")},7906:e=>{"use strict";e.exports=require("validator")}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,o),a.exports}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var a=Object.create(null);o.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var c=2&n&&r;"object"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,o.d(a,i),a},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c=o(2003),s=o(7252),u=o(9856),l=(o(2057),o(8900)),f=o(8577),d=o(4437);o(4383),o(818).config();var h=s();h.use(f());var p,y=u.createServer(h),m=d(y,{transports:["websocket"],cors:{origin:process.env.SERVER_FRONTEND_URL,credentials:!0},maxHttpBufferSize:1e7});o(6701)(),o(8461).settingInitDatabase(),h.set("trust proxy",1),h.use(s.json()),h.use(s.urlencoded({extended:!0})),h.use(l()),h.use(f({origin:[].concat((p=process.env.SERVER_FRONTEND_URL.split(","),function(e){if(Array.isArray(e))return a(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["http://77.221.151.45"]),credentials:!0})),h.set("view engine","ejs"),h.set("views",c.join(__dirname,"/views")),h.use("/api",o(2622)(m)),h.use("/api/public",s.static(c.join(__dirname,"public"))),o(4906)(m);var v=process.env.SERVER_PORT||5001;y.listen(v,"0.0.0.0",(function(){return console.log("Server running in ".concat("production"," mode on port ").concat(v))}))})();